(self.webpackChunkmustafamuqtar_github_io=self.webpackChunkmustafamuqtar_github_io||[]).push([[179],{3:(pt,tt,Fe)=>{"use strict";function fe(e){return"function"==typeof e}function M(e){const t=e(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const re=M(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,o)=>`${o+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function z(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class ie{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const l of t)l.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(fe(i))try{i()}catch(l){n=l instanceof re?l.errors:[l]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const l of o)try{Re(l)}catch(d){n=n??[],d instanceof re?n=[...n,...d.errors]:n.push(d)}}if(n)throw new re(n)}}add(n){var t;if(n&&n!==this)if(this.closed)Re(n);else{if(n instanceof ie){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&z(t,n)}remove(n){const{_finalizers:t}=this;t&&z(t,n),n instanceof ie&&n._removeParent(this)}}ie.EMPTY=(()=>{const e=new ie;return e.closed=!0,e})();const ae=ie.EMPTY;function ce(e){return e instanceof ie||e&&"closed"in e&&fe(e.remove)&&fe(e.add)&&fe(e.unsubscribe)}function Re(e){fe(e)?e():e.unsubscribe()}const Ge={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Te={setTimeout(e,n,...t){const{delegate:i}=Te;return i?.setTimeout?i.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=Te;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Je(e){Te.setTimeout(()=>{const{onUnhandledError:n}=Ge;if(!n)throw e;n(e)})}function kt(){}const Gt=dt("C",void 0,void 0);function dt(e,n,t){return{kind:e,value:n,error:t}}let Nt=null;function Me(e){if(Ge.useDeprecatedSynchronousErrorHandling){const n=!Nt;if(n&&(Nt={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:i}=Nt;if(Nt=null,t)throw i}}else e()}class rt extends ie{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,ce(n)&&n.add(this)):this.destination=Z}static create(n,t,i){return new at(n,t,i)}next(n){this.isStopped?B(function Ut(e){return dt("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?B(function me(e){return dt("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?B(Gt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const St=Function.prototype.bind;function Be(e,n){return St.call(e,n)}class We{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(i){gt(i)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(i){gt(i)}else gt(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){gt(t)}}}class at extends rt{constructor(n,t,i){let o;if(super(),fe(n)||!n)o={next:n??void 0,error:t??void 0,complete:i??void 0};else{let l;this&&Ge.useDeprecatedNextContext?(l=Object.create(n),l.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&Be(n.next,l),error:n.error&&Be(n.error,l),complete:n.complete&&Be(n.complete,l)}):o=n}this.destination=new We(o)}}function gt(e){Ge.useDeprecatedSynchronousErrorHandling?function lt(e){Ge.useDeprecatedSynchronousErrorHandling&&Nt&&(Nt.errorThrown=!0,Nt.error=e)}(e):Je(e)}function B(e,n){const{onStoppedNotification:t}=Ge;t&&Te.setTimeout(()=>t(e,n))}const Z={closed:!0,next:kt,error:function N(e){throw e},complete:kt},be="function"==typeof Symbol&&Symbol.observable||"@@observable";function xe(e){return e}function ke(e){return 0===e.length?xe:1===e.length?e[0]:function(t){return e.reduce((i,o)=>o(i),t)}}let Se=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new e;return i.source=this,i.operator=t,i}subscribe(t,i,o){const l=function pe(e){return e&&e instanceof rt||function Ce(e){return e&&fe(e.next)&&fe(e.error)&&fe(e.complete)}(e)&&ce(e)}(t)?t:new at(t,i,o);return Me(()=>{const{operator:d,source:p}=this;l.add(d?d.call(l,p):p?this._subscribe(l):this._trySubscribe(l))}),l}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=he(i))((o,l)=>{const d=new at({next:p=>{try{t(p)}catch(m){l(m),d.unsubscribe()}},error:l,complete:o});this.subscribe(d)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[be](){return this}pipe(...t){return ke(t)(this)}toPromise(t){return new(t=he(t))((i,o)=>{let l;this.subscribe(d=>l=d,d=>o(d),()=>i(l))})}}return e.create=n=>new e(n),e})();function he(e){var n;return null!==(n=e??Ge.Promise)&&void 0!==n?n:Promise}const Ie=M(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let $e=(()=>{class e extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Pt(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Ie}next(t){Me(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Me(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Me(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:o,observers:l}=this;return i||o?ae:(this.currentObservers=null,l.push(t),new ie(()=>{this.currentObservers=null,z(l,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:o,isStopped:l}=this;i?t.error(o):l&&t.complete()}asObservable(){const t=new Se;return t.source=this,t}}return e.create=(n,t)=>new Pt(n,t),e})();class Pt extends $e{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,n)}error(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==i?i:ae}}function qt(e){return fe(e?.lift)}function Le(e){return n=>{if(qt(n))return n.lift(function(t){try{return e(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ue(e,n,t,i,o){return new In(e,n,t,i,o)}class In extends rt{constructor(n,t,i,o,l,d){super(n),this.onFinalize=l,this.shouldUnsubscribe=d,this._next=t?function(p){try{t(p)}catch(m){n.error(m)}}:super._next,this._error=o?function(p){try{o(p)}catch(m){n.error(m)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(p){n.error(p)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function ft(e,n){return Le((t,i)=>{let o=0;t.subscribe(Ue(i,l=>{i.next(e.call(n,l,o++))}))})}function rs(e){return this instanceof rs?(this.v=e,this):new rs(e)}function Zt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function mr(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],i=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=e[l]&&function(d){return new Promise(function(p,m){!function o(l,d,p,m){Promise.resolve(m).then(function(b){l({value:b,done:p})},d)}(p,m,(d=e[l](d)).done,d.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Ei=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Uo(e){return fe(e?.then)}function Gu(e){return fe(e[be])}function Wu(e){return Symbol.asyncIterator&&fe(e?.[Symbol.asyncIterator])}function is(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ds=function Es(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Oa(e){return fe(e?.[Ds])}function Ra(e){return function Vu(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=t.apply(e,n||[]),l=[];return o={},p("next"),p("throw"),p("return",function d(j){return function(K){return Promise.resolve(K).then(j,I)}}),o[Symbol.asyncIterator]=function(){return this},o;function p(j,K){i[j]&&(o[j]=function(Y){return new Promise(function(de,we){l.push([j,Y,de,we])>1||m(j,Y)})},K&&(o[j]=K(o[j])))}function m(j,K){try{!function b(j){j.value instanceof rs?Promise.resolve(j.value.v).then(D,I):R(l[0][2],j)}(i[j](K))}catch(Y){R(l[0][3],Y)}}function D(j){m("next",j)}function I(j){m("throw",j)}function R(j,K){j(K),l.shift(),l.length&&m(l[0][0],l[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:i,done:o}=yield rs(t.read());if(o)return yield rs(void 0);yield yield rs(i)}}finally{t.releaseLock()}})}function Xu(e){return fe(e?.getReader)}function Mr(e){if(e instanceof Se)return e;if(null!=e){if(Gu(e))return function A(e){return new Se(n=>{const t=e[be]();if(fe(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Ei(e))return function k(e){return new Se(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(Uo(e))return function H(e){return new Se(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Je)})}(e);if(Wu(e))return Pe(e);if(Oa(e))return function oe(e){return new Se(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(Xu(e))return function Ct(e){return Pe(Ra(e))}(e)}throw is(e)}function Pe(e){return new Se(n=>{(function ln(e,n){var t,i,o,l;return function Ur(e,n,t,i){return new(t||(t=Promise))(function(l,d){function p(D){try{b(i.next(D))}catch(I){d(I)}}function m(D){try{b(i.throw(D))}catch(I){d(I)}}function b(D){D.done?l(D.value):function o(l){return l instanceof t?l:new t(function(d){d(l)})}(D.value).then(p,m)}b((i=i.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Zt(e);!(i=yield t.next()).done;)if(n.next(i.value),n.closed)return}catch(d){o={error:d}}finally{try{i&&!i.done&&(l=t.return)&&(yield l.call(t))}finally{if(o)throw o.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Tn(e,n,t,i=0,o=!1){const l=n.schedule(function(){t(),o?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(l),!o)return l}function sn(e,n,t=1/0){return fe(n)?sn((i,o)=>ft((l,d)=>n(i,l,o,d))(Mr(e(i,o))),t):("number"==typeof n&&(t=n),Le((i,o)=>function Bi(e,n,t,i,o,l,d,p){const m=[];let b=0,D=0,I=!1;const R=()=>{I&&!m.length&&!b&&n.complete()},j=Y=>b<i?K(Y):m.push(Y),K=Y=>{l&&n.next(Y),b++;let de=!1;Mr(t(Y,D++)).subscribe(Ue(n,we=>{o?.(we),l?j(we):n.next(we)},()=>{de=!0},void 0,()=>{if(de)try{for(b--;m.length&&b<i;){const we=m.shift();d?Tn(n,d,()=>K(we)):K(we)}R()}catch(we){n.error(we)}}))};return e.subscribe(Ue(n,j,()=>{I=!0,R()})),()=>{p?.()}}(i,o,e,t)))}function or(e=1/0){return sn(xe,e)}const Jn=new Se(e=>e.complete());function Ui(e){return e[e.length-1]}function Zs(e){return fe(Ui(e))?e.pop():void 0}function jn(e){return function Di(e){return e&&fe(e.schedule)}(Ui(e))?e.pop():void 0}function xs(e,n=0){return Le((t,i)=>{t.subscribe(Ue(i,o=>Tn(i,e,()=>i.next(o),n),()=>Tn(i,e,()=>i.complete(),n),o=>Tn(i,e,()=>i.error(o),n)))})}function Ku(e,n=0){return Le((t,i)=>{i.add(e.schedule(()=>t.subscribe(i),n))})}function zg(e,n){if(!e)throw new Error("Iterable cannot be null");return new Se(t=>{Tn(t,n,()=>{const i=e[Symbol.asyncIterator]();Tn(t,n,()=>{i.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function vr(e,n){return n?function Gg(e,n){if(null!=e){if(Gu(e))return function m_(e,n){return Mr(e).pipe(Ku(n),xs(n))}(e,n);if(Ei(e))return function v_(e,n){return new Se(t=>{let i=0;return n.schedule(function(){i===e.length?t.complete():(t.next(e[i++]),t.closed||this.schedule())})})}(e,n);if(Uo(e))return function y_(e,n){return Mr(e).pipe(Ku(n),xs(n))}(e,n);if(Wu(e))return zg(e,n);if(Oa(e))return function qg(e,n){return new Se(t=>{let i;return Tn(t,n,()=>{i=e[Ds](),Tn(t,n,()=>{let o,l;try{({value:o,done:l}=i.next())}catch(d){return void t.error(d)}l?t.complete():t.next(o)},0,!0)}),()=>fe(i?.return)&&i.return()})}(e,n);if(Xu(e))return function __(e,n){return zg(Ra(e),n)}(e,n)}throw is(e)}(e,n):Mr(e)}class oi extends $e{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:i}=this;if(n)throw t;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function ot(...e){return vr(e,jn(e))}function Zh(e={}){const{connector:n=(()=>new $e),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:o=!0}=e;return l=>{let d,p,m,b=0,D=!1,I=!1;const R=()=>{p?.unsubscribe(),p=void 0},j=()=>{R(),d=m=void 0,D=I=!1},K=()=>{const Y=d;j(),Y?.unsubscribe()};return Le((Y,de)=>{b++,!I&&!D&&R();const we=m=m??n();de.add(()=>{b--,0===b&&!I&&!D&&(p=Jh(K,o))}),we.subscribe(de),!d&&b>0&&(d=new at({next:le=>we.next(le),error:le=>{I=!0,R(),p=Jh(j,t,le),we.error(le)},complete:()=>{D=!0,R(),p=Jh(j,i),we.complete()}}),Mr(Y).subscribe(d))})(l)}}function Jh(e,n,...t){if(!0===n)return void e();if(!1===n)return;const i=new at({next:()=>{i.unsubscribe(),e()}});return Mr(n(...t)).subscribe(i)}function ai(e,n){return Le((t,i)=>{let o=null,l=0,d=!1;const p=()=>d&&!o&&i.complete();t.subscribe(Ue(i,m=>{o?.unsubscribe();let b=0;const D=l++;Mr(e(m,D)).subscribe(o=Ue(i,I=>i.next(n?n(m,I,D,b++):I),()=>{o=null,p()}))},()=>{d=!0,p()}))})}function C_(e,n){return e===n}function mt(e){for(let n in e)if(e[n]===mt)return n;throw Error("Could not find renamed property on target object.")}function ar(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ar).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function eo(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const S_=mt({__forward_ref__:mt});function Rc(e){return e.__forward_ref__=Rc,e.toString=function(){return ar(this())},e}function nt(e){return ef(e)?e():e}function ef(e){return"function"==typeof e&&e.hasOwnProperty(S_)&&e.__forward_ref__===Rc}function Na(e){return e&&!!e.\u0275providers}const Xg="https://g.co/ng/security#xss";class Oe extends Error{constructor(n,t){super(function Nc(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}(n,t)),this.code=n}}function Mt(e){return"string"==typeof e?e:null==e?"":String(e)}function tf(e,n){throw new Oe(-201,!1)}function ji(e,n){null==e&&function Et(e,n,t,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${t} ${i} ${n} <=Actual]`))}(n,e,null,"!=")}function it(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Rn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Is(e){return Qg(e,rf)||Qg(e,Lc)}function Qg(e,n){return e.hasOwnProperty(n)?e[n]:null}function nf(e){return e&&(e.hasOwnProperty(fn)||e.hasOwnProperty(x_))?e[fn]:null}const rf=mt({\u0275prov:mt}),fn=mt({\u0275inj:mt}),Lc=mt({ngInjectableDef:mt}),x_=mt({ngInjectorDef:mt});var Ot=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Ot||{});let Fc;function Yr(e){const n=Fc;return Fc=e,n}function An(e,n,t){const i=Is(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Ot.Optional?null:void 0!==n?n:void tf(ar(e))}const mn=globalThis;class et{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=it({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ju={},As="__NG_DI_FLAG__",La="ngTempTokenPath",to=/\n/gm,lf="__source";let Fa;function $i(e){const n=Fa;return Fa=e,n}function nm(e,n=Ot.Default){if(void 0===Fa)throw new Oe(-203,!1);return null===Fa?An(e,void 0,n):Fa.get(e,n&Ot.Optional?null:void 0,n)}function ze(e,n=Ot.Default){return(function Zg(){return Fc}()||nm)(nt(e),n)}function Ye(e,n=Ot.Default){return ze(e,Ba(n))}function Ba(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ht(e){const n=[];for(let t=0;t<e.length;t++){const i=nt(e[t]);if(Array.isArray(i)){if(0===i.length)throw new Oe(900,!1);let o,l=Ot.Default;for(let d=0;d<i.length;d++){const p=i[d],m=M_(p);"number"==typeof m?-1===m?o=p.token:l|=m:o=p}n.push(ze(o,l))}else n.push(ze(i))}return n}function Ua(e,n){return e[As]=n,e.prototype[As]=n,e}function M_(e){return e[As]}function os(e){return{toString:e}.toString()}var ui=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(ui||{}),kr=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(kr||{});const Xt={},Qt=[],$o=mt({\u0275cmp:mt}),cf=mt({\u0275dir:mt}),el=mt({\u0275pipe:mt}),df=mt({\u0275mod:mt}),_r=mt({\u0275fac:mt}),$a=mt({__NG_ELEMENT_ID__:mt}),hf=mt({__NG_ENV_ID__:mt});function Vo(e,n,t){let i=e.length;for(;;){const o=e.indexOf(n,t);if(-1===o)return o;if(0===o||e.charCodeAt(o-1)<=32){const l=n.length;if(o+l===i||e.charCodeAt(o+l)<=32)return o}t=o+1}}function no(e,n,t){let i=0;for(;i<t.length;){const o=t[i];if("number"==typeof o){if(0!==o)break;i++;const l=t[i++],d=t[i++],p=t[i++];e.setAttribute(n,d,p,l)}else{const l=o,d=t[++i];jc(l)?e.setProperty(n,l,d):e.setAttribute(n,l,d),i++}}return i}function Vi(e){return 3===e||4===e||6===e}function jc(e){return 64===e.charCodeAt(0)}function ro(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let i=0;i<n.length;i++){const o=n[i];"number"==typeof o?t=o:0===t||im(e,t,o,null,-1===t||2===t?n[++i]:null)}}return e}function im(e,n,t,i,o){let l=0,d=e.length;if(-1===n)d=-1;else for(;l<e.length;){const p=e[l++];if("number"==typeof p){if(p===n){d=-1;break}if(p>n){d=l-1;break}}}for(;l<e.length;){const p=e[l];if("number"==typeof p)break;if(p===t){if(null===i)return void(null!==o&&(e[l+1]=o));if(i===e[l+1])return void(e[l+2]=o)}l++,null!==i&&l++,null!==o&&l++}-1!==d&&(e.splice(d,0,n),l=d+1),e.splice(l++,0,t),null!==i&&e.splice(l++,0,i),null!==o&&e.splice(l++,0,o)}const ff="ng-template";function $c(e,n,t){let i=0,o=!0;for(;i<e.length;){let l=e[i++];if("string"==typeof l&&o){const d=e[i++];if(t&&"class"===l&&-1!==Vo(d.toLowerCase(),n,0))return!0}else{if(1===l){for(;i<e.length&&"string"==typeof(l=e[i++]);)if(l.toLowerCase()===n)return!0;return!1}"number"==typeof l&&(o=!1)}}return!1}function tl(e){return 4===e.type&&e.value!==ff}function Vc(e,n,t){return n===(4!==e.type||t?e.value:ff)}function Hc(e,n,t){let i=4;const o=e.attrs||[],l=function io(e){for(let n=0;n<e.length;n++)if(Vi(e[n]))return n;return e.length}(o);let d=!1;for(let p=0;p<n.length;p++){const m=n[p];if("number"!=typeof m){if(!d)if(4&i){if(i=2|1&i,""!==m&&!Vc(e,m,t)||""===m&&1===n.length){if(Zr(i))return!1;d=!0}}else{const b=8&i?m:n[++p];if(8&i&&null!==e.attrs){if(!$c(e.attrs,b,t)){if(Zr(i))return!1;d=!0}continue}const I=qc(8&i?"class":m,o,tl(e),t);if(-1===I){if(Zr(i))return!1;d=!0;continue}if(""!==b){let R;R=I>l?"":o[I+1].toLowerCase();const j=8&i?R:null;if(j&&-1!==Vo(j,b,0)||2&i&&b!==R){if(Zr(i))return!1;d=!0}}}}else{if(!d&&!Zr(i)&&!Zr(m))return!1;if(d&&Zr(m))continue;d=!1,i=m|1&i}}return Zr(i)||d}function Zr(e){return 0==(1&e)}function qc(e,n,t,i){if(null===n)return-1;let o=0;if(i||!t){let l=!1;for(;o<n.length;){const d=n[o];if(d===e)return o;if(3===d||6===d)l=!0;else{if(1===d||2===d){let p=n[++o];for(;"string"==typeof p;)p=n[++o];continue}if(4===d)break;if(0===d){o+=4;continue}}o+=l?1:2}return-1}return function $r(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const i=e[t];if("number"==typeof i)return-1;if(i===n)return t;t++}return-1}(n,e)}function zc(e,n,t=!1){for(let i=0;i<n.length;i++)if(Hc(e,n[i],t))return!0;return!1}function pf(e,n){return e?":not("+n.trim()+")":n}function sm(e){let n=e[0],t=1,i=2,o="",l=!1;for(;t<e.length;){let d=e[t];if("string"==typeof d)if(2&i){const p=e[++t];o+="["+d+(p.length>0?'="'+p+'"':"")+"]"}else 8&i?o+="."+d:4&i&&(o+=" "+d);else""!==o&&!Zr(d)&&(n+=pf(l,o),o=""),i=d,l=l||!Zr(i);t++}return""!==o&&(n+=pf(l,o)),n}function wr(e){return os(()=>{const n=rl(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===ui.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||kr.Emulated,styles:e.styles||Qt,_:null,schemas:e.schemas||null,tView:null,id:""};mf(t);const i=e.dependencies;return t.directiveDefs=il(i,!1),t.pipeDefs=il(i,!0),t.id=function sl(e){let n=0;const t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const o of t)n=Math.imul(31,n)+o.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(t),t})}function am(e){return Kt(e)||br(e)}function _t(e){return null!==e}function Pr(e){return os(()=>({type:e.type,bootstrap:e.bootstrap||Qt,declarations:e.declarations||Qt,imports:e.imports||Qt,exports:e.exports||Qt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Ha(e,n){if(null==e)return Xt;const t={};for(const i in e)if(e.hasOwnProperty(i)){let o=e[i],l=o;Array.isArray(o)&&(l=o[1],o=o[0]),t[o]=i,n&&(n[o]=l)}return t}function Wn(e){return os(()=>{const n=rl(e);return mf(n),n})}function Kt(e){return e[$o]||null}function br(e){return e[cf]||null}function $n(e){return e[el]||null}function Tr(e,n){const t=e[df]||null;if(!t&&!0===n)throw new Error(`Type ${ar(e)} does not have '\u0275mod' property.`);return t}function rl(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||Xt,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Qt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ha(e.inputs,n),outputs:Ha(e.outputs)}}function mf(e){e.features?.forEach(n=>n(e))}function il(e,n){if(!e)return null;const t=n?$n:am;return()=>("function"==typeof e?e():e).map(i=>t(i)).filter(_t)}const Cn=0,qe=1,xt=2,Sn=3,li=4,za=5,er=6,ci=7,Vn=8,di=9,qo=10,It=11,Ga=12,Wc=13,Wa=14,Nn=15,zo=16,Go=17,Hi=18,ur=19,P_=20,so=21,tr=22,Xa=23,Wo=24,Lt=25,vf=1,um=2,Hn=7,qi=9,cr=11;function En(e){return Array.isArray(e)&&"object"==typeof e[vf]}function Ft(e){return Array.isArray(e)&&!0===e[vf]}function wi(e){return 0!=(4&e.flags)}function ao(e){return e.componentOffset>-1}function Xc(e){return 1==(1&e.flags)}function Vr(e){return!!e.template}function Hr(e){return 0!=(512&e[xt])}function uo(e,n){return e.hasOwnProperty(_r)?e[_r]:null}let Ln=null,Zc=!1;function hi(e){const n=Ln;return Ln=e,n}const Mn={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function zi(e){if(!Yo(e)||e.dirty){if(!e.producerMustRecompute(e)&&!Xo(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function j_(e){e.dirty=!0,function Jc(e){if(void 0===e.liveConsumerNode)return;const n=Zc;Zc=!0;try{for(const t of e.liveConsumerNode)t.dirty||j_(t)}finally{Zc=n}}(e),e.consumerMarkedDirty?.(e)}function ed(e){return e&&(e.nextProducerIndex=0),hi(e)}function ol(e,n){if(hi(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Yo(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)nd(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Xo(e){Qa(e);for(let n=0;n<e.producerNode.length;n++){const t=e.producerNode[n],i=e.producerLastReadVersion[n];if(i!==t.version||(zi(t),i!==t.version))return!0}return!1}function Ko(e){if(Qa(e),Yo(e))for(let n=0;n<e.producerNode.length;n++)nd(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function nd(e,n){if(function bf(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),Qa(e),1===e.liveConsumerNode.length)for(let i=0;i<e.producerNode.length;i++)nd(e.producerNode[i],e.producerIndexOfThis[i]);const t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const i=e.liveConsumerIndexOfThis[n],o=e.liveConsumerNode[n];Qa(o),o.producerIndexOfThis[i]=n}}function Yo(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Qa(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let rd=null;const Or=()=>{},q_=(()=>({...Mn,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:Or}))();class Qo{constructor(n,t,i){this.previousValue=n,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function ls(){return ll}function ll(e){return e.type.prototype.ngOnChanges&&(e.setInput=G_),z_}function z_(){const e=_m(this),n=e?.current;if(n){const t=e.previous;if(t===Xt)e.previous=n;else for(let i in n)t[i]=n[i];e.current=null,this.ngOnChanges(n)}}function G_(e,n,t,i){const o=this.declaredInputs[t],l=_m(e)||function W_(e,n){return e[vm]=n}(e,{previous:Xt,current:null}),d=l.current||(l.current={}),p=l.previous,m=p[o];d[o]=new Qo(m&&m.currentValue,n,p===Xt),e[i]=n}ls.ngInherit=!0;const vm="__ngSimpleChanges__";function _m(e){return e[vm]||null}const cs=function(e,n,t){};function yn(e){for(;Array.isArray(e);)e=e[Cn];return e}function nr(e,n){return yn(n[e.index])}function cl(e,n){return e.data[n]}function Jr(e,n){const t=n[e];return En(t)?t:t[Cn]}function pi(e,n){return null==n?null:e[n]}function wf(e){e[Go]=0}function Q_(e){1024&e[xt]||(e[xt]|=1024,dl(e,1))}function Cm(e){1024&e[xt]&&(e[xt]&=-1025,dl(e,-1))}function dl(e,n){let t=e[Sn];if(null===t)return;t[za]+=n;let i=t;for(t=t[Sn];null!==t&&(1===n&&1===i[za]||-1===n&&0===i[za]);)t[za]+=n,i=t,t=t[Sn]}const bt={lFrame:Rf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wm(){return bt.bindingsEnabled}function ye(){return bt.lFrame.lView}function Yt(){return bt.lFrame.tView}function Gi(e){return bt.lFrame.contextLView=e,e[Vn]}function Os(e){return bt.lFrame.contextLView=null,e}function Cr(){let e=nu();for(;null!==e&&64===e.type;)e=e.parent;return e}function nu(){return bt.lFrame.currentTNode}function Ii(e,n){const t=bt.lFrame;t.currentTNode=e,t.isParent=n}function pl(){return bt.lFrame.isParent}function If(){bt.lFrame.isParent=!1}function Sr(){const e=bt.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Zo(){return bt.lFrame.bindingIndex++}function tb(e,n){const t=bt.lFrame;t.bindingIndex=t.bindingRootIndex=e,ld(n)}function ld(e){bt.lFrame.currentDirectiveIndex=e}function Mf(){return bt.lFrame.currentQueryIndex}function kf(e){bt.lFrame.currentQueryIndex=e}function Pm(e){const n=e[qe];return 2===n.type?n.declTNode:1===n.type?e[er]:null}function Pf(e,n,t){if(t&Ot.SkipSelf){let o=n,l=e;for(;!(o=o.parent,null!==o||t&Ot.Host||(o=Pm(l),null===o||(l=l[Wa],10&o.type))););if(null===o)return!1;n=o,e=l}const i=bt.lFrame=Of();return i.currentTNode=n,i.lView=e,!0}function cd(e){const n=Of(),t=e[qe];bt.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function Of(){const e=bt.lFrame,n=null===e?null:e.child;return null===n?Rf(e):n}function Rf(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function dd(){const e=bt.lFrame;return bt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const hd=dd;function Jo(){const e=dd();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function rr(){return bt.lFrame.selectedIndex}function lo(e){bt.lFrame.selectedIndex=e}function Dn(){const e=bt.lFrame;return cl(e.tView,e.selectedIndex)}let fd=!0;function ml(){return fd}function Rs(e){fd=e}function yl(e,n){for(let t=n.directiveStart,i=n.directiveEnd;t<i;t++){const l=e.data[t].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:p,ngAfterViewInit:m,ngAfterViewChecked:b,ngOnDestroy:D}=l;d&&(e.contentHooks??=[]).push(-t,d),p&&((e.contentHooks??=[]).push(t,p),(e.contentCheckHooks??=[]).push(t,p)),m&&(e.viewHooks??=[]).push(-t,m),b&&((e.viewHooks??=[]).push(t,b),(e.viewCheckHooks??=[]).push(t,b)),null!=D&&(e.destroyHooks??=[]).push(t,D)}}function vl(e,n,t){$f(e,n,3,t)}function pd(e,n,t,i){(3&e[xt])===t&&$f(e,n,t,i)}function gd(e,n){let t=e[xt];(3&t)===n&&(t&=8191,t+=1,e[xt]=t)}function $f(e,n,t,i){const l=i??-1,d=n.length-1;let p=0;for(let m=void 0!==i?65535&e[Go]:0;m<d;m++)if("number"==typeof n[m+1]){if(p=n[m],null!=i&&p>=i)break}else n[m]<0&&(e[Go]+=65536),(p<l||-1==l)&&(ea(e,t,n,m),e[Go]=(4294901760&e[Go])+m+2),m++}function Vf(e,n){cs(4,e,n);const t=hi(null);try{n.call(e)}finally{hi(t),cs(5,e,n)}}function ea(e,n,t,i){const o=t[i]<0,l=t[i+1],p=e[o?-t[i]:t[i]];o?e[xt]>>13<e[Go]>>16&&(3&e[xt])===n&&(e[xt]+=8192,Vf(p,l)):Vf(p,l)}const ta=-1;class iu{constructor(n,t,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function yd(e){return e!==ta}function su(e){return 32767&e}function na(e,n){let t=function Hf(e){return e>>16}(e),i=n;for(;t>0;)i=i[Wa],t--;return i}let vd=!0;function Wi(e){const n=vd;return vd=e,n}const Bm=255,Um=5;let ab=0;const fs={};function _d(e,n){const t=jm(e,n);if(-1!==t)return t;const i=n[qe];i.firstCreatePass&&(e.injectorIndex=n.length,qf(i.data,e),qf(n,null),qf(i.blueprint,null));const o=bd(e,n),l=e.injectorIndex;if(yd(o)){const d=su(o),p=na(o,n),m=p[qe].data;for(let b=0;b<8;b++)n[l+b]=p[d+b]|m[d+b]}return n[l+8]=o,l}function qf(e,n){e.push(0,0,0,0,0,0,0,0,n)}function jm(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function bd(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,i=null,o=n;for(;null!==o;){if(i=Tl(o),null===i)return ta;if(t++,o=o[Wa],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return ta}function _l(e,n,t){!function ub(e,n,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty($a)&&(i=t[$a]),null==i&&(i=t[$a]=ab++);const o=i&Bm;n.data[e+(o>>Um)]|=1<<o}(e,n,t)}function zf(e,n,t){if(t&Ot.Optional||void 0!==e)return e;tf()}function $m(e,n,t,i){if(t&Ot.Optional&&void 0===i&&(i=null),!(t&(Ot.Self|Ot.Host))){const o=e[di],l=Yr(void 0);try{return o?o.get(n,i,t&Ot.Optional):An(n,i,t&Ot.Optional)}finally{Yr(l)}}return zf(i,0,t)}function Gf(e,n,t,i=Ot.Default,o){if(null!==e){if(2048&n[xt]&&!(i&Ot.Self)){const d=function ou(e,n,t,i,o){let l=e,d=n;for(;null!==l&&null!==d&&2048&d[xt]&&!(512&d[xt]);){const p=Vm(l,d,t,i|Ot.Self,fs);if(p!==fs)return p;let m=l.parent;if(!m){const b=d[P_];if(b){const D=b.get(t,fs,i);if(D!==fs)return D}m=Tl(d),d=d[Wa]}l=m}return o}(e,n,t,i,fs);if(d!==fs)return d}const l=Vm(e,n,t,i,fs);if(l!==fs)return l}return $m(n,t,i,o)}function Vm(e,n,t,i,o){const l=function Hm(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty($a)?e[$a]:void 0;return"number"==typeof n?n>=0?n&Bm:bl:n}(t);if("function"==typeof l){if(!Pf(n,e,i))return i&Ot.Host?zf(o,0,i):$m(n,t,i,o);try{let d;if(d=l(i),null!=d||i&Ot.Optional)return d;tf()}finally{hd()}}else if("number"==typeof l){let d=null,p=jm(e,n),m=ta,b=i&Ot.Host?n[Nn][er]:null;for((-1===p||i&Ot.SkipSelf)&&(m=-1===p?bd(e,n):n[p+8],m!==ta&&Sd(i,!1)?(d=n[qe],p=su(m),n=na(m,n)):p=-1);-1!==p;){const D=n[qe];if(Cd(l,p,D.data)){const I=cb(p,n,t,d,i,b);if(I!==fs)return I}m=n[p+8],m!==ta&&Sd(i,n[qe].data[p+8]===b)&&Cd(l,p,n)?(d=D,p=su(m),n=na(m,n)):p=-1}}return o}function cb(e,n,t,i,o,l){const d=n[qe],p=d.data[e+8],D=Td(p,d,t,null==i?ao(p)&&vd:i!=d&&0!=(3&p.type),o&Ot.Host&&l===p);return null!==D?Ve(n,d,D,p):fs}function Td(e,n,t,i,o){const l=e.providerIndexes,d=n.data,p=1048575&l,m=e.directiveStart,D=l>>20,R=o?p+D:e.directiveEnd;for(let j=i?p:p+D;j<R;j++){const K=d[j];if(j<m&&t===K||j>=m&&K.type===t)return j}if(o){const j=d[m];if(j&&Vr(j)&&j.type===t)return m}return null}function Ve(e,n,t,i){let o=e[t];const l=n.data;if(function Rm(e){return e instanceof iu}(o)){const d=o;d.resolving&&function E_(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${e}${t}`)}(function Jt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Mt(e)}(l[t]));const p=Wi(d.canSeeViewProviders);d.resolving=!0;const b=d.injectImpl?Yr(d.injectImpl):null;Pf(e,i,Ot.Default);try{o=e[t]=d.factory(void 0,l,e,i),n.firstCreatePass&&t>=i.directiveStart&&function jf(e,n,t){const{ngOnChanges:i,ngOnInit:o,ngDoCheck:l}=n.type.prototype;if(i){const d=ll(n);(t.preOrderHooks??=[]).push(e,d),(t.preOrderCheckHooks??=[]).push(e,d)}o&&(t.preOrderHooks??=[]).push(0-e,o),l&&((t.preOrderHooks??=[]).push(e,l),(t.preOrderCheckHooks??=[]).push(e,l))}(t,l[t],n)}finally{null!==b&&Yr(b),Wi(p),d.resolving=!1,hd()}}return o}function Cd(e,n,t){return!!(t[n+(e>>Um)]&1<<e)}function Sd(e,n){return!(e&Ot.Self||e&Ot.Host&&n)}class $t{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,i){return Gf(this._tNode,this._lView,n,Ba(i),t)}}function bl(){return new $t(Cr(),ye())}function ho(e){return os(()=>{const n=e.prototype.constructor,t=n[_r]||fo(n),i=Object.prototype;let o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==i;){const l=o[_r]||fo(o);if(l&&l!==t)return l;o=Object.getPrototypeOf(o)}return l=>new l})}function fo(e){return ef(e)?()=>{const n=fo(nt(e));return n&&n()}:uo(e)}function Tl(e){const n=e[qe],t=n.type;return 2===t?n.declTNode:1===t?e[er]:null}const Ns="__parameters__";function uu(e,n,t){return os(()=>{const i=function ps(e){return function(...t){if(e){const i=e(...t);for(const o in i)this[o]=i[o]}}}(n);function o(...l){if(this instanceof o)return i.apply(this,l),this;const d=new o(...l);return p.annotation=d,p;function p(m,b,D){const I=m.hasOwnProperty(Ns)?m[Ns]:Object.defineProperty(m,Ns,{value:[]})[Ns];for(;I.length<=D;)I.push(null);return(I[D]=I[D]||[]).push(d),m}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}function qr(e,n){e.forEach(t=>Array.isArray(t)?qr(t,n):n(t))}function Kf(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Ls(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}const El=Ua(uu("Optional"),8),xd=Ua(uu("SkipSelf"),4);function Od(e){return 128==(128&e.flags)}var Xi=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Xi||{});const c0=/^>|^->|<!--|-->|--!>|<!-$/g,d0=/(<|>)/g,WE="\u200b$1\u200b";const tp=new Map;let h0=0;const Il="__ngContext__";function Rr(e,n){En(n)?(e[Il]=n[ur],function kb(e){tp.set(e[ur],e)}(n)):e[Il]=n}let op;function Rd(e,n){return op(e,n)}function fu(e){const n=e[Sn];return Ft(n)?n[Sn]:n}function T0(e){return S0(e[Ga])}function C0(e){return S0(e[li])}function S0(e){for(;null!==e&&!Ft(e);)e=e[li];return e}function pu(e,n,t,i,o){if(null!=i){let l,d=!1;Ft(i)?l=i:En(i)&&(d=!0,i=i[Cn]);const p=yn(i);0===e&&null!==t?null==o?w0(n,t,p):ua(n,t,p,o||null,!0):1===e&&null!==t?ua(n,t,p,o||null,!0):2===e?function vo(e,n,t){const i=Bd(e,n);i&&function I0(e,n,t,i){e.removeChild(n,t,i)}(e,i,n,t)}(n,p,d):3===e&&n.destroyNode(p),null!=l&&function Vb(e,n,t,i,o){const l=t[Hn];l!==yn(t)&&pu(n,e,i,l,o);for(let p=cr;p<t.length;p++){const m=t[p];_o(m[qe],m,e,n,i,l)}}(n,e,l,t,o)}}function Ld(e,n){return e.createComment(function Ab(e){return e.replace(c0,n=>n.replace(d0,WE))}(n))}function Ml(e,n,t){return e.createElement(n,t)}function gu(e,n){const t=e[qi],i=t.indexOf(n);Cm(n),t.splice(i,1)}function gi(e,n){if(e.length<=cr)return;const t=cr+n,i=e[t];if(i){const o=i[zo];null!==o&&o!==e&&gu(o,i),n>0&&(e[t-1][li]=i[li]);const l=Ls(e,cr+n);!function E0(e,n){_o(e,n,n[It],2,null,null),n[Cn]=null,n[er]=null}(i[qe],i);const d=l[Hi];null!==d&&d.detachView(l[qe]),i[Sn]=null,i[li]=null,i[xt]&=-129}return i}function kl(e,n){if(!(256&n[xt])){const t=n[It];n[Xa]&&Ko(n[Xa]),n[Wo]&&Ko(n[Wo]),t.destroyNode&&_o(e,n,t,3,null,null),function D0(e){let n=e[Ga];if(!n)return lp(e[qe],e);for(;n;){let t=null;if(En(n))t=n[Ga];else{const i=n[cr];i&&(t=i)}if(!t){for(;n&&!n[li]&&n!==e;)En(n)&&lp(n[qe],n),n=n[Sn];null===n&&(n=e),En(n)&&lp(n[qe],n),t=n&&n[li]}n=t}}(n)}}function lp(e,n){if(!(256&n[xt])){n[xt]&=-129,n[xt]|=256,function cp(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let i=0;i<t.length;i+=2){const o=n[t[i]];if(!(o instanceof iu)){const l=t[i+1];if(Array.isArray(l))for(let d=0;d<l.length;d+=2){const p=o[l[d]],m=l[d+1];cs(4,p,m);try{m.call(p)}finally{cs(5,p,m)}}else{cs(4,o,l);try{l.call(o)}finally{cs(5,o,l)}}}}}(e,n),function Ub(e,n){const t=e.cleanup,i=n[ci];if(null!==t)for(let l=0;l<t.length-1;l+=2)if("string"==typeof t[l]){const d=t[l+3];d>=0?i[d]():i[-d].unsubscribe(),l+=2}else t[l].call(i[t[l+1]]);null!==i&&(n[ci]=null);const o=n[so];if(null!==o){n[so]=null;for(let l=0;l<o.length;l++)(0,o[l])()}}(e,n),1===n[qe].type&&n[It].destroy();const t=n[zo];if(null!==t&&Ft(n[Sn])){t!==n[Sn]&&gu(t,n);const i=n[Hi];null!==i&&i.detachView(e)}!function Pb(e){tp.delete(e[ur])}(n)}}function Fd(e,n,t){return function dp(e,n,t){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return t[Cn];{const{componentOffset:o}=i;if(o>-1){const{encapsulation:l}=e.data[i.directiveStart+o];if(l===kr.None||l===kr.Emulated)return null}return nr(i,t)}}(e,n.parent,t)}function ua(e,n,t,i,o){e.insertBefore(n,t,i,o)}function w0(e,n,t){e.appendChild(n,t)}function x0(e,n,t,i,o){null!==i?ua(e,n,t,i,o):w0(e,n,t)}function Bd(e,n){return e.parentNode(n)}let hp,Vd,pp,Ll,k0=function M0(e,n,t){return 40&e.type?nr(e,t):null};function Pl(e,n,t,i){const o=Fd(e,i,n),l=n[It],p=function A0(e,n,t){return k0(e,n,t)}(i.parent||n[er],i,n);if(null!=o)if(Array.isArray(t))for(let m=0;m<t.length;m++)x0(l,o,t[m],p,!1);else x0(l,o,t,p,!1);void 0!==hp&&hp(l,i,n,t,o)}function Ol(e,n){if(null!==n){const t=n.type;if(3&t)return nr(n,e);if(4&t)return Ud(-1,e[n.index]);if(8&t){const i=n.child;if(null!==i)return Ol(e,i);{const o=e[n.index];return Ft(o)?Ud(-1,o):yn(o)}}if(32&t)return Rd(n,e)()||yn(e[n.index]);{const i=Rl(e,n);return null!==i?Array.isArray(i)?i[0]:Ol(fu(e[Nn]),i):Ol(e,n.next)}}return null}function Rl(e,n){return null!==n?e[Nn][er].projection[n.projection]:null}function Ud(e,n){const t=cr+e+1;if(t<n.length){const i=n[t],o=i[qe].firstChild;if(null!==o)return Ol(i,o)}return n[Hn]}function jd(e,n,t,i,o,l,d){for(;null!=t;){const p=i[t.index],m=t.type;if(d&&0===n&&(p&&Rr(yn(p),i),t.flags|=2),32!=(32&t.flags))if(8&m)jd(e,n,t.child,i,o,l,!1),pu(n,e,o,p,l);else if(32&m){const b=Rd(t,i);let D;for(;D=b();)pu(n,e,o,D,l);pu(n,e,o,p,l)}else 16&m?$d(e,n,i,t,o,l):pu(n,e,o,p,l);t=d?t.projectionNext:t.next}}function _o(e,n,t,i,o,l){jd(t,i,e.firstChild,n,o,l,!1)}function $d(e,n,t,i,o,l){const d=t[Nn],m=d[er].projection[i.projection];if(Array.isArray(m))for(let b=0;b<m.length;b++)pu(n,e,o,m[b],l);else{let b=m;const D=d[Sn];Od(i)&&(b.flags|=128),jd(e,n,b,D,o,l,!0)}}function N0(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function L0(e,n,t){const{mergedAttrs:i,classes:o,styles:l}=t;null!==i&&no(e,n,i),null!==o&&N0(e,n,o),null!==l&&function R0(e,n,t){e.setAttribute(n,"style",t)}(e,n,l)}function la(e){return function fp(){if(void 0===Vd&&(Vd=null,mn.trustedTypes))try{Vd=mn.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Vd}()?.createHTML(e)||e}function yu(){if(void 0!==pp)return pp;if(typeof document<"u")return document;throw new Oe(210,!1)}function ca(){if(void 0===Ll&&(Ll=null,mn.trustedTypes))try{Ll=mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ll}function F0(e){return ca()?.createHTML(e)||e}function U0(e){return ca()?.createScriptURL(e)||e}class j0{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xg})`}}function Ki(e){return e instanceof j0?e.changingThisBreaksApplicationSecurity:e}function Bl(e,n){const t=function Yb(e){return e instanceof j0&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${Xg})`)}return t===n}class eT{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const t=(new window.DOMParser).parseFromString(la(n),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(n):(t.removeChild(t.firstChild),t)}catch{return null}}}class V0{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const t=this.inertDocument.createElement("template");return t.innerHTML=la(n),t}}const da=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function jl(e){return(e=String(e)).match(da)?e:"unsafe:"+e}function Ir(e){const n={};for(const t of e.split(","))n[t]=!0;return n}function vu(...e){const n={};for(const t of e)for(const i in t)t.hasOwnProperty(i)&&(n[i]=!0);return n}const H0=Ir("area,br,col,hr,img,wbr"),Hd=Ir("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),q0=Ir("rp,rt"),Gr=vu(H0,vu(Hd,Ir("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vu(q0,Ir("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vu(q0,Hd)),Wr=Ir("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mp=vu(Wr,Ir("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ir("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),sT=Ir("script,style,template");class z0{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let t=n.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=this.checkClobberedElement(t,t.nextSibling);if(o){t=o;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(n){const t=n.nodeName.toLowerCase();if(!Gr.hasOwnProperty(t))return this.sanitizedSomething=!0,!sT.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=n.attributes;for(let o=0;o<i.length;o++){const l=i.item(o),d=l.name,p=d.toLowerCase();if(!mp.hasOwnProperty(p)){this.sanitizedSomething=!0;continue}let m=l.value;Wr[p]&&(m=jl(m)),this.buf.push(" ",d,'="',G0(m),'"')}return this.buf.push(">"),!0}endElement(n){const t=n.nodeName.toLowerCase();Gr.hasOwnProperty(t)&&!H0.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(G0(n))}checkClobberedElement(n,t){if(t&&(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return t}}const oT=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,aT=/([^\#-~ |!])/g;function G0(e){return e.replace(/&/g,"&amp;").replace(oT,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(aT,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let qd;function yp(e){return"content"in e&&function X0(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var ha=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(ha||{});function K0(e){const n=Vl();return n?F0(n.sanitize(ha.HTML,e)||""):Bl(e,"HTML")?F0(Ki(e)):function W0(e,n){let t=null;try{qd=qd||function gp(e){const n=new V0(e);return function tT(){try{return!!(new window.DOMParser).parseFromString(la(""),"text/html")}catch{return!1}}()?new eT(n):n}(e);let i=n?String(n):"";t=qd.getInertBodyElement(i);let o=5,l=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,i=l,l=t.innerHTML,t=qd.getInertBodyElement(i)}while(i!==l);return la((new z0).sanitizeChildren(yp(t)||t))}finally{if(t){const i=yp(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(yu(),Mt(e))}function _u(e){const n=Vl();return n?n.sanitize(ha.URL,e)||"":Bl(e,"URL")?Ki(e):jl(Mt(e))}function Y0(e){const n=Vl();if(n)return U0(n.sanitize(ha.RESOURCE_URL,e)||"");if(Bl(e,"ResourceURL"))return U0(Ki(e));throw new Oe(904,!1)}function Vl(){const e=ye();return e&&e[qo].sanitizer}const bo=new et("ENVIRONMENT_INITIALIZER"),_p=new et("INJECTOR",-1),Z0=new et("INJECTOR_DEF_TYPES");class Gd{get(n,t=Ju){if(t===Ju){const i=new Error(`NullInjectorError: No provider for ${ar(n)}!`);throw i.name="NullInjectorError",i}return t}}function dT(...e){return{\u0275providers:J0(0,e),\u0275fromNgModule:!0}}function J0(e,...n){const t=[],i=new Set;let o;const l=d=>{t.push(d)};return qr(n,d=>{const p=d;Wd(p,l,[],i)&&(o||=[],o.push(p))}),void 0!==o&&ey(o,l),t}function ey(e,n){for(let t=0;t<e.length;t++){const{ngModule:i,providers:o}=e[t];Tp(o,l=>{n(l,i)})}}function Wd(e,n,t,i){if(!(e=nt(e)))return!1;let o=null,l=nf(e);const d=!l&&Kt(e);if(l||d){if(d&&!d.standalone)return!1;o=e}else{const m=e.ngModule;if(l=nf(m),!l)return!1;o=m}const p=i.has(o);if(d){if(p)return!1;if(i.add(o),d.dependencies){const m="function"==typeof d.dependencies?d.dependencies():d.dependencies;for(const b of m)Wd(b,n,t,i)}}else{if(!l)return!1;{if(null!=l.imports&&!p){let b;i.add(o);try{qr(l.imports,D=>{Wd(D,n,t,i)&&(b||=[],b.push(D))})}finally{}void 0!==b&&ey(b,n)}if(!p){const b=uo(o)||(()=>new o);n({provide:o,useFactory:b,deps:Qt},o),n({provide:Z0,useValue:o,multi:!0},o),n({provide:bo,useValue:()=>ze(o),multi:!0},o)}const m=l.providers;if(null!=m&&!p){const b=e;Tp(m,D=>{n(D,b)})}}}return o!==e&&void 0!==e.providers}function Tp(e,n){for(let t of e)Na(t)&&(t=t.\u0275providers),Array.isArray(t)?Tp(t,n):n(t)}const fT=mt({provide:String,useValue:mt});function Yi(e){return null!==e&&"object"==typeof e&&fT in e}function fa(e){return"function"==typeof e}const Cp=new et("Set Injector scope."),Xd={},gT={};let Kd;function Yd(){return void 0===Kd&&(Kd=new Gd),Kd}class mi{}class pa extends mi{get destroyed(){return this._destroyed}constructor(n,t,i,o){super(),this.parent=t,this.source=i,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qd(n,d=>this.processProvider(d)),this.records.set(_p,bu(void 0,this)),o.has("environment")&&this.records.set(mi,bu(void 0,this));const l=this.records.get(Cp);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(Z0.multi,Qt,Ot.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of n)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const t=$i(this),i=Yr(void 0);try{return n()}finally{$i(t),Yr(i)}}get(n,t=Ju,i=Ot.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(hf))return n[hf](this);i=Ba(i);const l=$i(this),d=Yr(void 0);try{if(!(i&Ot.SkipSelf)){let m=this.records.get(n);if(void 0===m){const b=function sy(e){return"function"==typeof e||"object"==typeof e&&e instanceof et}(n)&&Is(n);m=b&&this.injectableDefInScope(b)?bu(Sp(n),Xd):null,this.records.set(n,m)}if(null!=m)return this.hydrate(n,m)}return(i&Ot.Self?Yd():this.parent).get(n,t=i&Ot.Optional&&t===Ju?null:t)}catch(p){if("NullInjectorError"===p.name){if((p[La]=p[La]||[]).unshift(ar(n)),l)throw p;return function rm(e,n,t,i){const o=e[La];throw n[lf]&&o.unshift(n[lf]),e.message=function ja(e,n,t,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let o=ar(n);if(Array.isArray(n))o=n.map(ar).join(" -> ");else if("object"==typeof n){let l=[];for(let d in n)if(n.hasOwnProperty(d)){let p=n[d];l.push(d+":"+("string"==typeof p?JSON.stringify(p):ar(p)))}o=`{${l.join(", ")}}`}return`${t}${i?"("+i+")":""}[${o}]: ${e.replace(to,"\n  ")}`}("\n"+e.message,o,t,i),e.ngTokenPath=o,e[La]=null,e}(p,n,"R3InjectorError",this.source)}throw p}finally{Yr(d),$i(l)}}resolveInjectorInitializers(){const n=$i(this),t=Yr(void 0);try{const o=this.get(bo.multi,Qt,Ot.Self);for(const l of o)l()}finally{$i(n),Yr(t)}}toString(){const n=[],t=this.records;for(const i of t.keys())n.push(ar(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processProvider(n){let t=fa(n=nt(n))?n:nt(n&&n.provide);const i=function mT(e){return Yi(e)?bu(void 0,e.useValue):bu(function iy(e,n,t){let i;if(fa(e)){const o=nt(e);return uo(o)||Sp(o)}if(Yi(e))i=()=>nt(e.useValue);else if(function ny(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...Ht(e.deps||[]));else if(function ty(e){return!(!e||!e.useExisting)}(e))i=()=>ze(nt(e.useExisting));else{const o=nt(e&&(e.useClass||e.provide));if(!function yT(e){return!!e.deps}(e))return uo(o)||Sp(o);i=()=>new o(...Ht(e.deps))}return i}(e),Xd)}(n);if(fa(n)||!0!==n.multi)this.records.get(t);else{let o=this.records.get(t);o||(o=bu(void 0,Xd,!0),o.factory=()=>Ht(o.multi),this.records.set(t,o)),t=n,o.multi.push(n)}this.records.set(t,i)}hydrate(n,t){return t.value===Xd&&(t.value=gT,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Fn(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=nt(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){const t=this._onDestroyHooks.indexOf(n);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Sp(e){const n=Is(e),t=null!==n?n.factory:uo(e);if(null!==t)return t;if(e instanceof et)throw new Oe(204,!1);if(e instanceof Function)return function ry(e){const n=e.length;if(n>0)throw function po(e,n){const t=[];for(let i=0;i<e;i++)t.push(n);return t}(n,"?"),new Oe(204,!1);const t=function w_(e){return e&&(e[rf]||e[Lc])||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new Oe(204,!1)}function bu(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function Qd(e,n){for(const t of e)Array.isArray(t)?Qd(t,n):t&&Na(t)?Qd(t.\u0275providers,n):n(t)}const Zd=new et("AppId",{providedIn:"root",factory:()=>vT}),vT="ng",oy=new et("Platform Initializer"),ga=new et("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ay=new et("CSP nonce",{providedIn:"root",factory:()=>yu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let P=(e,n,t)=>null;function L(e,n,t=!1){return P(e,n,t)}class qn{}class hr{}class Ai{resolveComponentFactory(n){throw function kn(e){const n=Error(`No component factory found for ${ar(e)}.`);return n.ngComponent=e,n}(n)}}let Mi=(()=>{class e{static#e=this.NULL=new Ai}return e})();function To(){return ki(Cr(),ye())}function ki(e,n){return new ni(nr(e,n))}let ni=(()=>{class e{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=To}return e})();function ma(e){return e instanceof ni?e.nativeElement:e}class Co{}let ms=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function eh(){const e=ye(),t=Jr(Cr().index,e);return(En(t)?t:e)[It]}()}return e})(),cy=(()=>{class e{static#e=this.\u0275prov=it({token:e,providedIn:"root",factory:()=>null})}return e})();class ql{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const dy=new ql("16.2.12"),Dp={};function th(e,n=null,t=null,i){const o=nn(e,n,t,i);return o.resolveInjectorInitializers(),o}function nn(e,n=null,t=null,i,o=new Set){const l=[t||Qt,dT(e)];return i=i||("object"==typeof e?void 0:ar(e)),new pa(l,n||Yd(),i||null,o)}let Pi=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Ju;static#t=this.NULL=new Gd;static create(t,i){if(Array.isArray(t))return th({name:""},i,t,"");{const o=t.name??"";return th({name:o},t.parent,t.providers,o)}}static#n=this.\u0275prov=it({token:e,providedIn:"any",factory:()=>ze(_p)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function zl(e){return e.ngOriginalError}class Qi{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&zl(n);for(;t&&zl(t);)t=zl(t);return t||null}}function ih(e){return n=>{setTimeout(e,void 0,n)}}const Bn=class yy extends $e{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,i){let o=n,l=t||(()=>null),d=i;if(n&&"object"==typeof n){const m=n;o=m.next?.bind(m),l=m.error?.bind(m),d=m.complete?.bind(m)}this.__isAsync&&(l=ih(l),o&&(o=ih(o)),d&&(d=ih(d)));const p=super.subscribe({next:o,error:l,complete:d});return n instanceof ie&&n.add(p),p}};function vn(...e){}class _n{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bn(!1),this.onMicrotaskEmpty=new Bn(!1),this.onStable=new Bn(!1),this.onError=new Bn(!1),typeof Zone>"u")throw new Oe(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&t,o.shouldCoalesceRunChangeDetection=i,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function xT(){const e="function"==typeof mn.requestAnimationFrame;let n=mn[e?"requestAnimationFrame":"setTimeout"],t=mn[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&t){const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i);const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function MT(e){const n=()=>{!function AT(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(mn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Ap(e),e.isCheckStableRunning=!0,Ip(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Ap(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,o,l,d,p)=>{if(function Cy(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(p))return t.invokeTask(o,l,d,p);try{return vy(e),t.invokeTask(o,l,d,p)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||e.shouldCoalesceRunChangeDetection)&&n(),_y(e)}},onInvoke:(t,i,o,l,d,p,m)=>{try{return vy(e),t.invoke(o,l,d,p,m)}finally{e.shouldCoalesceRunChangeDetection&&n(),_y(e)}},onHasTask:(t,i,o,l)=>{t.hasTask(o,l),i===o&&("microTask"==l.change?(e._hasPendingMicrotasks=l.microTask,Ap(e),Ip(e)):"macroTask"==l.change&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(t,i,o,l)=>(t.handleError(o,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_n.isInAngularZone())throw new Oe(909,!1)}static assertNotInAngularZone(){if(_n.isInAngularZone())throw new Oe(909,!1)}run(n,t,i){return this._inner.run(n,t,i)}runTask(n,t,i,o){const l=this._inner,d=l.scheduleEventTask("NgZoneEvent: "+o,n,IT,vn,vn);try{return l.runTask(d,t,i)}finally{l.cancelTask(d)}}runGuarded(n,t,i){return this._inner.runGuarded(n,t,i)}runOutsideAngular(n){return this._outer.run(n)}}const IT={};function Ip(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Ap(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function vy(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function _y(e){e._nesting--,Ip(e)}class kT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bn,this.onMicrotaskEmpty=new Bn,this.onStable=new Bn,this.onError=new Bn}run(n,t,i){return n.apply(t,i)}runGuarded(n,t,i){return n.apply(t,i)}runOutsideAngular(n){return n()}runTask(n,t,i,o){return n.apply(t,i)}}const by=new et("",{providedIn:"root",factory:Ty});function Ty(){const e=Ye(_n);let n=!0;return function b_(...e){const n=jn(e),t=function Oc(e,n){return"number"==typeof Ui(e)?e.pop():n}(e,1/0),i=e;return i.length?1===i.length?Mr(i[0]):or(t)(vr(i,n)):Jn}(new Se(o=>{n=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{o.next(n),o.complete()})}),new Se(o=>{let l;e.runOutsideAngular(()=>{l=e.onStable.subscribe(()=>{_n.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(n=!0,o.next(!0))})})});const d=e.onUnstable.subscribe(()=>{_n.assertInAngularZone(),n&&(n=!1,e.runOutsideAngular(()=>{o.next(!1)}))});return()=>{l.unsubscribe(),d.unsubscribe()}}).pipe(Zh()))}function Sy(e){return e.ownerDocument.defaultView}function Us(e){return e instanceof Function?e():e}let kp=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=it({token:e,providedIn:"root",factory:()=>new e})}return e})();function So(e){for(;e;){e[xt]|=64;const n=fu(e);if(Hr(e)&&!n)return e;e=n}return null}const dn=new et("",{providedIn:"root",factory:()=>!1});let Cu=null;function uh(e,n){return e[n]??Xl()}function Op(e,n){const t=Xl();t.producerNode?.length&&(e[n]=Cu,t.lView=e,Cu=Ay())}const LT={...Mn,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{So(e.lView)},lView:null};function Ay(){return Object.create(LT)}function Xl(){return Cu??=Ay(),Cu}const Dt={};function Ae(e){Su(Yt(),ye(),rr()+e,!1)}function Su(e,n,t,i){if(!i)if(3==(3&n[xt])){const l=e.preOrderCheckHooks;null!==l&&vl(n,l,t)}else{const l=e.preOrderHooks;null!==l&&pd(n,l,0,t)}lo(t)}function je(e,n=Ot.Default){const t=ye();return null===t?ze(e,n):Gf(Cr(),t,nt(e),n)}function lh(e,n,t,i,o,l,d,p,m,b,D){const I=n.blueprint.slice();return I[Cn]=o,I[xt]=140|i,(null!==b||e&&2048&e[xt])&&(I[xt]|=2048),wf(I),I[Sn]=I[Wa]=e,I[Vn]=t,I[qo]=d||e&&e[qo],I[It]=p||e&&e[It],I[di]=m||e&&e[di]||null,I[er]=l,I[ur]=function Mb(){return h0++}(),I[tr]=D,I[P_]=b,I[Nn]=2==n.type?e[Nn]:I,I}function _a(e,n,t,i,o){let l=e.data[n];if(null===l)l=function Rp(e,n,t,i,o){const l=nu(),d=pl(),m=e.data[n]=function Fp(e,n,t,i,o,l){let d=n?n.injectorIndex:-1,p=0;return function Kn(){return null!==bt.skipHydrationRootTNode}()&&(p|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:d,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:p,providerIndexes:0,value:o,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?l:l&&l.parent,t,n,i,o);return null===e.firstChild&&(e.firstChild=m),null!==l&&(d?null==l.child&&null!==m.parent&&(l.child=m):null===l.next&&(l.next=m,m.prev=l)),m}(e,n,t,i,o),function Mm(){return bt.lFrame.inI18n}()&&(l.flags|=32);else if(64&l.type){l.type=t,l.value=i,l.attrs=o;const d=function fl(){const e=bt.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();l.injectorIndex=null===d?-1:d.injectorIndex}return Ii(l,!0),l}function Yl(e,n,t,i){if(0===t)return-1;const o=n.length;for(let l=0;l<t;l++)n.push(i),e.blueprint.push(i),e.data.push(null);return o}function js(e,n,t,i,o){const l=uh(n,Xa),d=rr(),p=2&i;try{lo(-1),p&&n.length>Lt&&Su(e,n,Lt,!1),cs(p?2:0,o);const b=p?l:null,D=ed(b);try{null!==b&&(b.dirty=!1),t(i,o)}finally{ol(b,D)}}finally{p&&null===n[Xa]&&Op(n,Xa),lo(d),cs(p?3:1,o)}}function Du(e,n,t){if(wi(n)){const i=hi(null);try{const l=n.directiveEnd;for(let d=n.directiveStart;d<l;d++){const p=e.data[d];p.contentQueries&&p.contentQueries(1,t[d],d)}}finally{hi(i)}}}function Np(e,n,t){wm()&&(function Ny(e,n,t,i){const o=t.directiveStart,l=t.directiveEnd;ao(t)&&function qT(e,n,t){const i=nr(n,e),o=ch(t);let d=16;t.signals?d=4096:t.onPush&&(d=64);const p=yh(e,lh(e,o,null,d,i,n,null,e[qo].rendererFactory.createRenderer(i,t),null,null,null));e[n.index]=p}(n,t,e.data[o+t.componentOffset]),e.firstCreatePass||_d(t,n),Rr(i,n);const d=t.initialInputs;for(let p=o;p<l;p++){const m=e.data[p],b=Ve(n,e,p,t);Rr(b,n),null!==d&&zT(0,p-o,b,m,0,d),Vr(m)&&(Jr(t.index,n)[Vn]=Ve(n,e,p,t))}}(e,n,t,nr(t,n)),64==(64&t.flags)&&Ly(e,n,t))}function Ql(e,n,t=nr){const i=n.localNames;if(null!==i){let o=n.index+1;for(let l=0;l<i.length;l+=2){const d=i[l+1],p=-1===d?t(n,e):e[d];e[o++]=p}}}function ch(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=yi(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function yi(e,n,t,i,o,l,d,p,m,b,D){const I=Lt+i,R=I+o,j=function FT(e,n){const t=[];for(let i=0;i<n;i++)t.push(i<e?null:Dt);return t}(I,R),K="function"==typeof b?b():b;return j[qe]={type:e,blueprint:j,template:t,queries:null,viewQuery:p,declTNode:n,data:j.slice().fill(null,I),bindingStartIndex:I,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:m,consts:K,incompleteFirstPass:!1,ssrId:D}}let Jl=e=>null;function ky(e,n,t,i){for(let o in e)if(e.hasOwnProperty(o)){t=null===t?{}:t;const l=e[o];null===i?Py(t,n,o,l):i.hasOwnProperty(o)&&Py(t,n,i[o],l)}return t}function Py(e,n,t,i){e.hasOwnProperty(t)?e[t].push(n,i):e[t]=[n,i]}function ri(e,n,t,i,o,l,d,p){const m=nr(n,t);let D,b=n.inputs;!p&&null!=b&&(D=b[i])?(ba(e,t,D,i,o),ao(n)&&function UT(e,n){const t=Jr(n,e);16&t[xt]||(t[xt]|=64)}(t,n.index)):3&n.type&&(i=function hh(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),o=null!=d?d(o,n.value||"",i):o,l.setProperty(m,i,o))}function fh(e,n,t,i){if(wm()){const o=null===i?null:{"":-1},l=function Fy(e,n){const t=e.directiveRegistry;let i=null,o=null;if(t)for(let l=0;l<t.length;l++){const d=t[l];if(zc(n,d.selectors,!1))if(i||(i=[]),Vr(d))if(null!==d.findHostDirectiveDefs){const p=[];o=o||new Map,d.findHostDirectiveDefs(d,p,o),i.unshift(...p,d),gh(e,n,p.length)}else i.unshift(d),gh(e,n,0);else o=o||new Map,d.findHostDirectiveDefs?.(d,i,o),i.push(d)}return null===i?null:[i,o]}(e,t);let d,p;null===l?d=p=null:[d,p]=l,null!==d&&Ry(e,n,t,d,o,p),o&&function $T(e,n,t){if(n){const i=e.localNames=[];for(let o=0;o<n.length;o+=2){const l=t[n[o+1]];if(null==l)throw new Oe(-301,!1);i.push(n[o],l)}}}(t,i,o)}t.mergedAttrs=ro(t.mergedAttrs,t.attrs)}function Ry(e,n,t,i,o,l){for(let b=0;b<i.length;b++)_l(_d(t,n),e,i[b].type);!function VT(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,i.length);for(let b=0;b<i.length;b++){const D=i[b];D.providersResolver&&D.providersResolver(D)}let d=!1,p=!1,m=Yl(e,n,i.length,null);for(let b=0;b<i.length;b++){const D=i[b];t.mergedAttrs=ro(t.mergedAttrs,D.hostAttrs),HT(e,t,n,m,D),By(m,D,o),null!==D.contentQueries&&(t.flags|=4),(null!==D.hostBindings||null!==D.hostAttrs||0!==D.hostVars)&&(t.flags|=64);const I=D.type.prototype;!d&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),d=!0),!p&&(I.ngOnChanges||I.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),p=!0),m++}!function BT(e,n,t){const o=n.directiveEnd,l=e.data,d=n.attrs,p=[];let m=null,b=null;for(let D=n.directiveStart;D<o;D++){const I=l[D],R=t?t.get(I):null,K=R?R.outputs:null;m=ky(I.inputs,D,m,R?R.inputs:null),b=ky(I.outputs,D,b,K);const Y=null===m||null===d||tl(n)?null:GT(m,D,d);p.push(Y)}null!==m&&(m.hasOwnProperty("class")&&(n.flags|=8),m.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=p,n.inputs=m,n.outputs=b}(e,t,l)}function Ly(e,n,t){const i=t.directiveStart,o=t.directiveEnd,l=t.index,d=function nb(){return bt.lFrame.currentDirectiveIndex}();try{lo(l);for(let p=i;p<o;p++){const m=e.data[p],b=n[p];ld(p),(null!==m.hostBindings||0!==m.hostVars||null!==m.hostAttrs)&&jT(m,b)}}finally{lo(-1),ld(d)}}function jT(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function gh(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function By(e,n,t){if(t){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)t[n.exportAs[i]]=e;Vr(n)&&(t[""]=e)}}function HT(e,n,t,i,o){e.data[i]=o;const l=o.factory||(o.factory=uo(o.type)),d=new iu(l,Vr(o),je);e.blueprint[i]=d,t[i]=d,function ph(e,n,t,i,o){const l=o.hostBindings;if(l){let d=e.hostBindingOpCodes;null===d&&(d=e.hostBindingOpCodes=[]);const p=~n.index;(function ec(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(d)!=p&&d.push(p),d.push(t,i,l)}}(e,n,i,Yl(e,t,o.hostVars,Dt),o)}function ys(e,n,t,i,o,l){const d=nr(e,n);!function Bp(e,n,t,i,o,l,d){if(null==l)e.removeAttribute(n,o,t);else{const p=null==d?Mt(l):d(l,i||"",o);e.setAttribute(n,o,p,t)}}(n[It],d,l,e.value,t,i,o)}function zT(e,n,t,i,o,l){const d=l[n];if(null!==d)for(let p=0;p<d.length;)mh(i,t,d[p++],d[p++],d[p++])}function mh(e,n,t,i,o){const l=hi(null);try{const d=e.inputTransforms;null!==d&&d.hasOwnProperty(i)&&(o=d[i].call(n,o)),null!==e.setInput?e.setInput(n,o,t,i):n[i]=o}finally{hi(l)}}function GT(e,n,t){let i=null,o=0;for(;o<t.length;){const l=t[o];if(0!==l)if(5!==l){if("number"==typeof l)break;if(e.hasOwnProperty(l)){null===i&&(i=[]);const d=e[l];for(let p=0;p<d.length;p+=2)if(d[p]===n){i.push(l,d[p+1],t[o+1]);break}}o+=2}else o+=2;else o+=4}return i}function Up(e,n,t,i){return[e,!0,!1,n,null,0,i,t,null,null,null]}function tc(e,n){const t=e.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const l=t[i+1];if(-1!==l){const d=e.data[l];kf(t[i]),d.contentQueries(2,n[l],l)}}}function yh(e,n){return e[Ga]?e[Wc][li]=n:e[Ga]=n,e[Wc]=n,n}function jp(e,n,t){kf(0);const i=hi(null);try{n(e,t)}finally{hi(i)}}function Uy(e){return e[ci]||(e[ci]=[])}function jy(e){return e.cleanup||(e.cleanup=[])}function xu(e,n){const t=e[di],i=t?t.get(Qi,null):null;i&&i.handleError(n)}function ba(e,n,t,i,o){for(let l=0;l<t.length;){const d=t[l++],p=t[l++];mh(e.data[d],n[d],i,p,o)}}function Ri(e,n,t){const i=function od(e,n){return yn(n[e])}(n,e);!function ap(e,n,t){e.setValue(n,t)}(e[It],i,t)}function Zi(e,n){const t=Jr(n,e),i=t[qe];!function $s(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}(i,t);const o=t[Cn];null!==o&&null===t[tr]&&(t[tr]=L(o,t[di])),Iu(i,t,t[Vn])}function Iu(e,n,t){cd(n);try{const i=e.viewQuery;null!==i&&jp(1,i,t);const o=e.template;null!==o&&js(e,n,o,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&tc(e,n),e.staticViewQueries&&jp(2,e.viewQuery,t);const l=e.components;null!==l&&function $y(e,n){for(let t=0;t<n.length;t++)Zi(e,n[t])}(n,l)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{n[xt]&=-5,Jo()}}let Vy=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(t,i,o){const l=typeof Zone>"u"?null:Zone.current,d=function Ja(e,n,t){const i=Object.create(q_);t&&(i.consumerAllowSignalWrites=!0),i.fn=e,i.schedule=n;const o=d=>{i.cleanupFn=d};return i.ref={notify:()=>j_(i),run:()=>{if(i.dirty=!1,i.hasRun&&!Xo(i))return;i.hasRun=!0;const d=ed(i);try{i.cleanupFn(),i.cleanupFn=Or,i.fn(o)}finally{ol(i,d)}},cleanup:()=>i.cleanupFn()},i.ref}(t,b=>{this.all.has(b)&&this.queue.set(b,l)},o);let p;this.all.add(d),d.notify();const m=()=>{d.cleanup(),p?.(),this.all.delete(d),this.queue.delete(d)};return p=i?.onDestroy(m),{destroy:m}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=it({token:e,providedIn:"root",factory:()=>new e})}return e})();function vh(e,n,t){let i=t?e.styles:null,o=t?e.classes:null,l=0;if(null!==n)for(let d=0;d<n.length;d++){const p=n[d];"number"==typeof p?l=p:1==l?o=eo(o,p):2==l&&(i=eo(i,p+": "+n[++d]+";"))}t?e.styles=i:e.stylesWithoutHost=i,t?e.classes=o:e.classesWithoutHost=o}function rc(e,n,t,i,o=!1){for(;null!==t;){const l=n[t.index];null!==l&&i.push(yn(l)),Ft(l)&&_h(l,i);const d=t.type;if(8&d)rc(e,n,t.child,i);else if(32&d){const p=Rd(t,n);let m;for(;m=p();)i.push(m)}else if(16&d){const p=Rl(n,t);if(Array.isArray(p))i.push(...p);else{const m=fu(n[Nn]);rc(m[qe],m,p,i,!0)}}t=o?t.projectionNext:t.next}return i}function _h(e,n){for(let t=cr;t<e.length;t++){const i=e[t],o=i[qe].firstChild;null!==o&&rc(i[qe],i,o,n)}e[Hn]!==e[Cn]&&n.push(e[Hn])}function Au(e,n,t,i=!0){const o=n[qo],l=o.rendererFactory,d=o.afterRenderEventManager;l.begin?.(),d?.begin();try{ic(e,n,e.template,t)}catch(m){throw i&&xu(n,m),m}finally{l.end?.(),o.effectManager?.flush(),d?.end()}}function ic(e,n,t,i){const o=n[xt];if(256!=(256&o)){n[qo].effectManager?.flush(),cd(n);try{wf(n),function ud(e){return bt.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&js(e,n,t,2,i);const d=3==(3&o);if(d){const b=e.preOrderCheckHooks;null!==b&&vl(n,b,null)}else{const b=e.preOrderHooks;null!==b&&pd(n,b,0,null),gd(n,0)}if(function XT(e){for(let n=T0(e);null!==n;n=C0(n)){if(!n[um])continue;const t=n[qi];for(let i=0;i<t.length;i++){Q_(t[i])}}}(n),Do(n,2),null!==e.contentQueries&&tc(e,n),d){const b=e.contentCheckHooks;null!==b&&vl(n,b)}else{const b=e.contentHooks;null!==b&&pd(n,b,1),gd(n,1)}!function Kl(e,n){const t=e.hostBindingOpCodes;if(null===t)return;const i=uh(n,Wo);try{for(let o=0;o<t.length;o++){const l=t[o];if(l<0)lo(~l);else{const d=l,p=t[++o],m=t[++o];tb(p,d),i.dirty=!1;const b=ed(i);try{m(2,n[d])}finally{ol(i,b)}}}}finally{null===n[Wo]&&Op(n,Wo),lo(-1)}}(e,n);const p=e.components;null!==p&&Th(n,p,0);const m=e.viewQuery;if(null!==m&&jp(2,m,i),d){const b=e.viewCheckHooks;null!==b&&vl(n,b)}else{const b=e.viewHooks;null!==b&&pd(n,b,2),gd(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[xt]&=-73,Cm(n)}finally{Jo()}}}function Do(e,n){for(let t=T0(e);null!==t;t=C0(t))for(let i=cr;i<t.length;i++)$p(t[i],n)}function Hy(e,n,t){$p(Jr(n,e),t)}function $p(e,n){if(!function Y_(e){return 128==(128&e[xt])}(e))return;const t=e[qe],i=e[xt];if(80&i&&0===n||1024&i||2===n)ic(t,e,t.template,e[Vn]);else if(e[za]>0){Do(e,1);const o=t.components;null!==o&&Th(e,o,1)}}function Th(e,n,t){for(let i=0;i<n.length;i++)Hy(e,n[i],t)}class sc{get rootNodes(){const n=this._lView,t=n[qe];return rc(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vn]}set context(n){this._lView[Vn]=n}get destroyed(){return 256==(256&this._lView[xt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Sn];if(Ft(n)){const t=n[8],i=t?t.indexOf(this):-1;i>-1&&(gi(n,i),Ls(t,i))}this._attachedToViewContainer=!1}kl(this._lView[qe],this._lView)}onDestroy(n){!function ad(e,n){if(256==(256&e[xt]))throw new Oe(911,!1);null===e[so]&&(e[so]=[]),e[so].push(n)}(this._lView,n)}markForCheck(){So(this._cdRefInjectingView||this._lView)}detach(){this._lView[xt]&=-129}reattach(){this._lView[xt]|=128}detectChanges(){Au(this._lView[qe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Bb(e,n){_o(e,n,n[It],2,null,null)}(this._lView[qe],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Oe(902,!1);this._appRef=n}}class KT extends sc{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Au(n[qe],n,n[Vn],!1)}checkNoChanges(){}get context(){return null}}class qy extends Mi{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=Kt(n);return new ac(t,this.ngModule)}}function oc(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class zy{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,i){i=Ba(i);const o=this.injector.get(n,Dp,i);return o!==Dp||t===Dp?o:this.parentInjector.get(n,t,i)}}class ac extends hr{get inputs(){const n=this.componentDef,t=n.inputTransforms,i=oc(n.inputs);if(null!==t)for(const o of i)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return i}get outputs(){return oc(this.componentDef.outputs)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function k_(e){return e.map(sm).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,i,o){let l=(o=o||this.ngModule)instanceof mi?o:o?.injector;l&&null!==this.componentDef.getStandaloneInjector&&(l=this.componentDef.getStandaloneInjector(l)||l);const d=l?new zy(n,l):n,p=d.get(Co,null);if(null===p)throw new Oe(407,!1);const I={rendererFactory:p,sanitizer:d.get(cy,null),effectManager:d.get(Vy,null),afterRenderEventManager:d.get(kp,null)},R=p.createRenderer(null,this.componentDef),j=this.componentDef.selectors[0][0]||"div",K=i?function dh(e,n,t,i){const l=i.get(dn,!1)||t===kr.ShadowDom,d=e.selectRootElement(n,l);return function Zl(e){Jl(e)}(d),d}(R,i,this.componentDef.encapsulation,d):Ml(R,j,function YT(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(j)),we=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let le=null;null!==K&&(le=L(K,d,!0));const Ze=yi(0,null,null,1,0,null,null,null,null,null,null),yt=lh(null,Ze,null,we,null,null,I,R,d,null,le);let zt,Fr;cd(yt);try{const Lo=this.componentDef;let wc,_E=null;Lo.findHostDirectiveDefs?(wc=[],_E=new Map,Lo.findHostDirectiveDefs(Lo,wc,_E),wc.push(Lo)):wc=[Lo];const g4=function Gy(e,n){const t=e[qe],i=Lt;return e[i]=n,_a(t,i,2,"#host",null)}(yt,K),m4=function Wy(e,n,t,i,o,l,d){const p=o[qe];!function ZT(e,n,t,i){for(const o of e)n.mergedAttrs=ro(n.mergedAttrs,o.hostAttrs);null!==n.mergedAttrs&&(vh(n,n.mergedAttrs,!0),null!==t&&L0(i,t,n))}(i,e,n,d);let m=null;null!==n&&(m=L(n,o[di]));const b=l.rendererFactory.createRenderer(n,t);let D=16;t.signals?D=4096:t.onPush&&(D=64);const I=lh(o,ch(t),null,D,o[e.index],e,l,b,null,null,m);return p.firstCreatePass&&gh(p,e,i.length-1),yh(o,I),o[e.index]=I}(g4,K,Lo,wc,yt,I,R);Fr=cl(Ze,Lt),K&&function eC(e,n,t,i){if(i)no(e,t,["ng-version",dy.full]);else{const{attrs:o,classes:l}=function Va(e){const n=[],t=[];let i=1,o=2;for(;i<e.length;){let l=e[i];if("string"==typeof l)2===o?""!==l&&n.push(l,e[++i]):8===o&&t.push(l);else{if(!Zr(o))break;o=l}i++}return{attrs:n,classes:t}}(n.selectors[0]);o&&no(e,t,o),l&&l.length>0&&N0(e,t,l.join(" "))}}(R,Lo,K,i),void 0!==t&&function Xy(e,n,t){const i=e.projection=[];for(let o=0;o<n.length;o++){const l=t[o];i.push(null!=l?Array.from(l):null)}}(Fr,this.ngContentSelectors,t),zt=function JT(e,n,t,i,o,l){const d=Cr(),p=o[qe],m=nr(d,o);Ry(p,o,d,t,null,i);for(let D=0;D<t.length;D++)Rr(Ve(o,p,d.directiveStart+D,d),o);Ly(p,o,d),m&&Rr(m,o);const b=Ve(o,p,d.directiveStart+d.componentOffset,d);if(e[Vn]=o[Vn]=b,null!==l)for(const D of l)D(b,n);return Du(p,d,e),b}(m4,Lo,wc,_E,yt,[tC]),Iu(Ze,yt,null)}finally{Jo()}return new QT(this.componentType,zt,ki(Fr,yt),yt,Fr)}}class QT extends qn{constructor(n,t,i,o,l){super(),this.location=i,this._rootLView=o,this._tNode=l,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new KT(o),this.componentType=n}setInput(n,t){const i=this._tNode.inputs;let o;if(null!==i&&(o=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;const l=this._rootLView;ba(l[qe],l,o,n,t),this.previousInputValues.set(n,t),So(Jr(this._tNode.index,l))}}get injector(){return new $t(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function tC(){const e=Cr();yl(ye()[qe],e)}function tv(e){const n=e.inputConfig,t={};for(const i in n)if(n.hasOwnProperty(i)){const o=n[i];Array.isArray(o)&&o[2]&&(t[i]=o[2])}e.inputTransforms=t}function Ch(e){return!!Hp(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Hp(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function vs(e,n,t){return e[n]=t}function Nr(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function dc(e,n,t,i){const o=ye();return Nr(o,Zo(),n)&&(Yt(),ys(Dn(),o,e,n,t,i)),dc}function Vs(e,n,t,i){return Nr(e,Zo(),t)?n+Mt(t)+i:Dt}function O(e,n,t,i,o,l,d,p){const m=ye(),b=Yt(),D=e+Lt,I=b.firstCreatePass?function w(e,n,t,i,o,l,d,p,m){const b=n.consts,D=_a(n,e,4,d||null,pi(b,p));fh(n,t,D,pi(b,m)),yl(n,D);const I=D.tView=yi(2,D,i,o,l,n.directiveRegistry,n.pipeRegistry,null,n.schemas,b,null);return null!==n.queries&&(n.queries.template(n,D),I.queries=n.queries.embeddedTView(D)),D}(D,b,m,n,t,i,o,l,d):b.data[D];Ii(I,!1);const R=F(b,m,I,e);ml()&&Pl(b,m,R,I),Rr(R,m),yh(m,m[D]=Up(R,m,R,I)),Xc(I)&&Np(b,m,I),null!=d&&Ql(m,I,p)}let F=function U(e,n,t,i){return Rs(!0),n[It].createComment("")};function He(e){return function eu(e,n){return e[n]}(function eb(){return bt.lFrame.contextLView}(),Lt+e)}function ee(e,n,t){const i=ye();return Nr(i,Zo(),n)&&ri(Yt(),Dn(),i,e,n,i[It],t,!1),ee}function ht(e,n,t,i,o){const d=o?"class":"style";ba(e,t,n.inputs[d],d,i)}function ve(e,n,t,i){const o=ye(),l=Yt(),d=Lt+e,p=o[It],m=l.firstCreatePass?function At(e,n,t,i,o,l){const d=n.consts,m=_a(n,e,2,i,pi(d,o));return fh(n,t,m,pi(d,l)),null!==m.attrs&&vh(m,m.attrs,!1),null!==m.mergedAttrs&&vh(m,m.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,m),m}(d,l,o,n,t,i):l.data[d],b=tg(l,o,m,p,n,e);o[d]=b;const D=Xc(m);return Ii(m,!0),L0(p,b,m),32!=(32&m.flags)&&ml()&&Pl(l,o,b,m),0===function hl(){return bt.lFrame.elementDepthCount}()&&Rr(b,o),function Dm(){bt.lFrame.elementDepthCount++}(),D&&(Np(l,o,m),Du(l,m,o)),null!==i&&Ql(o,m),ve}function De(){let e=Cr();pl()?If():(e=e.parent,Ii(e,!1));const n=e;(function xm(e){return bt.skipHydrationRootTNode===e})(n)&&function xf(){bt.skipHydrationRootTNode=null}(),function Z_(){bt.lFrame.elementDepthCount--}();const t=Yt();return t.firstCreatePass&&(yl(t,e),wi(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function Lm(e){return 0!=(8&e.flags)}(n)&&ht(t,n,ye(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Fm(e){return 0!=(16&e.flags)}(n)&&ht(t,n,ye(),n.stylesWithoutHost,!1),De}function Tt(e,n,t,i){return ve(e,n,t,i),De(),Tt}let tg=(e,n,t,i,o,l)=>(Rs(!0),Ml(i,o,function Uf(){return bt.lFrame.currentNamespace}()));function Nu(e,n,t){const i=ye(),o=Yt(),l=e+Lt,d=o.firstCreatePass?function ng(e,n,t,i,o){const l=n.consts,d=pi(l,i),p=_a(n,e,8,"ng-container",d);return null!==d&&vh(p,d,!0),fh(n,t,p,pi(l,o)),null!==n.queries&&n.queries.elementStart(n,p),p}(l,o,i,n,t):o.data[l];Ii(d,!0);const p=Io(o,i,d,e);return i[l]=p,ml()&&Pl(o,i,p,d),Rr(p,i),Xc(d)&&(Np(o,i,d),Du(o,d,i)),null!=t&&Ql(i,d),Nu}function wn(){let e=Cr();const n=Yt();return pl()?If():(e=e.parent,Ii(e,!1)),n.firstCreatePass&&(yl(n,e),wi(e)&&n.queries.elementEnd(e)),wn}let Io=(e,n,t,i)=>(Rs(!0),Ld(n[It],""));function uv(){return ye()}function lv(e){return!!e&&"function"==typeof e.then}function lD(e){return!!e&&"function"==typeof e.subscribe}function vi(e,n,t,i){const o=ye(),l=Yt(),d=Cr();return function dD(e,n,t,i,o,l,d){const p=Xc(i),b=e.firstCreatePass&&jy(e),D=n[Vn],I=Uy(n);let R=!0;if(3&i.type||d){const Y=nr(i,n),de=d?d(Y):Y,we=I.length,le=d?yt=>d(yn(yt[i.index])):i.index;let Ze=null;if(!d&&p&&(Ze=function LI(e,n,t,i){const o=e.cleanup;if(null!=o)for(let l=0;l<o.length-1;l+=2){const d=o[l];if(d===t&&o[l+1]===i){const p=n[ci],m=o[l+2];return p.length>m?p[m]:null}"string"==typeof d&&(l+=2)}return null}(e,n,o,i.index)),null!==Ze)(Ze.__ngLastListenerFn__||Ze).__ngNextListenerFn__=l,Ze.__ngLastListenerFn__=l,R=!1;else{l=fD(i,n,D,l,!1);const yt=t.listen(de,o,l);I.push(l,yt),b&&b.push(o,le,we,we+1)}}else l=fD(i,n,D,l,!1);const j=i.outputs;let K;if(R&&null!==j&&(K=j[o])){const Y=K.length;if(Y)for(let de=0;de<Y;de+=2){const zt=n[K[de]][K[de+1]].subscribe(l),Fr=I.length;I.push(l,zt),b&&b.push(o,i.index,Fr,-(Fr+1))}}}(l,o,o[It],d,e,n,i),vi}function hD(e,n,t,i){try{return cs(6,n,t),!1!==t(i)}catch(o){return xu(e,o),!1}finally{cs(7,n,t)}}function fD(e,n,t,i,o){return function l(d){if(d===Function)return i;So(e.componentOffset>-1?Jr(e.index,n):n);let m=hD(n,t,i,d),b=l.__ngNextListenerFn__;for(;b;)m=hD(n,t,b,d)&&m,b=b.__ngNextListenerFn__;return o&&!1===m&&d.preventDefault(),m}}function fr(e=1){return function gl(e){return(bt.lFrame.contextLView=function Om(e,n){for(;e>0;)n=n[Wa],e--;return n}(e,bt.lFrame.contextLView))[Vn]}(e)}function cv(e,n,t,i,o){const l=ye(),d=Vs(l,n,t,i);return d!==Dt&&ri(Yt(),Dn(),l,e,d,l[It],o,!1),cv}function ut(e,n=""){const t=ye(),i=Yt(),o=e+Lt,l=i.firstCreatePass?_a(i,o,1,n,null):i.data[o],d=BD(i,t,l,n,e);t[o]=d,ml()&&Pl(i,t,d,l),Ii(l,!1)}let BD=(e,n,t,i,o)=>(Rs(!0),function Nd(e,n){return e.createText(n)}(n[It],i));function hn(e){return on("",e,""),hn}function on(e,n,t){const i=ye(),o=Vs(i,e,n,t);return o!==Dt&&Ri(i,rr(),o),on}const Oh="en-US";let o1=Oh;class mc{}class P1{}class IC extends mc{constructor(n,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qy(this);const o=Tr(n);this._bootstrapComponents=Us(o.bootstrap),this._r3Injector=nn(n,t,[{provide:mc,useValue:this},{provide:Mi,useValue:this.componentFactoryResolver},...i],ar(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class AC extends P1{constructor(n){super(),this.moduleType=n}create(n){return new IC(this.moduleType,n,[])}}class O1 extends mc{constructor(n){super(),this.componentFactoryResolver=new qy(this),this.instance=null;const t=new pa([...n.providers,{provide:mc,useValue:this},{provide:Mi,useValue:this.componentFactoryResolver}],n.parent||Yd(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function MC(e,n,t=null){return new O1({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}let PM=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=J0(0,t.type),o=i.length>0?MC([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=it({token:e,providedIn:"environment",factory:()=>new e(ze(mi))})}return e})();function R1(e){e.getStandaloneInjector=n=>n.get(PM).getOrCreateStandaloneInjector(e)}function ii(e,n,t,i){return function $1(e,n,t,i,o,l){const d=n+t;return Nr(e,d,o)?vs(e,d+1,l?i.call(l,o):i(o)):cg(e,d+1)}(ye(),Sr(),e,n,t,i)}function yv(e,n,t,i,o){return function V1(e,n,t,i,o,l,d){const p=n+t;return function Ta(e,n,t,i){const o=Nr(e,n,t);return Nr(e,n+1,i)||o}(e,p,o,l)?vs(e,p+2,d?i.call(d,o,l):i(o,l)):cg(e,p+2)}(ye(),Sr(),e,n,t,i,o)}function cg(e,n){const t=e[n];return t===Dt?void 0:t}function nk(){return this._results[Symbol.iterator]()}class PC{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Bn)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=PC.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=nk)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){const i=this;i.dirty=!1;const o=function Qn(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function gb(e,n,t){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++){let o=e[i],l=n[i];if(t&&(o=t(o),l=t(l)),l!==o)return!1}return!0}(i._results,o,t))&&(i._results=o,i.length=o.length,i.last=o[this.length-1],i.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function ik(e,n,t,i=!0){const o=n[qe];if(function XE(e,n,t,i){const o=cr+i,l=t.length;i>0&&(t[o-1][li]=n),i<l-cr?(n[li]=t[o],Kf(t,cr+i,n)):(t.push(n),n[li]=null),n[Sn]=t;const d=n[zo];null!==d&&t!==d&&function up(e,n){const t=e[qi];n[Nn]!==n[Sn][Sn][Nn]&&(e[um]=!0),null===t?e[qi]=[n]:t.push(n)}(d,n);const p=n[Hi];null!==p&&p.insertView(e),n[xt]|=128}(o,n,e,t),i){const l=Ud(t,e),d=n[It],p=Bd(d,e[Hn]);null!==p&&function Fb(e,n,t,i,o,l){i[Cn]=o,i[er]=n,_o(e,i,t,1,o,l)}(o,e[er],d,n,p,l)}}let Ca=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=ak}return e})();const sk=Ca,ok=class extends sk{constructor(n,t,i){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,i){const o=function rk(e,n,t,i){const o=n.tView,p=lh(e,o,t,4096&e[xt]?4096:16,null,n,null,null,null,i?.injector??null,i?.hydrationInfo??null);p[zo]=e[n.index];const b=e[Hi];return null!==b&&(p[Hi]=b.createEmbeddedView(o)),Iu(o,p,t),p}(this._declarationLView,this._declarationTContainer,n,{injector:t,hydrationInfo:i});return new sc(o)}};function ak(){return vv(Cr(),ye())}function vv(e,n){return 4&e.type?new ok(n,e,ki(e,n)):null}let Gs=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=fk}return e})();function fk(){return Z1(Cr(),ye())}const pk=Gs,Y1=class extends pk{constructor(n,t,i){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=i}get element(){return ki(this._hostTNode,this._hostLView)}get injector(){return new $t(this._hostTNode,this._hostLView)}get parentInjector(){const n=bd(this._hostTNode,this._hostLView);if(yd(n)){const t=na(n,this._hostLView),i=su(n);return new $t(t[qe].data[i+8],t)}return new $t(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=Q1(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-cr}createEmbeddedView(n,t,i){let o,l;"number"==typeof i?o=i:null!=i&&(o=i.index,l=i.injector);const p=n.createEmbeddedViewImpl(t||{},l,null);return this.insertImpl(p,o,false),p}createComponent(n,t,i,o,l){const d=n&&!function Yn(e){return"function"==typeof e}(n);let p;if(d)p=t;else{const Y=t||{};p=Y.index,i=Y.injector,o=Y.projectableNodes,l=Y.environmentInjector||Y.ngModuleRef}const m=d?n:new ac(Kt(n)),b=i||this.parentInjector;if(!l&&null==m.ngModule){const de=(d?b:this.parentInjector).get(mi,null);de&&(l=de)}Kt(m.componentType??{});const j=m.create(b,o,null,l);return this.insertImpl(j.hostView,p,false),j}insert(n,t){return this.insertImpl(n,t,!1)}insertImpl(n,t,i){const o=n._lView;if(function Tm(e){return Ft(e[Sn])}(o)){const m=this.indexOf(n);if(-1!==m)this.detach(m);else{const b=o[Sn],D=new Y1(b,b[er],b[Sn]);D.detach(D.indexOf(n))}}const d=this._adjustIndex(t),p=this._lContainer;return ik(p,o,d,!i),n.attachToViewContainerRef(),Kf(OC(p),d,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=Q1(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),i=gi(this._lContainer,t);i&&(Ls(OC(this._lContainer),t),kl(i[qe],i))}detach(n){const t=this._adjustIndex(n,-1),i=gi(this._lContainer,t);return i&&null!=Ls(OC(this._lContainer),t)?new sc(i):null}_adjustIndex(n,t=0){return n??this.length+t}};function Q1(e){return e[8]}function OC(e){return e[8]||(e[8]=[])}function Z1(e,n){let t;const i=n[e.index];return Ft(i)?t=i:(t=Up(i,n,null,e),n[e.index]=t,yh(n,t)),J1(t,n,e,i),new Y1(t,e,n)}let J1=function ew(e,n,t,i){if(e[Hn])return;let o;o=8&t.type?yn(i):function gk(e,n){const t=e[It],i=t.createComment(""),o=nr(n,e);return ua(t,Bd(t,o),i,function $b(e,n){return e.nextSibling(n)}(t,o),!1),i}(n,t),e[Hn]=o};class RC{constructor(n){this.queryList=n,this.matches=null}clone(){return new RC(this.queryList)}setDirty(){this.queryList.setDirty()}}class NC{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const i=null!==n.contentQueries?n.contentQueries[0]:t.length,o=[];for(let l=0;l<i;l++){const d=t.getByIndex(l);o.push(this.queries[d.indexInDeclarationView].clone())}return new NC(o)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==aw(n,t).matches&&this.queries[t].setDirty()}}class tw{constructor(n,t,i=null){this.predicate=n,this.flags=t,this.read=i}}class LC{constructor(n=[]){this.queries=n}elementStart(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let i=0;i<this.length;i++){const o=null!==t?t.length:0,l=this.getByIndex(i).embeddedTView(n,o);l&&(l.indexInDeclarationView=i,null!==t?t.push(l):t=[l])}return null!==t?new LC(t):null}template(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class FC{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new FC(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let o=0;o<i.length;o++){const l=i[o];this.matchTNodeWithReadOption(n,t,vk(t,l)),this.matchTNodeWithReadOption(n,t,Td(t,n,l,!1,!1))}else i===Ca?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,Td(t,n,i,!1,!1))}matchTNodeWithReadOption(n,t,i){if(null!==i){const o=this.metadata.read;if(null!==o)if(o===ni||o===Gs||o===Ca&&4&t.type)this.addMatch(t.index,-2);else{const l=Td(t,n,o,!1,!1);null!==l&&this.addMatch(t.index,l)}else this.addMatch(t.index,i)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function vk(e,n){const t=e.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===n)return t[i+1];return null}function bk(e,n,t,i){return-1===t?function _k(e,n){return 11&e.type?ki(e,n):4&e.type?vv(e,n):null}(n,e):-2===t?function Tk(e,n,t){return t===ni?ki(n,e):t===Ca?vv(n,e):t===Gs?Z1(n,e):void 0}(e,n,i):Ve(e,e[qe],t,n)}function nw(e,n,t,i){const o=n[Hi].queries[i];if(null===o.matches){const l=e.data,d=t.matches,p=[];for(let m=0;m<d.length;m+=2){const b=d[m];p.push(b<0?null:bk(n,l[b],d[m+1],t.metadata.read))}o.matches=p}return o.matches}function BC(e,n,t,i){const o=e.queries.getByIndex(t),l=o.matches;if(null!==l){const d=nw(e,n,o,t);for(let p=0;p<l.length;p+=2){const m=l[p];if(m>0)i.push(d[p/2]);else{const b=l[p+1],D=n[-m];for(let I=cr;I<D.length;I++){const R=D[I];R[zo]===R[Sn]&&BC(R[qe],R,b,i)}if(null!==D[qi]){const I=D[qi];for(let R=0;R<I.length;R++){const j=I[R];BC(j[qe],j,b,i)}}}}}return i}function UC(e){const n=ye(),t=Yt(),i=Mf();kf(i+1);const o=aw(t,i);if(e.dirty&&function bm(e){return 4==(4&e[xt])}(n)===(2==(2&o.metadata.flags))){if(null===o.matches)e.reset([]);else{const l=o.crossesNgTemplate?BC(t,n,i,[]):nw(t,n,o,i);e.reset(l,ma),e.notifyOnChanges()}return!0}return!1}function rw(e,n,t){const i=Yt();i.firstCreatePass&&(function ow(e,n,t){null===e.queries&&(e.queries=new LC),e.queries.track(new FC(n,t))}(i,new tw(e,n,t),-1),2==(2&n)&&(i.staticViewQueries=!0)),function sw(e,n,t){const i=new PC(4==(4&t));(function My(e,n,t,i){const o=Uy(n);o.push(t),e.firstCreatePass&&jy(e).push(i,o.length-1)})(e,n,i,i.destroy),null===n[Hi]&&(n[Hi]=new NC),n[Hi].queries.push(new RC(i))}(i,ye(),n)}function aw(e,n){return e.queries.getByIndex(n)}function $C(e,n){return vv(e,n)}const WC=new et("Application Initializer");let XC=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Ye(WC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const o of this.appInits){const l=o();if(lv(l))t.push(l);else if(lD(l)){const d=new Promise((p,m)=>{l.subscribe({complete:p,error:m})});t.push(d)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(o=>{this.reject(o)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ew=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const Sa=new et("LocaleId",{providedIn:"root",factory:()=>Ye(Sa,Ot.Optional|Ot.SkipSelf)||function qk(){return typeof $localize<"u"&&$localize.locale||Oh}()});let Tv=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new oi(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class Wk{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let Dw=(()=>{class e{compileModuleSync(t){return new AC(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),l=Us(Tr(t).declarations).reduce((d,p)=>{const m=Kt(p);return m&&d.push(new ac(m)),d},[]);return new Wk(i,l)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Aw=new et(""),Sv=new et("");let JC,QC=(()=>{class e{constructor(t,i,o){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,JC||(function gP(e){JC=e}(o),o.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_n.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,o){let l=-1;i&&i>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==l),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:l,updateCb:o})}whenStable(t,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,o){return[]}static#e=this.\u0275fac=function(i){return new(i||e)(ze(_n),ze(ZC),ze(Sv))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})(),ZC=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return JC?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),Fu=null;const Mw=new et("AllowMultipleToken"),eS=new et("PlatformDestroyListeners"),tS=new et("appBootstrapListener");class Pw{constructor(n,t){this.name=n,this.token=t}}function Rw(e,n,t=[]){const i=`Platform: ${n}`,o=new et(i);return(l=[])=>{let d=nS();if(!d||d.injector.get(Mw,!1)){const p=[...t,...l,{provide:o,useValue:!0}];e?e(p):function vP(e){if(Fu&&!Fu.get(Mw,!1))throw new Oe(400,!1);(function kw(){!function pm(e){rd=e}(()=>{throw new Oe(600,!1)})})(),Fu=e;const n=e.get(Lw);(function Ow(e){e.get(oy,null)?.forEach(t=>t())})(e)}(function Nw(e=[],n){return Pi.create({name:n,providers:[{provide:Cp,useValue:"platform"},{provide:eS,useValue:new Set([()=>Fu=null])},...e]})}(p,i))}return function bP(e){const n=nS();if(!n)throw new Oe(401,!1);return n}()}}function nS(){return Fu?.get(Lw)??null}let Lw=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const o=function TP(e="zone.js",n){return"noop"===e?new kT:"zone.js"===e?new _n(n):e}(i?.ngZone,function Fw(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{const l=function kM(e,n,t){return new IC(e,n,t)}(t.moduleType,this.injector,function Vw(e){return[{provide:_n,useFactory:e},{provide:bo,multi:!0,useFactory:()=>{const n=Ye(SP,{optional:!0});return()=>n.initialize()}},{provide:$w,useFactory:CP},{provide:by,useFactory:Ty}]}(()=>o)),d=l.injector.get(Qi,null);return o.runOutsideAngular(()=>{const p=o.onError.subscribe({next:m=>{d.handleError(m)}});l.onDestroy(()=>{Ev(this._modules,l),p.unsubscribe()})}),function Bw(e,n,t){try{const i=t();return lv(i)?i.catch(o=>{throw n.runOutsideAngular(()=>e.handleError(o)),o}):i}catch(i){throw n.runOutsideAngular(()=>e.handleError(i)),i}}(d,o,()=>{const p=l.injector.get(XC);return p.runInitializers(),p.donePromise.then(()=>(function a1(e){ji(e,"Expected localeId to be defined"),"string"==typeof e&&(o1=e.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Sa,Oh)||Oh),this._moduleDoBootstrap(l),l))})})}bootstrapModule(t,i=[]){const o=Uw({},i);return function mP(e,n,t){const i=new AC(t);return Promise.resolve(i)}(0,0,t).then(l=>this.bootstrapModuleFactory(l,o))}_moduleDoBootstrap(t){const i=t.injector.get(Lh);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>i.bootstrap(o));else{if(!t.instance.ngDoBootstrap)throw new Oe(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(eS,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||e)(ze(Pi))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function Uw(e,n){return Array.isArray(n)?n.reduce(Uw,e):{...e,...n}}let Lh=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ye($w),this.zoneIsStable=Ye(by),this.componentTypes=[],this.components=[],this.isStable=Ye(Tv).hasPendingTasks.pipe(ai(t=>t?ot(!1):this.zoneIsStable),function T_(e,n=xe){return e=e??C_,Le((t,i)=>{let o,l=!0;t.subscribe(Ue(i,d=>{const p=n(d);(l||!e(o,p))&&(l=!1,o=p,i.next(d))}))})}(),Zh()),this._injector=Ye(mi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const o=t instanceof hr;if(!this._injector.get(XC).done)throw!o&&function Ho(e){const n=Kt(e)||br(e)||$n(e);return null!==n&&n.standalone}(t),new Oe(405,!1);let d;d=o?t:this._injector.get(Mi).resolveComponentFactory(t),this.componentTypes.push(d.componentType);const p=function yP(e){return e.isBoundToModule}(d)?void 0:this._injector.get(mc),b=d.create(Pi.NULL,[],i||d.selector,p),D=b.location.nativeElement,I=b.injector.get(Aw,null);return I?.registerApplication(D),b.onDestroy(()=>{this.detachView(b.hostView),Ev(this.components,b),I?.unregisterApplication(D)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Oe(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Ev(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(tS,[]);i.push(...this._bootstrapListeners),i.forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ev(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Oe(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ev(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}const $w=new et("",{providedIn:"root",factory:()=>Ye(Qi).handleError.bind(void 0)});function CP(){const e=Ye(_n),n=Ye(Qi);return t=>e.runOutsideAngular(()=>n.handleError(t))}let SP=(()=>{class e{constructor(){this.zone=Ye(_n),this.applicationRef=Ye(Lh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();let Dv=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=DP}return e})();function DP(e){return function wP(e,n,t){if(ao(e)&&!t){const i=Jr(e.index,n);return new sc(i,i)}return 47&e.type?new sc(n[Nn],n):null}(Cr(),ye(),16==(16&e))}class Gw{constructor(){}supports(n){return Ch(n)}create(n){return new PP(n)}}const kP=(e,n)=>n;class PP{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||kP}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,i=this._removalsHead,o=0,l=null;for(;t||i;){const d=!i||t&&t.currentIndex<Xw(i,o,l)?t:i,p=Xw(d,o,l),m=d.currentIndex;if(d===i)o--,i=i._nextRemoved;else if(t=t._next,null==d.previousIndex)o++;else{l||(l=[]);const b=p-o,D=m-o;if(b!=D){for(let R=0;R<b;R++){const j=R<l.length?l[R]:l[R]=0,K=j+R;D<=K&&K<b&&(l[R]=j+1)}l[d.previousIndex]=D-b}}p!==m&&n(d,p,m)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!Ch(n))throw new Oe(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o,l,d,t=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let p=0;p<this.length;p++)l=n[p],d=this._trackByFn(p,l),null!==t&&Object.is(t.trackById,d)?(i&&(t=this._verifyReinsertion(t,l,d,p)),Object.is(t.item,l)||this._addIdentityChange(t,l)):(t=this._mismatch(t,l,d,p),i=!0),t=t._next}else o=0,function lC(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let i;for(;!(i=t.next()).done;)n(i.value)}}(n,p=>{d=this._trackByFn(o,p),null!==t&&Object.is(t.trackById,d)?(i&&(t=this._verifyReinsertion(t,p,d,o)),Object.is(t.item,p)||this._addIdentityChange(t,p)):(t=this._mismatch(t,p,d,o),i=!0),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,i,o){let l;return null===n?l=this._itTail:(l=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,l,o)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,o))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,l,o)):n=this._addAfter(new OP(t,i),l,o),n}_verifyReinsertion(n,t,i,o){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==l?n=this._reinsertAfter(l,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,l=n._nextRemoved;return null===o?this._removalsHead=l:o._nextRemoved=l,null===l?this._removalsTail=o:l._prevRemoved=o,this._insertAfter(n,t,i),this._addToMoves(n,i),n}_moveAfter(n,t,i){return this._unlink(n),this._insertAfter(n,t,i),this._addToMoves(n,i),n}_addAfter(n,t,i){return this._insertAfter(n,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,i){const o=null===t?this._itHead:t._next;return n._next=o,n._prev=t,null===o?this._itTail=n:o._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new Ww),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,i=n._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ww),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class OP{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class RP{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const t=n._prevDup,i=n._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class Ww{constructor(){this.map=new Map}put(n){const t=n.trackById;let i=this.map.get(t);i||(i=new RP,this.map.set(t,i)),i.add(n)}get(n,t){const o=this.map.get(n);return o?o.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Xw(e,n,t){const i=e.previousIndex;if(null===i)return i;let o=0;return t&&i<t.length&&(o=t[i]),i+n+o}class Kw{constructor(){}supports(n){return n instanceof Map||Hp(n)}create(){return new NP}}class NP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let t;for(t=this._mapHead;null!==t;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}diff(n){if(n){if(!(n instanceof Map||Hp(n)))throw new Oe(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,o)=>{if(t&&t.key===o)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const l=this._getOrCreateRecordForKey(o,i);t=this._insertBeforeOrAppend(t,l)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){const i=n._prev;return t._next=n,t._prev=i,n._prev=t,i&&(i._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){const o=this._records.get(n);this._maybeAddToChanges(o,t);const l=o._prev,d=o._next;return l&&(l._next=d),d&&(d._prev=l),o._next=null,o._prev=null,o}const i=new LP(n);return this._records.set(n,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(i=>t(n[i],i))}}class LP{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Yw(){return new Iv([new Gw])}let Iv=(()=>{class e{static#e=this.\u0275prov=it({token:e,providedIn:"root",factory:Yw});constructor(t){this.factories=t}static create(t,i){if(null!=i){const o=i.factories.slice();t=t.concat(o)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||Yw()),deps:[[e,new xd,new El]]}}find(t){const i=this.factories.find(o=>o.supports(t));if(null!=i)return i;throw new Oe(901,!1)}}return e})();function Qw(){return new pg([new Kw])}let pg=(()=>{class e{static#e=this.\u0275prov=it({token:e,providedIn:"root",factory:Qw});constructor(t){this.factories=t}static create(t,i){if(i){const o=i.factories.slice();t=t.concat(o)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||Qw()),deps:[[e,new xd,new El]]}}find(t){const i=this.factories.find(o=>o.supports(t));if(i)return i;throw new Oe(901,!1)}}return e})();const UP=Rw(null,"core",[]);let jP=(()=>{class e{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||e)(ze(Lh))};static#t=this.\u0275mod=Pr({type:e});static#n=this.\u0275inj=Rn({})}return e})();function uS(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let lS=null;function Fh(){return lS}class eO{}const ts=new et("DocumentToken");let cS=(()=>{class e{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:function(){return Ye(nO)},providedIn:"platform"})}return e})();const tO=new et("Location Initialized");let nO=(()=>{class e extends cS{constructor(){super(),this._doc=Ye(ts),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fh().getBaseHref(this._doc)}onPopState(t){const i=Fh().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Fh().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,o){this._history.pushState(t,i,o)}replaceState(t,i,o){this._history.replaceState(t,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:function(){return new e},providedIn:"platform"})}return e})();function dS(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function o2(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function Ea(e){return e&&"?"!==e[0]?"?"+e:e}let vc=(()=>{class e{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:function(){return Ye(u2)},providedIn:"root"})}return e})();const a2=new et("appBaseHref");let u2=(()=>{class e extends vc{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ye(ts).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return dS(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ea(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${i}${o}`:i}pushState(t,i,o,l){const d=this.prepareExternalUrl(o+Ea(l));this._platformLocation.pushState(t,i,d)}replaceState(t,i,o,l){const d=this.prepareExternalUrl(o+Ea(l));this._platformLocation.replaceState(t,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||e)(ze(cS),ze(a2,8))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),rO=(()=>{class e extends vc{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=dS(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,o,l){let d=this.prepareExternalUrl(o+Ea(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,i,d)}replaceState(t,i,o,l){let d=this.prepareExternalUrl(o+Ea(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||e)(ze(cS),ze(a2,8))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})(),hS=(()=>{class e{constructor(t){this._subject=new Bn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function oO(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(o2(l2(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ea(i))}normalize(t){return e.stripTrailingSlash(function sO(e,n){if(!e||!n.startsWith(e))return n;const t=n.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:n}(this._basePath,l2(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",o=null){this._locationStrategy.pushState(o,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ea(i)),o)}replaceState(t,i="",o=null){this._locationStrategy.replaceState(o,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ea(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(o=>o(t,i))}subscribe(t,i,o){return this._subject.subscribe({next:t,error:i,complete:o})}static#e=this.normalizeQueryParams=Ea;static#t=this.joinWithSlash=dS;static#n=this.stripTrailingSlash=o2;static#r=this.\u0275fac=function(i){return new(i||e)(ze(vc))};static#i=this.\u0275prov=it({token:e,factory:function(){return function iO(){return new hS(ze(vc))}()},providedIn:"root"})}return e})();function l2(e){return e.replace(/\/index.html$/,"")}function v2(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const i=t.indexOf("="),[o,l]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(o.trim()===n)return decodeURIComponent(l)}return null}const CS=/\s+/,_2=[];let yg=(()=>{class e{constructor(t,i,o,l){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=o,this._renderer=l,this.initialClasses=_2,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(CS):_2}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(CS):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const o=this.stateMap.get(t);void 0!==o?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],o=t[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(CS).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static#e=this.\u0275fac=function(i){return new(i||e)(je(Iv),je(pg),je(ni),je(ms))};static#t=this.\u0275dir=Wn({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return e})();class zO{constructor(n,t,i,o){this.$implicit=n,this.ngForOf=t,this.index=i,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let jv=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,o){this._viewContainer=t,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((o,l,d)=>{if(null==o.previousIndex)i.createEmbeddedView(this._template,new zO(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)i.remove(null===l?void 0:l);else if(null!==l){const p=i.get(l);i.move(p,d),T2(p,o)}});for(let o=0,l=i.length;o<l;o++){const p=i.get(o).context;p.index=o,p.count=l,p.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{T2(i.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||e)(je(Gs),je(Ca),je(Iv))};static#t=this.\u0275dir=Wn({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function T2(e,n){e.context.$implicit=n.item}let Uh=(()=>{class e{constructor(t,i){this._viewContainer=t,this._context=new GO,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){C2("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){C2("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||e)(je(Gs),je(Ca))};static#t=this.\u0275dir=Wn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return e})();class GO{constructor(){this.$implicit=null,this.ngIf=null}}function C2(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${ar(n)}'.`)}let E2=(()=>{class e{constructor(t,i,o){this._ngEl=t,this._differs=i,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[o,l]=t.split("."),d=-1===o.indexOf("-")?void 0:Xi.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,o,l?`${i}${l}`:i,d):this._renderer.removeStyle(this._ngEl.nativeElement,o,d)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static#e=this.\u0275fac=function(i){return new(i||e)(je(ni),je(pg),je(ms))};static#t=this.\u0275dir=Wn({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return e})(),vR=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Pr({type:e});static#n=this.\u0275inj=Rn({})}return e})();function x2(e){return"server"===e}let CR=(()=>{class e{static#e=this.\u0275prov=it({token:e,providedIn:"root",factory:()=>new SR(ze(ts),window)})}return e})();class SR{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function ER(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let o=i.currentNode;for(;o;){const l=o.shadowRoot;if(l){const d=l.getElementById(n)||l.querySelector(`[name="${n}"]`);if(d)return d}o=i.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){this.supportsScrolling()&&(this.window.history.scrollRestoration=n)}scrollToElement(n){const t=n.getBoundingClientRect(),i=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(i-l[0],o-l[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class I2{}class WR extends eO{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class AS extends WR{static makeCurrent(){!function JP(e){lS||(lS=e)}(new AS)}onAndCancel(n,t,i){return n.addEventListener(t,i),()=>{n.removeEventListener(t,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function XR(){return _g=_g||document.querySelector("base"),_g?_g.getAttribute("href"):null}();return null==t?null:function KR(e){Hv=Hv||document.createElement("a"),Hv.setAttribute("href",e);const n=Hv.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){_g=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return v2(document.cookie,n)}}let Hv,_g=null,QR=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})();const MS=new et("EventManagerPlugins");let O2=(()=>{class e{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,o){return this._findPluginFor(i).addEventListener(t,i,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(l=>l.supports(t)),!i)throw new Oe(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||e)(ze(MS),ze(_n))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})();class R2{constructor(n){this._doc=n}}const kS="ng-app-id";let N2=(()=>{class e{constructor(t,i,o,l={}){this.doc=t,this.appId=i,this.nonce=o,this.platformId=l,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=x2(l),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(o=>o.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${kS}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(o=>{null!=o.textContent&&i.set(o.textContent,o)}),i}return null}changeUsageCount(t,i){const o=this.styleRef;if(o.has(t)){const l=o.get(t);return l.usage+=i,l.usage}return o.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const o=this.styleNodesInDOM,l=o?.get(i);if(l?.parentNode===t)return o.delete(i),l.removeAttribute(kS),l;{const d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=i,this.platformIsServer&&d.setAttribute(kS,this.appId),d}}addStyleToHost(t,i){const o=this.getStyleElement(t,i);t.appendChild(o);const l=this.styleRef,d=l.get(i)?.elements;d?d.push(o):l.set(i,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||e)(ze(ts),ze(Zd),ze(ay,8),ze(ga))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})();const PS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},OS=/%COMP%/g,tN=new et("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function F2(e,n){return n.map(t=>t.replace(OS,e))}let B2=(()=>{class e{constructor(t,i,o,l,d,p,m,b=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=l,this.doc=d,this.platformId=p,this.ngZone=m,this.nonce=b,this.rendererByCompId=new Map,this.platformIsServer=x2(p),this.defaultRenderer=new RS(t,d,m,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===kr.ShadowDom&&(i={...i,encapsulation:kr.Emulated});const o=this.getOrCreateRenderer(t,i);return o instanceof j2?o.applyToHost(t):o instanceof NS&&o.applyStyles(),o}getOrCreateRenderer(t,i){const o=this.rendererByCompId;let l=o.get(i.id);if(!l){const d=this.doc,p=this.ngZone,m=this.eventManager,b=this.sharedStylesHost,D=this.removeStylesOnCompDestroy,I=this.platformIsServer;switch(i.encapsulation){case kr.Emulated:l=new j2(m,b,i,this.appId,D,d,p,I);break;case kr.ShadowDom:return new sN(m,b,t,i,d,p,this.nonce,I);default:l=new NS(m,b,i,D,d,p,I)}o.set(i.id,l)}return l}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||e)(ze(O2),ze(N2),ze(Zd),ze(tN),ze(ts),ze(ga),ze(_n),ze(ay))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})();class RS{constructor(n,t,i,o){this.eventManager=n,this.doc=t,this.ngZone=i,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(PS[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(U2(n)?n.content:n).appendChild(t)}insertBefore(n,t,i){n&&(U2(n)?n.content:n).insertBefore(t,i)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new Oe(-5104,!1);return t||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,i,o){if(o){t=o+":"+t;const l=PS[o];l?n.setAttributeNS(l,t,i):n.setAttribute(t,i)}else n.setAttribute(t,i)}removeAttribute(n,t,i){if(i){const o=PS[i];o?n.removeAttributeNS(o,t):n.removeAttribute(`${i}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,i,o){o&(Xi.DashCase|Xi.Important)?n.style.setProperty(t,i,o&Xi.Important?"important":""):n.style[t]=i}removeStyle(n,t,i){i&Xi.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,i){n[t]=i}setValue(n,t){n.nodeValue=t}listen(n,t,i){if("string"==typeof n&&!(n=Fh().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(i))}decoratePreventDefault(n){return t=>{if("__ngUnwrap__"===t)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))&&t.preventDefault()}}}function U2(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class sN extends RS{constructor(n,t,i,o,l,d,p,m){super(n,l,d,m),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const b=F2(o.id,o.styles);for(const D of b){const I=document.createElement("style");p&&I.setAttribute("nonce",p),I.textContent=D,this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,i){return super.insertBefore(this.nodeOrShadowRoot(n),t,i)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class NS extends RS{constructor(n,t,i,o,l,d,p,m){super(n,l,d,p),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=m?F2(m,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class j2 extends NS{constructor(n,t,i,o,l,d,p,m){const b=o+"-"+i.id;super(n,t,i,l,d,p,m,b),this.contentAttr=function nN(e){return"_ngcontent-%COMP%".replace(OS,e)}(b),this.hostAttr=function rN(e){return"_nghost-%COMP%".replace(OS,e)}(b)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const i=super.createElement(n,t);return super.setAttribute(i,this.contentAttr,""),i}}let oN=(()=>{class e extends R2{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,o){return t.addEventListener(i,o,!1),()=>this.removeEventListener(t,i,o)}removeEventListener(t,i,o){return t.removeEventListener(i,o)}static#e=this.\u0275fac=function(i){return new(i||e)(ze(ts))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})();const $2=["alt","control","meta","shift"],aN={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uN={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let lN=(()=>{class e extends R2{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,i,o){const l=e.parseEventName(i),d=e.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fh().onAndCancel(t,l.domEventName,d))}static parseEventName(t){const i=t.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const l=e._normalizeKey(i.pop());let d="",p=i.indexOf("code");if(p>-1&&(i.splice(p,1),d="code."),$2.forEach(b=>{const D=i.indexOf(b);D>-1&&(i.splice(D,1),d+=b+".")}),d+=l,0!=i.length||0===l.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static matchEventFullKeyCode(t,i){let o=aN[t.key]||t.key,l="";return i.indexOf("code.")>-1&&(o=t.code,l="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),$2.forEach(d=>{d!==o&&(0,uN[d])(t)&&(l+=d+".")}),l+=o,l===i)}static eventCallback(t,i,o){return l=>{e.matchEventFullKeyCode(l,t)&&o.runGuarded(()=>i(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||e)(ze(ts))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})();const fN=Rw(UP,"browser",[{provide:ga,useValue:"browser"},{provide:oy,useValue:function cN(){AS.makeCurrent()},multi:!0},{provide:ts,useFactory:function hN(){return function Gb(e){pp=e}(document),document},deps:[]}]),pN=new et(""),q2=[{provide:Sv,useClass:class YR{addToWindow(n){mn.getAngularTestability=(i,o=!0)=>{const l=n.findTestabilityInTree(i,o);if(null==l)throw new Oe(5103,!1);return l},mn.getAllAngularTestabilities=()=>n.getAllTestabilities(),mn.getAllAngularRootElements=()=>n.getAllRootElements(),mn.frameworkStabilizers||(mn.frameworkStabilizers=[]),mn.frameworkStabilizers.push(i=>{const o=mn.getAllAngularTestabilities();let l=o.length,d=!1;const p=function(m){d=d||m,l--,0==l&&i(d)};o.forEach(m=>{m.whenStable(p)})})}findTestabilityInTree(n,t,i){return null==t?null:n.getTestability(t)??(i?Fh().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:Aw,useClass:QC,deps:[_n,ZC,Sv]},{provide:QC,useClass:QC,deps:[_n,ZC,Sv]}],z2=[{provide:Cp,useValue:"root"},{provide:Qi,useFactory:function dN(){return new Qi},deps:[]},{provide:MS,useClass:oN,multi:!0,deps:[ts,_n,ga]},{provide:MS,useClass:lN,multi:!0,deps:[ts]},B2,N2,O2,{provide:Co,useExisting:B2},{provide:I2,useClass:QR,deps:[]},[]];let gN=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:Zd,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||e)(ze(pN,12))};static#t=this.\u0275mod=Pr({type:e});static#n=this.\u0275inj=Rn({providers:[...z2,...q2],imports:[vR,jP]})}return e})(),G2=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||e)(ze(ts))};static#t=this.\u0275prov=it({token:e,factory:function(i){let o=null;return o=i?new i:function yN(){return new G2(ze(ts))}(),o},providedIn:"root"})}return e})();function _c(e,n){return fe(n)?sn(e,n,1):sn(e,1)}function xa(e,n){return Le((t,i)=>{let o=0;t.subscribe(Ue(i,l=>e.call(n,l,o++)&&i.next(l)))})}function bg(e){return Le((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}typeof window<"u"&&window;class qv{}class zv{}class ko{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const o=t.slice(0,i),l=o.toLowerCase(),d=t.slice(i+1).trim();this.maybeSetNormalizedName(o,l),this.headers.has(l)?this.headers.get(l).push(d):this.headers.set(l,[d])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof ko?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new ko;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ko?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,t);const o=("a"===n.op?this.headers.get(t):void 0)||[];o.push(...i),this.headers.set(t,o);break;case"d":const l=n.value;if(l){let d=this.headers.get(t);if(!d)return;d=d.filter(p=>-1===l.indexOf(p)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(n,t){const i=(Array.isArray(t)?t:[t]).map(l=>l.toString()),o=n.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(n,o)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class CN{encodeKey(n){return Y2(n)}encodeValue(n){return Y2(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const EN=/%(\d[a-f0-9])/gi,DN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Y2(e){return encodeURIComponent(e).replace(EN,(n,t)=>DN[t]??n)}function Gv(e){return`${e}`}class Uu{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new CN,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function SN(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(o=>{const l=o.indexOf("="),[d,p]=-1==l?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,l)),n.decodeValue(o.slice(l+1))],m=t.get(d)||[];m.push(p),t.set(d,m)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const i=n.fromObject[t],o=Array.isArray(i)?i.map(Gv):[Gv(i)];this.map.set(t,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(i=>{const o=n[i];Array.isArray(o)?o.forEach(l=>{t.push({param:i,value:l,op:"a"})}):t.push({param:i,value:o,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new Uu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(Gv(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const o=i.indexOf(Gv(n.value));-1!==o&&i.splice(o,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class wN{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function Q2(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function Z2(e){return typeof Blob<"u"&&e instanceof Blob}function J2(e){return typeof FormData<"u"&&e instanceof FormData}class Tg{constructor(n,t,i,o){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function xN(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==i?i:null,l=o):l=i,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new ko),this.context||(this.context=new wN),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+d}}else this.params=new Uu,this.urlWithParams=t}serializeBody(){return null===this.body?null:Q2(this.body)||Z2(this.body)||J2(this.body)||function IN(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Uu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||J2(this.body)?null:Z2(this.body)?this.body.type||null:Q2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Uu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,i=n.url||this.url,o=n.responseType||this.responseType,l=void 0!==n.body?n.body:this.body,d=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,p=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let m=n.headers||this.headers,b=n.params||this.params;const D=n.context??this.context;return void 0!==n.setHeaders&&(m=Object.keys(n.setHeaders).reduce((I,R)=>I.set(R,n.setHeaders[R]),m)),n.setParams&&(b=Object.keys(n.setParams).reduce((I,R)=>I.set(R,n.setParams[R]),b)),new Tg(t,i,l,{params:b,headers:m,context:D,reportProgress:p,responseType:o,withCredentials:d})}}var jh=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(jh||{});class FS{constructor(n,t=200,i="OK"){this.headers=n.headers||new ko,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class BS extends FS{constructor(n={}){super(n),this.type=jh.ResponseHeader}clone(n={}){return new BS({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class $h extends FS{constructor(n={}){super(n),this.type=jh.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new $h({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class ex extends FS{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function US(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let jS=(()=>{class e{constructor(t){this.handler=t}request(t,i,o={}){let l;if(t instanceof Tg)l=t;else{let m,b;m=o.headers instanceof ko?o.headers:new ko(o.headers),o.params&&(b=o.params instanceof Uu?o.params:new Uu({fromObject:o.params})),l=new Tg(t,i,void 0!==o.body?o.body:null,{headers:m,context:o.context,params:b,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const d=ot(l).pipe(_c(m=>this.handler.handle(m)));if(t instanceof Tg||"events"===o.observe)return d;const p=d.pipe(xa(m=>m instanceof $h));switch(o.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return p.pipe(ft(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return p.pipe(ft(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return p.pipe(ft(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return p.pipe(ft(m=>m.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Uu).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,o={}){return this.request("PATCH",t,US(o,i))}post(t,i,o={}){return this.request("POST",t,US(o,i))}put(t,i,o={}){return this.request("PUT",t,US(o,i))}static#e=this.\u0275fac=function(i){return new(i||e)(ze(qv))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})();function rx(e,n){return n(e)}function MN(e,n){return(t,i)=>n.intercept(t,{handle:o=>e(o,i)})}const PN=new et(""),Cg=new et(""),ix=new et("");function ON(){let e=null;return(n,t)=>{null===e&&(e=(Ye(PN,{optional:!0})??[]).reduceRight(MN,rx));const i=Ye(Tv),o=i.add();return e(n,t).pipe(bg(()=>i.remove(o)))}}let sx=(()=>{class e extends qv{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=Ye(Tv)}handle(t){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(Cg),...this.injector.get(ix,[])]));this.chain=o.reduceRight((l,d)=>function kN(e,n,t){return(i,o)=>t.runInContext(()=>n(i,l=>e(l,o)))}(l,d,this.injector),rx)}const i=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(bg(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||e)(ze(zv),ze(mi))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})();const FN=/^\)\]\}',?\n/;let ax=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Oe(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?vr(i.\u0275loadImpl()):ot(null)).pipe(ai(()=>new Se(l=>{const d=i.build();if(d.open(t.method,t.urlWithParams),t.withCredentials&&(d.withCredentials=!0),t.headers.forEach((Y,de)=>d.setRequestHeader(Y,de.join(","))),t.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Y=t.detectContentTypeHeader();null!==Y&&d.setRequestHeader("Content-Type",Y)}if(t.responseType){const Y=t.responseType.toLowerCase();d.responseType="json"!==Y?Y:"text"}const p=t.serializeBody();let m=null;const b=()=>{if(null!==m)return m;const Y=d.statusText||"OK",de=new ko(d.getAllResponseHeaders()),we=function BN(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(d)||t.url;return m=new BS({headers:de,status:d.status,statusText:Y,url:we}),m},D=()=>{let{headers:Y,status:de,statusText:we,url:le}=b(),Ze=null;204!==de&&(Ze=typeof d.response>"u"?d.responseText:d.response),0===de&&(de=Ze?200:0);let yt=de>=200&&de<300;if("json"===t.responseType&&"string"==typeof Ze){const zt=Ze;Ze=Ze.replace(FN,"");try{Ze=""!==Ze?JSON.parse(Ze):null}catch(Fr){Ze=zt,yt&&(yt=!1,Ze={error:Fr,text:Ze})}}yt?(l.next(new $h({body:Ze,headers:Y,status:de,statusText:we,url:le||void 0})),l.complete()):l.error(new ex({error:Ze,headers:Y,status:de,statusText:we,url:le||void 0}))},I=Y=>{const{url:de}=b(),we=new ex({error:Y,status:d.status||0,statusText:d.statusText||"Unknown Error",url:de||void 0});l.error(we)};let R=!1;const j=Y=>{R||(l.next(b()),R=!0);let de={type:jh.DownloadProgress,loaded:Y.loaded};Y.lengthComputable&&(de.total=Y.total),"text"===t.responseType&&d.responseText&&(de.partialText=d.responseText),l.next(de)},K=Y=>{let de={type:jh.UploadProgress,loaded:Y.loaded};Y.lengthComputable&&(de.total=Y.total),l.next(de)};return d.addEventListener("load",D),d.addEventListener("error",I),d.addEventListener("timeout",I),d.addEventListener("abort",I),t.reportProgress&&(d.addEventListener("progress",j),null!==p&&d.upload&&d.upload.addEventListener("progress",K)),d.send(p),l.next({type:jh.Sent}),()=>{d.removeEventListener("error",I),d.removeEventListener("abort",I),d.removeEventListener("load",D),d.removeEventListener("timeout",I),t.reportProgress&&(d.removeEventListener("progress",j),null!==p&&d.upload&&d.upload.removeEventListener("progress",K)),d.readyState!==d.DONE&&d.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||e)(ze(I2))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})();const $S=new et("XSRF_ENABLED"),ux=new et("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),lx=new et("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class cx{}let $N=(()=>{class e{constructor(t,i,o){this.doc=t,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=v2(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||e)(ze(ts),ze(ga),ze(ux))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})();function VN(e,n){const t=e.url.toLowerCase();if(!Ye($S)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n(e);const i=Ye(cx).getToken(),o=Ye(lx);return null!=i&&!e.headers.has(o)&&(e=e.clone({headers:e.headers.set(o,i)})),n(e)}var ju=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(ju||{});function HN(...e){const n=[jS,ax,sx,{provide:qv,useExisting:sx},{provide:zv,useExisting:ax},{provide:Cg,useValue:VN,multi:!0},{provide:$S,useValue:!0},{provide:cx,useClass:$N}];for(const t of e)n.push(...t.\u0275providers);return function bp(e){return{\u0275providers:e}}(n)}const dx=new et("LEGACY_INTERCEPTOR_FN");function qN(){return function bc(e,n){return{\u0275kind:e,\u0275providers:n}}(ju.LegacyInterceptors,[{provide:dx,useFactory:ON},{provide:Cg,useExisting:dx,multi:!0}])}let zN=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Pr({type:e});static#n=this.\u0275inj=Rn({providers:[HN(qN())]})}return e})();function Tc(e){return!!e&&(e instanceof Se||fe(e.lift)&&fe(e.subscribe))}const{isArray:QN}=Array,{getPrototypeOf:ZN,prototype:JN,keys:eL}=Object;function hx(e){if(1===e.length){const n=e[0];if(QN(n))return{args:n,keys:null};if(function tL(e){return e&&"object"==typeof e&&ZN(e)===JN}(n)){const t=eL(n);return{args:t.map(i=>n[i]),keys:t}}}return{args:e,keys:null}}const{isArray:nL}=Array;function fx(e){return ft(n=>function rL(e,n){return nL(n)?e(...n):e(n)}(e,n))}function px(e,n){return e.reduce((t,i,o)=>(t[i]=n[o],t),{})}function Sg(...e){return function sL(){return or(1)}()(vr(e,jn(e)))}function Xv(e){return new Se(n=>{Mr(e()).subscribe(n)})}function Po(e){return e<=0?()=>Jn:Le((n,t)=>{let i=0;n.subscribe(Ue(t,o=>{++i<=e&&(t.next(o),e<=i&&t.complete())}))})}const gx={now:()=>(gx.delegate||Date).now(),delegate:void 0};class oL extends $e{constructor(n=1/0,t=1/0,i=gx){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){const{isStopped:t,_buffer:i,_infiniteTimeWindow:o,_timestampProvider:l,_windowTime:d}=this;t||(i.push(n),!o&&i.push(l.now()+d)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(n),{_infiniteTimeWindow:i,_buffer:o}=this,l=o.slice();for(let d=0;d<l.length&&!n.closed;d+=i?1:2)n.next(l[d]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){const{_bufferSize:n,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:o}=this,l=(o?1:2)*n;if(n<1/0&&l<i.length&&i.splice(0,i.length-l),!o){const d=t.now();let p=0;for(let m=1;m<i.length&&i[m]<=d;m+=2)p=m;p&&i.splice(0,p+1)}}}function mx(e,n,t){let i,o=!1;return e&&"object"==typeof e?({bufferSize:i=1/0,windowTime:n=1/0,refCount:o=!1,scheduler:t}=e):i=e??1/0,Zh({connector:()=>new oL(i,n,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}class Eg{}let yx=(()=>{class e extends Eg{getTranslation(t){return ot({})}static \u0275fac=function(){let t;return function(o){return(t||(t=ho(e)))(o||e)}}();static \u0275prov=it({token:e,factory:e.\u0275fac})}return e})();class VS{}let vx=(()=>{class e{handle(t){return t.key}static \u0275fac=function(i){return new(i||e)};static \u0275prov=it({token:e,factory:e.\u0275fac})}return e})();function Cc(e){return typeof e<"u"&&null!==e}function HS(e){return e&&"object"==typeof e&&!Array.isArray(e)}function bx(e,n){let t=Object.assign({},e);return HS(e)&&HS(n)&&Object.keys(n).forEach(i=>{HS(n[i])?i in e?t[i]=bx(e[i],n[i]):Object.assign(t,{[i]:n[i]}):Object.assign(t,{[i]:n[i]})}),t}class Kv{}let Tx=(()=>{class e extends Kv{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,i){let o;return o="string"==typeof t?this.interpolateString(t,i):"function"==typeof t?this.interpolateFunction(t,i):t,o}getValue(t,i){let o="string"==typeof i?i.split("."):[i];i="";do{i+=o.shift(),!Cc(t)||!Cc(t[i])||"object"!=typeof t[i]&&o.length?o.length?i+=".":t=void 0:(t=t[i],i="")}while(o.length);return t}interpolateFunction(t,i){return t(i)}interpolateString(t,i){return i?t.replace(this.templateMatcher,(o,l)=>{let d=this.getValue(i,l);return Cc(d)?d:o}):t}static \u0275fac=function(){let t;return function(o){return(t||(t=ho(e)))(o||e)}}();static \u0275prov=it({token:e,factory:e.\u0275fac})}return e})();class Yv{}let Cx=(()=>{class e extends Yv{compile(t,i){return t}compileTranslations(t,i){return t}static \u0275fac=function(){let t;return function(o){return(t||(t=ho(e)))(o||e)}}();static \u0275prov=it({token:e,factory:e.\u0275fac})}return e})();class Sx{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Bn;onLangChange=new Bn;onDefaultLangChange=new Bn}const qS=new et("USE_STORE"),zS=new et("USE_DEFAULT_LANG"),GS=new et("DEFAULT_LANGUAGE"),WS=new et("USE_EXTEND");let XS=(()=>{class e{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new Bn;_onLangChange=new Bn;_onDefaultLangChange=new Bn;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}constructor(t,i,o,l,d,p=!0,m=!1,b=!1,D){this.store=t,this.currentLoader=i,this.compiler=o,this.parser=l,this.missingTranslationHandler=d,this.useDefaultLang=p,this.isolate=m,this.extend=b,D&&this.setDefaultLang(D)}setDefaultLang(t){if(t===this.defaultLang)return;let i=this.retrieveTranslations(t);typeof i<"u"?(null==this.defaultLang&&(this.defaultLang=t),i.pipe(Po(1)).subscribe(o=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return ot(this.translations[t]);let i=this.retrieveTranslations(t);return typeof i<"u"?(this.currentLang||(this.currentLang=t),i.pipe(Po(1)).subscribe(o=>{this.changeLang(t)}),i):(this.changeLang(t),ot(this.translations[t]))}retrieveTranslations(t){let i;return(typeof this.translations[t]>"u"||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),i=this._translationRequests[t]),i}getTranslation(t){this.pending=!0;const i=this.currentLoader.getTranslation(t).pipe(mx(1),Po(1));return this.loadingTranslations=i.pipe(ft(o=>this.compiler.compileTranslations(o,t)),mx(1),Po(1)),this.loadingTranslations.subscribe({next:o=>{this.translations[t]=this.extend&&this.translations[t]?{...o,...this.translations[t]}:o,this.updateLangs(),this.pending=!1},error:o=>{this.pending=!1}}),i}setTranslation(t,i,o=!1){i=this.compiler.compileTranslations(i,t),this.translations[t]=(o||this.extend)&&this.translations[t]?bx(this.translations[t],i):i,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(i=>{-1===this.langs.indexOf(i)&&this.langs.push(i)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,i,o){let l;if(i instanceof Array){let d={},p=!1;for(let m of i)d[m]=this.getParsedResult(t,m,o),Tc(d[m])&&(p=!0);return p?function iL(...e){const n=Zs(e),{args:t,keys:i}=hx(e),o=new Se(l=>{const{length:d}=t;if(!d)return void l.complete();const p=new Array(d);let m=d,b=d;for(let D=0;D<d;D++){let I=!1;Mr(t[D]).subscribe(Ue(l,R=>{I||(I=!0,b--),p[D]=R},()=>m--,void 0,()=>{(!m||!I)&&(b||l.next(i?px(i,p):p),l.complete())}))}});return n?o.pipe(fx(n)):o}(i.map(b=>Tc(d[b])?d[b]:ot(d[b]))).pipe(ft(b=>{let D={};return b.forEach((I,R)=>{D[i[R]]=I}),D})):d}if(t&&(l=this.parser.interpolate(this.parser.getValue(t,i),o)),typeof l>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(l=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],i),o)),typeof l>"u"){let d={key:i,translateService:this};typeof o<"u"&&(d.interpolateParams=o),l=this.missingTranslationHandler.handle(d)}return typeof l<"u"?l:i}get(t,i){if(!Cc(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(_c(o=>Tc(o=this.getParsedResult(o,t,i))?o:ot(o)));{let o=this.getParsedResult(this.translations[this.currentLang],t,i);return Tc(o)?o:ot(o)}}getStreamOnTranslationChange(t,i){if(!Cc(t)||!t.length)throw new Error('Parameter "key" required');return Sg(Xv(()=>this.get(t,i)),this.onTranslationChange.pipe(ai(o=>{const l=this.getParsedResult(o.translations,t,i);return"function"==typeof l.subscribe?l:ot(l)})))}stream(t,i){if(!Cc(t)||!t.length)throw new Error('Parameter "key" required');return Sg(Xv(()=>this.get(t,i)),this.onLangChange.pipe(ai(o=>{const l=this.getParsedResult(o.translations,t,i);return Tc(l)?l:ot(l)})))}instant(t,i){if(!Cc(t)||!t.length)throw new Error('Parameter "key" required');let o=this.getParsedResult(this.translations[this.currentLang],t,i);if(Tc(o)){if(t instanceof Array){let l={};return t.forEach((d,p)=>{l[t[p]]=t[p]}),l}return t}return o}set(t,i,o=this.currentLang){this.translations[o][t]=this.compiler.compile(i,o),this.updateLangs(),this.onTranslationChange.emit({lang:o,translations:this.translations[o]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),null==this.defaultLang&&this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof t>"u"?void 0:(-1!==t.indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}static \u0275fac=function(i){return new(i||e)(ze(Sx),ze(Eg),ze(Yv),ze(Kv),ze(VS),ze(zS),ze(qS),ze(WS),ze(GS))};static \u0275prov=it({token:e,factory:e.\u0275fac})}return e})(),aL=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[t.loader||{provide:Eg,useClass:yx},t.compiler||{provide:Yv,useClass:Cx},t.parser||{provide:Kv,useClass:Tx},t.missingTranslationHandler||{provide:VS,useClass:vx},Sx,{provide:qS,useValue:t.isolate},{provide:zS,useValue:t.useDefaultLang},{provide:WS,useValue:t.extend},{provide:GS,useValue:t.defaultLanguage},XS]}}static forChild(t={}){return{ngModule:e,providers:[t.loader||{provide:Eg,useClass:yx},t.compiler||{provide:Yv,useClass:Cx},t.parser||{provide:Kv,useClass:Tx},t.missingTranslationHandler||{provide:VS,useClass:vx},{provide:qS,useValue:t.isolate},{provide:zS,useValue:t.useDefaultLang},{provide:WS,useValue:t.extend},{provide:GS,useValue:t.defaultLanguage},XS]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=Pr({type:e});static \u0275inj=Rn({})}return e})();class uL{http;prefix;suffix;constructor(n,t="/assets/i18n/",i=".json"){this.http=n,this.prefix=t,this.suffix=i}getTranslation(n){return this.http.get(`${this.prefix}${n}${this.suffix}`)}}function KS(...e){const n=jn(e),t=Zs(e),{args:i,keys:o}=hx(e);if(0===i.length)return vr([],n);const l=new Se(function lL(e,n,t=xe){return i=>{Ex(n,()=>{const{length:o}=e,l=new Array(o);let d=o,p=o;for(let m=0;m<o;m++)Ex(n,()=>{const b=vr(e[m],n);let D=!1;b.subscribe(Ue(i,I=>{l[m]=I,D||(D=!0,p--),p||i.next(t(l.slice()))},()=>{--d||i.complete()}))},i)},i)}}(i,n,o?d=>px(o,d):xe));return t?l.pipe(fx(t)):l}function Ex(e,n,t){e?Tn(t,e,n):n()}const Qv=M(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Dg(e,n){const t=fe(e)?e:()=>e,i=o=>o.error(t());return new Se(n?o=>n.schedule(i,0,o):i)}function YS(){return Le((e,n)=>{let t=null;e._refCount++;const i=Ue(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const o=e._connection,l=t;t=null,o&&(!l||o===l)&&o.unsubscribe(),n.unsubscribe()});e.subscribe(i),i.closed||(t=e.connect())})}class Dx extends Se{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,qt(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new ie;const t=this.getSubject();n.add(this.source.subscribe(Ue(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=ie.EMPTY)}return n}refCount(){return YS()(this)}}function Zv(e){return Le((n,t)=>{let i=!1;n.subscribe(Ue(t,o=>{i=!0,t.next(o)},()=>{i||t.next(e),t.complete()}))})}function wx(e=dL){return Le((n,t)=>{let i=!1;n.subscribe(Ue(t,o=>{i=!0,t.next(o)},()=>i?t.complete():t.error(e())))})}function dL(){return new Qv}function Sc(e,n){const t=arguments.length>=2;return i=>i.pipe(e?xa((o,l)=>e(o,l,i)):xe,Po(1),t?Zv(n):wx(()=>new Qv))}function si(e,n,t){const i=fe(e)||n||t?{next:e,error:n,complete:t}:e;return i?Le((o,l)=>{var d;null===(d=i.subscribe)||void 0===d||d.call(i);let p=!0;o.subscribe(Ue(l,m=>{var b;null===(b=i.next)||void 0===b||b.call(i,m),l.next(m)},()=>{var m;p=!1,null===(m=i.complete)||void 0===m||m.call(i),l.complete()},m=>{var b;p=!1,null===(b=i.error)||void 0===b||b.call(i,m),l.error(m)},()=>{var m,b;p&&(null===(m=i.unsubscribe)||void 0===m||m.call(i)),null===(b=i.finalize)||void 0===b||b.call(i)}))}):xe}function Ks(e){return Le((n,t)=>{let l,i=null,o=!1;i=n.subscribe(Ue(t,void 0,void 0,d=>{l=Mr(e(d,Ks(e)(n))),i?(i.unsubscribe(),i=null,l.subscribe(t)):o=!0})),o&&(i.unsubscribe(),i=null,l.subscribe(t))})}function QS(e){return e<=0?()=>Jn:Le((n,t)=>{let i=[];n.subscribe(Ue(t,o=>{i.push(o),e<i.length&&i.shift()},()=>{for(const o of i)t.next(o);t.complete()},void 0,()=>{i=null}))})}const Bt="primary",wg=Symbol("RouteTitle");class yL{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Vh(e){return new yL(e)}function vL(e,n,t){const i=t.path.split("/");if(i.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||i.length<e.length))return null;const o={};for(let l=0;l<i.length;l++){const d=i[l],p=e[l];if(d.startsWith(":"))o[d.substring(1)]=p;else if(d!==p.path)return null}return{consumed:e.slice(0,i.length),posParams:o}}function Oo(e,n){const t=e?Object.keys(e):void 0,i=n?Object.keys(n):void 0;if(!t||!i||t.length!=i.length)return!1;let o;for(let l=0;l<t.length;l++)if(o=t[l],!xx(e[o],n[o]))return!1;return!0}function xx(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),i=[...n].sort();return t.every((o,l)=>i[l]===o)}return e===n}function Ix(e){return e.length>0?e[e.length-1]:null}function $u(e){return Tc(e)?e:lv(e)?vr(Promise.resolve(e)):ot(e)}const bL={exact:function kx(e,n,t){if(!Ec(e.segments,n.segments)||!Jv(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!e.children[i]||!kx(e.children[i],n.children[i],t))return!1;return!0},subset:Px},Ax={exact:function TL(e,n){return Oo(e,n)},subset:function CL(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>xx(e[t],n[t]))},ignored:()=>!0};function Mx(e,n,t){return bL[t.paths](e.root,n.root,t.matrixParams)&&Ax[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function Px(e,n,t){return Ox(e,n,n.segments,t)}function Ox(e,n,t,i){if(e.segments.length>t.length){const o=e.segments.slice(0,t.length);return!(!Ec(o,t)||n.hasChildren()||!Jv(o,t,i))}if(e.segments.length===t.length){if(!Ec(e.segments,t)||!Jv(e.segments,t,i))return!1;for(const o in n.children)if(!e.children[o]||!Px(e.children[o],n.children[o],i))return!1;return!0}{const o=t.slice(0,e.segments.length),l=t.slice(e.segments.length);return!!(Ec(e.segments,o)&&Jv(e.segments,o,i)&&e.children[Bt])&&Ox(e.children[Bt],n,l,i)}}function Jv(e,n,t){return n.every((i,o)=>Ax[t](e[o].parameters,i.parameters))}class Hh{constructor(n=new pn([],{}),t={},i=null){this.root=n,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vh(this.queryParams)),this._queryParamMap}toString(){return DL.serialize(this)}}class pn{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return e_(this)}}class xg{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Vh(this.parameters)),this._parameterMap}toString(){return Lx(this)}}function Ec(e,n){return e.length===n.length&&e.every((t,i)=>t.path===n[i].path)}let Ig=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:function(){return new ZS},providedIn:"root"})}return e})();class ZS{parse(n){const t=new LL(n);return new Hh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${Ag(n.root,!0)}`,i=function IL(e){const n=Object.keys(e).map(t=>{const i=e[t];return Array.isArray(i)?i.map(o=>`${t_(t)}=${t_(o)}`).join("&"):`${t_(t)}=${t_(i)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${i}${"string"==typeof n.fragment?`#${function wL(e){return encodeURI(e)}(n.fragment)}`:""}`}}const DL=new ZS;function e_(e){return e.segments.map(n=>Lx(n)).join("/")}function Ag(e,n){if(!e.hasChildren())return e_(e);if(n){const t=e.children[Bt]?Ag(e.children[Bt],!1):"",i=[];return Object.entries(e.children).forEach(([o,l])=>{o!==Bt&&i.push(`${o}:${Ag(l,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function EL(e,n){let t=[];return Object.entries(e.children).forEach(([i,o])=>{i===Bt&&(t=t.concat(n(o,i)))}),Object.entries(e.children).forEach(([i,o])=>{i!==Bt&&(t=t.concat(n(o,i)))}),t}(e,(i,o)=>o===Bt?[Ag(e.children[Bt],!1)]:[`${o}:${Ag(i,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Bt]?`${e_(e)}/${t[0]}`:`${e_(e)}/(${t.join("//")})`}}function Rx(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function t_(e){return Rx(e).replace(/%3B/gi,";")}function JS(e){return Rx(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function n_(e){return decodeURIComponent(e)}function Nx(e){return n_(e.replace(/\+/g,"%20"))}function Lx(e){return`${JS(e.path)}${function xL(e){return Object.keys(e).map(n=>`;${JS(n)}=${JS(e[n])}`).join("")}(e.parameters)}`}const AL=/^[^\/()?;#]+/;function eE(e){const n=e.match(AL);return n?n[0]:""}const ML=/^[^\/()?;=#]+/,PL=/^[^=?&#]+/,RL=/^[^&#]+/;class LL{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(i[Bt]=new pn(n,t)),i}parseSegment(){const n=eE(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Oe(4009,!1);return this.capture(n),new xg(n_(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=function kL(e){const n=e.match(ML);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=eE(this.remaining);o&&(i=o,this.capture(i))}n[n_(t)]=n_(i)}parseQueryParam(n){const t=function OL(e){const n=e.match(PL);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const d=function NL(e){const n=e.match(RL);return n?n[0]:""}(this.remaining);d&&(i=d,this.capture(i))}const o=Nx(t),l=Nx(i);if(n.hasOwnProperty(o)){let d=n[o];Array.isArray(d)||(d=[d],n[o]=d),d.push(l)}else n[o]=l}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=eE(this.remaining),o=this.remaining[i.length];if("/"!==o&&")"!==o&&";"!==o)throw new Oe(4010,!1);let l;i.indexOf(":")>-1?(l=i.slice(0,i.indexOf(":")),this.capture(l),this.capture(":")):n&&(l=Bt);const d=this.parseChildren();t[l]=1===Object.keys(d).length?d[Bt]:new pn([],d),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Oe(4011,!1)}}function Fx(e){return e.segments.length>0?new pn([],{[Bt]:e}):e}function Bx(e){const n={};for(const i of Object.keys(e.children)){const l=Bx(e.children[i]);if(i===Bt&&0===l.segments.length&&l.hasChildren())for(const[d,p]of Object.entries(l.children))n[d]=p;else(l.segments.length>0||l.hasChildren())&&(n[i]=l)}return function FL(e){if(1===e.numberOfChildren&&e.children[Bt]){const n=e.children[Bt];return new pn(e.segments.concat(n.segments),n.children)}return e}(new pn(e.segments,n))}function Dc(e){return e instanceof Hh}function Ux(e){let n;const o=Fx(function t(l){const d={};for(const m of l.children){const b=t(m);d[m.outlet]=b}const p=new pn(l.url,d);return l===e&&(n=p),p}(e.root));return n??o}function jx(e,n,t,i){let o=e;for(;o.parent;)o=o.parent;if(0===n.length)return tE(o,o,o,t,i);const l=function UL(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Vx(!0,0,e);let n=0,t=!1;const i=e.reduce((o,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const p={};return Object.entries(l.outlets).forEach(([m,b])=>{p[m]="string"==typeof b?b.split("/"):b}),[...o,{outlets:p}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===d?(l.split("/").forEach((p,m)=>{0==m&&"."===p||(0==m&&""===p?t=!0:".."===p?n++:""!=p&&o.push(p))}),o):[...o,l]},[]);return new Vx(t,n,i)}(n);if(l.toRoot())return tE(o,o,new pn([],{}),t,i);const d=function jL(e,n,t){if(e.isAbsolute)return new i_(n,!0,0);if(!t)return new i_(n,!1,NaN);if(null===t.parent)return new i_(t,!0,0);const i=r_(e.commands[0])?0:1;return function $L(e,n,t){let i=e,o=n,l=t;for(;l>o;){if(l-=o,i=i.parent,!i)throw new Oe(4005,!1);o=i.segments.length}return new i_(i,!1,o-l)}(t,t.segments.length-1+i,e.numberOfDoubleDots)}(l,o,e),p=d.processChildren?kg(d.segmentGroup,d.index,l.commands):Hx(d.segmentGroup,d.index,l.commands);return tE(o,d.segmentGroup,p,t,i)}function r_(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Mg(e){return"object"==typeof e&&null!=e&&e.outlets}function tE(e,n,t,i,o){let d,l={};i&&Object.entries(i).forEach(([m,b])=>{l[m]=Array.isArray(b)?b.map(D=>`${D}`):`${b}`}),d=e===n?t:$x(e,n,t);const p=Fx(Bx(d));return new Hh(p,l,o)}function $x(e,n,t){const i={};return Object.entries(e.children).forEach(([o,l])=>{i[o]=l===n?t:$x(l,n,t)}),new pn(e.segments,i)}class Vx{constructor(n,t,i){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=i,n&&i.length>0&&r_(i[0]))throw new Oe(4003,!1);const o=i.find(Mg);if(o&&o!==Ix(i))throw new Oe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class i_{constructor(n,t,i){this.segmentGroup=n,this.processChildren=t,this.index=i}}function Hx(e,n,t){if(e||(e=new pn([],{})),0===e.segments.length&&e.hasChildren())return kg(e,n,t);const i=function HL(e,n,t){let i=0,o=n;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(i>=t.length)return l;const d=e.segments[o],p=t[i];if(Mg(p))break;const m=`${p}`,b=i<t.length-1?t[i+1]:null;if(o>0&&void 0===m)break;if(m&&b&&"object"==typeof b&&void 0===b.outlets){if(!zx(m,b,d))return l;i+=2}else{if(!zx(m,{},d))return l;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}(e,n,t),o=t.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){const l=new pn(e.segments.slice(0,i.pathIndex),{});return l.children[Bt]=new pn(e.segments.slice(i.pathIndex),e.children),kg(l,0,o)}return i.match&&0===o.length?new pn(e.segments,{}):i.match&&!e.hasChildren()?nE(e,n,t):i.match?kg(e,0,o):nE(e,n,t)}function kg(e,n,t){if(0===t.length)return new pn(e.segments,{});{const i=function VL(e){return Mg(e[0])?e[0].outlets:{[Bt]:e}}(t),o={};if(Object.keys(i).some(l=>l!==Bt)&&e.children[Bt]&&1===e.numberOfChildren&&0===e.children[Bt].segments.length){const l=kg(e.children[Bt],n,t);return new pn(e.segments,l.children)}return Object.entries(i).forEach(([l,d])=>{"string"==typeof d&&(d=[d]),null!==d&&(o[l]=Hx(e.children[l],n,d))}),Object.entries(e.children).forEach(([l,d])=>{void 0===i[l]&&(o[l]=d)}),new pn(e.segments,o)}}function nE(e,n,t){const i=e.segments.slice(0,n);let o=0;for(;o<t.length;){const l=t[o];if(Mg(l)){const m=qL(l.outlets);return new pn(i,m)}if(0===o&&r_(t[0])){i.push(new xg(e.segments[n].path,qx(t[0]))),o++;continue}const d=Mg(l)?l.outlets[Bt]:`${l}`,p=o<t.length-1?t[o+1]:null;d&&p&&r_(p)?(i.push(new xg(d,qx(p))),o+=2):(i.push(new xg(d,{})),o++)}return new pn(i,{})}function qL(e){const n={};return Object.entries(e).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(n[t]=nE(new pn([],{}),0,i))}),n}function qx(e){const n={};return Object.entries(e).forEach(([t,i])=>n[t]=`${i}`),n}function zx(e,n,t){return e==t.path&&Oo(n,t.parameters)}const Pg="imperative";class Ro{constructor(n,t){this.id=n,this.url=t}}class s_ extends Ro{constructor(n,t,i="imperative",o=null){super(n,t),this.type=0,this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ia extends Ro{constructor(n,t,i){super(n,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Og extends Ro{constructor(n,t,i,o){super(n,t),this.reason=i,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qh extends Ro{constructor(n,t,i,o){super(n,t),this.reason=i,this.code=o,this.type=16}}class o_ extends Ro{constructor(n,t,i,o){super(n,t),this.error=i,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gx extends Ro{constructor(n,t,i,o){super(n,t),this.urlAfterRedirects=i,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zL extends Ro{constructor(n,t,i,o){super(n,t),this.urlAfterRedirects=i,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GL extends Ro{constructor(n,t,i,o,l){super(n,t),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=l,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class WL extends Ro{constructor(n,t,i,o){super(n,t),this.urlAfterRedirects=i,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XL extends Ro{constructor(n,t,i,o){super(n,t),this.urlAfterRedirects=i,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KL{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class YL{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class QL{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZL{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JL{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eF{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wx{constructor(n,t,i){this.routerEvent=n,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class rE{}class iE{constructor(n){this.url=n}}class tF{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Rg,this.attachRef=null}}let Rg=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const o=this.getOrCreateContext(t);o.outlet=i,this.contexts.set(t,o)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new tF,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class Xx{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=sE(n,this._root);return t?t.children.map(i=>i.value):[]}firstChild(n){const t=sE(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=oE(n,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return oE(n,this._root).map(t=>t.value)}}function sE(e,n){if(e===n.value)return n;for(const t of n.children){const i=sE(e,t);if(i)return i}return null}function oE(e,n){if(e===n.value)return[n];for(const t of n.children){const i=oE(e,t);if(i.length)return i.unshift(n),i}return[]}class Aa{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function zh(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class Kx extends Xx{constructor(n,t){super(n),this.snapshot=t,aE(this,n)}toString(){return this.snapshot.toString()}}function Yx(e,n){const t=function nF(e,n){const d=new a_([],{},{},"",{},Bt,n,null,{});return new Zx("",new Aa(d,[]))}(0,n),i=new oi([new xg("",{})]),o=new oi({}),l=new oi({}),d=new oi({}),p=new oi(""),m=new No(i,o,d,p,l,Bt,n,t.root);return m.snapshot=t.root,new Kx(new Aa(m,[]),t)}class No{constructor(n,t,i,o,l,d,p,m){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=o,this.dataSubject=l,this.outlet=d,this.component=p,this._futureSnapshot=m,this.title=this.dataSubject?.pipe(ft(b=>b[wg]))??ot(void 0),this.url=n,this.params=t,this.queryParams=i,this.fragment=o,this.data=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ft(n=>Vh(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ft(n=>Vh(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Qx(e,n="emptyOnly"){const t=e.pathFromRoot;let i=0;if("always"!==n)for(i=t.length-1;i>=1;){const o=t[i],l=t[i-1];if(o.routeConfig&&""===o.routeConfig.path)i--;else{if(l.component)break;i--}}return function rF(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class a_{get title(){return this.data?.[wg]}constructor(n,t,i,o,l,d,p,m,b){this.url=n,this.params=t,this.queryParams=i,this.fragment=o,this.data=l,this.outlet=d,this.component=p,this.routeConfig=m,this._resolve=b}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zx extends Xx{constructor(n,t){super(t),this.url=n,aE(this,t)}toString(){return Jx(this._root)}}function aE(e,n){n.value._routerState=e,n.children.forEach(t=>aE(e,t))}function Jx(e){const n=e.children.length>0?` { ${e.children.map(Jx).join(", ")} } `:"";return`${e.value}${n}`}function uE(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,Oo(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),Oo(n.params,t.params)||e.paramsSubject.next(t.params),function _L(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!Oo(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.urlSubject.next(t.url),Oo(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function lE(e,n){const t=Oo(e.params,n.params)&&function SL(e,n){return Ec(e,n)&&e.every((t,i)=>Oo(t.parameters,n[i].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||lE(e.parent,n.parent))}let cE=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Bt,this.activateEvents=new Bn,this.deactivateEvents=new Bn,this.attachEvents=new Bn,this.detachEvents=new Bn,this.parentContexts=Ye(Rg),this.location=Ye(Gs),this.changeDetector=Ye(Dv),this.environmentInjector=Ye(mi),this.inputBinder=Ye(u_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:o}=t.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Oe(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Oe(4013,!1);this._activatedRoute=t;const o=this.location,d=t.snapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,m=new iF(t,p,o.injector);this.activated=o.createComponent(d,{index:o.length,injector:m,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275dir=Wn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ls]})}return e})();class iF{constructor(n,t,i){this.route=n,this.childContexts=t,this.parent=i}get(n,t){return n===No?this.route:n===Rg?this.childContexts:this.parent.get(n,t)}}const u_=new et("");let eI=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,o=KS([i.queryParams,i.params,i.data]).pipe(ai(([l,d,p],m)=>(p={...l,...d,...p},0===m?ot(p):Promise.resolve(p)))).subscribe(l=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const d=function ZP(e){const n=Kt(e);if(!n)return null;const t=new ac(n);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(i.component);if(d)for(const{templateName:p}of d.inputs)t.activatedComponentRef.setInput(p,l[p]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})();function Ng(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=n.value;const o=function oF(e,n,t){return n.children.map(i=>{for(const o of t.children)if(e.shouldReuseRoute(i.value,o.value.snapshot))return Ng(e,i,o);return Ng(e,i)})}(e,n,t);return new Aa(i,o)}{if(e.shouldAttach(n.value)){const l=e.retrieve(n.value);if(null!==l){const d=l.route;return d.value._futureSnapshot=n.value,d.children=n.children.map(p=>Ng(e,p)),d}}const i=function aF(e){return new No(new oi(e.url),new oi(e.params),new oi(e.queryParams),new oi(e.fragment),new oi(e.data),e.outlet,e.component,e)}(n.value),o=n.children.map(l=>Ng(e,l));return new Aa(i,o)}}const dE="ngNavigationCancelingError";function tI(e,n){const{redirectTo:t,navigationBehaviorOptions:i}=Dc(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=nI(!1,0,n);return o.url=t,o.navigationBehaviorOptions=i,o}function nI(e,n,t){const i=new Error("NavigationCancelingError: "+(e||""));return i[dE]=!0,i.cancellationCode=n,t&&(i.url=t),i}function rI(e){return e&&e[dE]}let iI=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=wr({type:e,selectors:[["ng-component"]],standalone:!0,features:[R1],decls:1,vars:0,template:function(i,o){1&i&&Tt(0,"router-outlet")},dependencies:[cE],encapsulation:2})}return e})();function hE(e){const n=e.children&&e.children.map(hE),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Bt&&(t.component=iI),t}function Ys(e){return e.outlet||Bt}function Lg(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class gF{constructor(n,t,i,o,l){this.routeReuseStrategy=n,this.futureState=t,this.currState=i,this.forwardEvent=o,this.inputBindingEnabled=l}activate(n){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,n),uE(this.futureState.root),this.activateChildRoutes(t,i,n)}deactivateChildRoutes(n,t,i){const o=zh(t);n.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,o[d],i),delete o[d]}),Object.values(o).forEach(l=>{this.deactivateRouteAndItsChildren(l,i)})}deactivateRoutes(n,t,i){const o=n.value,l=t?t.value:null;if(o===l)if(o.component){const d=i.getContext(o.outlet);d&&this.deactivateChildRoutes(n,t,d.children)}else this.deactivateChildRoutes(n,t,i);else l&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const i=t.getContext(n.value.outlet),o=i&&n.value.component?i.children:t,l=zh(n);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],o);if(i&&i.outlet){const d=i.outlet.detach(),p=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:d,route:n,contexts:p})}}deactivateRouteAndOutlet(n,t){const i=t.getContext(n.value.outlet),o=i&&n.value.component?i.children:t,l=zh(n);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],o);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,t,i){const o=zh(t);n.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],i),this.forwardEvent(new eF(l.value.snapshot))}),n.children.length&&this.forwardEvent(new ZL(n.value.snapshot))}activateRoutes(n,t,i){const o=n.value,l=t?t.value:null;if(uE(o),o===l)if(o.component){const d=i.getOrCreateContext(o.outlet);this.activateChildRoutes(n,t,d.children)}else this.activateChildRoutes(n,t,i);else if(o.component){const d=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(p.contexts),d.attachRef=p.componentRef,d.route=p.route.value,d.outlet&&d.outlet.attach(p.componentRef,p.route.value),uE(p.route.value),this.activateChildRoutes(n,null,d.children)}else{const p=Lg(o.snapshot);d.attachRef=null,d.route=o,d.injector=p,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(n,null,d.children)}}else this.activateChildRoutes(n,null,i)}}class sI{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class l_{constructor(n,t){this.component=n,this.route=t}}function mF(e,n,t){const i=e._root;return Fg(i,n?n._root:null,t,[i.value])}function Gh(e,n){const t=Symbol(),i=n.get(e,t);return i===t?"function"!=typeof e||function Qu(e){return null!==Is(e)}(e)?n.get(e):e:i}function Fg(e,n,t,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=zh(n);return e.children.forEach(d=>{(function vF(e,n,t,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=e.value,d=n?n.value:null,p=t?t.getContext(e.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const m=function _F(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Ec(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Ec(e.url,n.url)||!Oo(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lE(e,n)||!Oo(e.queryParams,n.queryParams);default:return!lE(e,n)}}(d,l,l.routeConfig.runGuardsAndResolvers);m?o.canActivateChecks.push(new sI(i)):(l.data=d.data,l._resolvedData=d._resolvedData),Fg(e,n,l.component?p?p.children:null:t,i,o),m&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new l_(p.outlet.component,d))}else d&&Bg(n,p,o),o.canActivateChecks.push(new sI(i)),Fg(e,null,l.component?p?p.children:null:t,i,o)})(d,l[d.value.outlet],t,i.concat([d.value]),o),delete l[d.value.outlet]}),Object.entries(l).forEach(([d,p])=>Bg(p,t.getContext(d),o)),o}function Bg(e,n,t){const i=zh(e),o=e.value;Object.entries(i).forEach(([l,d])=>{Bg(d,o.component?n?n.children.getContext(l):null:n,t)}),t.canDeactivateChecks.push(new l_(o.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,o))}function Ug(e){return"function"==typeof e}function oI(e){return e instanceof Qv||"EmptyError"===e?.name}const c_=Symbol("INITIAL_VALUE");function Wh(){return ai(e=>KS(e.map(n=>n.pipe(Po(1),function cL(...e){const n=jn(e);return Le((t,i)=>{(n?Sg(e,t,n):Sg(e,t)).subscribe(i)})}(c_)))).pipe(ft(n=>{for(const t of n)if(!0!==t){if(t===c_)return c_;if(!1===t||t instanceof Hh)return t}return!0}),xa(n=>n!==c_),Po(1)))}function aI(e){return function Ne(...e){return ke(e)}(si(n=>{if(Dc(n))throw tI(0,n)}),ft(n=>!0===n))}class d_{constructor(n){this.segmentGroup=n||null}}class uI{constructor(n){this.urlTree=n}}function Xh(e){return Dg(new d_(e))}function lI(e){return Dg(new uI(e))}class UF{constructor(n,t){this.urlSerializer=n,this.urlTree=t}noMatchError(n){return new Oe(4002,!1)}lineralizeSegments(n,t){let i=[],o=t.root;for(;;){if(i=i.concat(o.segments),0===o.numberOfChildren)return ot(i);if(o.numberOfChildren>1||!o.children[Bt])return Dg(new Oe(4e3,!1));o=o.children[Bt]}}applyRedirectCommands(n,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,i)}applyRedirectCreateUrlTree(n,t,i,o){const l=this.createSegmentGroup(n,t.root,i,o);return new Hh(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const i={};return Object.entries(n).forEach(([o,l])=>{if("string"==typeof l&&l.startsWith(":")){const p=l.substring(1);i[o]=t[p]}else i[o]=l}),i}createSegmentGroup(n,t,i,o){const l=this.createSegments(n,t.segments,i,o);let d={};return Object.entries(t.children).forEach(([p,m])=>{d[p]=this.createSegmentGroup(n,m,i,o)}),new pn(l,d)}createSegments(n,t,i,o){return t.map(l=>l.path.startsWith(":")?this.findPosParam(n,l,o):this.findOrReturn(l,i))}findPosParam(n,t,i){const o=i[t.path.substring(1)];if(!o)throw new Oe(4001,!1);return o}findOrReturn(n,t){let i=0;for(const o of t){if(o.path===n.path)return t.splice(i),o;i++}return n}}const fE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jF(e,n,t,i,o){const l=pE(e,n,t);return l.matched?(i=function lF(e,n){return e.providers&&!e._injector&&(e._injector=MC(e.providers,n,`Route: ${e.path}`)),e._injector??n}(n,i),function LF(e,n,t,i){const o=n.canMatch;return o&&0!==o.length?ot(o.map(d=>{const p=Gh(d,e);return $u(function DF(e){return e&&Ug(e.canMatch)}(p)?p.canMatch(n,t):e.runInContext(()=>p(n,t)))})).pipe(Wh(),aI()):ot(!0)}(i,n,t).pipe(ft(d=>!0===d?l:{...fE}))):ot(l)}function pE(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...fE}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(n.matcher||vL)(t,e,n);if(!o)return{...fE};const l={};Object.entries(o.posParams??{}).forEach(([p,m])=>{l[p]=m.path});const d=o.consumed.length>0?{...l,...o.consumed[o.consumed.length-1].parameters}:l;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function cI(e,n,t,i){return t.length>0&&function HF(e,n,t){return t.some(i=>h_(e,n,i)&&Ys(i)!==Bt)}(e,t,i)?{segmentGroup:new pn(n,VF(i,new pn(t,e.children))),slicedSegments:[]}:0===t.length&&function qF(e,n,t){return t.some(i=>h_(e,n,i))}(e,t,i)?{segmentGroup:new pn(e.segments,$F(e,0,t,i,e.children)),slicedSegments:t}:{segmentGroup:new pn(e.segments,e.children),slicedSegments:t}}function $F(e,n,t,i,o){const l={};for(const d of i)if(h_(e,t,d)&&!o[Ys(d)]){const p=new pn([],{});l[Ys(d)]=p}return{...o,...l}}function VF(e,n){const t={};t[Bt]=n;for(const i of e)if(""===i.path&&Ys(i)!==Bt){const o=new pn([],{});t[Ys(i)]=o}return t}function h_(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}class XF{constructor(n,t,i,o,l,d,p){this.injector=n,this.configLoader=t,this.rootComponentType=i,this.config=o,this.urlTree=l,this.paramsInheritanceStrategy=d,this.urlSerializer=p,this.allowRedirects=!0,this.applyRedirects=new UF(this.urlSerializer,this.urlTree)}noMatchError(n){return new Oe(4002,!1)}recognize(){const n=cI(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,Bt).pipe(Ks(t=>{if(t instanceof uI)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof d_?this.noMatchError(t):t}),ft(t=>{const i=new a_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Bt,this.rootComponentType,null,{}),o=new Aa(i,t),l=new Zx("",o),d=function BL(e,n,t=null,i=null){return jx(Ux(e),n,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,l.url=this.urlSerializer.serialize(d),this.inheritParamsAndData(l._root),{state:l,tree:d}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n.root,Bt).pipe(Ks(i=>{throw i instanceof d_?this.noMatchError(i):i}))}inheritParamsAndData(n){const t=n.value,i=Qx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),n.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(n,t,i,o){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,t,i):this.processSegment(n,t,i,i.segments,o,!0)}processChildren(n,t,i){const o=[];for(const l of Object.keys(i.children))"primary"===l?o.unshift(l):o.push(l);return vr(o).pipe(_c(l=>{const d=i.children[l],p=function fF(e,n){const t=e.filter(i=>Ys(i)===n);return t.push(...e.filter(i=>Ys(i)!==n)),t}(t,l);return this.processSegmentGroup(n,p,d,l)}),function fL(e,n){return Le(function hL(e,n,t,i,o){return(l,d)=>{let p=t,m=n,b=0;l.subscribe(Ue(d,D=>{const I=b++;m=p?e(m,D,I):(p=!0,D),i&&d.next(m)},o&&(()=>{p&&d.next(m),d.complete()})))}}(e,n,arguments.length>=2,!0))}((l,d)=>(l.push(...d),l)),Zv(null),function pL(e,n){const t=arguments.length>=2;return i=>i.pipe(e?xa((o,l)=>e(o,l,i)):xe,QS(1),t?Zv(n):wx(()=>new Qv))}(),sn(l=>{if(null===l)return Xh(i);const d=dI(l);return function KF(e){e.sort((n,t)=>n.value.outlet===Bt?-1:t.value.outlet===Bt?1:n.value.outlet.localeCompare(t.value.outlet))}(d),ot(d)}))}processSegment(n,t,i,o,l,d){return vr(t).pipe(_c(p=>this.processSegmentAgainstRoute(p._injector??n,t,p,i,o,l,d).pipe(Ks(m=>{if(m instanceof d_)return ot(null);throw m}))),Sc(p=>!!p),Ks(p=>{if(oI(p))return function GF(e,n,t){return 0===n.length&&!e.children[t]}(i,o,l)?ot([]):Xh(i);throw p}))}processSegmentAgainstRoute(n,t,i,o,l,d,p){return function zF(e,n,t,i){return!!(Ys(e)===i||i!==Bt&&h_(n,t,e))&&("**"===e.path||pE(n,e,t).matched)}(i,o,l,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,o,i,l,d,p):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,o,t,i,l,d):Xh(o):Xh(o)}expandSegmentAgainstRouteUsingRedirect(n,t,i,o,l,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,i,o,l,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,i,o){const l=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?lI(l):this.applyRedirects.lineralizeSegments(i,l).pipe(sn(d=>{const p=new pn(d,{});return this.processSegment(n,t,p,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,i,o,l,d){const{matched:p,consumedSegments:m,remainingSegments:b,positionalParamSegments:D}=pE(t,o,l);if(!p)return Xh(t);const I=this.applyRedirects.applyRedirectCommands(m,o.redirectTo,D);return o.redirectTo.startsWith("/")?lI(I):this.applyRedirects.lineralizeSegments(o,I).pipe(sn(R=>this.processSegment(n,i,t,R.concat(b),d,!1)))}matchSegmentAgainstRoute(n,t,i,o,l,d){let p;if("**"===i.path){const m=o.length>0?Ix(o).parameters:{};p=ot({snapshot:new a_(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hI(i),Ys(i),i.component??i._loadedComponent??null,i,fI(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else p=jF(t,i,o,n).pipe(ft(({matched:m,consumedSegments:b,remainingSegments:D,parameters:I})=>m?{snapshot:new a_(b,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,hI(i),Ys(i),i.component??i._loadedComponent??null,i,fI(i)),consumedSegments:b,remainingSegments:D}:null));return p.pipe(ai(m=>null===m?Xh(t):this.getChildConfig(n=i._injector??n,i,o).pipe(ai(({routes:b})=>{const D=i._loadedInjector??n,{snapshot:I,consumedSegments:R,remainingSegments:j}=m,{segmentGroup:K,slicedSegments:Y}=cI(t,R,j,b);if(0===Y.length&&K.hasChildren())return this.processChildren(D,b,K).pipe(ft(we=>null===we?null:[new Aa(I,we)]));if(0===b.length&&0===Y.length)return ot([new Aa(I,[])]);const de=Ys(i)===l;return this.processSegment(D,b,K,Y,de?Bt:l,!0).pipe(ft(we=>[new Aa(I,we)]))}))))}getChildConfig(n,t,i){return t.children?ot({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?ot({routes:t._loadedRoutes,injector:t._loadedInjector}):function NF(e,n,t,i){const o=n.canLoad;return void 0===o||0===o.length?ot(!0):ot(o.map(d=>{const p=Gh(d,e);return $u(function TF(e){return e&&Ug(e.canLoad)}(p)?p.canLoad(n,t):e.runInContext(()=>p(n,t)))})).pipe(Wh(),aI())}(n,t,i).pipe(sn(o=>o?this.configLoader.loadChildren(n,t).pipe(si(l=>{t._loadedRoutes=l.routes,t._loadedInjector=l.injector})):function BF(e){return Dg(nI(!1,3))}())):ot({routes:[],injector:n})}}function YF(e){const n=e.value.routeConfig;return n&&""===n.path}function dI(e){const n=[],t=new Set;for(const i of e){if(!YF(i)){n.push(i);continue}const o=n.find(l=>i.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...i.children),t.add(o)):n.push(i)}for(const i of t){const o=dI(i.children);n.push(new Aa(i.value,o))}return n.filter(i=>!t.has(i))}function hI(e){return e.data||{}}function fI(e){return e.resolve||{}}function pI(e){return"string"==typeof e.title||null===e.title}function gE(e){return ai(n=>{const t=e(n);return t?vr(t).pipe(ft(()=>n)):ot(n)})}const Kh=new et("ROUTES");let mE=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ye(Dw)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ot(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=$u(t.loadComponent()).pipe(ft(gI),si(l=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=l}),bg(()=>{this.componentLoaders.delete(t)})),o=new Dx(i,()=>new $e).pipe(YS());return this.componentLoaders.set(t,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ot({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const l=function r3(e,n,t,i){return $u(e.loadChildren()).pipe(ft(gI),sn(o=>o instanceof P1||Array.isArray(o)?ot(o):vr(n.compileModuleAsync(o))),ft(o=>{i&&i(e);let l,d,p=!1;return Array.isArray(o)?(d=o,!0):(l=o.create(t).injector,d=l.get(Kh,[],{optional:!0,self:!0}).flat()),{routes:d.map(hE),injector:l}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(bg(()=>{this.childrenLoaders.delete(i)})),d=new Dx(l,()=>new $e).pipe(YS());return this.childrenLoaders.set(i,d),d}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function gI(e){return function i3(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let f_=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $e,this.transitionAbortSubject=new $e,this.configLoader=Ye(mE),this.environmentInjector=Ye(mi),this.urlSerializer=Ye(Ig),this.rootContexts=Ye(Rg),this.inputBindingEnabled=null!==Ye(u_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ot(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new YL(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new KL(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,o){return this.transitions=new oi({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Pg,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(xa(l=>0!==l.id),ft(l=>({...l,extractedUrl:t.urlHandlingStrategy.extract(l.rawUrl)})),ai(l=>{this.currentTransition=l;let d=!1,p=!1;return ot(l).pipe(si(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ai(m=>{const b=m.currentBrowserUrl.toString(),D=!t.navigated||m.extractedUrl.toString()!==b||b!==m.currentUrlTree.toString();if(!D&&"reload"!==(m.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const R="";return this.events.next(new qh(m.id,this.urlSerializer.serialize(m.rawUrl),R,0)),m.resolve(null),Jn}if(t.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return ot(m).pipe(ai(R=>{const j=this.transitions?.getValue();return this.events.next(new s_(R.id,this.urlSerializer.serialize(R.extractedUrl),R.source,R.restoredState)),j!==this.transitions?.getValue()?Jn:Promise.resolve(R)}),function QF(e,n,t,i,o,l){return sn(d=>function WF(e,n,t,i,o,l,d="emptyOnly"){return new XF(e,n,t,i,o,d,l).recognize()}(e,n,t,i,d.extractedUrl,o,l).pipe(ft(({state:p,tree:m})=>({...d,targetSnapshot:p,urlAfterRedirects:m}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),si(R=>{l.targetSnapshot=R.targetSnapshot,l.urlAfterRedirects=R.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:R.urlAfterRedirects};const j=new Gx(R.id,this.urlSerializer.serialize(R.extractedUrl),this.urlSerializer.serialize(R.urlAfterRedirects),R.targetSnapshot);this.events.next(j)}));if(D&&t.urlHandlingStrategy.shouldProcessUrl(m.currentRawUrl)){const{id:R,extractedUrl:j,source:K,restoredState:Y,extras:de}=m,we=new s_(R,this.urlSerializer.serialize(j),K,Y);this.events.next(we);const le=Yx(0,this.rootComponentType).snapshot;return this.currentTransition=l={...m,targetSnapshot:le,urlAfterRedirects:j,extras:{...de,skipLocationChange:!1,replaceUrl:!1}},ot(l)}{const R="";return this.events.next(new qh(m.id,this.urlSerializer.serialize(m.extractedUrl),R,1)),m.resolve(null),Jn}}),si(m=>{const b=new zL(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(b)}),ft(m=>(this.currentTransition=l={...m,guards:mF(m.targetSnapshot,m.currentSnapshot,this.rootContexts)},l)),function xF(e,n){return sn(t=>{const{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:d}}=t;return 0===d.length&&0===l.length?ot({...t,guardsResult:!0}):function IF(e,n,t,i){return vr(e).pipe(sn(o=>function RF(e,n,t,i,o){const l=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return l&&0!==l.length?ot(l.map(p=>{const m=Lg(n)??o,b=Gh(p,m);return $u(function EF(e){return e&&Ug(e.canDeactivate)}(b)?b.canDeactivate(e,n,t,i):m.runInContext(()=>b(e,n,t,i))).pipe(Sc())})).pipe(Wh()):ot(!0)}(o.component,o.route,t,n,i)),Sc(o=>!0!==o,!0))}(d,i,o,e).pipe(sn(p=>p&&function bF(e){return"boolean"==typeof e}(p)?function AF(e,n,t,i){return vr(n).pipe(_c(o=>Sg(function kF(e,n){return null!==e&&n&&n(new QL(e)),ot(!0)}(o.route.parent,i),function MF(e,n){return null!==e&&n&&n(new JL(e)),ot(!0)}(o.route,i),function OF(e,n,t){const i=n[n.length-1],l=n.slice(0,n.length-1).reverse().map(d=>function yF(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(d)).filter(d=>null!==d).map(d=>Xv(()=>ot(d.guards.map(m=>{const b=Lg(d.node)??t,D=Gh(m,b);return $u(function SF(e){return e&&Ug(e.canActivateChild)}(D)?D.canActivateChild(i,e):b.runInContext(()=>D(i,e))).pipe(Sc())})).pipe(Wh())));return ot(l).pipe(Wh())}(e,o.path,t),function PF(e,n,t){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return ot(!0);const o=i.map(l=>Xv(()=>{const d=Lg(n)??t,p=Gh(l,d);return $u(function CF(e){return e&&Ug(e.canActivate)}(p)?p.canActivate(n,e):d.runInContext(()=>p(n,e))).pipe(Sc())}));return ot(o).pipe(Wh())}(e,o.route,t))),Sc(o=>!0!==o,!0))}(i,l,e,n):ot(p)),ft(p=>({...t,guardsResult:p})))})}(this.environmentInjector,m=>this.events.next(m)),si(m=>{if(l.guardsResult=m.guardsResult,Dc(m.guardsResult))throw tI(0,m.guardsResult);const b=new GL(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.events.next(b)}),xa(m=>!!m.guardsResult||(this.cancelNavigationTransition(m,"",3),!1)),gE(m=>{if(m.guards.canActivateChecks.length)return ot(m).pipe(si(b=>{const D=new WL(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(D)}),ai(b=>{let D=!1;return ot(b).pipe(function ZF(e,n){return sn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:o}}=t;if(!o.length)return ot(t);let l=0;return vr(o).pipe(_c(d=>function JF(e,n,t,i){const o=e.routeConfig,l=e._resolve;return void 0!==o?.title&&!pI(o)&&(l[wg]=o.title),function e3(e,n,t,i){const o=function t3(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===o.length)return ot({});const l={};return vr(o).pipe(sn(d=>function n3(e,n,t,i){const o=Lg(n)??i,l=Gh(e,o);return $u(l.resolve?l.resolve(n,t):o.runInContext(()=>l(n,t)))}(e[d],n,t,i).pipe(Sc(),si(p=>{l[d]=p}))),QS(1),function gL(e){return ft(()=>e)}(l),Ks(d=>oI(d)?Jn:Dg(d)))}(l,e,n,i).pipe(ft(d=>(e._resolvedData=d,e.data=Qx(e,t).resolve,o&&pI(o)&&(e.data[wg]=o.title),null)))}(d.route,i,e,n)),si(()=>l++),QS(1),sn(d=>l===o.length?ot(t):Jn))})}(t.paramsInheritanceStrategy,this.environmentInjector),si({next:()=>D=!0,complete:()=>{D||this.cancelNavigationTransition(b,"",2)}}))}),si(b=>{const D=new XL(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(D)}))}),gE(m=>{const b=D=>{const I=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(D.routeConfig).pipe(si(R=>{D.component=R}),ft(()=>{})));for(const R of D.children)I.push(...b(R));return I};return KS(b(m.targetSnapshot.root)).pipe(Zv(),Po(1))}),gE(()=>this.afterPreactivation()),ft(m=>{const b=function sF(e,n,t){const i=Ng(e,n._root,t?t._root:void 0);return new Kx(i,n)}(t.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return this.currentTransition=l={...m,targetRouterState:b},l}),si(()=>{this.events.next(new rE)}),((e,n,t,i)=>ft(o=>(new gF(n,o.targetRouterState,o.currentRouterState,t,i).activate(e),o)))(this.rootContexts,t.routeReuseStrategy,m=>this.events.next(m),this.inputBindingEnabled),Po(1),si({next:m=>{d=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ia(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects))),t.titleStrategy?.updateTitle(m.targetRouterState.snapshot),m.resolve(!0)},complete:()=>{d=!0}}),function mL(e){return Le((n,t)=>{Mr(e).subscribe(Ue(t,()=>t.complete(),kt)),!t.closed&&n.subscribe(t)})}(this.transitionAbortSubject.pipe(si(m=>{throw m}))),bg(()=>{d||p||this.cancelNavigationTransition(l,"",1),this.currentNavigation?.id===l.id&&(this.currentNavigation=null)}),Ks(m=>{if(p=!0,rI(m))this.events.next(new Og(l.id,this.urlSerializer.serialize(l.extractedUrl),m.message,m.cancellationCode)),function uF(e){return rI(e)&&Dc(e.url)}(m)?this.events.next(new iE(m.url)):l.resolve(!1);else{this.events.next(new o_(l.id,this.urlSerializer.serialize(l.extractedUrl),m,l.targetSnapshot??void 0));try{l.resolve(t.errorHandler(m))}catch(b){l.reject(b)}}return Jn}))}))}cancelNavigationTransition(t,i,o){const l=new Og(t.id,this.urlSerializer.serialize(t.extractedUrl),i,o);this.events.next(l),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function mI(e){return e!==Pg}let yI=(()=>{class e{buildTitle(t){let i,o=t.root;for(;void 0!==o;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(l=>l.outlet===Bt);return i}getResolvedTitleForRoute(t){return t.data[wg]}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:function(){return Ye(s3)},providedIn:"root"})}return e})(),s3=(()=>{class e extends yI{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||e)(ze(G2))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),o3=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:function(){return Ye(u3)},providedIn:"root"})}return e})();class a3{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}let u3=(()=>{class e extends a3{static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=ho(e)))(o||e)}}();static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const p_=new et("",{providedIn:"root",factory:()=>({})});let l3=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:function(){return Ye(c3)},providedIn:"root"})}return e})(),c3=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var jg=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(jg||{});function vI(e,n){e.events.pipe(xa(t=>t instanceof Ia||t instanceof Og||t instanceof o_||t instanceof qh),ft(t=>t instanceof Ia||t instanceof qh?jg.COMPLETE:t instanceof Og&&(0===t.code||1===t.code)?jg.REDIRECTING:jg.FAILED),xa(t=>t!==jg.REDIRECTING),Po(1)).subscribe(()=>{n()})}function d3(e){throw e}function h3(e,n,t){return n.parse("/")}const f3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},p3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ci=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ye(Ew),this.isNgZoneEnabled=!1,this._events=new $e,this.options=Ye(p_,{optional:!0})||{},this.pendingTasks=Ye(Tv),this.errorHandler=this.options.errorHandler||d3,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||h3,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ye(l3),this.routeReuseStrategy=Ye(o3),this.titleStrategy=Ye(yI),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ye(Kh,{optional:!0})?.flat()??[],this.navigationTransitions=Ye(f_),this.urlSerializer=Ye(Ig),this.location=Ye(hS),this.componentInputBindingEnabled=!!Ye(u_,{optional:!0}),this.eventsSubscription=new ie,this.isNgZoneEnabled=Ye(_n)instanceof _n&&_n.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Hh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Yx(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(_I(i)&&this._events.next(i));if(i instanceof s_)mI(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(i instanceof qh)this.rawUrlTree=o.rawUrl;else if(i instanceof Gx){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const l=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(l,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(i instanceof rE)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(i instanceof Og)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(o);else if(i instanceof iE){const l=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),d={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mI(o.source)};this.scheduleNavigation(l,Pg,null,d,{resolve:o.resolve,reject:o.reject,promise:o.promise})}i instanceof o_&&this.restoreHistory(o,!0),i instanceof Ia&&(this.navigated=!0),_I(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Pg,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,o){const l={replaceUrl:!0},d=o?.navigationId?o:null;if(o){const m={...o};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(l.state=m)}const p=this.parseUrl(t);this.scheduleNavigation(p,i,d,l)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(hE),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:o,queryParams:l,fragment:d,queryParamsHandling:p,preserveFragment:m}=i,b=m?this.currentUrlTree.fragment:d;let I,D=null;switch(p){case"merge":D={...this.currentUrlTree.queryParams,...l};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=l||null}null!==D&&(D=this.removeEmptyProps(D));try{I=Ux(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),I=this.currentUrlTree.root}return jx(I,t,D,b??null)}navigateByUrl(t,i={skipLocationChange:!1}){const o=Dc(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,Pg,null,i)}navigate(t,i={skipLocationChange:!1}){return function g3(e){for(let n=0;n<e.length;n++)if(null==e[n])throw new Oe(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(o){i=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return i}isActive(t,i){let o;if(o=!0===i?{...f3}:!1===i?{...p3}:i,Dc(t))return Mx(this.currentUrlTree,t,o);const l=this.parseUrl(t);return Mx(this.currentUrlTree,l,o)}removeEmptyProps(t){return Object.keys(t).reduce((i,o)=>{const l=t[o];return null!=l&&(i[o]=l),i},{})}scheduleNavigation(t,i,o,l,d){if(this.disposed)return Promise.resolve(!1);let p,m,b;d?(p=d.resolve,m=d.reject,b=d.promise):b=new Promise((I,R)=>{p=I,m=R});const D=this.pendingTasks.add();return vI(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:l,resolve:p,reject:m,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(I=>Promise.reject(I))}setBrowserUrl(t,i){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){const d={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(o,"",d)}else{const l={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(o,"",l)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-this.browserPageId;0!==l?this.location.historyGo(l):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function _I(e){return!(e instanceof rE||e instanceof iE)}let $g=(()=>{class e{constructor(t,i,o,l,d,p){this.router=t,this.route=i,this.tabIndexAttribute=o,this.renderer=l,this.el=d,this.locationStrategy=p,this.href=null,this.commands=null,this.onChanges=new $e,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const m=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(b=>{b instanceof Ia&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,o,l,d){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||o||l||d||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function zd(e,n,t){return function Q0(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?Y0:_u}(n,t)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const o=this.renderer,l=this.el.nativeElement;null!==i?o.setAttribute(l,t,i):o.removeAttribute(l,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||e)(je(Ci),je(No),function ra(e){return function lb(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const i=t.length;let o=0;for(;o<i;){const l=t[o];if(Vi(l))break;if(0===l)o+=2;else if("number"==typeof l)for(o++;o<i&&"string"==typeof t[o];)o++;else{if(l===n)return t[o+1];o+=2}}}return null}(Cr(),e)}("tabindex"),je(ms),je(ni),je(vc))};static#t=this.\u0275dir=Wn({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){1&i&&vi("click",function(d){return o.onClick(d.button,d.ctrlKey,d.shiftKey,d.altKey,d.metaKey)}),2&i&&dc("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",uS],skipLocationChange:["skipLocationChange","skipLocationChange",uS],replaceUrl:["replaceUrl","replaceUrl",uS],routerLink:"routerLink"},standalone:!0,features:[tv,ls]})}return e})();class bI{}let v3=(()=>{class e{constructor(t,i,o,l,d){this.router=t,this.injector=o,this.preloadingStrategy=l,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(xa(t=>t instanceof Ia),_c(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const o=[];for(const l of i){l.providers&&!l._injector&&(l._injector=MC(l.providers,t,`Route: ${l.path}`));const d=l._injector??t,p=l._loadedInjector??d;(l.loadChildren&&!l._loadedRoutes&&void 0===l.canLoad||l.loadComponent&&!l._loadedComponent)&&o.push(this.preloadConfig(d,l)),(l.children||l._loadedRoutes)&&o.push(this.processRoutes(p,l.children??l._loadedRoutes))}return vr(o).pipe(or())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let o;o=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):ot(null);const l=o.pipe(sn(d=>null===d?ot(void 0):(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));return i.loadComponent&&!i._loadedComponent?vr([l,this.loader.loadComponent(i)]).pipe(or()):l})}static#e=this.\u0275fac=function(i){return new(i||e)(ze(Ci),ze(Dw),ze(mi),ze(bI),ze(mE))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const yE=new et("");let TI=(()=>{class e{constructor(t,i,o,l,d={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=o,this.zone=l,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof s_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ia?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof qh&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Wx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Wx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){!function Eu(){throw new Error("invalid")}()};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac})}return e})();function Ma(e,n){return{\u0275kind:e,\u0275providers:n}}function SI(){const e=Ye(Pi);return n=>{const t=e.get(Lh);if(n!==t.components[0])return;const i=e.get(Ci),o=e.get(EI);1===e.get(vE)&&i.initialNavigation(),e.get(DI,null,Ot.Optional)?.setUpPreloading(),e.get(yE,null,Ot.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const EI=new et("",{factory:()=>new $e}),vE=new et("",{providedIn:"root",factory:()=>1}),DI=new et("");function C3(e){return Ma(0,[{provide:DI,useExisting:v3},{provide:bI,useExisting:e}])}const wI=new et("ROUTER_FORROOT_GUARD"),E3=[hS,{provide:Ig,useClass:ZS},Ci,Rg,{provide:No,useFactory:function CI(e){return e.routerState.root},deps:[Ci]},mE,[]];function D3(){return new Pw("Router",Ci)}let xI=(()=>{class e{constructor(t){}static forRoot(t,i){return{ngModule:e,providers:[E3,[],{provide:Kh,multi:!0,useValue:t},{provide:wI,useFactory:A3,deps:[[Ci,new El,new xd]]},{provide:p_,useValue:i||{}},i?.useHash?{provide:vc,useClass:rO}:{provide:vc,useClass:u2},{provide:yE,useFactory:()=>{const e=Ye(CR),n=Ye(_n),t=Ye(p_),i=Ye(f_),o=Ye(Ig);return t.scrollOffset&&e.setOffset(t.scrollOffset),new TI(o,i,e,n,t)}},i?.preloadingStrategy?C3(i.preloadingStrategy).\u0275providers:[],{provide:Pw,multi:!0,useFactory:D3},i?.initialNavigation?M3(i):[],i?.bindToComponentInputs?Ma(8,[eI,{provide:u_,useExisting:eI}]).\u0275providers:[],[{provide:II,useFactory:SI},{provide:tS,multi:!0,useExisting:II}]]}}static forChild(t){return{ngModule:e,providers:[{provide:Kh,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||e)(ze(wI,8))};static#t=this.\u0275mod=Pr({type:e});static#n=this.\u0275inj=Rn({})}return e})();function A3(e){return"guarded"}function M3(e){return["disabled"===e.initialNavigation?Ma(3,[{provide:WC,multi:!0,useFactory:()=>{const n=Ye(Ci);return()=>{n.setUpLocationChangeListener()}}},{provide:vE,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Ma(2,[{provide:vE,useValue:0},{provide:WC,multi:!0,deps:[Pi],useFactory:n=>{const t=n.get(tO,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const o=n.get(Ci),l=n.get(EI);vI(o,()=>{i(!0)}),n.get(f_).afterPreactivation=()=>(i(!0),l.closed?ot(void 0):l),o.initialNavigation()}))}}]).\u0275providers:[]]}const II=new et("");let g_=(()=>{class e{constructor(){this.activeLink=""}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ka=(()=>{class e{constructor(t,i){this.translate=t,this.router=i,this.languageChanged=new Bn,this.translate.setDefaultLang("en");const o=localStorage.getItem("lang")||"en";this.translate.use(o)}switchLanguage(t){this.translate.currentLang!==t&&(this.translate.use(t),localStorage.setItem("lang",t),this.languageChanged.emit(t))}getCurrentLanguage(){return this.translate.currentLang||"en"}static#e=this.\u0275fac=function(i){return new(i||e)(ze(XS),ze(Ci))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),P3=(()=>{class e{constructor(t){this.languageService=t}static#e=this.\u0275fac=function(i){return new(i||e)(je(ka))};static#t=this.\u0275cmp=wr({type:e,selectors:[["app-about"]],decls:45,vars:11,consts:[[1,"container"],[1,"text-start","mb-4"],[1,"mb-4","text-start"],[1,"underline"],[1,"row","align-items-start","mb-4"],[1,"col-12","col-md-4","mb-4","mb-md-0"],["src","/assets/images/profile/profile-img.jpg","alt","Profile Image",1,"img-fluid","rounded","shadow-lg","w-100","h-auto"],[1,"col-12","col-md-8","d-flex","flex-column"],[1,"text-light","mb-4"],[1,"row"],[1,"col-12","mb-3","d-flex","align-items-center"],[1,"fas","fa-birthday-cake","me-3","text-primary"],[1,"fas","fa-user","me-3","text-primary"],[1,"fas","fa-phone","me-3","text-primary"],[1,"fas","fa-envelope","me-3","text-primary"],[1,"text-decoration-none",3,"href"],[1,"fas","fa-map-marker-alt","me-3","text-primary"],[1,"fas","fa-globe","me-3","text-primary"],["href","https://codechemist.se","target","_blank",1,"text-decoration-none"]],template:function(i,o){1&i&&(ve(0,"div",0)(1,"div",1)(2,"h2",2)(3,"span",3),ut(4),De(),ut(5),De(),ve(6,"p",2),ut(7),De()(),ve(8,"div",4)(9,"div",5),Tt(10,"img",6),De(),ve(11,"div",7)(12,"h3",8),ut(13),De(),ve(14,"div",9)(15,"div",10),Tt(16,"i",11),ve(17,"span")(18,"strong"),ut(19),De()()(),ve(20,"div",10),Tt(21,"i",12),ve(22,"span")(23,"strong"),ut(24),De()()(),ve(25,"div",10),Tt(26,"i",13),ve(27,"span")(28,"strong"),ut(29),De()()(),ve(30,"div",10),Tt(31,"i",14),ve(32,"span")(33,"a",15),ut(34),De()()(),ve(35,"div",10),Tt(36,"i",16),ve(37,"span")(38,"strong"),ut(39),De()()(),ve(40,"div",10),Tt(41,"i",17),ve(42,"span")(43,"a",18),ut(44),De()()()()()()()),2&i&&(Ae(4),on(" ",o.languageService.generalContent.ABOUT.TITLEPARTONE,""),Ae(1),on("",o.languageService.generalContent.ABOUT.TITLEPARTWO," "),Ae(2),on(" ",o.languageService.generalContent.ABOUT.DESCRIPTION," "),Ae(6),hn(o.languageService.generalContent.ABOUT.PROFESSION),Ae(6),hn(o.languageService.generalContent.ABOUT.BIRTHDAY),Ae(5),on("",o.languageService.generalContent.ABOUT.AGE,":"),Ae(5),on("",o.languageService.generalContent.ABOUT.PHONE,":"),Ae(4),cv("href","mailto:",o.languageService.generalContent.ABOUT.EMAIL,"",_u),Ae(1),on(" ",o.languageService.generalContent.ABOUT.EMAIL," "),Ae(5),hn(o.languageService.generalContent.ABOUT.LOCATION),Ae(5),on(" ",o.languageService.generalContent.ABOUT.WEBSITE," "))}})}return e})(),O3=(()=>{class e{constructor(t){this.languageService=t}static#e=this.\u0275fac=function(i){return new(i||e)(je(ka))};static#t=this.\u0275cmp=wr({type:e,selectors:[["app-resume"]],decls:35,vars:12,consts:[["id","resume",1,"resume"],[1,"container"],[1,"mb-4","text-start"],[1,"underline"],[1,"row"],["data-aos","fade-up","data-aos-delay","100",1,"col-lg-6"],[1,"resume-item","mb-4","ps-3","border-start","border-primary"],[1,"fw-bold"],[1,"date-border"],[1,"mb-0"],[1,"mb-2"],[1,"list-unstyled","custom-bullets"]],template:function(i,o){1&i&&(ve(0,"section",0)(1,"div",1)(2,"h2",2)(3,"span",3),ut(4),De(),ut(5),De(),ve(6,"div",4)(7,"div",5)(8,"div",6)(9,"h4",7),ut(10),De(),ve(11,"h6",8),ut(12),De(),ve(13,"p",9)(14,"em"),ut(15),De()()(),ve(16,"div",6)(17,"h4",7),ut(18),De(),ve(19,"h6",8),ut(20),De(),ve(21,"p",9)(22,"em"),ut(23),De()()(),ve(24,"div",6)(25,"h4",7),ut(26),De(),ve(27,"h6",8),ut(28),De(),ve(29,"p",10)(30,"em"),ut(31),De()(),ve(32,"ul",11)(33,"li"),ut(34),De()()()()()()()),2&i&&(Ae(4),hn(o.languageService.generalContent.RESUME.TITLEPARTONE),Ae(1),on("",o.languageService.generalContent.RESUME.TITLEPARTWO," "),Ae(5),hn(o.languageService.generalContent.RESUME.EDUCATIONONE.ROLE),Ae(2),hn(o.languageService.generalContent.RESUME.EDUCATIONONE.DATES),Ae(3),hn(o.languageService.generalContent.RESUME.EDUCATIONONE.INSTITUTION),Ae(3),hn(o.languageService.generalContent.RESUME.EDUCATIONTWO.ROLE),Ae(2),hn(o.languageService.generalContent.RESUME.EDUCATIONTWO.DATES),Ae(3),hn(o.languageService.generalContent.RESUME.EDUCATIONTWO.INSTITUTION),Ae(3),hn(o.languageService.generalContent.RESUME.WORKONE.ROLE),Ae(2),hn(o.languageService.generalContent.RESUME.WORKONE.DATES),Ae(3),hn(o.languageService.generalContent.RESUME.WORKONE.INSTITUTION),Ae(3),hn(o.languageService.generalContent.RESUME.WORKONE.DETAILS))},styles:['.resume-item[_ngcontent-%COMP%]{padding-bottom:20px;position:relative}.resume-item[_ngcontent-%COMP%]:before{content:"";position:absolute;width:16px;height:16px;border-radius:50%;left:-9px;top:0;background:#007bff;border:2px solid #ffffff}.date-border[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border:1px solid #007bff;border-radius:3px;margin-right:5px}.custom-bullets[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding-left:1.5em}.custom-bullets[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2022";color:#007bff;font-size:1.2em;position:absolute;left:0;top:0}']})}return e})(),R3=(()=>{class e{constructor(t){this.languageService=t}static#e=this.\u0275fac=function(i){return new(i||e)(je(ka))};static#t=this.\u0275cmp=wr({type:e,selectors:[["app-contact"]],decls:29,vars:9,consts:[[1,"container"],[1,"text-start","mb-4"],[1,"mb-4","text-start"],[1,"underline"],[1,"contact-item","mb-4","d-flex","align-items-center"],[1,"fas","fa-map-marker-alt","me-3","fs-2","text-primary"],[1,"mb-1"],[1,"mb-0"],[1,"fas","fa-phone","me-3","fs-2","text-primary"],[1,"fas","fa-envelope","me-3","fs-2","text-primary"]],template:function(i,o){1&i&&(ve(0,"div",0)(1,"div",1)(2,"h2",2)(3,"span",3),ut(4),De(),ut(5),De(),ve(6,"p",2),ut(7),De()(),ve(8,"div",4),Tt(9,"i",5),ve(10,"div")(11,"h4",6),ut(12),De(),ve(13,"p",7),ut(14),De()()(),ve(15,"div",4),Tt(16,"i",8),ve(17,"div")(18,"h4",6),ut(19),De(),ve(20,"p",7),ut(21),De()()(),ve(22,"div",4),Tt(23,"i",9),ve(24,"div")(25,"h4",6),ut(26),De(),ve(27,"p",7),ut(28),De()()()()),2&i&&(Ae(4),on(" ",o.languageService.generalContent.CONTACT.TITLEPARTONE,""),Ae(1),on("",o.languageService.generalContent.CONTACT.TITLEPARTWO," "),Ae(2),on(" ",o.languageService.generalContent.CONTACT.DESCRIPTION," "),Ae(5),hn(o.languageService.generalContent.CONTACT.ADDRESS.TITLE),Ae(2),hn(o.languageService.generalContent.CONTACT.ADDRESS.DETAILS),Ae(5),hn(o.languageService.generalContent.CONTACT.PHONE.TITLE),Ae(2),hn(o.languageService.generalContent.CONTACT.PHONE.DETAILS),Ae(5),hn(o.languageService.generalContent.CONTACT.EMAIL.TITLE),Ae(2),hn(o.languageService.generalContent.CONTACT.EMAIL.DETAILS))},styles:[".contact-item[_ngcontent-%COMP%]{transition:transform .3s,box-shadow .3s,border-color .3s;padding:1rem;border:1px solid #0d6efd;border-radius:.375rem;background-color:#212529;box-shadow:0 4px 8px #0003}.contact-item[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 6px 12px #0000004d;border-color:#0056b3!important}.text-light[_ngcontent-%COMP%]{color:#f8f9fa!important}"]})}return e})(),Vg=(()=>{class e{constructor(t){this.http=t,this.skillsUrl="assets/jsons/skills.json",this.technologiesUrl="assets/jsons/technologies.json"}getContents(){const i=`assets/i18n/general-contents-${localStorage.getItem("lang")||"en"}.json`;return this.http.get(i).pipe(ft(o=>o),Ks(o=>(console.error("Error fetching technologies",o),ot([]))))}getPortfolios(){const i=`assets/i18n/portfolios-${localStorage.getItem("lang")||"en"}.json`;return this.http.get(i).pipe(Ks(o=>(console.error("Error fetching portfolios",o),ot([]))))}getPortfolioId(t){return this.getPortfolios().pipe(ft(i=>i.find(o=>o.id===t)),Ks(i=>(console.error("Error fetching portfolio by ID",i),ot(null))))}getTechnologies(){return this.http.get(this.technologiesUrl).pipe(ft(t=>t.technologies),Ks(t=>(console.error("Error fetching technologies",t),ot([]))))}getSkills(){return this.http.get(this.skillsUrl)}static#e=this.\u0275fac=function(i){return new(i||e)(ze(jS))};static#t=this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const N3=function(e){return{width:e}};function L3(e,n){if(1&e&&(ve(0,"div",7)(1,"div",8)(2,"span",9),ut(3),De(),ve(4,"span",9),ut(5),De()(),ve(6,"div",10),Tt(7,"div",11),De()()),2&e){const t=n.$implicit;Ae(3),hn(t.title),Ae(2),on("",t.amount,"%"),Ae(2),ee("ngClass",t.color)("ngStyle",ii(5,N3,t.amount+"%")),dc("aria-valuenow",t.amount)}}function F3(e,n){if(1&e&&(ve(0,"div",5)(1,"h3"),ut(2),De(),O(3,L3,8,7,"div",6),De()),2&e){const t=n.$implicit;Ae(2),hn(t.title),Ae(1),ee("ngForOf",t.progresses)}}let B3=(()=>{class e{constructor(t,i){this.fechService=t,this.languageService=i,this.skills=[]}ngOnInit(){this.fechService.getSkills().subscribe(t=>{this.skills=t})}static#e=this.\u0275fac=function(i){return new(i||e)(je(Vg),je(ka))};static#t=this.\u0275cmp=wr({type:e,selectors:[["app-skills"]],decls:7,vars:3,consts:[[1,"container"],[1,"text-light","mb-4"],[1,"underline"],[1,"row"],["class","col-md-4 mb-4",4,"ngFor","ngForOf"],[1,"col-md-4","mb-4"],["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],[1,"d-flex","justify-content-between","align-items-center","mb-1"],[1,"font-weight-bold"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"ngClass","ngStyle"]],template:function(i,o){1&i&&(ve(0,"div",0)(1,"h2",1)(2,"span",2),ut(3),De(),ut(4),De(),ve(5,"div",3),O(6,F3,4,2,"div",4),De()()),2&i&&(Ae(3),hn(o.languageService.generalContent.SKILLS.TITLEPARTONE),Ae(1),on("",o.languageService.generalContent.SKILLS.TITLEPARTWO," "),Ae(2),ee("ngForOf",o.skills))},dependencies:[yg,jv,E2],styles:[".progress[_ngcontent-%COMP%]{background-color:#191d20}"]})}return e})();const U3=function(e){return{active:e}};function j3(e,n){if(1&e){const t=uv();ve(0,"button",8),vi("click",function(){const l=Gi(t).$implicit;return Os(fr().filterByTechnology(l))}),ut(1),De()}if(2&e){const t=n.$implicit,i=fr();ee("ngClass",ii(2,U3,t===i.selectedTechnology)),Ae(1),on(" ",t," ")}}const $3=function(e,n){return["/",e,"portfolio",n]};function V3(e,n){if(1&e&&(ve(0,"div",11)(1,"div",12)(2,"a",13)(3,"div",14),Tt(4,"img",15),ve(5,"div",16)(6,"h5",17),ut(7),De()()()()()()),2&e){const t=n.$implicit,i=fr(2);Ae(2),ee("routerLink",yv(4,$3,i.languageService.generalContent.ROUTER.LANGUAGE,t.id)),Ae(2),ee("src",t.image,_u)("alt",t.title),Ae(3),hn(t.title)}}function H3(e,n){if(1&e&&(ve(0,"div",9),O(1,V3,8,7,"div",10),De()),2&e){const t=fr();Ae(1),ee("ngForOf",t.filteredPortfolios)}}function q3(e,n){if(1&e&&(ve(0,"p"),ut(1),De()),2&e){const t=fr();Ae(1),hn(t.languageService.generalContent.ERRORS.PORTFOLIOERROR)}}let z3=(()=>{class e{constructor(t,i,o){this.fechService=t,this.sharedDataService=i,this.languageService=o,this.portfolios=[],this.technologies=[],this.filteredPortfolios=[],this.selectedTechnology="All"}ngOnInit(){this.fetchData(),this.langChangeSubscription=this.languageService.languageChanged.subscribe(t=>{this.fetchData()})}fetchData(){this.fechService.getTechnologies().subscribe(t=>{this.technologies=t}),this.fechService.getPortfolios().subscribe(t=>{this.portfolios=t,this.portfolios.sort((i,o)=>i.id-o.id),this.filteredPortfolios=[...this.portfolios]})}filterByTechnology(t){this.selectedTechnology=t,this.filteredPortfolios="All"===t?[...this.portfolios]:this.portfolios.filter(i=>i.category===t),this.filteredPortfolios.sort((i,o)=>i.id-o.id)}ngOnDestroy(){this.langChangeSubscription&&this.langChangeSubscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||e)(je(Vg),je(g_),je(ka))};static#t=this.\u0275cmp=wr({type:e,selectors:[["app-portfolio"]],decls:12,vars:6,consts:[[1,"container"],[1,"text-start","mb-4"],[1,"mb-4","text-start"],[1,"underline"],[1,"d-flex","flex-wrap","justify-content-center","mb-5"],["class","btn btn-outline-primary mx-2 my-1",3,"ngClass","click",4,"ngFor","ngForOf"],["class","row g-4",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-outline-primary","mx-2","my-1",3,"ngClass","click"],[1,"row","g-4"],["class","col-lg-3 col-md-6 col-sm-12",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-6","col-sm-12"],[1,"card","border-0","shadow-sm","position-relative"],[1,"d-block","h-100",3,"routerLink"],[1,"image-wrapper","position-relative","w-100","h-100"],[1,"img-fluid","w-100","h-100",3,"src","alt"],[1,"overlay","d-flex","align-items-end","justify-content-center"],[1,"text-light","mb-4"]],template:function(i,o){1&i&&(ve(0,"div",0)(1,"div",1)(2,"h2",2)(3,"span",3),ut(4),De(),ut(5),De(),ve(6,"p",2),ut(7),De()(),ve(8,"div",4),O(9,j3,2,4,"button",5),De(),O(10,H3,2,1,"div",6),O(11,q3,2,1,"p",7),De()),2&i&&(Ae(4),on(" ",o.languageService.generalContent.PORTFOLIO.TITLEPARTONE,""),Ae(1),on("",o.languageService.generalContent.PORTFOLIO.TITLEPARTWO," "),Ae(2),on(" ",o.languageService.generalContent.PORTFOLIO.DESCRIPTION," "),Ae(2),ee("ngForOf",o.technologies),Ae(1),ee("ngIf",o.filteredPortfolios.length>0),Ae(1),ee("ngIf",0===o.filteredPortfolios.length))},dependencies:[yg,jv,Uh,$g],styles:[".card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease;height:100%;overflow:hidden}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 16px #0000004d}.position-relative[_ngcontent-%COMP%]{position:relative}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);opacity:0;transition:opacity .3s ease;border-radius:.25rem}.position-relative[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}a[_ngcontent-%COMP%]:focus   .overlay[_ngcontent-%COMP%]{opacity:1;background:rgba(0,123,255,.6)}"]})}return e})();function G3(e,n){if(1&e&&(ve(0,"span",11),ut(1),De()),2&e){const t=fr();Ae(1),on("",t.languageService.generalContent.HOME.JOBTITLEONE," ")}}function W3(e,n){if(1&e&&(ve(0,"span",11),ut(1),De()),2&e){const t=fr();Ae(1),on("",t.languageService.generalContent.HOME.JOBTITLETWO," ")}}function X3(e,n){1&e&&Tt(0,"span",12)}function K3(e,n){1&e&&Tt(0,"span",12)}function Y3(e,n){1&e&&(ve(0,"a",13),Tt(1,"i",14),De())}let Q3=(()=>{class e{constructor(t,i,o){this.sharedDataService=t,this.languageService=i,this.route=o,this.jobDisplay=!0,this.showScrollToTopButton=!1,this.sections=["home","about","skills","resume","portfolio","contact"]}onScroll(){const t=window.pageYOffset;this.showScrollToTopButton=t>100,this.updateActiveLink()}ngOnInit(){this.animateTextLoop()}ngAfterViewInit(){this.route.fragment.subscribe(t=>{t&&this.scrollToSection(t)})}animateTextLoop(){setInterval(()=>{this.jobDisplay=!this.jobDisplay},4e3)}updateActiveLink(){let t=this.sharedDataService.activeLink;for(let i of this.sections){const o=document.getElementById(i);if(o){const l=o.getBoundingClientRect();if(l.top>=0&&l.bottom<=window.innerHeight){t=i;break}}}this.sharedDataService.activeLink=t}scrollToSection(t){const i=document.getElementById(t);i&&i.scrollIntoView({behavior:"smooth"})}static#e=this.\u0275fac=function(i){return new(i||e)(je(g_),je(ka),je(No))};static#t=this.\u0275cmp=wr({type:e,selectors:[["app-home"]],hostBindings:function(i,o){1&i&&vi("scroll",function(d){return o.onScroll(d)},0,Sy)},decls:23,vars:11,consts:[[1,"container-fluid","p-0","min-vh-100","position-relative","overflow-hidden","mb-5",3,"id"],["src","/assets/images/profile/vr.jpg","alt","Background Image",1,"position-absolute","top-0","start-0","w-100","h-100","object-fit-cover"],[1,"position-absolute","top-0","start-0","w-100","h-100","bg-overlay"],[1,"position-absolute","top-50","start-0","translate-middle-y","p-4","d-flex","flex-column","align-items-start","text-light"],[1,"display-4","fw-bold","mb-2"],[1,"mb-3","d-flex","align-items-center","h5","fw-bold"],[1,"position-relative","d-inline-block","mt-2"],["class","animated-text",4,"ngIf"],["class","underline",4,"ngIf"],[1,"mb-5",3,"id"],["href","#home","class","btn btn-primary position-fixed bottom-0 end-0 m-3 rounded-circle","style","z-index: 1050;",4,"ngIf"],[1,"animated-text"],[1,"underline"],["href","#home",1,"btn","btn-primary","position-fixed","bottom-0","end-0","m-3","rounded-circle",2,"z-index","1050"],[1,"fas","fa-arrow-up"]],template:function(i,o){1&i&&(ve(0,"section",0),Tt(1,"img",1)(2,"div",2),ve(3,"div",3)(4,"div",4),ut(5,"Mustafa Muqtar"),De(),ve(6,"p",5)(7,"span",6),O(8,G3,2,1,"span",7),O(9,W3,2,1,"span",7),O(10,X3,1,0,"span",8),O(11,K3,1,0,"span",8),De()()()(),ve(12,"section",9),Tt(13,"app-about"),De(),ve(14,"section",9),Tt(15,"app-skills"),De(),ve(16,"section",9),Tt(17,"app-resume"),De(),ve(18,"section",9),Tt(19,"app-portfolio"),De(),ve(20,"section",9),Tt(21,"app-contact"),De(),O(22,Y3,2,0,"a",10)),2&i&&(ee("id",o.languageService.generalContent.ROUTER.HOME),Ae(8),ee("ngIf",o.jobDisplay),Ae(1),ee("ngIf",!o.jobDisplay),Ae(1),ee("ngIf",o.jobDisplay),Ae(1),ee("ngIf",!o.jobDisplay),Ae(1),ee("id",o.languageService.generalContent.ROUTER.ABOUT),Ae(2),ee("id",o.languageService.generalContent.ROUTER.SKILLS),Ae(2),ee("id",o.languageService.generalContent.ROUTER.RESUME),Ae(2),ee("id",o.languageService.generalContent.ROUTER.PORTFOLIO),Ae(2),ee("id",o.languageService.generalContent.ROUTER.CONTACT),Ae(2),ee("ngIf",o.showScrollToTopButton))},dependencies:[Uh,P3,O3,R3,B3,z3],styles:[".animated-text[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap;overflow:hidden;font-family:monospace;font-size:1.2em;animation:_ngcontent-%COMP%_typing 3s steps(30,end) forwards,blink-caret .75s step-end infinite;border-right:2px solid transparent;vertical-align:baseline;line-height:1.2}@media (max-width: 576px){.animated-text[_ngcontent-%COMP%]{font-size:1em}.display-4[_ngcontent-%COMP%]{font-size:2.5rem}.h5[_ngcontent-%COMP%]{font-size:1.25rem}}.underline[_ngcontent-%COMP%]{position:absolute;bottom:-1px;left:0;height:2px;background-color:var(--bs-primary);animation:_ngcontent-%COMP%_underlineExpand 3s steps(30,end) forwards;width:100%}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_underlineExpand{0%{width:0}to{width:100%}}.bg-overlay[_ngcontent-%COMP%]{background-color:#0000004d;z-index:1}.text-light[_ngcontent-%COMP%]{z-index:2}"]})}return e})();Fe(795);const Z3=["target"];let J3=(()=>{class e{constructor(){this.options={autoplay:!1,controls:!0,preload:"auto",fluid:!0,plugins:{hotkeys:{enableModifiersForNumbers:!1,seekStep:5}}}}ngAfterViewInit(){this.readyVideojsPlayer()}readyVideojsPlayer(){this.target&&this.target.nativeElement&&(this.player=videojs(this.target.nativeElement,this.options),this.player.ready(()=>{this.player.hotkeys({enableModifiersForNumbers:!1,seekStep:5})}),this.player.src({src:this.videoLink,type:"video/mp4"}))}ngOnDestroy(){this.player&&this.player.dispose()}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=wr({type:e,selectors:[["app-video-player"]],viewQuery:function(i,o){if(1&i&&rw(Z3,7),2&i){let l;UC(l=function jC(){return function Ck(e,n){return e[Hi].queries[n].queryList}(ye(),Mf())}())&&(o.target=l.first)}},inputs:{videoLink:"videoLink"},decls:4,vars:1,consts:[[1,"video-wrapper"],["id","video-player","controls","","playsinline","","preload","auto",1,"video-js","vjs-theme-city"],["target",""],["type","video/mp4",3,"src"]],template:function(i,o){1&i&&(ve(0,"div",0)(1,"video",1,2),Tt(3,"source",3),De()()),2&i&&(Ae(3),ee("src",o.videoLink,_u))},styles:[".video-js.vjs-theme-city,.video-js.vjs-theme-city .vjs-control-bar{background-color:#343a40!important;color:#0d6efd!important}.video-js.vjs-theme-city .vjs-big-play-button{background-color:#191d20!important;border-color:#0d6efd!important;color:#0d6efd!important}.video-js.vjs-theme-city .vjs-progress-holder{background-color:#343a40!important}.video-js.vjs-theme-city .vjs-play-progress{background-color:#0d6efd!important}.video-js.vjs-theme-city .vjs-volume-level,.video-js.vjs-theme-city .vjs-current-time,.video-js.vjs-theme-city .vjs-duration,.video-js.vjs-theme-city .vjs-remaining-time,.video-js.vjs-theme-city .vjs-control{color:#0d6efd!important}.video-js.vjs-theme-city .vjs-slider-handle{background-color:#0d6efd!important}.video-js.vjs-theme-city .vjs-slider-horizontal .vjs-volume-tooltip,.video-js.vjs-theme-city .vjs-tooltip,.video-js.vjs-theme-city .vjs-mouse-display{background-color:#0d6efd!important;color:#343a40!important}\n"],encapsulation:2})}return e})();function e4(e,n){if(1&e&&(Nu(0),ve(1,"div",23),Tt(2,"app-video-player",24),De(),wn()),2&e){const t=fr().$implicit;Ae(2),ee("videoLink",t)}}function t4(e,n){if(1&e&&(ve(0,"div",23),Tt(1,"img",25),De()),2&e){const t=fr().$implicit;Ae(1),ee("src",t,_u)}}function n4(e,n){if(1&e&&(ve(0,"div",20),O(1,e4,3,1,"ng-container",21),O(2,t4,2,1,"ng-template",null,22,$C),De()),2&e){const t=n.$implicit,i=He(3),o=fr();Ae(1),ee("ngIf",o.isVideo(t))("ngIfElse",i)}}function r4(e,n){if(1&e&&(Nu(0),ve(1,"strong"),ut(2),De(),ut(3),wn()),2&e){const t=fr().$implicit;Ae(2),on("",t.split(":")[0],":"),Ae(1),on(" ",t.split(":")[1]," ")}}function i4(e,n){1&e&&ut(0),2&e&&on(" ",fr().$implicit," ")}function s4(e,n){if(1&e&&(ve(0,"li"),O(1,r4,4,2,"ng-container",21),O(2,i4,1,1,"ng-template",null,26,$C),De()),2&e){const t=n.$implicit,i=He(3);Ae(1),ee("ngIf",t.includes(":"))("ngIfElse",i)}}const o4=[{path:":lang",children:[{path:"",component:Q3},{path:"portfolio/:id",component:(()=>{class e{constructor(t,i,o,l){this.fechService=t,this.languageService=i,this.route=o,this.cdr=l,this.isSwiperInitialized=!1}ngOnInit(){this.fetchData(),this.loadPortfolio(),this.langChangeSubscription=this.languageService.languageChanged.subscribe(t=>{this.fetchData(),this.loadPortfolio()})}fetchData(){this.fechService.getContents().subscribe(t=>{this.generalContetn=t})}ngAfterViewInit(){this.initializeSwiper()}loadPortfolio(){const t=this.route.snapshot.paramMap.get("id");t?this.fechService.getPortfolioId(t).subscribe({next:i=>{this.portfolio=i,this.projectInformation=this.portfolio?.projectInformation||[],this.cdr.detectChanges(),this.isSwiperInitialized||this.initializeSwiper()},error:i=>{console.error("Error loading portfolio:",i)}}):console.error("Portfolio ID is missing or invalid")}initializeSwiper(){window.Swiper?(new window.Swiper(".portfolio-details-slider",{speed:400,loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination",type:"bullets",clickable:!0}}),this.isSwiperInitialized=!0):console.error("Swiper is not available on the window object.")}isVideo(t){return t.endsWith(".mp4")}ngOnDestroy(){this.langChangeSubscription&&this.langChangeSubscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||e)(je(Vg),je(ka),je(No),je(Dv))};static#t=this.\u0275cmp=wr({type:e,selectors:[["app-portfolio-detail"]],decls:25,vars:6,consts:[[1,"container","mt-5"],[1,"bg-dark-subtle","text-light","p-4","rounded","shadow-sm"],[1,"h2","text-light"],["id","portfolio-details",1,"portfolio-details","mt-4"],[1,"container"],[1,"row","gy-4"],[1,"col-lg-8"],[1,"portfolio-details-slider","swiper"],[1,"swiper-wrapper","align-items-center"],["class","swiper-slide",4,"ngFor","ngForOf"],[1,"swiper-pagination"],[1,"col-lg-4"],[1,"portfolio-info","p-4","bg-dark","text-light","rounded","shadow-lg","bg-dark-subtle"],[1,"mb-3"],[1,"border-primary","border-3"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"mt-4","bg-dark","text-light","rounded","p-4","shadow-lg","bg-dark-subtle"],[1,"h4"],[3,"innerHTML"],[1,"swiper-slide"],[4,"ngIf","ngIfElse"],["imageTemplate",""],[1,"media-container","rounded","shadow-lg"],[3,"videoLink"],["alt","Portfolio Image",1,"img-fluid",3,"src"],["defaultView",""]],template:function(i,o){1&i&&(ve(0,"div",0)(1,"div",1)(2,"h1",2),ut(3),De()(),ve(4,"section",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),O(10,n4,4,2,"div",9),De(),Tt(11,"div",10),De()(),ve(12,"div",11)(13,"div",12)(14,"h3",13),ut(15),De(),Tt(16,"hr",14),ve(17,"ul",15),O(18,s4,4,2,"li",16),De()()()(),ve(19,"div",17)(20,"p",18)(21,"strong"),ut(22),De()(),Tt(23,"hr",14)(24,"p",19),De()()()()),2&i&&(Ae(3),hn(null==o.portfolio?null:o.portfolio.title),Ae(7),ee("ngForOf",null==o.portfolio?null:o.portfolio.files),Ae(5),hn(o.generalContetn.PORTFOLIO.PORTFOLIODETAILTITLEPARTONE),Ae(3),ee("ngForOf",o.projectInformation),Ae(4),hn(o.generalContetn.PORTFOLIO.PORTFOLIODETAILTITLEPARTWO),Ae(2),ee("innerHTML",null==o.portfolio?null:o.portfolio.projectPurpose,K0))},dependencies:[jv,Uh,J3],styles:[".portfolio-details-slider .media-container{width:100%;height:30rem;display:flex;justify-content:center;align-items:center;overflow:hidden}.portfolio-details-slider img,.portfolio-details-slider app-video-player{width:100%;height:100%}.portfolio-details .swiper-pagination{margin-top:20px;position:relative}.portfolio-details .swiper-pagination .swiper-pagination-bullet{width:12px;height:12px;background-color:#fff;opacity:1;border:1px solid #2980b9}.portfolio-details .swiper-pagination .swiper-pagination-bullet-active{background-color:#007aff}\n"],encapsulation:2})}return e})()}]},{path:"",redirectTo:"en",pathMatch:"full"},{path:"**",redirectTo:"en"}];let a4=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Pr({type:e});static#n=this.\u0275inj=Rn({imports:[xI.forRoot(o4,{useHash:!0}),xI]})}return e})();const Yh=function(e){return["/",e]},Qh=function(e){return{active:e}};function u4(e,n){if(1&e){const t=uv();ve(0,"ul",10)(1,"li",11)(2,"a",12),vi("click",function(){return Gi(t),Os(fr().setActive("home"))}),Tt(3,"i",13),ut(4),De()(),ve(5,"li",11)(6,"a",12),vi("click",function(){return Gi(t),Os(fr().setActive("about"))}),Tt(7,"i",14),ut(8),De()(),ve(9,"li",11)(10,"a",12),vi("click",function(){return Gi(t),Os(fr().setActive("skills"))}),Tt(11,"i",15),ut(12),De()(),ve(13,"li",11)(14,"a",12),vi("click",function(){return Gi(t),Os(fr().setActive("resume"))}),Tt(15,"i",16),ut(16),De()(),ve(17,"li",11)(18,"a",12),vi("click",function(){return Gi(t),Os(fr().setActive("portfolio"))}),Tt(19,"i",17),ut(20),De()(),ve(21,"li",11)(22,"a",12),vi("click",function(){return Gi(t),Os(fr().setActive("contact"))}),Tt(23,"i",18),ut(24),De()(),ve(25,"li",11)(26,"a",19),Tt(27,"i",20),ut(28," Github "),De()()()}if(2&e){const t=fr();Ae(2),ee("routerLink",ii(24,Yh,t.languageService.getCurrentLanguage()))("fragment",t.languageService.generalContent.ROUTER.HOME)("ngClass",ii(26,Qh,"home"===t.sharedDataService.activeLink)),Ae(2),on(" ",t.languageService.generalContent.NAVBAR.HOME," "),Ae(2),ee("routerLink",ii(28,Yh,t.languageService.getCurrentLanguage()))("fragment",t.languageService.generalContent.ROUTER.ABOUT)("ngClass",ii(30,Qh,"about"===t.sharedDataService.activeLink)),Ae(2),on(" ",t.languageService.generalContent.NAVBAR.ABOUT," "),Ae(2),ee("routerLink",ii(32,Yh,t.languageService.getCurrentLanguage()))("fragment",t.languageService.generalContent.ROUTER.SKILLS)("ngClass",ii(34,Qh,"skills"===t.sharedDataService.activeLink)),Ae(2),on(" ",t.languageService.generalContent.NAVBAR.SKILLS," "),Ae(2),ee("routerLink",ii(36,Yh,t.languageService.getCurrentLanguage()))("fragment",t.languageService.generalContent.ROUTER.RESUME)("ngClass",ii(38,Qh,"resume"===t.sharedDataService.activeLink)),Ae(2),on(" ",t.languageService.generalContent.NAVBAR.RESUME," "),Ae(2),ee("routerLink",ii(40,Yh,t.languageService.getCurrentLanguage()))("fragment",t.languageService.generalContent.ROUTER.PORTFOLIO)("ngClass",ii(42,Qh,"portfolio"===t.sharedDataService.activeLink)),Ae(2),on(" ",t.languageService.generalContent.NAVBAR.PORTFOLIO," "),Ae(2),ee("routerLink",ii(44,Yh,t.languageService.getCurrentLanguage()))("fragment",t.languageService.generalContent.ROUTER.CONTACT)("ngClass",ii(46,Qh,"contact"===t.sharedDataService.activeLink)),Ae(2),on(" ",t.languageService.generalContent.NAVBAR.CONTACT," ")}}const AI=function(e,n){return{"btn-primary":e,"btn-outline-primary":n}};let l4=(()=>{class e{constructor(t,i,o,l,d){this.sharedDataService=t,this.languageService=i,this.fetchService=o,this.route=l,this.router=d,this.currentLanguage="en"}ngOnInit(){this.currentLanguage=this.languageService.getCurrentLanguage(),this.langChangeSubscription=this.languageService.languageChanged.subscribe(t=>{this.currentLanguage=t}),this.route.params.subscribe(t=>{const i=t.lang;i&&i!==this.currentLanguage&&this.switchLanguage(i)})}setActive(t){this.sharedDataService.activeLink=t}switchLanguage(t){if(t!==this.currentLanguage){this.languageService.switchLanguage(t);const i=this.router.url.split("/").slice(2).join("/");this.router.navigate([`/${t}/${i}`])}}ngOnDestroy(){this.langChangeSubscription&&this.langChangeSubscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||e)(je(g_),je(ka),je(Vg),je(No),je(Ci))};static#t=this.\u0275cmp=wr({type:e,selectors:[["app-navbar"]],decls:12,vars:9,consts:[[1,"ps-3","d-flex","flex-column","align-items-start","text-light"],[1,"d-flex","m-3","position-relative"],[1,"profile-img-border","d-flex","justify-content-center","align-items-center"],["src","/assets/images/profile/profile-img.jpg","alt","Profile Image",1,"img-fluid","profile-img"],[1,"mb-3"],["class","nav flex-column",4,"ngIf"],["role","group","aria-label","Language switcher",1,"btn-group","m-3"],["type","button",1,"btn",3,"ngClass","click"],["title","English",1,"fi","fi-gb"],["title","Swedish",1,"fi","fi-se"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","d-flex","align-items-center","rounded-3","hover-effect",3,"routerLink","fragment","ngClass","click"],[1,"fas","fa-home","me-2"],[1,"fas","fa-user","me-2"],[1,"fas","fa-cogs","me-2"],[1,"fas","fa-file-alt","me-2"],[1,"fas","fa-briefcase","me-2"],[1,"fas","fa-envelope","me-2"],["target","_blank","href","https://github.com/MustafaMuqtar",1,"nav-link","d-flex","align-items-center","rounded-3","hover-effect"],[1,"fab","fa-github","me-2"]],template:function(i,o){1&i&&(ve(0,"nav",0)(1,"div",1)(2,"div",2),Tt(3,"img",3),De()(),ve(4,"h4",4),ut(5,"Mustafa Muqtar"),De(),O(6,u4,29,48,"ul",5),ve(7,"div",6)(8,"button",7),vi("click",function(){return o.switchLanguage("en")}),Tt(9,"i",8),De(),ve(10,"button",7),vi("click",function(){return o.switchLanguage("sv")}),Tt(11,"i",9),De()()()),2&i&&(Ae(6),ee("ngIf",o.languageService.generalContent),Ae(2),ee("ngClass",yv(3,AI,"en"===o.currentLanguage,"en"!==o.currentLanguage)),Ae(2),ee("ngClass",yv(6,AI,"sv"===o.currentLanguage,"sv"!==o.currentLanguage)))},dependencies:[yg,Uh,$g],styles:[".nav-link.hover-effect[_ngcontent-%COMP%]{background-color:transparent!important;color:#f8faf8!important;transition:color .3s}.nav-link.hover-effect[_ngcontent-%COMP%]:hover, .nav-link.hover-effect[_ngcontent-%COMP%]:hover   .fa[_ngcontent-%COMP%], .nav-link.active[_ngcontent-%COMP%]{color:#0d6efd!important}.nav-link.active[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:#fff!important}.profile-img-border[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;background-color:#0b5ed7;display:flex;justify-content:center;align-items:center;overflow:hidden}.profile-img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover}"]})}return e})();function c4(e,n){if(1&e){const t=uv();ve(0,"div",6),vi("click",function(){return Gi(t),Os(fr().toggleNavbar())}),De()}}const d4=function(e){return{active:e}};let h4=(()=>{class e{constructor(t,i,o,l,d){this.sharedDataService=t,this.fetchService=i,this.languageService=o,this.route=l,this.router=d,this.isNavbarVisible=!1}ngOnInit(){this.router.events.subscribe(t=>{if(t instanceof Ia){const i=this.route.snapshot.firstChild?.params.lang;if(!i||"en"!==i&&"sv"!==i){const o=localStorage.getItem("lang")||"en";this.router.navigate([o])}else this.languageService.switchLanguage(i),localStorage.setItem("lang",i)}}),this.langChangeSubscription=this.languageService.languageChanged.subscribe(()=>{this.fetchData()}),this.fetchData()}fetchData(){this.fetchService.getContents().subscribe(t=>{this.languageService.generalContent=t})}ngOnDestroy(){this.langChangeSubscription&&this.langChangeSubscription.unsubscribe()}toggleNavbar(){this.isNavbarVisible=!this.isNavbarVisible,document.body.classList.toggle("navbar-active",this.isNavbarVisible)}static#e=this.\u0275fac=function(i){return new(i||e)(je(g_),je(Vg),je(ka),je(No),je(Ci))};static#t=this.\u0275cmp=wr({type:e,selectors:[["app-root"]],decls:8,vars:5,consts:[[1,"container-fluid"],[1,"navbar","bg-dark-subtle",3,"ngClass"],[1,"router"],["class","overlay",3,"click",4,"ngIf"],[1,"navbar-toggle",3,"click"],[3,"ngClass"],[1,"overlay",3,"click"]],template:function(i,o){1&i&&(ve(0,"div",0)(1,"div",1),Tt(2,"app-navbar"),De(),ve(3,"div",2),Tt(4,"router-outlet"),De(),O(5,c4,1,0,"div",3),ve(6,"button",4),vi("click",function(){return o.toggleNavbar()}),Tt(7,"i",5),De()()),2&i&&(Ae(1),ee("ngClass",ii(3,d4,o.isNavbarVisible)),Ae(4),ee("ngIf",o.isNavbarVisible),Ae(2),ee("ngClass",o.isNavbarVisible?"fas fa-times":"fas fa-bars"))},dependencies:[yg,Uh,cE,l4],styles:[".container-fluid[_ngcontent-%COMP%]{display:flex;height:100vh;width:100vw;margin:0;padding:0;position:relative}.router[_ngcontent-%COMP%]{flex:1;overflow:auto;transition:margin-left .3s ease}@media (min-width: 1024px){.navbar[_ngcontent-%COMP%]{position:relative;width:250px;height:100%;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;background-color:#fff}.router[_ngcontent-%COMP%]{width:calc(100% - 300px)}}@media (max-width: 1023px){.navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:250px;height:100%;overflow:auto;transform:translate(-100%);transition:transform .3s ease;z-index:1000;background-color:#fff;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start}.navbar.active[_ngcontent-%COMP%]{transform:translate(0)}.router[_ngcontent-%COMP%]{margin-left:0;width:100%}.overlay[_ngcontent-%COMP%]{display:none}.overlay.active[_ngcontent-%COMP%]{display:block;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:900}}.navbar-toggle[_ngcontent-%COMP%]{display:none;position:fixed;top:20px;right:20px;z-index:1001;background-color:#0d6efd;color:#fff;border:none;border-radius:50%;width:44px;height:44px;cursor:pointer;box-shadow:0 4px 8px #0003;transition:background-color .3s ease,transform .3s ease}.navbar-toggle[_ngcontent-%COMP%]:hover{background-color:#0056b3}.navbar-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}@media (max-width: 1023px){.navbar-toggle[_ngcontent-%COMP%]{display:block}}"]})}return e})();function f4(e){return new uL(e,"./assets/i18n/general-contents-",".json")}let p4=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Pr({type:e,bootstrap:[h4]});static#n=this.\u0275inj=Rn({imports:[gN,a4,zN,aL.forRoot({loader:{provide:Eg,useFactory:f4,deps:[jS]}})]})}return e})();fN().bootstrapModule(p4).catch(e=>console.error(e))},60:(pt,tt,Fe)=>{"use strict";var fe=Fe(382);pt.exports=function(ie,ae){return void 0===ae&&(ae=!1),function(ce,Re,Ge){if(ce)ie(ce);else if(Re.statusCode>=400&&Re.statusCode<=599){var Te=Ge;if(ae)if(fe.TextDecoder){var Je=function re(z){return void 0===z&&(z=""),z.toLowerCase().split(";").reduce(function(ie,ae){var ce=ae.split("="),Ge=ce[1];return"charset"===ce[0].trim()?Ge.trim():ie},"utf-8")}(Re.headers&&Re.headers["content-type"]);try{Te=new TextDecoder(Je).decode(Ge)}catch{}}else Te=String.fromCharCode.apply(null,new Uint8Array(Ge));ie({cause:Te})}else ie(null,Ge)}}},817:(pt,tt,Fe)=>{"use strict";var fe=Fe(382),M=Fe(434),re=Fe(794),z=Fe(900),ie=Fe(307);Te.httpHandler=Fe(60),Te.requestInterceptorsStorage=new z,Te.responseInterceptorsStorage=new z,Te.retryManager=new ie;var ae=function(Ut){var dt={};return Ut&&Ut.trim().split("\n").forEach(function(Nt){var Me=Nt.indexOf(":"),lt=Nt.slice(0,Me).trim().toLowerCase(),rt=Nt.slice(Me+1).trim();typeof dt[lt]>"u"?dt[lt]=rt:Array.isArray(dt[lt])?dt[lt].push(rt):dt[lt]=[dt[lt],rt]}),dt};function Ge(me,Ut,dt){var Nt=me;return re(Ut)?(dt=Ut,"string"==typeof me&&(Nt={uri:me})):Nt=M({},Ut,{uri:me}),Nt.callback=dt,Nt}function Te(me,Ut,dt){return Je(Ut=Ge(me,Ut,dt))}function Je(me){if(typeof me.callback>"u")throw new Error("callback argument missing");if(me.requestType&&Te.requestInterceptorsStorage.getIsEnabled()){var dt=Te.requestInterceptorsStorage.execute(me.requestType,{uri:me.uri||me.url,headers:me.headers||{},body:me.body,metadata:me.metadata||{},retry:me.retry,timeout:me.timeout});me.uri=dt.uri,me.headers=dt.headers,me.body=dt.body,me.metadata=dt.metadata,me.retry=dt.retry,me.timeout=dt.timeout}var Nt=!1,Me=function(Ce,pe,Ie){Nt||(Nt=!0,me.callback(Ce,pe,Ie))};function rt(){var he=void 0;if(he=We.response?We.response:We.responseText||function kt(me){try{if("document"===me.responseType)return me.responseXML;if(""===me.responseType&&(!me.responseXML||"parsererror"!==me.responseXML.documentElement.nodeName))return me.responseXML}catch{}return null}(We),Ne)try{he=JSON.parse(he)}catch{}return he}function St(he){if(clearTimeout(ke),clearTimeout(me.retryTimeout),he instanceof Error||(he=new Error(""+(he||"Unknown XMLHttpRequest Error"))),he.statusCode=0,gt||!Te.retryManager.getIsEnabled()||!me.retry||!me.retry.shouldRetry()){if(me.requestType&&Te.responseInterceptorsStorage.getIsEnabled()){var pe=Te.responseInterceptorsStorage.execute(me.requestType,{headers:Se.headers||{},body:Se.body,responseUrl:We.responseURL,responseType:We.responseType});Se.body=pe.body,Se.headers=pe.headers}return Me(he,Se)}me.retryTimeout=setTimeout(function(){me.retry.moveToNextAttempt(),me.xhr=We,Je(me)},me.retry.getCurrentFuzzedDelay())}function Be(){if(!gt){var he;clearTimeout(ke),clearTimeout(me.retryTimeout);var Ce=Se,pe=null;if(0!==(he=me.useXDR&&void 0===We.status?200:1223===We.status?204:We.status)?(Ce={body:rt(),statusCode:he,method:B,headers:{},url:N,rawRequest:We},We.getAllResponseHeaders&&(Ce.headers=ae(We.getAllResponseHeaders()))):pe=new Error("Internal XMLHttpRequest Error"),me.requestType&&Te.responseInterceptorsStorage.getIsEnabled()){var $e=Te.responseInterceptorsStorage.execute(me.requestType,{headers:Ce.headers||{},body:Ce.body,responseUrl:We.responseURL,responseType:We.responseType});Ce.body=$e.body,Ce.headers=$e.headers}return Me(pe,Ce,Ce.body)}}var We=me.xhr||null;We||(We=me.cors||me.useXDR?new Te.XDomainRequest:new Te.XMLHttpRequest);var at,gt,ke,N=We.url=me.uri||me.url,B=We.method=me.method||"GET",Z=me.body||me.data,be=We.headers=me.headers||{},xe=!!me.sync,Ne=!1,Se={body:void 0,headers:{},statusCode:0,method:B,url:N,rawRequest:We};if("json"in me&&!1!==me.json&&(Ne=!0,be.accept||be.Accept||(be.Accept="application/json"),"GET"!==B&&"HEAD"!==B&&(be["content-type"]||be["Content-Type"]||(be["Content-Type"]="application/json"),Z=JSON.stringify(!0===me.json?Z:me.json))),We.onreadystatechange=function lt(){4===We.readyState&&!Te.responseInterceptorsStorage.getIsEnabled()&&setTimeout(Be,0)},We.onload=Be,We.onerror=St,We.onprogress=function(){},We.onabort=function(){gt=!0,clearTimeout(me.retryTimeout)},We.ontimeout=St,We.open(B,N,!xe,me.username,me.password),xe||(We.withCredentials=!!me.withCredentials),!xe&&me.timeout>0&&(ke=setTimeout(function(){if(!gt){gt=!0,We.abort("timeout");var he=new Error("XMLHttpRequest timeout");he.code="ETIMEDOUT",St(he)}},me.timeout)),We.setRequestHeader)for(at in be)be.hasOwnProperty(at)&&We.setRequestHeader(at,be[at]);else if(me.headers&&!function Re(me){for(var Ut in me)if(me.hasOwnProperty(Ut))return!1;return!0}(me.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in me&&(We.responseType=me.responseType),"beforeSend"in me&&"function"==typeof me.beforeSend&&me.beforeSend(We),We.send(Z||null),We}pt.exports=Te,pt.exports.default=Te,Te.XMLHttpRequest=fe.XMLHttpRequest||function Gt(){},Te.XDomainRequest="withCredentials"in new Te.XMLHttpRequest?Te.XMLHttpRequest:fe.XDomainRequest,function ce(me,Ut){for(var dt=0;dt<me.length;dt++)Ut(me[dt])}(["get","put","post","patch","head","delete"],function(me){Te["delete"===me?"del":me]=function(Ut,dt,Nt){return(dt=Ge(Ut,dt,Nt)).method=me.toUpperCase(),Je(dt)}})},900:pt=>{"use strict";function fe(re,z){(null==z||z>re.length)&&(z=re.length);for(var ie=0,ae=new Array(z);ie<z;ie++)ae[ie]=re[ie];return ae}pt.exports=function(){function re(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var z=re.prototype;return z.getIsEnabled=function(){return this.enabled_},z.enable=function(){this.enabled_=!0},z.disable=function(){this.enabled_=!1},z.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},z.addInterceptor=function(ae,ce){this.typeToInterceptorsMap_.has(ae)||this.typeToInterceptorsMap_.set(ae,new Set);var Re=this.typeToInterceptorsMap_.get(ae);return!Re.has(ce)&&(Re.add(ce),!0)},z.removeInterceptor=function(ae,ce){var Re=this.typeToInterceptorsMap_.get(ae);return!(!Re||!Re.has(ce)||(Re.delete(ce),0))},z.clearInterceptorsByType=function(ae){return!!this.typeToInterceptorsMap_.get(ae)&&(this.typeToInterceptorsMap_.delete(ae),this.typeToInterceptorsMap_.set(ae,new Set),!0)},z.clear=function(){return!!this.typeToInterceptorsMap_.size&&(this.typeToInterceptorsMap_=new Map,!0)},z.getForType=function(ae){return this.typeToInterceptorsMap_.get(ae)||new Set},z.execute=function(ae,ce){for(var Te,Ge=function tt(re,z){var ie=typeof Symbol<"u"&&re[Symbol.iterator]||re["@@iterator"];if(ie)return(ie=ie.call(re)).next.bind(ie);if(Array.isArray(re)||(ie=function Fe(re,z){if(re){if("string"==typeof re)return fe(re,z);var ie=Object.prototype.toString.call(re).slice(8,-1);if("Object"===ie&&re.constructor&&(ie=re.constructor.name),"Map"===ie||"Set"===ie)return Array.from(re);if("Arguments"===ie||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ie))return fe(re,z)}}(re))||z&&re&&"number"==typeof re.length){ie&&(re=ie);var ae=0;return function(){return ae>=re.length?{done:!0}:{done:!1,value:re[ae++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.getForType(ae));!(Te=Ge()).done;){var Je=Te.value;try{ce=Je(ce)}catch{}}return ce},re}()},307:pt=>{"use strict";var tt=function(){function fe(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var M=fe.prototype;return M.getIsEnabled=function(){return this.enabled_},M.enable=function(){this.enabled_=!0},M.disable=function(){this.enabled_=!1},M.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},M.getMaxAttempts=function(){return this.maxAttempts_},M.setMaxAttempts=function(z){this.maxAttempts_=z},M.getDelayFactor=function(){return this.delayFactor_},M.setDelayFactor=function(z){this.delayFactor_=z},M.getFuzzFactor=function(){return this.fuzzFactor_},M.setFuzzFactor=function(z){this.fuzzFactor_=z},M.getInitialDelay=function(){return this.initialDelay_},M.setInitialDelay=function(z){this.initialDelay_=z},M.createRetry=function(z){var ie=void 0===z?{}:z;return new Fe({maxAttempts:ie.maxAttempts||this.maxAttempts_,delayFactor:ie.delayFactor||this.delayFactor_,fuzzFactor:ie.fuzzFactor||this.fuzzFactor_,initialDelay:ie.initialDelay||this.initialDelay_})},fe}(),Fe=function(){function fe(re){this.maxAttempts_=re.maxAttempts,this.delayFactor_=re.delayFactor,this.fuzzFactor_=re.fuzzFactor,this.currentDelay_=re.initialDelay,this.currentAttempt_=1}var M=fe.prototype;return M.moveToNextAttempt=function(){this.currentAttempt_++,this.currentDelay_=this.currentDelay_+this.currentDelay_*this.delayFactor_},M.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},M.getCurrentDelay=function(){return this.currentDelay_},M.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},M.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},M.getCurrentFuzzedDelay=function(){var z=this.getCurrentMinPossibleDelay(),ie=this.getCurrentMaxPossibleDelay();return z+Math.random()*(ie-z)},fe}();pt.exports=tt},451:(pt,tt)=>{"use strict";function fe(ie,ae){return void 0===ae&&(ae=Object),ae&&"function"==typeof ae.freeze?ae.freeze(ie):ie}var re=fe({HTML:"text/html",isHTML:function(ie){return ie===re.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),z=fe({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(ie){return ie===z.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});tt.assign=function M(ie,ae){if(null===ie||"object"!=typeof ie)throw new TypeError("target is not an object");for(var ce in ae)Object.prototype.hasOwnProperty.call(ae,ce)&&(ie[ce]=ae[ce]);return ie},tt.find=function Fe(ie,ae,ce){if(void 0===ce&&(ce=Array.prototype),ie&&"function"==typeof ce.find)return ce.find.call(ie,ae);for(var Re=0;Re<ie.length;Re++)if(Object.prototype.hasOwnProperty.call(ie,Re)){var Ge=ie[Re];if(ae.call(void 0,Ge,Re,ie))return Ge}},tt.freeze=fe,tt.MIME_TYPE=re,tt.NAMESPACE=z},20:(pt,tt,Fe)=>{var M=Fe(451),re=Fe(475),z=Fe(562),ie=Fe(989),ae=re.DOMImplementation,ce=M.NAMESPACE,Re=ie.ParseError,Ge=ie.XMLReader;function Te(Me){return Me.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function Je(Me){this.options=Me||{locator:{}}}function Gt(){this.cdata=!1}function me(Me,lt){lt.lineNumber=Me.lineNumber,lt.columnNumber=Me.columnNumber}function Ut(Me){if(Me)return"\n@"+(Me.systemId||"")+"#[line:"+Me.lineNumber+",col:"+Me.columnNumber+"]"}function dt(Me,lt,rt){return"string"==typeof Me?Me.substr(lt,rt):Me.length>=lt+rt||lt?new java.lang.String(Me,lt,rt)+"":Me}function Nt(Me,lt){Me.currentElement?Me.currentElement.appendChild(lt):Me.doc.appendChild(lt)}Je.prototype.parseFromString=function(Me,lt){var rt=this.options,St=new Ge,Be=rt.domBuilder||new Gt,We=rt.errorHandler,at=rt.locator,gt=rt.xmlns||{},N=/\/x?html?$/.test(lt),B=N?z.HTML_ENTITIES:z.XML_ENTITIES;return at&&Be.setDocumentLocator(at),St.errorHandler=function kt(Me,lt,rt){if(!Me){if(lt instanceof Gt)return lt;Me=lt}var St={},Be=Me instanceof Function;function We(at){var gt=Me[at];!gt&&Be&&(gt=2==Me.length?function(N){Me(at,N)}:Me),St[at]=gt&&function(N){gt("[xmldom "+at+"]\t"+N+Ut(rt))}||function(){}}return rt=rt||{},We("warning"),We("error"),We("fatalError"),St}(We,Be,at),St.domBuilder=rt.domBuilder||Be,N&&(gt[""]=ce.HTML),gt.xml=gt.xml||ce.XML,Me&&"string"==typeof Me?St.parse((rt.normalizeLineEndings||Te)(Me),gt,B):St.errorHandler.error("invalid doc source"),Be.doc},Gt.prototype={startDocument:function(){this.doc=(new ae).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(Me,lt,rt,St){var Be=this.doc,We=Be.createElementNS(Me,rt||lt),at=St.length;Nt(this,We),this.currentElement=We,this.locator&&me(this.locator,We);for(var gt=0;gt<at;gt++){Me=St.getURI(gt);var N=St.getValue(gt),B=(rt=St.getQName(gt),Be.createAttributeNS(Me,rt));this.locator&&me(St.getLocator(gt),B),B.value=B.nodeValue=N,We.setAttributeNode(B)}},endElement:function(Me,lt,rt){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(Me,lt){},endPrefixMapping:function(Me){},processingInstruction:function(Me,lt){var rt=this.doc.createProcessingInstruction(Me,lt);this.locator&&me(this.locator,rt),Nt(this,rt)},ignorableWhitespace:function(Me,lt,rt){},characters:function(Me,lt,rt){if(Me=dt.apply(this,arguments)){if(this.cdata)var St=this.doc.createCDATASection(Me);else St=this.doc.createTextNode(Me);this.currentElement?this.currentElement.appendChild(St):/^\s*$/.test(Me)&&this.doc.appendChild(St),this.locator&&me(this.locator,St)}},skippedEntity:function(Me){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(Me){(this.locator=Me)&&(Me.lineNumber=0)},comment:function(Me,lt,rt){Me=dt.apply(this,arguments);var St=this.doc.createComment(Me);this.locator&&me(this.locator,St),Nt(this,St)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(Me,lt,rt){var St=this.doc.implementation;if(St&&St.createDocumentType){var Be=St.createDocumentType(Me,lt,rt);this.locator&&me(this.locator,Be),Nt(this,Be),this.doc.doctype=Be}},warning:function(Me){console.warn("[xmldom warning]\t"+Me,Ut(this.locator))},error:function(Me){console.error("[xmldom error]\t"+Me,Ut(this.locator))},fatalError:function(Me){throw new Re(Me,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(Me){Gt.prototype[Me]=function(){return null}}),tt.DOMParser=Je},475:(pt,tt,Fe)=>{var fe=Fe(451),M=fe.find,re=fe.NAMESPACE;function z(A){return""!==A}function ae(A,k){return A.hasOwnProperty(k)||(A[k]=!0),A}function ce(A){if(!A)return[];var k=function ie(A){return A?A.split(/[\t\n\f\r ]+/).filter(z):[]}(A);return Object.keys(k.reduce(ae,{}))}function Ge(A,k){for(var H in A)Object.prototype.hasOwnProperty.call(A,H)&&(k[H]=A[H])}function Te(A,k){var H=A.prototype;if(!(H instanceof k)){let Pe=function(){};Pe.prototype=k.prototype,Pe=new Pe,Ge(H,Pe),A.prototype=H=Pe}H.constructor!=A&&("function"!=typeof A&&console.error("unknown Class:"+A),H.constructor=A)}var Je={},kt=Je.ELEMENT_NODE=1,Gt=Je.ATTRIBUTE_NODE=2,me=Je.TEXT_NODE=3,Ut=Je.CDATA_SECTION_NODE=4,dt=Je.ENTITY_REFERENCE_NODE=5,Nt=Je.ENTITY_NODE=6,Me=Je.PROCESSING_INSTRUCTION_NODE=7,lt=Je.COMMENT_NODE=8,rt=Je.DOCUMENT_NODE=9,St=Je.DOCUMENT_TYPE_NODE=10,Be=Je.DOCUMENT_FRAGMENT_NODE=11,We=Je.NOTATION_NODE=12,at={},gt={},Z=(at.INDEX_SIZE_ERR=(gt[1]="Index size error",1),at.DOMSTRING_SIZE_ERR=(gt[2]="DOMString size error",2),at.HIERARCHY_REQUEST_ERR=(gt[3]="Hierarchy request error",3)),Se=(at.WRONG_DOCUMENT_ERR=(gt[4]="Wrong document",4),at.INVALID_CHARACTER_ERR=(gt[5]="Invalid character",5),at.NO_DATA_ALLOWED_ERR=(gt[6]="No data allowed",6),at.NO_MODIFICATION_ALLOWED_ERR=(gt[7]="No modification allowed",7),at.NOT_FOUND_ERR=(gt[8]="Not found",8)),Ce=(at.NOT_SUPPORTED_ERR=(gt[9]="Not supported",9),at.INUSE_ATTRIBUTE_ERR=(gt[10]="Attribute in use",10));function Le(A,k){if(k instanceof Error)var H=k;else H=this,Error.call(this,gt[A]),this.message=gt[A],Error.captureStackTrace&&Error.captureStackTrace(this,Le);return H.code=A,k&&(this.message=this.message+": "+k),H}function Ue(){}function In(A,k){this._node=A,this._refresh=k,ft(this)}function ft(A){var k=A._node._inc||A._node.ownerDocument._inc;if(A._inc!==k){var H=A._refresh(A._node);if(Xu(A,"length",H.length),!A.$$length||H.length<A.$$length)for(var oe=H.length;oe in A;oe++)Object.prototype.hasOwnProperty.call(A,oe)&&delete A[oe];Ge(H,A),A._inc=k}}function gn(){}function sr(A,k){for(var H=A.length;H--;)if(A[H]===k)return H}function gr(A,k,H,oe){if(oe?k[sr(k,oe)]=H:k[k.length++]=H,A){H.ownerElement=A;var Pe=A.ownerDocument;Pe&&(oe&&Ke(Pe,A,oe),function zn(A,k,H){A&&A._inc++,H.namespaceURI===re.XMLNS&&(k._nsMap[H.prefix?H.localName:""]=H.value)}(Pe,A,H))}}function Br(A,k,H){var oe=sr(k,H);if(!(oe>=0))throw new Le(Se,new Error(A.tagName+"@"+H));for(var Pe=k.length-1;oe<Pe;)k[oe]=k[++oe];if(k.length=Pe,A){var Ct=A.ownerDocument;Ct&&(Ke(Ct,A,H),H.ownerElement=null)}}function Ss(){}function Xe(){}function vt(A){return("<"==A?"&lt;":">"==A&&"&gt;")||"&"==A&&"&amp;"||'"'==A&&"&quot;"||"&#"+A.charCodeAt()+";"}function jt(A,k){if(k(A))return!0;if(A=A.firstChild)do{if(jt(A,k))return!0}while(A=A.nextSibling)}function Wt(){this.ownerDocument=this}function Ke(A,k,H,oe){A&&A._inc++,H.namespaceURI===re.XMLNS&&delete k._nsMap[H.prefix?H.localName:""]}function Ur(A,k,H){if(A&&A._inc){A._inc++;var oe=k.childNodes;if(H)oe[oe.length++]=H;else{for(var Pe=k.firstChild,Ct=0;Pe;)oe[Ct++]=Pe,Pe=Pe.nextSibling;oe.length=Ct,delete oe[oe.length]}}}function Si(A,k){var H=k.previousSibling,oe=k.nextSibling;return H?H.nextSibling=oe:A.firstChild=oe,oe?oe.previousSibling=H:A.lastChild=H,k.parentNode=null,k.previousSibling=null,k.nextSibling=null,Ur(A.ownerDocument,A),k}function mr(A){return A&&A.nodeType===Xe.DOCUMENT_TYPE_NODE}function yr(A){return A&&A.nodeType===Xe.ELEMENT_NODE}function xc(A){return A&&A.nodeType===Xe.TEXT_NODE}function Ic(A,k){var H=A.childNodes||[];if(M(H,yr)||mr(k))return!1;var oe=M(H,mr);return!(k&&oe&&H.indexOf(oe)>H.indexOf(k))}function Ac(A,k){var H=A.childNodes||[];if(M(H,function oe(Ct){return yr(Ct)&&Ct!==k}))return!1;var Pe=M(H,mr);return!(k&&Pe&&H.indexOf(Pe)>H.indexOf(k))}function Vu(A,k,H){var oe=A.childNodes||[],Pe=k.childNodes||[];if(k.nodeType===Xe.DOCUMENT_FRAGMENT_NODE){var Ct=Pe.filter(yr);if(Ct.length>1||M(Pe,xc))throw new Le(Z,"More than one element or text in fragment");if(1===Ct.length&&!Ic(A,H))throw new Le(Z,"Element in fragment can not be inserted before doctype")}if(yr(k)&&!Ic(A,H))throw new Le(Z,"Only one element can be added and only after doctype");if(mr(k)){if(M(oe,mr))throw new Le(Z,"Only one doctype is allowed");var ln=M(oe,yr);if(H&&oe.indexOf(ln)<oe.indexOf(H))throw new Le(Z,"Doctype can only be inserted before an element");if(!H&&ln)throw new Le(Z,"Doctype can not be appended since element is present")}}function Mc(A,k,H){var oe=A.childNodes||[],Pe=k.childNodes||[];if(k.nodeType===Xe.DOCUMENT_FRAGMENT_NODE){var Ct=Pe.filter(yr);if(Ct.length>1||M(Pe,xc))throw new Le(Z,"More than one element or text in fragment");if(1===Ct.length&&!Ac(A,H))throw new Le(Z,"Element in fragment can not be inserted before doctype")}if(yr(k)&&!Ac(A,H))throw new Le(Z,"Only one element can be added and only after doctype");if(mr(k)){if(M(oe,function(sn){return mr(sn)&&sn!==H}))throw new Le(Z,"Only one doctype is allowed");var ln=M(oe,yr);if(H&&oe.indexOf(ln)<oe.indexOf(H))throw new Le(Z,"Doctype can only be inserted before an element")}}function Zt(A,k,H,oe){(function rs(A,k,H){if(!function wt(A){return A&&(A.nodeType===Xe.DOCUMENT_NODE||A.nodeType===Xe.DOCUMENT_FRAGMENT_NODE||A.nodeType===Xe.ELEMENT_NODE)}(A))throw new Le(Z,"Unexpected parent node type "+A.nodeType);if(H&&H.parentNode!==A)throw new Le(Se,"child not in parent");if(!function Zn(A){return A&&(yr(A)||xc(A)||mr(A)||A.nodeType===Xe.DOCUMENT_FRAGMENT_NODE||A.nodeType===Xe.COMMENT_NODE||A.nodeType===Xe.PROCESSING_INSTRUCTION_NODE)}(k)||mr(k)&&A.nodeType!==Xe.DOCUMENT_NODE)throw new Le(Z,"Unexpected node type "+k.nodeType+" for parent node type "+A.nodeType)})(A,k,H),A.nodeType===Xe.DOCUMENT_NODE&&(oe||Vu)(A,k,H);var Pe=k.parentNode;if(Pe&&Pe.removeChild(k),k.nodeType===Be){var Ct=k.firstChild;if(null==Ct)return k;var ln=k.lastChild}else Ct=ln=k;var Tn=H?H.previousSibling:A.lastChild;Ct.previousSibling=Tn,ln.nextSibling=H,Tn?Tn.nextSibling=Ct:A.firstChild=Ct,null==H?A.lastChild=ln:H.previousSibling=ln;do{Ct.parentNode=A}while(Ct!==ln&&(Ct=Ct.nextSibling));return Ur(A.ownerDocument||A,A),k.nodeType==Be&&(k.firstChild=k.lastChild=null),k}function Qs(){this._nsMap={}}function Pa(){}function Fo(){}function Hu(){}function qu(){}function kc(){}function Bo(){}function Gn(){}function zu(){}function Pc(){}function Ei(){}function Uo(){}function Gu(){}function Wu(A,k){var H=[],oe=9==this.nodeType&&this.documentElement||this,Pe=oe.prefix,Ct=oe.namespaceURI;if(Ct&&null==Pe&&null==(Pe=oe.lookupPrefix(Ct)))var ln=[{namespace:Ct,prefix:null}];return Ds(this,H,A,k,ln),H.join("")}function is(A,k,H){var oe=A.prefix||"",Pe=A.namespaceURI;if(!Pe||"xml"===oe&&Pe===re.XML||Pe===re.XMLNS)return!1;for(var Ct=H.length;Ct--;){var ln=H[Ct];if(ln.prefix===oe)return ln.namespace!==Pe}return!0}function Es(A,k,H){A.push(" ",k,'="',H.replace(/[<>&"\t\n\r]/g,vt),'"')}function Ds(A,k,H,oe,Pe){if(Pe||(Pe=[]),oe){if(!(A=oe(A)))return;if("string"==typeof A)return void k.push(A)}switch(A.nodeType){case kt:var Ct=A.attributes,ln=Ct.length,jn=A.firstChild,Tn=A.tagName,Bi=Tn;if(!(H=re.isHTML(A.namespaceURI)||H)&&!A.prefix&&A.namespaceURI){for(var sn,or=0;or<Ct.length;or++)if("xmlns"===Ct.item(or).name){sn=Ct.item(or).value;break}if(!sn)for(var Jn=Pe.length-1;Jn>=0;Jn--)if(""===(ss=Pe[Jn]).prefix&&ss.namespace===A.namespaceURI){sn=ss.namespace;break}if(sn!==A.namespaceURI)for(Jn=Pe.length-1;Jn>=0;Jn--){var ss;if((ss=Pe[Jn]).namespace===A.namespaceURI){ss.prefix&&(Bi=ss.prefix+":"+Tn);break}}}k.push("<",Bi);for(var ws=0;ws<ln;ws++)"xmlns"==(Di=Ct.item(ws)).prefix?Pe.push({prefix:Di.localName,namespace:Di.value}):"xmlns"==Di.nodeName&&Pe.push({prefix:"",namespace:Di.value});for(ws=0;ws<ln;ws++){var Di,Ui,Zs;is(Di=Ct.item(ws),0,Pe)&&(Es(k,(Ui=Di.prefix||"")?"xmlns:"+Ui:"xmlns",Zs=Di.namespaceURI),Pe.push({prefix:Ui,namespace:Zs})),Ds(Di,k,H,oe,Pe)}if(Tn===Bi&&is(A,0,Pe)&&(Es(k,(Ui=A.prefix||"")?"xmlns:"+Ui:"xmlns",Zs=A.namespaceURI),Pe.push({prefix:Ui,namespace:Zs})),jn||H&&!/^(?:meta|link|img|br|hr|input)$/i.test(Tn)){if(k.push(">"),H&&/^script$/i.test(Tn))for(;jn;)jn.data?k.push(jn.data):Ds(jn,k,H,oe,Pe.slice()),jn=jn.nextSibling;else for(;jn;)Ds(jn,k,H,oe,Pe.slice()),jn=jn.nextSibling;k.push("</",Bi,">")}else k.push("/>");return;case rt:case Be:for(jn=A.firstChild;jn;)Ds(jn,k,H,oe,Pe.slice()),jn=jn.nextSibling;return;case Gt:return Es(k,A.name,A.value);case me:return k.push(A.data.replace(/[<&>]/g,vt));case Ut:return k.push("<![CDATA[",A.data,"]]>");case lt:return k.push("\x3c!--",A.data,"--\x3e");case St:var Oc=A.publicId,xs=A.systemId;if(k.push("<!DOCTYPE ",A.name),Oc)k.push(" PUBLIC ",Oc),xs&&"."!=xs&&k.push(" ",xs),k.push(">");else if(xs&&"."!=xs)k.push(" SYSTEM ",xs,">");else{var Ku=A.internalSubset;Ku&&k.push(" [",Ku,"]"),k.push(">")}return;case Me:return k.push("<?",A.target," ",A.data,"?>");case dt:return k.push("&",A.nodeName,";");default:k.push("??",A.nodeName)}}function Oa(A,k,H){var oe;switch(k.nodeType){case kt:(oe=k.cloneNode(!1)).ownerDocument=A;case Be:break;case Gt:H=!0}if(oe||(oe=k.cloneNode(!1)),oe.ownerDocument=A,oe.parentNode=null,H)for(var Pe=k.firstChild;Pe;)oe.appendChild(Oa(A,Pe,H)),Pe=Pe.nextSibling;return oe}function Ra(A,k,H){var oe=new k.constructor;for(var Pe in k)if(Object.prototype.hasOwnProperty.call(k,Pe)){var Ct=k[Pe];"object"!=typeof Ct&&Ct!=oe[Pe]&&(oe[Pe]=Ct)}switch(k.childNodes&&(oe.childNodes=new Ue),oe.ownerDocument=A,oe.nodeType){case kt:var ln=k.attributes,Tn=oe.attributes=new gn,Bi=ln.length;Tn._ownerElement=oe;for(var sn=0;sn<Bi;sn++)oe.setAttributeNode(Ra(A,ln.item(sn),!0));break;case Gt:H=!0}if(H)for(var or=k.firstChild;or;)oe.appendChild(Ra(A,or,H)),or=or.nextSibling;return oe}function Xu(A,k,H){A[k]=H}at.INVALID_STATE_ERR=(gt[11]="Invalid state",11),at.SYNTAX_ERR=(gt[12]="Syntax error",12),at.INVALID_MODIFICATION_ERR=(gt[13]="Invalid modification",13),at.NAMESPACE_ERR=(gt[14]="Invalid namespace",14),at.INVALID_ACCESS_ERR=(gt[15]="Invalid access",15),Le.prototype=Error.prototype,Ge(at,Le),Ue.prototype={length:0,item:function(A){return A>=0&&A<this.length?this[A]:null},toString:function(A,k){for(var H=[],oe=0;oe<this.length;oe++)Ds(this[oe],H,A,k);return H.join("")},filter:function(A){return Array.prototype.filter.call(this,A)},indexOf:function(A){return Array.prototype.indexOf.call(this,A)}},In.prototype.item=function(A){return ft(this),this[A]||null},Te(In,Ue),gn.prototype={length:0,item:Ue.prototype.item,getNamedItem:function(A){for(var k=this.length;k--;){var H=this[k];if(H.nodeName==A)return H}},setNamedItem:function(A){var k=A.ownerElement;if(k&&k!=this._ownerElement)throw new Le(Ce);var H=this.getNamedItem(A.nodeName);return gr(this._ownerElement,this,A,H),H},setNamedItemNS:function(A){var H,k=A.ownerElement;if(k&&k!=this._ownerElement)throw new Le(Ce);return H=this.getNamedItemNS(A.namespaceURI,A.localName),gr(this._ownerElement,this,A,H),H},removeNamedItem:function(A){var k=this.getNamedItem(A);return Br(this._ownerElement,this,k),k},removeNamedItemNS:function(A,k){var H=this.getNamedItemNS(A,k);return Br(this._ownerElement,this,H),H},getNamedItemNS:function(A,k){for(var H=this.length;H--;){var oe=this[H];if(oe.localName==k&&oe.namespaceURI==A)return oe}return null}},Ss.prototype={hasFeature:function(A,k){return!0},createDocument:function(A,k,H){var oe=new Wt;if(oe.implementation=this,oe.childNodes=new Ue,oe.doctype=H||null,H&&oe.appendChild(H),k){var Pe=oe.createElementNS(A,k);oe.appendChild(Pe)}return oe},createDocumentType:function(A,k,H){var oe=new Bo;return oe.name=A,oe.nodeName=A,oe.publicId=k||"",oe.systemId=H||"",oe}},Xe.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(A,k){return Zt(this,A,k)},replaceChild:function(A,k){Zt(this,A,k,Mc),k&&this.removeChild(k)},removeChild:function(A){return Si(this,A)},appendChild:function(A){return this.insertBefore(A,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(A){return Ra(this.ownerDocument||this,this,A)},normalize:function(){for(var A=this.firstChild;A;){var k=A.nextSibling;k&&k.nodeType==me&&A.nodeType==me?(this.removeChild(k),A.appendData(k.data)):(A.normalize(),A=k)}},isSupported:function(A,k){return this.ownerDocument.implementation.hasFeature(A,k)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(A){for(var k=this;k;){var H=k._nsMap;if(H)for(var oe in H)if(Object.prototype.hasOwnProperty.call(H,oe)&&H[oe]===A)return oe;k=k.nodeType==Gt?k.ownerDocument:k.parentNode}return null},lookupNamespaceURI:function(A){for(var k=this;k;){var H=k._nsMap;if(H&&Object.prototype.hasOwnProperty.call(H,A))return H[A];k=k.nodeType==Gt?k.ownerDocument:k.parentNode}return null},isDefaultNamespace:function(A){return null==this.lookupPrefix(A)}},Ge(Je,Xe),Ge(Je,Xe.prototype),Wt.prototype={nodeName:"#document",nodeType:rt,doctype:null,documentElement:null,_inc:1,insertBefore:function(A,k){if(A.nodeType==Be){for(var H=A.firstChild;H;){var oe=H.nextSibling;this.insertBefore(H,k),H=oe}return A}return Zt(this,A,k),A.ownerDocument=this,null===this.documentElement&&A.nodeType===kt&&(this.documentElement=A),A},removeChild:function(A){return this.documentElement==A&&(this.documentElement=null),Si(this,A)},replaceChild:function(A,k){Zt(this,A,k,Mc),A.ownerDocument=this,k&&this.removeChild(k),yr(A)&&(this.documentElement=A)},importNode:function(A,k){return Oa(this,A,k)},getElementById:function(A){var k=null;return jt(this.documentElement,function(H){if(H.nodeType==kt&&H.getAttribute("id")==A)return k=H,!0}),k},getElementsByClassName:function(A){var k=ce(A);return new In(this,function(H){var oe=[];return k.length>0&&jt(H.documentElement,function(Pe){if(Pe!==H&&Pe.nodeType===kt){var Ct=Pe.getAttribute("class");if(Ct){var ln=A===Ct;if(!ln){var Tn=ce(Ct);ln=k.every(function Re(A){return function(k){return A&&-1!==A.indexOf(k)}}(Tn))}ln&&oe.push(Pe)}}}),oe})},createElement:function(A){var k=new Qs;return k.ownerDocument=this,k.nodeName=A,k.tagName=A,k.localName=A,k.childNodes=new Ue,(k.attributes=new gn)._ownerElement=k,k},createDocumentFragment:function(){var A=new Ei;return A.ownerDocument=this,A.childNodes=new Ue,A},createTextNode:function(A){var k=new Hu;return k.ownerDocument=this,k.appendData(A),k},createComment:function(A){var k=new qu;return k.ownerDocument=this,k.appendData(A),k},createCDATASection:function(A){var k=new kc;return k.ownerDocument=this,k.appendData(A),k},createProcessingInstruction:function(A,k){var H=new Uo;return H.ownerDocument=this,H.tagName=H.nodeName=H.target=A,H.nodeValue=H.data=k,H},createAttribute:function(A){var k=new Pa;return k.ownerDocument=this,k.name=A,k.nodeName=A,k.localName=A,k.specified=!0,k},createEntityReference:function(A){var k=new Pc;return k.ownerDocument=this,k.nodeName=A,k},createElementNS:function(A,k){var H=new Qs,oe=k.split(":"),Pe=H.attributes=new gn;return H.childNodes=new Ue,H.ownerDocument=this,H.nodeName=k,H.tagName=k,H.namespaceURI=A,2==oe.length?(H.prefix=oe[0],H.localName=oe[1]):H.localName=k,Pe._ownerElement=H,H},createAttributeNS:function(A,k){var H=new Pa,oe=k.split(":");return H.ownerDocument=this,H.nodeName=k,H.name=k,H.namespaceURI=A,H.specified=!0,2==oe.length?(H.prefix=oe[0],H.localName=oe[1]):H.localName=k,H}},Te(Wt,Xe),Wt.prototype.getElementsByTagName=(Qs.prototype={nodeType:kt,hasAttribute:function(A){return null!=this.getAttributeNode(A)},getAttribute:function(A){var k=this.getAttributeNode(A);return k&&k.value||""},getAttributeNode:function(A){return this.attributes.getNamedItem(A)},setAttribute:function(A,k){var H=this.ownerDocument.createAttribute(A);H.value=H.nodeValue=""+k,this.setAttributeNode(H)},removeAttribute:function(A){var k=this.getAttributeNode(A);k&&this.removeAttributeNode(k)},appendChild:function(A){return A.nodeType===Be?this.insertBefore(A,null):function Hg(A,k){return k.parentNode&&k.parentNode.removeChild(k),k.parentNode=A,k.previousSibling=A.lastChild,k.nextSibling=null,k.previousSibling?k.previousSibling.nextSibling=k:A.firstChild=k,A.lastChild=k,Ur(A.ownerDocument,A,k),k}(this,A)},setAttributeNode:function(A){return this.attributes.setNamedItem(A)},setAttributeNodeNS:function(A){return this.attributes.setNamedItemNS(A)},removeAttributeNode:function(A){return this.attributes.removeNamedItem(A.nodeName)},removeAttributeNS:function(A,k){var H=this.getAttributeNodeNS(A,k);H&&this.removeAttributeNode(H)},hasAttributeNS:function(A,k){return null!=this.getAttributeNodeNS(A,k)},getAttributeNS:function(A,k){var H=this.getAttributeNodeNS(A,k);return H&&H.value||""},setAttributeNS:function(A,k,H){var oe=this.ownerDocument.createAttributeNS(A,k);oe.value=oe.nodeValue=""+H,this.setAttributeNode(oe)},getAttributeNodeNS:function(A,k){return this.attributes.getNamedItemNS(A,k)},getElementsByTagName:function(A){return new In(this,function(k){var H=[];return jt(k,function(oe){oe!==k&&oe.nodeType==kt&&("*"===A||oe.tagName==A)&&H.push(oe)}),H})},getElementsByTagNameNS:function(A,k){return new In(this,function(H){var oe=[];return jt(H,function(Pe){Pe!==H&&Pe.nodeType===kt&&("*"===A||Pe.namespaceURI===A)&&("*"===k||Pe.localName==k)&&oe.push(Pe)}),oe})}}).getElementsByTagName,Wt.prototype.getElementsByTagNameNS=Qs.prototype.getElementsByTagNameNS,Te(Qs,Xe),Pa.prototype.nodeType=Gt,Te(Pa,Xe),Fo.prototype={data:"",substringData:function(A,k){return this.data.substring(A,A+k)},appendData:function(A){this.nodeValue=this.data=A=this.data+A,this.length=A.length},insertData:function(A,k){this.replaceData(A,0,k)},appendChild:function(A){throw new Error(gt[Z])},deleteData:function(A,k){this.replaceData(A,k,"")},replaceData:function(A,k,H){var oe=this.data.substring(0,A),Pe=this.data.substring(A+k);this.nodeValue=this.data=H=oe+H+Pe,this.length=H.length}},Te(Fo,Xe),Hu.prototype={nodeName:"#text",nodeType:me,splitText:function(A){var k=this.data,H=k.substring(A);k=k.substring(0,A),this.data=this.nodeValue=k,this.length=k.length;var oe=this.ownerDocument.createTextNode(H);return this.parentNode&&this.parentNode.insertBefore(oe,this.nextSibling),oe}},Te(Hu,Fo),qu.prototype={nodeName:"#comment",nodeType:lt},Te(qu,Fo),kc.prototype={nodeName:"#cdata-section",nodeType:Ut},Te(kc,Fo),Bo.prototype.nodeType=St,Te(Bo,Xe),Gn.prototype.nodeType=We,Te(Gn,Xe),zu.prototype.nodeType=Nt,Te(zu,Xe),Pc.prototype.nodeType=dt,Te(Pc,Xe),Ei.prototype.nodeName="#document-fragment",Ei.prototype.nodeType=Be,Te(Ei,Xe),Uo.prototype.nodeType=Me,Te(Uo,Xe),Gu.prototype.serializeToString=function(A,k,H){return Wu.call(A,k,H)},Xe.prototype.toString=Wu;try{if(Object.defineProperty){let A=function(k){switch(k.nodeType){case kt:case Be:var H=[];for(k=k.firstChild;k;)7!==k.nodeType&&8!==k.nodeType&&H.push(A(k)),k=k.nextSibling;return H.join("");default:return k.nodeValue}};Object.defineProperty(In.prototype,"length",{get:function(){return ft(this),this.$$length}}),Object.defineProperty(Xe.prototype,"textContent",{get:function(){return A(this)},set:function(k){switch(this.nodeType){case kt:case Be:for(;this.firstChild;)this.removeChild(this.firstChild);(k||String(k))&&this.appendChild(this.ownerDocument.createTextNode(k));break;default:this.data=k,this.value=k,this.nodeValue=k}}}),Xu=function(k,H,oe){k["$$"+H]=oe}}}catch{}tt.DocumentType=Bo,tt.DOMException=Le,tt.DOMImplementation=Ss,tt.Element=Qs,tt.Node=Xe,tt.NodeList=Ue,tt.XMLSerializer=Gu},562:(pt,tt,Fe)=>{"use strict";var fe=Fe(451).freeze;tt.XML_ENTITIES=fe({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),tt.HTML_ENTITIES=fe({Aacute:"\xc1",aacute:"\xe1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",Acy:"\u0410",acy:"\u0430",AElig:"\xc6",aelig:"\xe6",af:"\u2061",Afr:"\u{1d504}",afr:"\u{1d51e}",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",AMP:"&",amp:"&",And:"\u2a53",and:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\xc5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1d538}",aopf:"\u{1d552}",ap:"\u2248",apacir:"\u2a6f",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\xc5",aring:"\xe5",Ascr:"\u{1d49c}",ascr:"\u{1d4b6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\u{1d505}",bfr:"\u{1d51f}",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\u{1d539}",bopf:"\u{1d553}",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250c",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252c",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxUL:"\u255d",boxUl:"\u255c",boxuL:"\u255b",boxul:"\u2518",boxUR:"\u255a",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256c",boxVh:"\u256b",boxvH:"\u256a",boxvh:"\u253c",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255f",boxvR:"\u255e",boxvr:"\u251c",bprime:"\u2035",Breve:"\u02d8",breve:"\u02d8",brvbar:"\xa6",Bscr:"\u212c",bscr:"\u{1d4b7}",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22d2",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\xc7",ccedil:"\xe7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\xb8",Cedilla:"\xb8",cemptyv:"\u29b2",cent:"\xa2",CenterDot:"\xb7",centerdot:"\xb7",Cfr:"\u212d",cfr:"\u{1d520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",cir:"\u25cb",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\xae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",Conint:"\u222f",conint:"\u222e",ContourIntegral:"\u222e",Copf:"\u2102",copf:"\u{1d554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xa9",copy:"\xa9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",Cross:"\u2a2f",cross:"\u2717",Cscr:"\u{1d49e}",cscr:"\u{1d4b8}",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",Cup:"\u22d3",cup:"\u222a",cupbrcap:"\u2a48",CupCap:"\u224d",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\xa4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21a1",dArr:"\u21d3",darr:"\u2193",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21ca",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\xb0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\u{1d507}",dfr:"\u{1d521}",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\xb4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",Diamond:"\u22c4",diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\xa8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\u{1d53b}",dopf:"\u{1d555}",Dot:"\xa8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\xa8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21d3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",DownTeeArrow:"\u21a7",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\u{1d49f}",dscr:"\u{1d4b9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\xc9",eacute:"\xe9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",ecir:"\u2256",Ecirc:"\xca",ecirc:"\xea",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1d508}",efr:"\u{1d522}",eg:"\u2a9a",Egrave:"\xc8",egrave:"\xe8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1d53c}",eopf:"\u{1d556}",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212f",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\u{1d509}",ffr:"\u{1d523}",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\u{1d53d}",fopf:"\u{1d557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1d4bb}",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",ges:"\u2a7e",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\u{1d50a}",gfr:"\u{1d524}",Gg:"\u22d9",gg:"\u226b",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2aa5",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gnE:"\u2269",gne:"\u2a88",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\u{1d53e}",gopf:"\u{1d558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\u{1d4a2}",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",Gt:"\u226b",GT:">",gt:">",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\xbd",hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",hArr:"\u21d4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",Hfr:"\u210c",hfr:"\u{1d525}",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",Hopf:"\u210d",hopf:"\u{1d559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210b",hscr:"\u{1d4bd}",hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xcd",iacute:"\xed",ic:"\u2063",Icirc:"\xce",icirc:"\xee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xa1",iff:"\u21d4",Ifr:"\u2111",ifr:"\u{1d526}",Igrave:"\xcc",igrave:"\xec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",in:"\u2208",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",Int:"\u222c",int:"\u222b",intcal:"\u22ba",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\u{1d540}",iopf:"\u{1d55a}",Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\xbf",Iscr:"\u2110",iscr:"\u{1d4be}",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xcf",iuml:"\xef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1d50d}",jfr:"\u{1d527}",jmath:"\u0237",Jopf:"\u{1d541}",jopf:"\u{1d55b}",Jscr:"\u{1d4a5}",jscr:"\u{1d4bf}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\u{1d50e}",kfr:"\u{1d528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\u{1d542}",kopf:"\u{1d55c}",Kscr:"\u{1d4a6}",kscr:"\u{1d4c0}",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",Lang:"\u27ea",lang:"\u27e8",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\xab",Larr:"\u219e",lArr:"\u21d0",larr:"\u2190",larrb:"\u21e4",larrbfs:"\u291f",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",lat:"\u2aab",lAtail:"\u291b",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lBarr:"\u290e",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",Leftarrow:"\u21d0",leftarrow:"\u2190",LeftArrowBar:"\u21e4",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrow:"\u2194",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTee:"\u22a3",LeftTeeArrow:"\u21a4",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangle:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",LeftVectorBar:"\u2952",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",les:"\u2a7d",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\u{1d50f}",lfr:"\u{1d529}",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22d8",ll:"\u226a",llarr:"\u21c7",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lnE:"\u2268",lne:"\u2a87",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftarrow:"\u27f5",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",longmapsto:"\u27fc",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",longrightarrow:"\u27f6",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\u{1d543}",lopf:"\u{1d55d}",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1d4c1}",Lsh:"\u21b0",lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226a",LT:"<",lt:"<",ltcc:"\u2aa6",ltcir:"\u2a79",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\u{1d510}",mfr:"\u{1d52a}",mho:"\u2127",micro:"\xb5",mid:"\u2223",midast:"*",midcir:"\u2af0",middot:"\xb7",minus:"\u2212",minusb:"\u229f",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\u{1d544}",mopf:"\u{1d55e}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1d4c2}",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266e",natural:"\u266e",naturals:"\u2115",nbsp:"\xa0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21d7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1d511}",nfr:"\u{1d52b}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nhArr:"\u21ce",nharr:"\u21ae",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlArr:"\u21cd",nlarr:"\u219a",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21cd",nleftarrow:"\u219a",nLeftrightarrow:"\u21ce",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xa0",Nopf:"\u2115",nopf:"\u{1d55f}",Not:"\u2aec",not:"\xac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangle:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangle:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",nrarr:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nRightarrow:"\u21cf",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\u{1d4a9}",nscr:"\u{1d4c3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\xd1",ntilde:"\xf1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nVDash:"\u22af",nVdash:"\u22ae",nvDash:"\u22ad",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwArr:"\u21d6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xd3",oacute:"\xf3",oast:"\u229b",ocir:"\u229a",Ocirc:"\xd4",ocirc:"\xf4",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\u{1d512}",ofr:"\u{1d52c}",ogon:"\u02db",Ograve:"\xd2",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\u{1d546}",oopf:"\u{1d560}",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",Or:"\u2a54",or:"\u2228",orarr:"\u21bb",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\u{1d4aa}",oscr:"\u2134",Oslash:"\xd8",oslash:"\xf8",osol:"\u2298",Otilde:"\xd5",otilde:"\xf5",Otimes:"\u2a37",otimes:"\u2297",otimesas:"\u2a36",Ouml:"\xd6",ouml:"\xf6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",par:"\u2225",para:"\xb6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\u{1d513}",pfr:"\u{1d52d}",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\xb1",plusmn:"\xb1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\xb1",Poincareplane:"\u210c",pointint:"\u2a15",Popf:"\u2119",popf:"\u{1d561}",pound:"\xa3",Pr:"\u2abb",pr:"\u227a",prap:"\u2ab7",prcue:"\u227c",prE:"\u2ab3",pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",precsim:"\u227e",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportion:"\u2237",Proportional:"\u221d",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\u{1d4ab}",pscr:"\u{1d4c5}",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\u{1d514}",qfr:"\u{1d52e}",qint:"\u2a0c",Qopf:"\u211a",qopf:"\u{1d562}",qprime:"\u2057",Qscr:"\u{1d4ac}",qscr:"\u{1d4c6}",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",QUOT:'"',quot:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",Rang:"\u27eb",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\xbb",Rarr:"\u21a0",rArr:"\u21d2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",rAtail:"\u291c",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",RBarr:"\u2910",rBarr:"\u290f",rbarr:"\u290d",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",Re:"\u211c",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",REG:"\xae",reg:"\xae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",Rfr:"\u211c",rfr:"\u{1d52f}",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrow:"\u2192",Rightarrow:"\u21d2",rightarrow:"\u2192",RightArrowBar:"\u21e5",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangle:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",RightVectorBar:"\u2953",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",Ropf:"\u211d",ropf:"\u{1d563}",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",Rscr:"\u211b",rscr:"\u{1d4c7}",Rsh:"\u21b1",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",Sc:"\u2abc",sc:"\u227b",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227d",scE:"\u2ab4",sce:"\u2ab0",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdot:"\u22c5",sdotb:"\u22a1",sdote:"\u2a66",searhk:"\u2925",seArr:"\u21d8",searr:"\u2198",searrow:"\u2198",sect:"\xa7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1d516}",sfr:"\u{1d530}",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",Sopf:"\u{1d54a}",sopf:"\u{1d564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25a1",Square:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squf:"\u25aa",srarr:"\u2192",Sscr:"\u{1d4ae}",sscr:"\u{1d4c8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\xaf",Sub:"\u22d0",sub:"\u2282",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",Subset:"\u22d0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succ:"\u227b",succapprox:"\u2ab8",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",Sum:"\u2211",sum:"\u2211",sung:"\u266a",Sup:"\u22d1",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",Supset:"\u22d1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swArr:"\u21d9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292a",szlig:"\xdf",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\u{1d517}",tfr:"\u{1d531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\xde",thorn:"\xfe",Tilde:"\u223c",tilde:"\u02dc",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xd7",timesb:"\u22a0",timesbar:"\u2a31",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",top:"\u22a4",topbot:"\u2336",topcir:"\u2af1",Topf:"\u{1d54b}",topf:"\u{1d565}",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\u{1d4af}",tscr:"\u{1d4c9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\xda",uacute:"\xfa",Uarr:"\u219f",uArr:"\u21d1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\xdb",ucirc:"\xfb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\u{1d518}",ufr:"\u{1d532}",Ugrave:"\xd9",ugrave:"\xf9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\xa8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1d54c}",uopf:"\u{1d566}",UpArrow:"\u2191",Uparrow:"\u21d1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",UpDownArrow:"\u2195",Updownarrow:"\u21d5",updownarrow:"\u2195",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03d2",upsi:"\u03c5",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTee:"\u22a5",UpTeeArrow:"\u21a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\u{1d4b0}",uscr:"\u{1d4ca}",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\xdc",uuml:"\xfc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",vArr:"\u21d5",varr:"\u2195",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",Vbar:"\u2aeb",vBar:"\u2ae8",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22ab",Vdash:"\u22a9",vDash:"\u22a8",vdash:"\u22a2",Vdashl:"\u2ae6",Vee:"\u22c1",vee:"\u2228",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\u{1d519}",vfr:"\u{1d533}",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\u{1d54d}",vopf:"\u{1d567}",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\u{1d4b1}",vscr:"\u{1d4cb}",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",Wedge:"\u22c0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1d51a}",wfr:"\u{1d534}",Wopf:"\u{1d54e}",wopf:"\u{1d568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1d4b2}",wscr:"\u{1d4cc}",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\u{1d51b}",xfr:"\u{1d535}",xhArr:"\u27fa",xharr:"\u27f7",Xi:"\u039e",xi:"\u03be",xlArr:"\u27f8",xlarr:"\u27f5",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\u{1d54f}",xopf:"\u{1d569}",xoplus:"\u2a01",xotime:"\u2a02",xrArr:"\u27f9",xrarr:"\u27f6",Xscr:"\u{1d4b3}",xscr:"\u{1d4cd}",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\xdd",yacute:"\xfd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\xa5",Yfr:"\u{1d51c}",yfr:"\u{1d536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1d550}",yopf:"\u{1d56a}",Yscr:"\u{1d4b4}",yscr:"\u{1d4ce}",YUcy:"\u042e",yucy:"\u044e",Yuml:"\u0178",yuml:"\xff",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",Zfr:"\u2128",zfr:"\u{1d537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",Zopf:"\u2124",zopf:"\u{1d56b}",Zscr:"\u{1d4b5}",zscr:"\u{1d4cf}",zwj:"\u200d",zwnj:"\u200c"}),tt.entityMap=tt.HTML_ENTITIES},862:(pt,tt,Fe)=>{Fe(475);tt.DOMParser=Fe(20).DOMParser},989:(pt,tt,Fe)=>{var fe=Fe(451).NAMESPACE,M=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,re=new RegExp("[\\-\\.0-9"+M.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),z=new RegExp("^"+M.source+re.source+"*(?::"+M.source+re.source+"*)?$");function Gt(N,B){this.message=N,this.locator=B,Error.captureStackTrace&&Error.captureStackTrace(this,Gt)}function me(){}function dt(N,B){return B.lineNumber=N.lineNumber,B.columnNumber=N.columnNumber,B}function Nt(N,B,Z,be,xe,Ne){function ke(Pt,qt,Le){Z.attributeNames.hasOwnProperty(Pt)&&Ne.fatalError("Attribute "+Pt+" redefined"),Z.addValue(Pt,qt.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,xe),Le)}for(var Se,Ce=++B,pe=0;;){var Ie=N.charAt(Ce);switch(Ie){case"=":if(1===pe)Se=N.slice(B,Ce),pe=3;else{if(2!==pe)throw new Error("attribute equal must after attrName");pe=3}break;case"'":case'"':if(3===pe||1===pe){if(1===pe&&(Ne.warning('attribute value must after "="'),Se=N.slice(B,Ce)),!((Ce=N.indexOf(Ie,B=Ce+1))>0))throw new Error("attribute value no end '"+Ie+"' match");ke(Se,he=N.slice(B,Ce),B-1),pe=5}else{if(4!=pe)throw new Error('attribute value must after "="');ke(Se,he=N.slice(B,Ce),B),Ne.warning('attribute "'+Se+'" missed start quot('+Ie+")!!"),B=Ce+1,pe=5}break;case"/":switch(pe){case 0:Z.setTagName(N.slice(B,Ce));case 5:case 6:case 7:pe=7,Z.closed=!0;case 4:case 1:break;case 2:Z.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Ne.error("unexpected end of input"),0==pe&&Z.setTagName(N.slice(B,Ce)),Ce;case">":switch(pe){case 0:Z.setTagName(N.slice(B,Ce));case 5:case 6:case 7:break;case 4:case 1:"/"===(he=N.slice(B,Ce)).slice(-1)&&(Z.closed=!0,he=he.slice(0,-1));case 2:2===pe&&(he=Se),4==pe?(Ne.warning('attribute "'+he+'" missed quot(")!'),ke(Se,he,B)):((!fe.isHTML(be[""])||!he.match(/^(?:disabled|checked|selected)$/i))&&Ne.warning('attribute "'+he+'" missed value!! "'+he+'" instead!!'),ke(he,he,B));break;case 3:throw new Error("attribute value missed!!")}return Ce;case"\x80":Ie=" ";default:if(Ie<=" ")switch(pe){case 0:Z.setTagName(N.slice(B,Ce)),pe=6;break;case 1:Se=N.slice(B,Ce),pe=2;break;case 4:var he=N.slice(B,Ce);Ne.warning('attribute "'+he+'" missed quot(")!!'),ke(Se,he,B);case 5:pe=6}else switch(pe){case 2:(!fe.isHTML(be[""])||!Se.match(/^(?:disabled|checked|selected)$/i))&&Ne.warning('attribute "'+Se+'" missed value!! "'+Se+'" instead2!!'),ke(Se,Se,B),B=Ce,pe=1;break;case 5:Ne.warning('attribute space is required"'+Se+'"!!');case 6:pe=1,B=Ce;break;case 3:pe=4,B=Ce;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}Ce++}}function Me(N,B,Z){for(var be=N.tagName,xe=null,Ie=N.length;Ie--;){var Ne=N[Ie],ke=Ne.qName,Se=Ne.value;if(($e=ke.indexOf(":"))>0)var he=Ne.prefix=ke.slice(0,$e),Ce=ke.slice($e+1),pe="xmlns"===he&&Ce;else Ce=ke,he=null,pe="xmlns"===ke&&"";Ne.localName=Ce,!1!==pe&&(null==xe&&(xe={},St(Z,Z={})),Z[pe]=xe[pe]=Se,Ne.uri=fe.XMLNS,B.startPrefixMapping(pe,Se))}for(Ie=N.length;Ie--;)(he=(Ne=N[Ie]).prefix)&&("xml"===he&&(Ne.uri=fe.XML),"xmlns"!==he&&(Ne.uri=Z[he||""]));var $e;($e=be.indexOf(":"))>0?(he=N.prefix=be.slice(0,$e),Ce=N.localName=be.slice($e+1)):(he=null,Ce=N.localName=be);var Pt=N.uri=Z[he||""];if(B.startElement(Pt,Ce,be,N),!N.closed)return N.currentNSMap=Z,N.localNSMap=xe,!0;if(B.endElement(Pt,Ce,be),xe)for(he in xe)Object.prototype.hasOwnProperty.call(xe,he)&&B.endPrefixMapping(he)}function lt(N,B,Z,be,xe){if(/^(?:script|textarea)$/i.test(Z)){var Ne=N.indexOf("</"+Z+">",B),ke=N.substring(B+1,Ne);if(/[&<]/.test(ke))return/^script$/i.test(Z)?(xe.characters(ke,0,ke.length),Ne):(ke=ke.replace(/&#?\w+;/g,be),xe.characters(ke,0,ke.length),Ne)}return B+1}function rt(N,B,Z,be){var xe=be[Z];return null==xe&&((xe=N.lastIndexOf("</"+Z+">"))<B&&(xe=N.lastIndexOf("</"+Z)),be[Z]=xe),xe<B}function St(N,B){for(var Z in N)Object.prototype.hasOwnProperty.call(N,Z)&&(B[Z]=N[Z])}function Be(N,B,Z,be){if("-"===N.charAt(B+2))return"-"===N.charAt(B+3)?(Ne=N.indexOf("--\x3e",B+4))>B?(Z.comment(N,B+4,Ne-B-4),Ne+3):(be.error("Unclosed comment"),-1):-1;if("CDATA["==N.substr(B+3,6)){var Ne=N.indexOf("]]>",B+9);return Z.startCDATA(),Z.characters(N,B+9,Ne-B-9),Z.endCDATA(),Ne+3}var ke=function gt(N,B){var Z,be=[],xe=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(xe.lastIndex=B,xe.exec(N);Z=xe.exec(N);)if(be.push(Z),Z[1])return be}(N,B),Se=ke.length;if(Se>1&&/!doctype/i.test(ke[0][0])){var he=ke[1][0],Ce=!1,pe=!1;Se>3&&(/^public$/i.test(ke[2][0])?(Ce=ke[3][0],pe=Se>4&&ke[4][0]):/^system$/i.test(ke[2][0])&&(pe=ke[3][0]));var Ie=ke[Se-1];return Z.startDTD(he,Ce,pe),Z.endDTD(),Ie.index+Ie[0].length}return-1}function We(N,B,Z){var be=N.indexOf("?>",B);if(be){var xe=N.substring(B,be).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return xe?(Z.processingInstruction(xe[1],xe[2]),be+2):-1}return-1}function at(){this.attributeNames={}}(Gt.prototype=new Error).name=Gt.name,me.prototype={parse:function(N,B,Z){var be=this.domBuilder;be.startDocument(),St(B,B={}),function Ut(N,B,Z,be,xe){function ke(wt){var Zn=wt.slice(1,-1);return Object.hasOwnProperty.call(Z,Zn)?Z[Zn]:"#"===Zn.charAt(0)?function Ne(wt){return wt>65535?(wt-=65536,String.fromCharCode(55296+(wt>>10),56320+(1023&wt))):String.fromCharCode(wt)}(parseInt(Zn.substr(1).replace("x","0x"))):(xe.error("entity not found:"+wt),wt)}function Se(wt){if(wt>Le){var Zn=N.substring(Le,wt).replace(/&#?\w+;/g,ke);$e&&he(Le),be.characters(Zn,0,wt-Le),Le=wt}}function he(wt,Zn){for(;wt>=pe&&(Zn=Ie.exec(N));)pe=(Ce=Zn.index)+Zn[0].length,$e.lineNumber++;$e.columnNumber=wt-Ce+1}for(var Ce=0,pe=0,Ie=/.*(?:\r\n?|\n)|.*$/g,$e=be.locator,Pt=[{currentNSMap:B}],qt={},Le=0;;){try{var Ue=N.indexOf("<",Le);if(Ue<0){if(!N.substr(Le).match(/^\s*$/)){var In=be.doc,ft=In.createTextNode(N.substr(Le));In.appendChild(ft),be.currentElement=ft}return}switch(Ue>Le&&Se(Ue),N.charAt(Ue+1)){case"/":var Wt=N.indexOf(">",Ue+3),gn=N.substring(Ue+2,Wt).replace(/[ \t\n\r]+$/g,""),sr=Pt.pop();Wt<0?(gn=N.substring(Ue+2).replace(/[\s<].*/,""),xe.error("end tag name: "+gn+" is not complete:"+sr.tagName),Wt=Ue+1+gn.length):gn.match(/\s</)&&(gn=gn.replace(/[\s<].*/,""),xe.error("end tag name: "+gn+" maybe not complete"),Wt=Ue+1+gn.length);var gr=sr.localNSMap,Br=sr.tagName==gn;if(Br||sr.tagName&&sr.tagName.toLowerCase()==gn.toLowerCase()){if(be.endElement(sr.uri,sr.localName,gn),gr)for(var Xe in gr)Object.prototype.hasOwnProperty.call(gr,Xe)&&be.endPrefixMapping(Xe);Br||xe.fatalError("end tag name: "+gn+" is not match the current start tagName:"+sr.tagName)}else Pt.push(sr);Wt++;break;case"?":$e&&he(Ue),Wt=We(N,Ue,be);break;case"!":$e&&he(Ue),Wt=Be(N,Ue,be,xe);break;default:$e&&he(Ue);var vt=new at,jt=Pt[Pt.length-1].currentNSMap,zn=(Wt=Nt(N,Ue,vt,jt,ke,xe),vt.length);if(!vt.closed&&rt(N,Wt,vt.tagName,qt)&&(vt.closed=!0,Z.nbsp||xe.warning("unclosed xml attribute")),$e&&zn){for(var Ke=dt($e,{}),Ur=0;Ur<zn;Ur++){var Si=vt[Ur];he(Si.offset),Si.locator=dt($e,{})}be.locator=Ke,Me(vt,be,jt)&&Pt.push(vt),be.locator=$e}else Me(vt,be,jt)&&Pt.push(vt);fe.isHTML(vt.uri)&&!vt.closed?Wt=lt(N,Wt,vt.tagName,ke,be):Wt++}}catch(wt){if(wt instanceof Gt)throw wt;xe.error("element parse error: "+wt),Wt=-1}Wt>Le?Le=Wt:Se(Math.max(Ue,Le)+1)}}(N,B,Z,be,this.errorHandler),be.endDocument()}},at.prototype={setTagName:function(N){if(!z.test(N))throw new Error("invalid tagName:"+N);this.tagName=N},addValue:function(N,B,Z){if(!z.test(N))throw new Error("invalid attribute:"+N);this.attributeNames[N]=this.length,this[this.length++]={qName:N,value:B,offset:Z}},length:0,getLocalName:function(N){return this[N].localName},getLocator:function(N){return this[N].locator},getQName:function(N){return this[N].qName},getURI:function(N){return this[N].uri},getValue:function(N){return this[N].value}},tt.XMLReader=me,tt.ParseError=Gt},598:(pt,tt,Fe)=>{var re,fe=typeof global<"u"?global:typeof window<"u"?window:{},M=Fe(893);typeof document<"u"?re=document:(re=fe["__GLOBAL_DOCUMENT_CACHE@4"])||(re=fe["__GLOBAL_DOCUMENT_CACHE@4"]=M),pt.exports=re},382:pt=>{var tt;tt=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pt.exports=tt},794:pt=>{pt.exports=function Fe(fe){if(!fe)return!1;var M=tt.call(fe);return"[object Function]"===M||"function"==typeof fe&&"[object RegExp]"!==M||typeof window<"u"&&(fe===window.setTimeout||fe===window.alert||fe===window.confirm||fe===window.prompt)};var tt=Object.prototype.toString},35:(pt,tt,Fe)=>{var fe=Fe(301).getUint64;pt.exports=function(re){var z=new DataView(re.buffer,re.byteOffset,re.byteLength),ie={version:re[0],flags:new Uint8Array(re.subarray(1,4)),references:[],referenceId:z.getUint32(4),timescale:z.getUint32(8)},ae=12;0===ie.version?(ie.earliestPresentationTime=z.getUint32(ae),ie.firstOffset=z.getUint32(ae+4),ae+=8):(ie.earliestPresentationTime=fe(re.subarray(ae)),ie.firstOffset=fe(re.subarray(ae+8)),ae+=16);var ce=z.getUint16(ae+=2);for(ae+=2;ce>0;ae+=12,ce--)ie.references.push({referenceType:(128&re[ae])>>>7,referencedSize:2147483647&z.getUint32(ae),subsegmentDuration:z.getUint32(ae+4),startsWithSap:!!(128&re[ae+8]),sapType:(112&re[ae+8])>>>4,sapDeltaTime:268435455&z.getUint32(ae+8)});return ie}},825:pt=>{var Fe,fe,M,re,z,ie,ae;z=function(ce,Re){return Fe(re(ce,Re))},ie=function(ce,Re){return fe(M(ce),Re)},ae=function(ce,Re,Ge){return M(Ge?ce:ce-Re)},pt.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:Fe=function(ce){return 9e4*ce},secondsToAudioTs:fe=function(ce,Re){return ce*Re},videoTsToSeconds:M=function(ce){return ce/9e4},audioTsToSeconds:re=function(ce,Re){return ce/Re},audioTsToVideoTs:z,videoTsToAudioTs:ie,metadataTsToSeconds:ae}},301:pt=>{var tt=Math.pow(2,32);pt.exports={getUint64:function(fe){var re,M=new DataView(fe.buffer,fe.byteOffset,fe.byteLength);return M.getBigUint64?(re=M.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(re):re:M.getUint32(0)*tt+M.getUint32(4)},MAX_UINT32:tt}},135:pt=>{pt.exports=function tt(Fe,fe){var M,re=null;try{M=JSON.parse(Fe,fe)}catch(z){re=z}return[re,M]}},367:function(pt){var Fe,fe,M,re,z;Fe=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,fe=/^(?=([^\/?#]*))\1([^]*)$/,M=/(?:\/|^)\.(?=\/)/g,re=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,pt.exports=z={buildAbsoluteURL:function(ie,ae,ce){if(ce=ce||{},ie=ie.trim(),!(ae=ae.trim())){if(!ce.alwaysNormalize)return ie;var Re=z.parseURL(ie);if(!Re)throw new Error("Error trying to parse base URL.");return Re.path=z.normalizePath(Re.path),z.buildURLFromParts(Re)}var Ge=z.parseURL(ae);if(!Ge)throw new Error("Error trying to parse relative URL.");if(Ge.scheme)return ce.alwaysNormalize?(Ge.path=z.normalizePath(Ge.path),z.buildURLFromParts(Ge)):ae;var Te=z.parseURL(ie);if(!Te)throw new Error("Error trying to parse base URL.");if(!Te.netLoc&&Te.path&&"/"!==Te.path[0]){var Je=fe.exec(Te.path);Te.netLoc=Je[1],Te.path=Je[2]}Te.netLoc&&!Te.path&&(Te.path="/");var kt={scheme:Te.scheme,netLoc:Ge.netLoc,path:null,params:Ge.params,query:Ge.query,fragment:Ge.fragment};if(!Ge.netLoc&&(kt.netLoc=Te.netLoc,"/"!==Ge.path[0]))if(Ge.path){var Gt=Te.path,me=Gt.substring(0,Gt.lastIndexOf("/")+1)+Ge.path;kt.path=z.normalizePath(me)}else kt.path=Te.path,Ge.params||(kt.params=Te.params,Ge.query||(kt.query=Te.query));return null===kt.path&&(kt.path=ce.alwaysNormalize?z.normalizePath(Ge.path):Ge.path),z.buildURLFromParts(kt)},parseURL:function(ie){var ae=Fe.exec(ie);return ae?{scheme:ae[1]||"",netLoc:ae[2]||"",path:ae[3]||"",params:ae[4]||"",query:ae[5]||"",fragment:ae[6]||""}:null},normalizePath:function(ie){for(ie=ie.split("").reverse().join("").replace(M,"");ie.length!==(ie=ie.replace(re,"")).length;);return ie.split("").reverse().join("")},buildURLFromParts:function(ie){return ie.scheme+ie.netLoc+ie.path+ie.params+ie.query+ie.fragment}}},858:(pt,tt,Fe)=>{"use strict";Fe.r(tt),Fe.d(tt,{default:()=>J});var fe=Fe(382),M=Fe.n(fe),re=Fe(598),z=Fe.n(re),ie=Fe(135),ae=Fe.n(ie),ce=Fe(817),Re=Fe.n(ce),Ge=Fe(506),Te=Fe.n(Ge);function Je(){return Je=Object.assign?Object.assign.bind():function(u){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(u[a]=s[a])}return u},Je.apply(this,arguments)}var kt=Fe(367),Gt=Fe.n(kt);const dt=function(r,s){if(/^[a-z]+:/i.test(s))return s;/^data:/.test(r)&&(r=M().location&&M().location.href||"");var a="function"==typeof M().URL,c=/^\/\//.test(r),h=!M().location&&!/\/\//i.test(r);if(a?r=new(M().URL)(r,M().location||"http://example.com"):/\/\//i.test(r)||(r=Gt().buildAbsoluteURL(M().location&&M().location.href||"",r)),a){var f=new URL(s,r);return h?f.href.slice(18):c?f.href.slice(f.protocol.length):f.href}return Gt().buildAbsoluteURL(r,s)};var Nt=function(){function u(){this.listeners={}}var r=u.prototype;return r.on=function(a,c){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(c)},r.off=function(a,c){if(!this.listeners[a])return!1;var h=this.listeners[a].indexOf(c);return this.listeners[a]=this.listeners[a].slice(0),this.listeners[a].splice(h,1),h>-1},r.trigger=function(a){var c=this.listeners[a];if(c)if(2===arguments.length)for(var h=c.length,f=0;f<h;++f)c[f].call(this,arguments[1]);else for(var y=Array.prototype.slice.call(arguments,1),T=c.length,E=0;E<T;++E)c[E].apply(this,y)},r.dispose=function(){this.listeners={}},r.pipe=function(a){this.on("data",function(c){a.push(c)})},u}();function lt(u){for(var r=function(r){return M().atob?M().atob(r):Buffer.from(r,"base64").toString("binary")}(u),s=new Uint8Array(r.length),a=0;a<r.length;a++)s[a]=r.charCodeAt(a);return s}class rt extends Nt{constructor(){super(),this.buffer=""}push(r){let s;for(this.buffer+=r,s=this.buffer.indexOf("\n");s>-1;s=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,s)),this.buffer=this.buffer.substring(s+1)}}const St=String.fromCharCode(9),Be=function(u){const r=/([0-9.]*)?@?([0-9.]*)?/.exec(u||""),s={};return r[1]&&(s.length=parseInt(r[1],10)),r[2]&&(s.offset=parseInt(r[2],10)),s},at=function(u){const r={};if(!u)return r;const s=u.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let c,a=s.length;for(;a--;)""!==s[a]&&(c=/([^=]*)=(.*)/.exec(s[a]).slice(1),c[0]=c[0].replace(/^\s+|\s+$/g,""),c[1]=c[1].replace(/^\s+|\s+$/g,""),c[1]=c[1].replace(/^['"](.*)['"]$/g,"$1"),r[c[0]]=c[1]);return r};class gt extends Nt{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(r){let s,a;0!==(r=r.trim()).length&&("#"===r[0]?this.tagMappers.reduce((h,f)=>{const y=f(r);return y===r?h:h.concat([y])},[r]).forEach(h=>{for(let f=0;f<this.customParsers.length;f++)if(this.customParsers[f].call(this,h))return;if(0===h.indexOf("#EXT"))if(h=h.replace("\r",""),s=/^#EXTM3U/.exec(h),s)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(s=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(h),s)return a={type:"tag",tagType:"inf"},s[1]&&(a.duration=parseFloat(s[1])),s[2]&&(a.title=s[2]),void this.trigger("data",a);if(s=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(h),s)return a={type:"tag",tagType:"targetduration"},s[1]&&(a.duration=parseInt(s[1],10)),void this.trigger("data",a);if(s=/^#EXT-X-VERSION:([0-9.]*)?/.exec(h),s)return a={type:"tag",tagType:"version"},s[1]&&(a.version=parseInt(s[1],10)),void this.trigger("data",a);if(s=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(h),s)return a={type:"tag",tagType:"media-sequence"},s[1]&&(a.number=parseInt(s[1],10)),void this.trigger("data",a);if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(h),s)return a={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(a.number=parseInt(s[1],10)),void this.trigger("data",a);if(s=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(h),s)return a={type:"tag",tagType:"playlist-type"},s[1]&&(a.playlistType=s[1]),void this.trigger("data",a);if(s=/^#EXT-X-BYTERANGE:(.*)?$/.exec(h),s)return a=Je(Be(s[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",a);if(s=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(h),s)return a={type:"tag",tagType:"allow-cache"},s[1]&&(a.allowed=!/NO/.test(s[1])),void this.trigger("data",a);if(s=/^#EXT-X-MAP:(.*)$/.exec(h),s){if(a={type:"tag",tagType:"map"},s[1]){const f=at(s[1]);f.URI&&(a.uri=f.URI),f.BYTERANGE&&(a.byterange=Be(f.BYTERANGE))}this.trigger("data",a)}else if(s=/^#EXT-X-STREAM-INF:(.*)$/.exec(h),s){if(a={type:"tag",tagType:"stream-inf"},s[1]){if(a.attributes=at(s[1]),a.attributes.RESOLUTION){const f=a.attributes.RESOLUTION.split("x"),y={};f[0]&&(y.width=parseInt(f[0],10)),f[1]&&(y.height=parseInt(f[1],10)),a.attributes.RESOLUTION=y}a.attributes.BANDWIDTH&&(a.attributes.BANDWIDTH=parseInt(a.attributes.BANDWIDTH,10)),a.attributes["FRAME-RATE"]&&(a.attributes["FRAME-RATE"]=parseFloat(a.attributes["FRAME-RATE"])),a.attributes["PROGRAM-ID"]&&(a.attributes["PROGRAM-ID"]=parseInt(a.attributes["PROGRAM-ID"],10))}this.trigger("data",a)}else{if(s=/^#EXT-X-MEDIA:(.*)$/.exec(h),s)return a={type:"tag",tagType:"media"},s[1]&&(a.attributes=at(s[1])),void this.trigger("data",a);if(s=/^#EXT-X-ENDLIST/.exec(h),s)this.trigger("data",{type:"tag",tagType:"endlist"});else if(s=/^#EXT-X-DISCONTINUITY/.exec(h),s)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(s=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(h),s)return a={type:"tag",tagType:"program-date-time"},s[1]&&(a.dateTimeString=s[1],a.dateTimeObject=new Date(s[1])),void this.trigger("data",a);if(s=/^#EXT-X-KEY:(.*)$/.exec(h),s)return a={type:"tag",tagType:"key"},s[1]&&(a.attributes=at(s[1]),a.attributes.IV&&("0x"===a.attributes.IV.substring(0,2).toLowerCase()&&(a.attributes.IV=a.attributes.IV.substring(2)),a.attributes.IV=a.attributes.IV.match(/.{8}/g),a.attributes.IV[0]=parseInt(a.attributes.IV[0],16),a.attributes.IV[1]=parseInt(a.attributes.IV[1],16),a.attributes.IV[2]=parseInt(a.attributes.IV[2],16),a.attributes.IV[3]=parseInt(a.attributes.IV[3],16),a.attributes.IV=new Uint32Array(a.attributes.IV))),void this.trigger("data",a);if(s=/^#EXT-X-START:(.*)$/.exec(h),s)return a={type:"tag",tagType:"start"},s[1]&&(a.attributes=at(s[1]),a.attributes["TIME-OFFSET"]=parseFloat(a.attributes["TIME-OFFSET"]),a.attributes.PRECISE=/YES/.test(a.attributes.PRECISE)),void this.trigger("data",a);if(s=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(h),s)return a={type:"tag",tagType:"cue-out-cont"},a.data=s[1]?s[1]:"",void this.trigger("data",a);if(s=/^#EXT-X-CUE-OUT:(.*)?$/.exec(h),s)return a={type:"tag",tagType:"cue-out"},a.data=s[1]?s[1]:"",void this.trigger("data",a);if(s=/^#EXT-X-CUE-IN:(.*)?$/.exec(h),s)return a={type:"tag",tagType:"cue-in"},a.data=s[1]?s[1]:"",void this.trigger("data",a);if(s=/^#EXT-X-SKIP:(.*)$/.exec(h),s&&s[1])return a={type:"tag",tagType:"skip"},a.attributes=at(s[1]),a.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(a.attributes["SKIPPED-SEGMENTS"]=parseInt(a.attributes["SKIPPED-SEGMENTS"],10)),a.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(a.attributes["RECENTLY-REMOVED-DATERANGES"]=a.attributes["RECENTLY-REMOVED-DATERANGES"].split(St)),void this.trigger("data",a);if(s=/^#EXT-X-PART:(.*)$/.exec(h),s&&s[1])return a={type:"tag",tagType:"part"},a.attributes=at(s[1]),["DURATION"].forEach(function(f){a.attributes.hasOwnProperty(f)&&(a.attributes[f]=parseFloat(a.attributes[f]))}),["INDEPENDENT","GAP"].forEach(function(f){a.attributes.hasOwnProperty(f)&&(a.attributes[f]=/YES/.test(a.attributes[f]))}),a.attributes.hasOwnProperty("BYTERANGE")&&(a.attributes.byterange=Be(a.attributes.BYTERANGE)),void this.trigger("data",a);if(s=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(h),s&&s[1])return a={type:"tag",tagType:"server-control"},a.attributes=at(s[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(f){a.attributes.hasOwnProperty(f)&&(a.attributes[f]=parseFloat(a.attributes[f]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(f){a.attributes.hasOwnProperty(f)&&(a.attributes[f]=/YES/.test(a.attributes[f]))}),void this.trigger("data",a);if(s=/^#EXT-X-PART-INF:(.*)$/.exec(h),s&&s[1])return a={type:"tag",tagType:"part-inf"},a.attributes=at(s[1]),["PART-TARGET"].forEach(function(f){a.attributes.hasOwnProperty(f)&&(a.attributes[f]=parseFloat(a.attributes[f]))}),void this.trigger("data",a);if(s=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(h),s&&s[1])return a={type:"tag",tagType:"preload-hint"},a.attributes=at(s[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(f){if(a.attributes.hasOwnProperty(f)){a.attributes[f]=parseInt(a.attributes[f],10);const y="BYTERANGE-LENGTH"===f?"length":"offset";a.attributes.byterange=a.attributes.byterange||{},a.attributes.byterange[y]=a.attributes[f],delete a.attributes[f]}}),void this.trigger("data",a);if(s=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(h),s&&s[1])return a={type:"tag",tagType:"rendition-report"},a.attributes=at(s[1]),["LAST-MSN","LAST-PART"].forEach(function(f){a.attributes.hasOwnProperty(f)&&(a.attributes[f]=parseInt(a.attributes[f],10))}),void this.trigger("data",a);if(s=/^#EXT-X-DATERANGE:(.*)$/.exec(h),s&&s[1]){a={type:"tag",tagType:"daterange"},a.attributes=at(s[1]),["ID","CLASS"].forEach(function(y){a.attributes.hasOwnProperty(y)&&(a.attributes[y]=String(a.attributes[y]))}),["START-DATE","END-DATE"].forEach(function(y){a.attributes.hasOwnProperty(y)&&(a.attributes[y]=new Date(a.attributes[y]))}),["DURATION","PLANNED-DURATION"].forEach(function(y){a.attributes.hasOwnProperty(y)&&(a.attributes[y]=parseFloat(a.attributes[y]))}),["END-ON-NEXT"].forEach(function(y){a.attributes.hasOwnProperty(y)&&(a.attributes[y]=/YES/i.test(a.attributes[y]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(y){a.attributes.hasOwnProperty(y)&&(a.attributes[y]=a.attributes[y].toString(16))});const f=/^X-([A-Z]+-)+[A-Z]+$/;for(const y in a.attributes){if(!f.test(y))continue;const T=/[0-9A-Fa-f]{6}/g.test(a.attributes[y]),E=/^\d+(\.\d+)?$/.test(a.attributes[y]);a.attributes[y]=T?a.attributes[y].toString(16):E?parseFloat(a.attributes[y]):String(a.attributes[y])}this.trigger("data",a)}else{if(s=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(h),!s)return s=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(h),s?(a={type:"tag",tagType:"content-steering"},a.attributes=at(s[1]),void this.trigger("data",a)):void this.trigger("data",{type:"tag",data:h.slice(4)});this.trigger("data",{type:"tag",tagType:"independent-segments"})}}}}else this.trigger("data",{type:"comment",text:h.slice(1)})}):this.trigger("data",{type:"uri",uri:r}))}addParser({expression:r,customType:s,dataParser:a,segment:c}){"function"!=typeof a&&(a=h=>h),this.customParsers.push(h=>{if(r.exec(h))return this.trigger("data",{type:"custom",data:a(h),customType:s,segment:c}),!0})}addTagMapper({expression:r,map:s}){this.tagMappers.push(c=>r.test(c)?s(c):c)}}const B=function(u){const r={};return Object.keys(u).forEach(function(s){r[(u=>u.toLowerCase().replace(/-(\w)/g,r=>r[1].toUpperCase()))(s)]=u[s]}),r},Z=function(u){const{serverControl:r,targetDuration:s,partTargetDuration:a}=u;if(!r)return;const c="#EXT-X-SERVER-CONTROL",h="holdBack",f="partHoldBack",y=s&&3*s,T=a&&2*a;s&&!r.hasOwnProperty(h)&&(r[h]=y,this.trigger("info",{message:`${c} defaulting HOLD-BACK to targetDuration * 3 (${y}).`})),y&&r[h]<y&&(this.trigger("warn",{message:`${c} clamping HOLD-BACK (${r[h]}) to targetDuration * 3 (${y})`}),r[h]=y),a&&!r.hasOwnProperty(f)&&(r[f]=3*a,this.trigger("info",{message:`${c} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${r[f]}).`})),a&&r[f]<T&&(this.trigger("warn",{message:`${c} clamping PART-HOLD-BACK (${r[f]}) to partTargetDuration * 2 (${T}).`}),r[f]=T)};class be extends Nt{constructor(){super(),this.lineStream=new rt,this.parseStream=new gt,this.lineStream.pipe(this.parseStream),this.lastProgramDateTime=null;const r=this,s=[];let c,h,a={},f=!1;const y=function(){},T={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let x=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],segments:[]};let P=0,V=0;const q={};this.on("end",()=>{a.uri||!a.parts&&!a.preloadHints||(!a.map&&c&&(a.map=c),!a.key&&h&&(a.key=h),!a.timeline&&"number"==typeof x&&(a.timeline=x),this.manifest.preloadSegment=a)}),this.parseStream.on("data",function(L){let X,te;({tag(){({version(){L.version&&(this.manifest.version=L.version)},"allow-cache"(){this.manifest.allowCache=L.allowed,"allowed"in L||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const ne={};"length"in L&&(a.byterange=ne,ne.length=L.length,"offset"in L||(L.offset=P)),"offset"in L&&(a.byterange=ne,ne.offset=L.offset),P=ne.offset+ne.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),L.title&&(a.title=L.title),L.duration>0&&(a.duration=L.duration),0===L.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key(){if(L.attributes)if("NONE"!==L.attributes.METHOD){if(L.attributes.URI)return"com.apple.streamingkeydelivery"===L.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:L.attributes})):"com.microsoft.playready"===L.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:L.attributes.URI})):"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===L.attributes.KEYFORMAT?-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(L.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===L.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==L.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):L.attributes.KEYID&&"0x"===L.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:L.attributes.KEYFORMAT,keyId:L.attributes.KEYID.substring(2)},pssh:lt(L.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"})):(L.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),h={method:L.attributes.METHOD||"AES-128",uri:L.attributes.URI},void(typeof L.attributes.IV<"u"&&(h.iv=L.attributes.IV)));this.trigger("warn",{message:"ignoring key declaration without URI"})}else h=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(L.number)?this.manifest.mediaSequence=L.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+L.number})},"discontinuity-sequence"(){isFinite(L.number)?(this.manifest.discontinuitySequence=L.number,x=L.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+L.number})},"playlist-type"(){/VOD|EVENT/.test(L.playlistType)?this.manifest.playlistType=L.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+L.playlist})},map(){c={},L.uri&&(c.uri=L.uri),L.byterange&&(c.byterange=L.byterange),h&&(c.key=h)},"stream-inf"(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||T,L.attributes?(a.attributes||(a.attributes={}),Je(a.attributes,L.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||T,!(L.attributes&&L.attributes.TYPE&&L.attributes["GROUP-ID"]&&L.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const ne=this.manifest.mediaGroups[L.attributes.TYPE];ne[L.attributes["GROUP-ID"]]=ne[L.attributes["GROUP-ID"]]||{},X=ne[L.attributes["GROUP-ID"]],te={default:/yes/i.test(L.attributes.DEFAULT)},te.autoselect=!!te.default||/yes/i.test(L.attributes.AUTOSELECT),L.attributes.LANGUAGE&&(te.language=L.attributes.LANGUAGE),L.attributes.URI&&(te.uri=L.attributes.URI),L.attributes["INSTREAM-ID"]&&(te.instreamId=L.attributes["INSTREAM-ID"]),L.attributes.CHARACTERISTICS&&(te.characteristics=L.attributes.CHARACTERISTICS),L.attributes.FORCED&&(te.forced=/yes/i.test(L.attributes.FORCED)),X[L.attributes.NAME]=te},discontinuity(){x+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=L.dateTimeString,this.manifest.dateTimeObject=L.dateTimeObject),a.dateTimeString=L.dateTimeString,a.dateTimeObject=L.dateTimeObject;const{lastProgramDateTime:ne}=this;this.lastProgramDateTime=new Date(L.dateTimeString).getTime(),null===ne&&this.manifest.segments.reduceRight((Q,ge)=>(ge.programDateTime=Q-1e3*ge.duration,ge.programDateTime),this.lastProgramDateTime)},targetduration(){!isFinite(L.duration)||L.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+L.duration}):(this.manifest.targetDuration=L.duration,Z.call(this,this.manifest))},start(){L.attributes&&!isNaN(L.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:L.attributes["TIME-OFFSET"],precise:L.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){a.cueOut=L.data},"cue-out-cont"(){a.cueOutCont=L.data},"cue-in"(){a.cueIn=L.data},skip(){this.manifest.skip=B(L.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",L.attributes,["SKIPPED-SEGMENTS"])},part(){f=!0;const ne=this.manifest.segments.length,Q=B(L.attributes);a.parts=a.parts||[],a.parts.push(Q),Q.byterange&&(Q.byterange.hasOwnProperty("offset")||(Q.byterange.offset=V),V=Q.byterange.offset+Q.byterange.length),this.warnOnMissingAttributes_(`#EXT-X-PART #${a.parts.length-1} for segment #${ne}`,L.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((_e,W)=>{_e.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${W} lacks required attribute(s): LAST-PART`})})},"server-control"(){const ne=this.manifest.serverControl=B(L.attributes);ne.hasOwnProperty("canBlockReload")||(ne.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Z.call(this,this.manifest),ne.canSkipDateranges&&!ne.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const ne=this.manifest.segments.length,Q=B(L.attributes),ge=Q.type&&"PART"===Q.type;a.preloadHints=a.preloadHints||[],a.preloadHints.push(Q),Q.byterange&&(Q.byterange.hasOwnProperty("offset")||(Q.byterange.offset=ge?V:0,ge&&(V=Q.byterange.offset+Q.byterange.length)));const _e=a.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${_e} for segment #${ne}`,L.attributes,["TYPE","URI"]),Q.type)for(let W=0;W<a.preloadHints.length-1;W++){const Ee=a.preloadHints[W];Ee.type&&Ee.type===Q.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${_e} for segment #${ne} has the same TYPE ${Q.type} as preload hint #${W}`})}},"rendition-report"(){const ne=B(L.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(ne);const Q=this.manifest.renditionReports.length-1,ge=["LAST-MSN","URI"];f&&ge.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${Q}`,L.attributes,ge)},"part-inf"(){this.manifest.partInf=B(L.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",L.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Z.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(B(L.attributes));const ne=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${ne}`,L.attributes,["ID","START-DATE"]);const Q=this.manifest.dateRanges[ne];Q.endDate&&Q.startDate&&new Date(Q.endDate)<new Date(Q.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),Q.duration&&Q.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),Q.plannedDuration&&Q.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const ge=!!Q.endOnNext;if(ge&&!Q.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),ge&&(Q.duration||Q.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),Q.duration&&Q.endDate){const W=Q.startDate.getTime()+1e3*Q.duration;this.manifest.dateRanges[ne].endDate=new Date(W)}if(q[Q.id]){for(const W in q[Q.id])if(Q[W]&&JSON.stringify(q[Q.id][W])!==JSON.stringify(Q[W])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const _e=this.manifest.dateRanges.findIndex(W=>W.id===Q.id);this.manifest.dateRanges[_e]=Je(this.manifest.dateRanges[_e],Q),q[Q.id]=Je(q[Q.id],Q),this.manifest.dateRanges.pop()}else q[Q.id]=Q},"independent-segments"(){this.manifest.independentSegments=!0},"content-steering"(){this.manifest.contentSteering=B(L.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",L.attributes,["SERVER-URI"])}}[L.tagType]||y).call(r)},uri(){a.uri=L.uri,s.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),h&&(a.key=h),a.timeline=x,c&&(a.map=c),V=0,null!==this.lastProgramDateTime&&(a.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*a.duration),a={}},comment(){},custom(){L.segment?(a.custom=a.custom||{},a.custom[L.customType]=L.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[L.customType]=L.data)}})[L.type].call(r)})}warnOnMissingAttributes_(r,s,a){const c=[];a.forEach(function(h){s.hasOwnProperty(h)||c.push(h)}),c.length&&this.trigger("warn",{message:`${r} lacks required attribute(s): ${c.join(", ")}`})}push(r){this.lineStream.push(r)}end(){this.lineStream.push("\n"),this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(r){this.parseStream.addParser(r)}addTagMapper(r){this.parseStream.addTagMapper(r)}}var u,xe={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Ne=["video","audio","text"],ke=["Video","Audio","Text"],Se=function(r){return r&&r.replace(/avc1\.(\d+)\.(\d+)/i,function(s,a,c){return"avc1."+("00"+Number(a).toString(16)).slice(-2)+"00"+("00"+Number(c).toString(16)).slice(-2)})},pe=function(r){void 0===r&&(r="");var s=r.split(","),a=[];return s.forEach(function(c){var h;c=c.trim(),Ne.forEach(function(f){var y=xe[f].exec(c.toLowerCase());if(y&&!(y.length<=1)){h=f;var T=c.substring(0,y[1].length),E=c.replace(T,"");a.push({type:T,details:E,mediaType:f})}}),h||a.push({type:c,details:"",mediaType:"unknown"})}),a},Pt=function(r){return void 0===r&&(r=""),xe.audio.test(r.trim().toLowerCase())},Le=function(r){if(r&&"string"==typeof r){var s=r.toLowerCase().split(",").map(function(h){return Se(h.trim())}),a="video";1===s.length&&Pt(s[0])?a="audio":1===s.length&&function(r){return void 0===r&&(r=""),xe.text.test(r.trim().toLowerCase())}(s[0])&&(a="application");var c="mp4";return s.every(function(h){return xe.mp4.test(h)})?c="mp4":s.every(function(h){return xe.webm.test(h)})?c="webm":s.every(function(h){return xe.ogg.test(h)})&&(c="ogg"),a+"/"+c+';codecs="'+r+'"'}},Ue=function(r){return void 0===r&&(r=""),M().MediaSource&&M().MediaSource.isTypeSupported&&M().MediaSource.isTypeSupported(Le(r))||!1},In=function(r){return void 0===r&&(r=""),r.toLowerCase().split(",").every(function(s){s=s.trim();for(var a=0;a<ke.length;a++)if(xe["muxer"+ke[a]].test(s))return!0;return!1})},ft="mp4a.40.2",sr=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,gr=/^application\/dash\+xml/i,Br=function(r){return sr.test(r)?"hls":gr.test(r)?"dash":"application/vnd.videojs.vhs+json"===r?"vhs-json":null},Wt=function(r){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer},Ke=function(r){return r instanceof Uint8Array?r:(!Array.isArray(r)&&!function(r){return Wt(r)}(r)&&!(r instanceof ArrayBuffer)&&(r="number"!=typeof r||"number"==typeof r&&r!=r?0:[r]),new Uint8Array(r&&r.buffer||r,r&&r.byteOffset||0,r&&r.byteLength||0))},wt=M().BigInt||Number,Zn=[wt("0x1"),wt("0x100"),wt("0x10000"),wt("0x1000000"),wt("0x100000000"),wt("0x10000000000"),wt("0x1000000000000"),wt("0x100000000000000"),wt("0x10000000000000000")],Ic=(u=new Uint16Array([65484]),new Uint8Array(u.buffer,u.byteOffset,u.byteLength),function(r,s){var a=void 0===s?{}:s,c=a.signed,h=void 0!==c&&c,f=a.le,y=void 0!==f&&f;r=Ke(r);var T=y?"reduce":"reduceRight",x=(r[T]?r[T]:Array.prototype[T]).call(r,function(V,q,L){var X=y?L:Math.abs(L+1-r.length);return V+wt(q)*Zn[X]},wt(0));if(h){var P=Zn[r.length]/wt(2)-wt(1);(x=wt(x))>P&&(x-=P,x-=P,x-=wt(2))}return Number(x)}),Vu=function(r,s){if("string"!=typeof r&&r&&"function"==typeof r.toString&&(r=r.toString()),"string"!=typeof r)return new Uint8Array;s||(r=unescape(encodeURIComponent(r)));for(var a=new Uint8Array(r.length),c=0;c<r.length;c++)a[c]=r.charCodeAt(c);return a},Zt=function(r,s,a){var c=void 0===a?{}:a,h=c.offset,f=void 0===h?0:h,y=c.mask,T=void 0===y?[]:y;return r=Ke(r),(s=Ke(s)).length&&r.length-f>=s.length&&(s.every?s.every:Array.prototype.every).call(s,function(x,P){return x===(T[P]?T[P]&r[f+P]:r[f+P])})};var qu=Fe(862);const Bo=u=>!!u&&"object"==typeof u,Gn=(...u)=>u.reduce((r,s)=>("object"!=typeof s||Object.keys(s).forEach(a=>{r[a]=Array.isArray(r[a])&&Array.isArray(s[a])?r[a].concat(s[a]):Bo(r[a])&&Bo(s[a])?Gn(r[a],s[a]):s[a]}),r),{}),zu=u=>Object.keys(u).map(r=>u[r]),Ei=u=>u.reduce((r,s)=>r.concat(s),[]),Uo=u=>{if(!u.length)return[];const r=[];for(let s=0;s<u.length;s++)r.push(u[s]);return r};const Es=({baseUrl:u="",source:r="",range:s="",indexRange:a=""})=>{const c={uri:r,resolvedUri:dt(u||"",r)};if(s||a){const f=(s||a).split("-");let E,y=M().BigInt?M().BigInt(f[0]):parseInt(f[0],10),T=M().BigInt?M().BigInt(f[1]):parseInt(f[1],10);y<Number.MAX_SAFE_INTEGER&&"bigint"==typeof y&&(y=Number(y)),T<Number.MAX_SAFE_INTEGER&&"bigint"==typeof T&&(T=Number(T)),E="bigint"==typeof T||"bigint"==typeof y?M().BigInt(T)-M().BigInt(y)+M().BigInt(1):T-y+1,"bigint"==typeof E&&E<Number.MAX_SAFE_INTEGER&&(E=Number(E)),c.byterange={length:E,offset:y}}return c},Oa=u=>(u&&"number"!=typeof u&&(u=parseInt(u,10)),isNaN(u)?null:u),Ra={static(u){const{duration:r,timescale:s=1,sourceDuration:a,periodDuration:c}=u,h=Oa(u.endNumber),f=r/s;return"number"==typeof h?{start:0,end:h}:"number"==typeof c?{start:0,end:c/f}:{start:0,end:a/f}},dynamic(u){const{NOW:r,clientOffset:s,availabilityStartTime:a,timescale:c=1,duration:h,periodStart:f=0,minimumUpdatePeriod:y=0,timeShiftBufferDepth:T=1/0}=u,E=Oa(u.endNumber),x=(r+s)/1e3,P=a+f,L=Math.ceil((x+y-P)*c/h),X=Math.floor((x-P-T)*c/h),te=Math.floor((x-P)*c/h);return{start:Math.max(0,X),end:"number"==typeof E?E:Math.min(L,te)}}},Mr=u=>{const{type:r,duration:s,timescale:a=1,periodDuration:c,sourceDuration:h}=u,{start:f,end:y}=Ra[r](u),T=((u,r)=>{const s=[];for(let a=u;a<r;a++)s.push(a);return s})(f,y).map((u=>r=>{const{duration:s,timescale:a=1,periodStart:c,startNumber:h=1}=u;return{number:h+r,duration:s/a,timeline:c,time:r*s}})(u));if("static"===r){const E=T.length-1;T[E].duration=("number"==typeof c?c:h)-s/a*E}return T},A=u=>{const{baseUrl:r,initialization:s={},sourceDuration:a,indexRange:c="",periodStart:h,presentationTime:f,number:y=0,duration:T}=u;if(!r)throw new Error("NO_BASE_URL");const E=Es({baseUrl:r,source:s.sourceURL,range:s.range}),x=Es({baseUrl:r,source:r,indexRange:c});if(x.map=E,T){const P=Mr(u);P.length&&(x.duration=P[0].duration,x.timeline=P[0].timeline)}else a&&(x.duration=a,x.timeline=h);return x.presentationTime=f||h,x.number=y,[x]},k=(u,r,s)=>{const a=u.sidx.map?u.sidx.map:null,c=u.sidx.duration,h=u.timeline||0,f=u.sidx.byterange,y=f.offset+f.length,T=r.timescale,E=r.references.filter(te=>1!==te.referenceType),x=[],P=u.endList?"static":"dynamic",V=u.sidx.timeline;let X,q=V,L=u.mediaSequence||0;X="bigint"==typeof r.firstOffset?M().BigInt(y)+r.firstOffset:y+r.firstOffset;for(let te=0;te<E.length;te++){const ne=r.references[te],Q=ne.referencedSize,ge=ne.subsegmentDuration;let _e;_e="bigint"==typeof X?X+M().BigInt(Q)-M().BigInt(1):X+Q-1;const st=A({baseUrl:s,timescale:T,timeline:h,periodStart:V,presentationTime:q,number:L,duration:ge,sourceDuration:c,indexRange:`${X}-${_e}`,type:P})[0];a&&(st.map=a),x.push(st),X+="bigint"==typeof X?M().BigInt(Q):Q,q+=ge/T,L++}return u.segments=x,u},H=["AUDIO","SUBTITLES"],Pe=u=>((u,r)=>zu(u.reduce((s,a)=>(a.forEach(c=>{s[(({timeline:r})=>r)(c)]=c}),s),{})))(u).sort((r,s)=>r.timeline>s.timeline?1:-1),ln=u=>{let r=[];return function(r,s,a){s.forEach(function(c){for(var h in r.mediaGroups[c])for(var f in r.mediaGroups[c][h])a(r.mediaGroups[c][h][f])})}(u,H,(s,a,c,h)=>{r=r.concat(s.playlists||[])}),r},Tn=({playlist:u,mediaSequence:r})=>{u.mediaSequence=r,u.segments.forEach((s,a)=>{s.number=u.mediaSequence+a})},or=u=>u&&u.uri+"-"+(u=>{let r;return r="bigint"==typeof u.offset||"bigint"==typeof u.length?M().BigInt(u.offset)+M().BigInt(u.length)-M().BigInt(1):u.offset+u.length-1,`${u.offset}-${r}`})(u.byterange),Jn=u=>{const r=u.reduce(function(a,c){return a[c.attributes.baseUrl]||(a[c.attributes.baseUrl]=[]),a[c.attributes.baseUrl].push(c),a},{});let s=[];return Object.values(r).forEach(a=>{const c=zu(a.reduce((h,f)=>{const y=f.attributes.id+(f.attributes.lang||"");return h[y]?(f.segments&&(f.segments[0]&&(f.segments[0].discontinuity=!0),h[y].segments.push(...f.segments)),f.attributes.contentProtection&&(h[y].attributes.contentProtection=f.attributes.contentProtection)):(h[y]=f,h[y].attributes.timelineStarts=[]),h[y].attributes.timelineStarts.push({start:f.attributes.periodStart,timeline:f.attributes.periodStart}),h},{}));s=s.concat(c)}),s.map(a=>(a.discontinuityStarts=((u,r)=>u.reduce((s,a,c)=>(a.discontinuity&&s.push(c),s),[]))(a.segments||[]),a))},ss=(u,r)=>{const s=or(u.sidx),a=s&&r[s]&&r[s].sidx;return a&&k(u,a,u.sidx.resolvedUri),u},ws=(u,r={})=>{if(!Object.keys(r).length)return u;for(const s in u)u[s]=ss(u[s],r);return u},xs=({attributes:u,segments:r,sidx:s,discontinuityStarts:a})=>{const c={attributes:{NAME:u.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:u.width,height:u.height},CODECS:u.codecs,BANDWIDTH:u.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===u.type,timeline:u.periodStart,resolvedUri:u.baseUrl||"",targetDuration:u.duration,discontinuityStarts:a,timelineStarts:u.timelineStarts,segments:r};return u.frameRate&&(c.attributes["FRAME-RATE"]=u.frameRate),u.contentProtection&&(c.contentProtection=u.contentProtection),u.serviceLocation&&(c.attributes.serviceLocation=u.serviceLocation),s&&(c.sidx=s),c},Ku=({attributes:u})=>"video/mp4"===u.mimeType||"video/webm"===u.mimeType||"video"===u.contentType,m_=({attributes:u})=>"audio/mp4"===u.mimeType||"audio/webm"===u.mimeType||"audio"===u.contentType,y_=({attributes:u})=>"text/vtt"===u.mimeType||"text"===u.contentType,qg=u=>u?Object.keys(u).reduce((r,s)=>r.concat(u[s].playlists),[]):[],zg=({dashPlaylists:u,locations:r,contentSteering:s,sidxMapping:a={},previousManifest:c,eventStream:h})=>{if(!u.length)return{};const{sourceDuration:f,type:y,suggestedPresentationDelay:T,minimumUpdatePeriod:E}=u[0].attributes,x=Jn(u.filter(Ku)).map(xs),P=Jn(u.filter(m_)),V=Jn(u.filter(y_)),q=u.map(_e=>_e.attributes.captionServices).filter(Boolean),L={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:f,playlists:ws(x,a)};E>=0&&(L.minimumUpdatePeriod=1e3*E),r&&(L.locations=r),s&&(L.contentSteering=s),"dynamic"===y&&(L.suggestedPresentationDelay=T),h&&h.length>0&&(L.eventStream=h);const te=P.length?((u,r={},s=!1)=>{let a;const c=u.reduce((h,f)=>{const y=f.attributes.role&&f.attributes.role.value||"",T=f.attributes.lang||"";let E=f.attributes.label||"main";T&&!f.attributes.label&&(E=`${f.attributes.lang}${y?` (${y})`:""}`),h[E]||(h[E]={language:T,autoselect:!0,default:"main"===y,playlists:[],uri:""});const x=ss((({attributes:u,segments:r,sidx:s,mediaSequence:a,discontinuitySequence:c,discontinuityStarts:h},f)=>{const y={attributes:{NAME:u.id,BANDWIDTH:u.bandwidth,CODECS:u.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===u.type,timeline:u.periodStart,resolvedUri:u.baseUrl||"",targetDuration:u.duration,discontinuitySequence:c,discontinuityStarts:h,timelineStarts:u.timelineStarts,mediaSequence:a,segments:r};return u.contentProtection&&(y.contentProtection=u.contentProtection),u.serviceLocation&&(y.attributes.serviceLocation=u.serviceLocation),s&&(y.sidx=s),f&&(y.attributes.AUDIO="audio",y.attributes.SUBTITLES="subs"),y})(f,s),r);return h[E].playlists.push(x),typeof a>"u"&&"main"===y&&(a=f,a.default=!0),h},{});return a||(c[Object.keys(c)[0]].default=!0),c})(P,a,0===L.playlists.length):null,ne=V.length?((u,r={})=>u.reduce((s,a)=>{const c=a.attributes.label||a.attributes.lang||"text";return s[c]||(s[c]={language:c,default:!1,autoselect:!1,playlists:[],uri:""}),s[c].playlists.push(ss((({attributes:u,segments:r,mediaSequence:s,discontinuityStarts:a,discontinuitySequence:c})=>{typeof r>"u"&&(r=[{uri:u.baseUrl,timeline:u.periodStart,resolvedUri:u.baseUrl||"",duration:u.sourceDuration,number:0}],u.duration=u.sourceDuration);const h={NAME:u.id,BANDWIDTH:u.bandwidth,"PROGRAM-ID":1};u.codecs&&(h.CODECS=u.codecs);const f={attributes:h,uri:"",endList:"static"===u.type,timeline:u.periodStart,resolvedUri:u.baseUrl||"",targetDuration:u.duration,timelineStarts:u.timelineStarts,discontinuityStarts:a,discontinuitySequence:c,mediaSequence:s,segments:r};return u.serviceLocation&&(f.attributes.serviceLocation=u.serviceLocation),f})(a),r)),s},{}))(V,a):null,Q=x.concat(qg(te),qg(ne)),ge=Q.map(({timelineStarts:_e})=>_e);return L.timelineStarts=Pe(ge),((u,r)=>{u.forEach(s=>{s.mediaSequence=0,s.discontinuitySequence=r.findIndex(function({timeline:a}){return a===s.timeline}),s.segments&&s.segments.forEach((a,c)=>{a.number=c})})})(Q,L.timelineStarts),te&&(L.mediaGroups.AUDIO.audio=te),ne&&(L.mediaGroups.SUBTITLES.subs=ne),q.length&&(L.mediaGroups["CLOSED-CAPTIONS"].cc=(u=>u.reduce((r,s)=>(s&&s.forEach(a=>{const{channel:c,language:h}=a;r[h]={autoselect:!1,default:!1,instreamId:c,language:h},a.hasOwnProperty("aspectRatio")&&(r[h].aspectRatio=a.aspectRatio),a.hasOwnProperty("easyReader")&&(r[h].easyReader=a.easyReader),a.hasOwnProperty("3D")&&(r[h]["3D"]=a["3D"])}),r),{}))(q)),c?(({oldManifest:u,newManifest:r})=>{const s=u.playlists.concat(ln(u)),a=r.playlists.concat(ln(r));return r.timelineStarts=Pe([u.timelineStarts,r.timelineStarts]),(({oldPlaylists:u,newPlaylists:r,timelineStarts:s})=>{r.forEach(a=>{a.discontinuitySequence=s.findIndex(function({timeline:T}){return T===a.timeline});const c=((u,r)=>{for(let s=0;s<u.length;s++)if(u[s].attributes.NAME===r)return u[s];return null})(u,a.attributes.NAME);if(!c||a.sidx)return;const h=a.segments[0],f=c.segments.findIndex(function(T){return Math.abs(T.presentationTime-h.presentationTime)<.016666666666666666});if(-1===f)return Tn({playlist:a,mediaSequence:c.mediaSequence+c.segments.length}),a.segments[0].discontinuity=!0,a.discontinuityStarts.unshift(0),void((!c.segments.length&&a.timeline>c.timeline||c.segments.length&&a.timeline>c.segments[c.segments.length-1].timeline)&&a.discontinuitySequence--);c.segments[f].discontinuity&&!h.discontinuity&&(h.discontinuity=!0,a.discontinuityStarts.unshift(0),a.discontinuitySequence--),Tn({playlist:a,mediaSequence:c.segments[f].number})})})({oldPlaylists:s,newPlaylists:a,timelineStarts:r.timelineStarts}),r})({oldManifest:c,newManifest:L}):L},__=(u,r,s)=>{const{NOW:a,clientOffset:c,availabilityStartTime:h,timescale:f=1,periodStart:y=0,minimumUpdatePeriod:T=0}=u;return Math.ceil((((a+c)/1e3+T-(h+y))*f-r)/s)},Gg=(u,r)=>{const{type:s,minimumUpdatePeriod:a=0,media:c="",sourceDuration:h,timescale:f=1,startNumber:y=1,periodStart:T}=u,E=[];let x=-1;for(let P=0;P<r.length;P++){const V=r[P],q=V.d,L=V.r||0,X=V.t||0;let te;if(x<0&&(x=X),X&&X>x&&(x=X),L<0){const ge=P+1;te=ge===r.length?"dynamic"===s&&a>0&&c.indexOf("$Number$")>0?__(u,x,q):(h*f-x)/q:(r[ge].t-x)/q}else te=L+1;const ne=y+E.length+te;let Q=y+E.length;for(;Q<ne;)E.push({number:Q,duration:q/f,time:x,timeline:T}),x+=q,Q++}return E},vr=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,oi=(u,r)=>u.replace(vr,(u=>(r,s,a,c)=>{if("$$"===r)return"$";if(typeof u[s]>"u")return r;const h=""+u[s];return"RepresentationID"===s||(c=a?parseInt(c,10):1,h.length>=c)?h:`${new Array(c-h.length+1).join("0")}${h}`})(r)),Zh=(u,r)=>{const s={RepresentationID:u.id,Bandwidth:u.bandwidth||0},{initialization:a={sourceURL:"",range:""}}=u,c=Es({baseUrl:u.baseUrl,source:oi(a.sourceURL,s),range:a.range});return((u,r)=>u.duration||r?u.duration?Mr(u):Gg(u,r):[{number:u.startNumber||1,duration:u.sourceDuration,time:0,timeline:u.periodStart}])(u,r).map(f=>{s.Number=f.number,s.Time=f.time;const y=oi(u.media||"",s),x=u.periodStart+(f.time-(u.presentationTimeOffset||0))/(u.timescale||1);return{uri:y,timeline:f.timeline,duration:f.duration,resolvedUri:dt(u.baseUrl||"",y),map:c,number:f.number,presentationTime:x}})},ai=(u,r)=>{const{duration:s,segmentUrls:a=[],periodStart:c}=u;if(!s&&!r||s&&r)throw new Error("SEGMENT_TIME_UNSPECIFIED");const h=a.map(T=>((u,r)=>{const{baseUrl:s,initialization:a={}}=u,c=Es({baseUrl:s,source:a.sourceURL,range:a.range}),h=Es({baseUrl:s,source:r.media,range:r.mediaRange});return h.map=c,h})(u,T));let f;return s&&(f=Mr(u)),r&&(f=Gg(u,r)),f.map((T,E)=>{if(h[E]){const x=h[E],P=u.timescale||1,V=u.presentationTimeOffset||0;return x.timeline=T.timeline,x.duration=T.duration,x.number=T.number,x.presentationTime=c+(T.time-V)/P,x}}).filter(T=>T)},T_=({attributes:u,segmentInfo:r})=>{let s,a;r.template?(a=Zh,s=Gn(u,r.template)):r.base?(a=A,s=Gn(u,r.base)):r.list&&(a=ai,s=Gn(u,r.list));const c={attributes:u};if(!a)return c;const h=a(s,r.segmentTimeline);if(s.duration){const{duration:f,timescale:y=1}=s;s.duration=f/y}else s.duration=h.length?h.reduce((f,y)=>Math.max(f,Math.ceil(y.duration)),0):0;return c.attributes=s,c.segments=h,r.base&&s.indexRange&&(c.sidx=h[0],c.segments=[]),c},mt=(u,r)=>Uo(u.childNodes).filter(({tagName:s})=>s===r),Js=u=>u.textContent.trim(),eo=u=>{const y=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(u);if(!y)return 0;const[T,E,x,P,V,q]=y.slice(1);return 31536e3*parseFloat(T||0)+2592e3*parseFloat(E||0)+86400*parseFloat(x||0)+3600*parseFloat(P||0)+60*parseFloat(V||0)+parseFloat(q||0)},Rc={mediaPresentationDuration:u=>eo(u),availabilityStartTime:u=>(u=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(u)&&(u+="Z"),Date.parse(u)))(u)/1e3,minimumUpdatePeriod:u=>eo(u),suggestedPresentationDelay:u=>eo(u),type:u=>u,timeShiftBufferDepth:u=>eo(u),start:u=>eo(u),width:u=>parseInt(u,10),height:u=>parseInt(u,10),bandwidth:u=>parseInt(u,10),frameRate:u=>(u=>parseFloat(u.split("/").reduce((r,s)=>r/s)))(u),startNumber:u=>parseInt(u,10),timescale:u=>parseInt(u,10),presentationTimeOffset:u=>parseInt(u,10),duration(u){const r=parseInt(u,10);return isNaN(r)?eo(u):r},d:u=>parseInt(u,10),t:u=>parseInt(u,10),r:u=>parseInt(u,10),presentationTime:u=>parseInt(u,10),DEFAULT:u=>u},nt=u=>u&&u.attributes?Uo(u.attributes).reduce((r,s)=>(r[s.name]=(Rc[s.name]||Rc.DEFAULT)(s.value),r),{}):{},ef={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},Na=(u,r)=>r.length?Ei(u.map(function(s){return r.map(function(a){const c=Js(a),h=dt(s.baseUrl,c),f=Gn(nt(a),{baseUrl:h});return h!==c&&!f.serviceLocation&&s.serviceLocation&&(f.serviceLocation=s.serviceLocation),f})})):u,Wg=u=>{const r=mt(u,"SegmentTemplate")[0],s=mt(u,"SegmentList")[0],a=s&&mt(s,"SegmentURL").map(P=>Gn({tag:"SegmentURL"},nt(P))),c=mt(u,"SegmentBase")[0],h=s||r,f=h&&mt(h,"SegmentTimeline")[0],y=s||c||r,T=y&&mt(y,"Initialization")[0],E=r&&nt(r);E&&T?E.initialization=T&&nt(T):E&&E.initialization&&(E.initialization={sourceURL:E.initialization});const x={template:E,segmentTimeline:f&&mt(f,"S").map(P=>nt(P)),list:s&&Gn(nt(s),{segmentUrls:a,initialization:nt(T)}),base:c&&Gn(nt(c),{initialization:nt(T)})};return Object.keys(x).forEach(P=>{x[P]||delete x[P]}),x},Mt=u=>Ei(mt(u.node,"EventStream").map(r=>{const s=nt(r),a=s.schemeIdUri;return mt(r,"Event").map(c=>{const h=nt(c),y=s.timescale||1,E=(h.presentationTime||0)/y+u.attributes.start;return{schemeIdUri:a,value:s.value,id:h.id,start:E,end:E+(h.duration||0)/y,messageData:Js(c)||h.messageData,contentEncoding:s.contentEncoding,presentationTimeOffset:s.presentationTimeOffset||0}})})),Jt=(u,r,s)=>a=>{const c=nt(a),h=Na(r,mt(a,"BaseURL")),f=mt(a,"Role")[0],y={role:nt(f)};let T=Gn(u,c,y);const E=mt(a,"Accessibility")[0],x=(u=>"urn:scte:dash:cc:cea-608:2015"===u.schemeIdUri?("string"!=typeof u.value?[]:u.value.split(";")).map(s=>{let a,c;return c=s,/^CC\d=/.test(s)?[a,c]=s.split("="):/^CC\d$/.test(s)&&(a=s),{channel:a,language:c}}):"urn:scte:dash:cc:cea-708:2015"===u.schemeIdUri?("string"!=typeof u.value?[]:u.value.split(";")).map(s=>{const a={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(s)){const[c,h=""]=s.split("=");a.channel=c,a.language=s,h.split(",").forEach(f=>{const[y,T]=f.split(":");"lang"===y?a.language=T:"er"===y?a.easyReader=Number(T):"war"===y?a.aspectRatio=Number(T):"3D"===y&&(a["3D"]=Number(T))})}else a.language=s;return a.channel&&(a.channel="SERVICE"+a.channel),a}):void 0)(nt(E));x&&(T=Gn(T,{captionServices:x}));const P=mt(a,"Label")[0];if(P&&P.childNodes.length){const te=P.childNodes[0].nodeValue.trim();T=Gn(T,{label:te})}const V=(u=>u.reduce((r,s)=>{const a=nt(s);a.schemeIdUri&&(a.schemeIdUri=a.schemeIdUri.toLowerCase());const c=ef[a.schemeIdUri];if(c){r[c]={attributes:a};const h=mt(s,"cenc:pssh")[0];if(h){const f=Js(h);r[c].pssh=f&&function Hu(u){for(var r=function(r){return M().atob?M().atob(r):Buffer.from(r,"base64").toString("binary")}(u),s=new Uint8Array(r.length),a=0;a<r.length;a++)s[a]=r.charCodeAt(a);return s}(f)}}return r},{}))(mt(a,"ContentProtection"));Object.keys(V).length&&(T=Gn(T,{contentProtection:V}));const q=Wg(a),L=mt(a,"Representation"),X=Gn(s,q);return Ei(L.map(((u,r,s)=>a=>{const c=mt(a,"BaseURL"),h=Na(r,c),f=Gn(u,nt(a)),y=Wg(a);return h.map(T=>({segmentInfo:Gn(s,y),attributes:Gn(f,T)}))})(T,h,X)))},E_=(u,r)=>(s,a)=>{const c=Na(r,mt(s.node,"BaseURL")),h=Gn(u,{periodStart:s.attributes.start});"number"==typeof s.attributes.duration&&(h.periodDuration=s.attributes.duration);const f=mt(s.node,"AdaptationSet"),y=Wg(s.node);return Ei(f.map(Jt(h,c,y)))},bE=(u,r)=>{if(u.length>1&&r({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!u.length)return null;const s=Gn({serverURL:Js(u[0])},nt(u[0]));return s.queryBeforeStart="true"===s.queryBeforeStart,s},Kr=u=>{if(""===u)throw new Error("DASH_EMPTY_MANIFEST");const r=new qu.DOMParser;let s,a;try{s=r.parseFromString(u,"application/xml"),a=s&&"MPD"===s.documentElement.tagName?s.documentElement:null}catch{}if(!a||a&&a.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return a};var it,EE=Fe(35),DE=Fe.n(EE),wE=Ke([73,68,51]),Yu=function u(r,s){return void 0===s&&(s=0),(r=Ke(r)).length-s<10||!Zt(r,wE,{offset:s})?s:(s+=function(r,s){void 0===s&&(s=0);var c=(r=Ke(r))[s+6]<<21|r[s+7]<<14|r[s+8]<<7|r[s+9];return(16&r[s+5])>>4?c+20:c+10}(r,s),u(r,s))},Kg=(new Uint8Array([79,112,117,115,72,101,97,100]),function(r){return"string"==typeof r?Vu(r):r}),Yg=function(r){r=Ke(r);for(var s=[],a=0;r.length>a;){var c=r[a],h=0,f=0,y=r[++f];for(f++;128&y;)h=(127&y)<<7,y=r[f],f++;h+=127&y;for(var T=0;T<it.length;T++){var E=it[T];if(c===E.id){s.push((0,E.parser)(r.subarray(f,f+h)));break}}a+=h+f}return s};it=[{id:3,parser:function(r){var s={tag:3,id:r[0]<<8|r[1],flags:r[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&s.flags&&(s.dependsOnEsId=r[s.size]<<8|r[s.size+1],s.size+=2),64&s.flags){var a=r[s.size];s.url=function(r){if(!r)return"";r=Array.prototype.slice.call(r);var s=String.fromCharCode.apply(null,Ke(r));try{return decodeURIComponent(escape(s))}catch{}return s}(r.subarray(s.size+1,s.size+1+a)),s.size+=a}return 32&s.flags&&(s.ocrEsId=r[s.size]<<8|r[s.size+1],s.size+=2),s.descriptors=Yg(r.subarray(s.size))||[],s}},{id:4,parser:function(r){return{tag:4,oti:r[0],streamType:r[1],bufferSize:r[2]<<16|r[3]<<8|r[4],maxBitrate:r[5]<<24|r[6]<<16|r[7]<<8|r[8],avgBitrate:r[9]<<24|r[10]<<16|r[11]<<8|r[12],descriptors:Yg(r.subarray(13))}}},{id:5,parser:function(r){return{tag:5,bytes:r}}},{id:6,parser:function(r){return{tag:6,bytes:r}}}];var Rn=function u(r,s,a){void 0===a&&(a=!1),s=function(r){return Array.isArray(r)?r.map(function(s){return Kg(s)}):[Kg(r)]}(s),r=Ke(r);var c=[];if(!s.length)return c;for(var h=0;h<r.length;){var f=(r[h]<<24|r[h+1]<<16|r[h+2]<<8|r[h+3])>>>0,y=r.subarray(h+4,h+8);if(0===f)break;var T=h+f;if(T>r.length){if(a)break;T=r.length}var E=r.subarray(h+8,T);Zt(y,s[0])&&(1===s.length?c.push(E):c.push.apply(c,u(E,s.slice(1),a))),h=T}return c},fn={EBML:Ke([26,69,223,163]),DocType:Ke([66,130]),Segment:Ke([24,83,128,103]),SegmentInfo:Ke([21,73,169,102]),Tracks:Ke([22,84,174,107]),Track:Ke([174]),TrackNumber:Ke([215]),DefaultDuration:Ke([35,227,131]),TrackEntry:Ke([174]),TrackType:Ke([131]),FlagDefault:Ke([136]),CodecID:Ke([134]),CodecPrivate:Ke([99,162]),VideoTrack:Ke([224]),AudioTrack:Ke([225]),Cluster:Ke([31,67,182,117]),Timestamp:Ke([231]),TimestampScale:Ke([42,215,177]),BlockGroup:Ke([160]),BlockDuration:Ke([155]),Block:Ke([161]),SimpleBlock:Ke([163])},Lc=[128,64,32,16,8,4,2,1],Ot=function(r,s,a,c){void 0===a&&(a=!0),void 0===c&&(c=!1);var h=function(r){for(var s=1,a=0;a<Lc.length&&!(r&Lc[a]);a++)s++;return s}(r[s]),f=r.subarray(s,s+h);return a&&((f=Array.prototype.slice.call(r,s,s+h))[0]^=Lc[h-1]),{length:h,value:Ic(f,{signed:c}),bytes:f}},Fc=function u(r){return"string"==typeof r?r.match(/.{1,2}/g).map(function(s){return u(s)}):"number"==typeof r?function(r,s){var c=(void 0===s?{}:s).le,h=void 0!==c&&c;("bigint"!=typeof r&&"number"!=typeof r||"number"==typeof r&&r!=r)&&(r=0);for(var f=function(r){return Math.ceil(function(r){return r.toString(2).length}(r)/8)}(r=wt(r)),y=new Uint8Array(new ArrayBuffer(f)),T=0;T<f;T++){var E=h?T:Math.abs(T+1-y.length);y[E]=Number(r/Zn[T]&wt(255)),r<0&&(y[E]=Math.abs(~y[E]),y[E]-=0===T?1:2)}return y}(r):r},Yr=function u(r,s,a){if(a>=s.length)return s.length;var c=Ot(s,a,!1);if(Zt(r.bytes,c.bytes))return a;var h=Ot(s,a+c.length);return u(r,s,a+h.length+h.value+c.length)},An=function u(r,s){s=function(r){return Array.isArray(r)?r.map(function(s){return Fc(s)}):[Fc(r)]}(s),r=Ke(r);var a=[];if(!s.length)return a;for(var c=0;c<r.length;){var h=Ot(r,c,!1),f=Ot(r,c+h.length),y=c+h.length+f.length;127===f.value&&(f.value=Yr(h,r,y),f.value!==r.length&&(f.value-=y));var E=r.subarray(y,y+f.value>r.length?r.length:y+f.value);Zt(s[0],h.bytes)&&(1===s.length?a.push(E):a=a.concat(u(E,s.slice(1)))),c+=h.length+f.length+E.length}return a},et=Ke([0,0,0,1]),sf=Ke([0,0,1]),af=Ke([0,0,3]),Jg=function(r){for(var s=[],a=1;a<r.length-2;)Zt(r.subarray(a,a+3),af)&&(s.push(a+2),a++),a++;if(0===s.length)return r;var c=r.length-s.length,h=new Uint8Array(c),f=0;for(a=0;a<c;f++,a++)f===s[0]&&(f++,s.shift()),h[a]=r[f];return h},Bc=function(r,s,a,c){void 0===c&&(c=1/0),r=Ke(r),a=[].concat(a);for(var f,h=0,y=0;h<r.length&&(y<c||f);){var T=void 0;if(Zt(r.subarray(h),et)?T=4:Zt(r.subarray(h),sf)&&(T=3),T){if(y++,f)return Jg(r.subarray(f,h));var E=void 0;"h264"===s?E=31&r[h+T]:"h265"===s&&(E=r[h+T]>>1&63),-1!==a.indexOf(E)&&(f=h+T),h+=T+("h264"===s?1:2)}else h++}return r.subarray(0,0)},Qr={webm:Ke([119,101,98,109]),matroska:Ke([109,97,116,114,111,115,107,97]),flac:Ke([102,76,97,67]),ogg:Ke([79,103,103,83]),ac3:Ke([11,119]),riff:Ke([82,73,70,70]),avi:Ke([65,86,73]),wav:Ke([87,65,86,69]),"3gp":Ke([102,116,121,112,51,103]),mp4:Ke([102,116,121,112]),fmp4:Ke([115,116,121,112]),mov:Ke([102,116,121,112,113,116]),moov:Ke([109,111,111,118]),moof:Ke([109,111,111,102])},Zu={aac:function(r){var s=Yu(r);return Zt(r,[255,16],{offset:s,mask:[255,22]})},mp3:function(r){var s=Yu(r);return Zt(r,[255,2],{offset:s,mask:[255,6]})},webm:function(r){var s=An(r,[fn.EBML,fn.DocType])[0];return Zt(s,Qr.webm)},mkv:function(r){var s=An(r,[fn.EBML,fn.DocType])[0];return Zt(s,Qr.matroska)},mp4:function(r){return!Zu["3gp"](r)&&!Zu.mov(r)&&(!!(Zt(r,Qr.mp4,{offset:4})||Zt(r,Qr.fmp4,{offset:4})||Zt(r,Qr.moof,{offset:4})||Zt(r,Qr.moov,{offset:4}))||void 0)},mov:function(r){return Zt(r,Qr.mov,{offset:4})},"3gp":function(r){return Zt(r,Qr["3gp"],{offset:4})},ac3:function(r){var s=Yu(r);return Zt(r,Qr.ac3,{offset:s})},ts:function(r){if(r.length<189&&r.length>=1)return 71===r[0];for(var s=0;s+188<r.length&&s<188;){if(71===r[s]&&71===r[s+188])return!0;s+=1}return!1},flac:function(r){var s=Yu(r);return Zt(r,Qr.flac,{offset:s})},ogg:function(r){return Zt(r,Qr.ogg)},avi:function(r){return Zt(r,Qr.riff)&&Zt(r,Qr.avi,{offset:8})},wav:function(r){return Zt(r,Qr.riff)&&Zt(r,Qr.wav,{offset:8})},h264:function(r){return function(r,s,a){return Bc(r,"h264",7,3)}(r).length},h265:function(r){return function(r,s,a){return Bc(r,"h265",[32,33],3)}(r).length}},em=Object.keys(Zu).filter(function(u){return"ts"!==u&&"h264"!==u&&"h265"!==u}).concat(["ts","h264","h265"]);em.forEach(function(u){var r=Zu[u];Zu[u]=function(s){return r(Ke(s))}});var PE=Zu,tm=function(r){r=Ke(r);for(var s=0;s<em.length;s++){var a=em[s];if(PE[a](r))return a}return""},As=Fe(825),La="8.17.3";const Ms={},to=function(u,r){return Ms[u]=Ms[u]||[],r&&(Ms[u]=Ms[u].concat(r)),Ms[u]},lf=function(u,r){const s=to(u).indexOf(r);return!(s<=-1||(Ms[u]=Ms[u].slice(),Ms[u].splice(s,1),0))},Uc={prefixed:!0},$i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],nm=$i[0];let ze;for(let u=0;u<$i.length;u++)if($i[u][1]in z()){ze=$i[u];break}if(ze){for(let u=0;u<ze.length;u++)Uc[nm[u]]=ze[u];Uc.prefixed=ze[0]!==nm[0]}let jr=[];const Ht=function Ba(u,r=":",s=""){let c,a="info";function h(...f){c("log",a,f)}return c=((u,r,s)=>(a,c,h)=>{const f=r.levels[c],y=new RegExp(`^(${f})$`);let T=u;if("log"!==a&&h.unshift(a.toUpperCase()+":"),s&&(T=`%c${u}`,h.unshift(s)),h.unshift(T+":"),jr){jr.push([].concat(h));const x=jr.length-1e3;jr.splice(0,x>0?x:0)}if(!M().console)return;let E=M().console[a];!E&&"debug"===a&&(E=M().console.info||M().console.log),E&&f&&y.test(a)&&E[Array.isArray(h)?"apply":"call"](M().console,h)})(u,h,s),h.createLogger=(f,y,T)=>{const E=void 0!==y?y:r;return Ba(`${u} ${E} ${f}`,E,void 0!==T?T:s)},h.createNewLogger=(f,y,T)=>Ba(f,y,T),h.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:a},h.level=f=>{if("string"==typeof f){if(!h.levels.hasOwnProperty(f))throw new Error(`"${f}" in not a valid log level`);a=f}return a},(h.history=()=>jr?[].concat(jr):[]).filter=f=>(jr||[]).filter(y=>new RegExp(`.*${f}.*`).test(y[0])),h.history.clear=()=>{jr&&(jr.length=0)},h.history.disable=()=>{null!==jr&&(jr.length=0,jr=null)},h.history.enable=()=>{null===jr&&(jr=[])},h.error=(...f)=>c("error",a,f),h.warn=(...f)=>c("warn",a,f),h.debug=(...f)=>c("debug",a,f),h}("VIDEOJS"),Ua=Ht.createLogger,M_=Object.prototype.toString,rm=function(u){return ui(u)?Object.keys(u):[]};function ja(u,r){rm(u).forEach(s=>r(u[s],s))}function os(u,r,s=0){return rm(u).reduce((a,c)=>r(a,u[c],c),s)}function ui(u){return!!u&&"object"==typeof u}function kr(u){return ui(u)&&"[object Object]"===M_.call(u)&&u.constructor===Object}function Xt(...u){const r={};return u.forEach(s=>{s&&ja(s,(a,c)=>{kr(a)?(kr(r[c])||(r[c]={}),r[c]=Xt(r[c],a)):r[c]=a})}),r}function Qt(u={}){const r=[];for(const s in u)u.hasOwnProperty(s)&&r.push(u[s]);return r}function $o(u,r,s,a=!0){const c=f=>Object.defineProperty(u,r,{value:f,enumerable:!0,writable:!0}),h={configurable:!0,enumerable:!0,get(){const f=s();return c(f),f}};return a&&(h.set=c),Object.defineProperty(u,r,h)}var cf=Object.freeze({__proto__:null,each:ja,reduce:os,isObject:ui,isPlain:kr,merge:Xt,values:Qt,defineLazyProperty:$o});let $a,el=!1,df=null,_r=!1,hf=!1,Vo=!1,no=!1,Vi=!1,jc=null,ro=null;const im=!!(M().cast&&M().cast.framework&&M().cast.framework.CastReceiverContext);let ff=null,$c=!1,tl=!1,Vc=!1,Hc=!1,Zr=!1,qc=!1,zc=!1;const nl=!(!Va()||!("ontouchstart"in M()||M().navigator.maxTouchPoints||M().DocumentTouch&&M().document instanceof M().DocumentTouch)),io=M().navigator&&M().navigator.userAgentData;if(io&&io.platform&&io.brands&&(_r="Android"===io.platform,Vo=!!io.brands.find(u=>"Microsoft Edge"===u.brand),no=!!io.brands.find(u=>"Chromium"===u.brand),Vi=!Vo&&no,jc=ro=(io.brands.find(u=>"Chromium"===u.brand)||{}).version||null,tl="Windows"===io.platform),!no){const u=M().navigator&&M().navigator.userAgent||"";el=/iPod/i.test(u),df=function(){const r=u.match(/OS (\d+)_/i);return r&&r[1]?r[1]:null}(),_r=/Android/i.test(u),$a=function(){const r=u.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!r)return null;const s=r[1]&&parseFloat(r[1]),a=r[2]&&parseFloat(r[2]);return s&&a?parseFloat(r[1]+"."+r[2]):s||null}(),hf=/Firefox/i.test(u),Vo=/Edg/i.test(u),no=/Chrome/i.test(u)||/CriOS/i.test(u),Vi=!Vo&&no,jc=ro=function(){const r=u.match(/(Chrome|CriOS)\/(\d+)/);return r&&r[2]?parseFloat(r[2]):null}(),ff=function(){const r=/MSIE\s(\d+)\.\d/.exec(u);let s=r&&parseFloat(r[1]);return!s&&/Trident\/7.0/i.test(u)&&/rv:11.0/.test(u)&&(s=11),s}(),Zr=/Tizen/i.test(u),qc=/Web0S/i.test(u),zc=Zr||qc,$c=/Safari/i.test(u)&&!Vi&&!_r&&!Vo&&!zc,tl=/Windows/i.test(u),Vc=/iPad/i.test(u)||$c&&nl&&!/iPhone/i.test(u),Hc=/iPhone/i.test(u)&&!Vc}const $r=Hc||Vc||el,Gc=($c||$r)&&!Vi;var pf=Object.freeze({__proto__:null,get IS_IPOD(){return el},get IOS_VERSION(){return df},get IS_ANDROID(){return _r},get ANDROID_VERSION(){return $a},get IS_FIREFOX(){return hf},get IS_EDGE(){return Vo},get IS_CHROMIUM(){return no},get IS_CHROME(){return Vi},get CHROMIUM_VERSION(){return jc},get CHROME_VERSION(){return ro},IS_CHROMECAST_RECEIVER:im,get IE_VERSION(){return ff},get IS_SAFARI(){return $c},get IS_WINDOWS(){return tl},get IS_IPAD(){return Vc},get IS_IPHONE(){return Hc},get IS_TIZEN(){return Zr},get IS_WEBOS(){return qc},get IS_SMART_TV(){return zc},TOUCH_ENABLED:nl,IS_IOS:$r,IS_ANY_SAFARI:Gc});function sm(u){return"string"==typeof u&&!!u.trim()}function Va(){return z()===M().document}function wr(u){return ui(u)&&1===u.nodeType}function om(){try{return M().parent!==M().self}catch{return!0}}function am(u){return function(r,s){if(!sm(r))return z()[u](null);sm(s)&&(s=z().querySelector(s));const a=wr(s)?s:z();return a[u]&&a[u](r)}}function _t(u="div",r={},s={},a){const c=z().createElement(u);return Object.getOwnPropertyNames(r).forEach(function(h){const f=r[h];"textContent"===h?Pr(c,f):(c[h]!==f||"tabIndex"===h)&&(c[h]=f)}),Object.getOwnPropertyNames(s).forEach(function(h){c.setAttribute(h,s[h])}),a&&li(c,a),c}function Pr(u,r){return typeof u.textContent>"u"?u.innerText=r:u.textContent=r,u}function gf(u,r){r.firstChild?r.insertBefore(u,r.firstChild):r.appendChild(u)}function Ha(u,r){return function k_(u){if(u.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(r),u.classList.contains(r)}function Wn(u,...r){return u.classList.add(...r.reduce((s,a)=>s.concat(a.split(/\s+/)),[])),u}function xr(u,...r){return u?(u.classList.remove(...r.reduce((s,a)=>s.concat(a.split(/\s+/)),[])),u):(Ht.warn("removeClass was called with an element that doesn't exist"),null)}function Kt(u,r,s){return"function"==typeof s&&(s=s(u,r)),"boolean"!=typeof s&&(s=void 0),r.split(/\s+/).forEach(a=>u.classList.toggle(a,s)),u}function br(u,r){Object.getOwnPropertyNames(r).forEach(function(s){const a=r[s];null===a||typeof a>"u"||!1===a?u.removeAttribute(s):u.setAttribute(s,!0===a?"":a)})}function $n(u){const r={},s=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(u&&u.attributes&&u.attributes.length>0){const a=u.attributes;for(let c=a.length-1;c>=0;c--){const h=a[c].name;let f=a[c].value;s.includes(h)&&(f=null!==f),r[h]=f}}return r}function Ho(u,r){return u.getAttribute(r)}function Tr(u,r,s){u.setAttribute(r,s)}function rl(u,r){u.removeAttribute(r)}function mf(){z().body.focus(),z().onselectstart=function(){return!1}}function il(){z().onselectstart=function(){return!0}}function qa(u){if(u&&u.getBoundingClientRect&&u.parentNode){const r=u.getBoundingClientRect(),s={};return["bottom","height","left","right","top","width"].forEach(a=>{void 0!==r[a]&&(s[a]=r[a])}),s.height||(s.height=parseFloat(di(u,"height"))),s.width||(s.width=parseFloat(di(u,"width"))),s}}function sl(u){if(!u||u&&!u.offsetParent)return{left:0,top:0,width:0,height:0};const r=u.offsetWidth,s=u.offsetHeight;let a=0,c=0;for(;u.offsetParent&&u!==z()[Uc.fullscreenElement];)a+=u.offsetLeft,c+=u.offsetTop,u=u.offsetParent;return{left:a,top:c,width:r,height:s}}function Cn(u,r){const s={x:0,y:0};if($r){let x=u;for(;x&&"html"!==x.nodeName.toLowerCase();){const P=di(x,"transform");if(/^matrix/.test(P)){const V=P.slice(7,-1).split(/,\s/).map(Number);s.x+=V[4],s.y+=V[5]}else if(/^matrix3d/.test(P)){const V=P.slice(9,-1).split(/,\s/).map(Number);s.x+=V[12],s.y+=V[13]}if(x.assignedSlot&&x.assignedSlot.parentElement&&M().WebKitCSSMatrix){const V=M().getComputedStyle(x.assignedSlot.parentElement).transform,q=new(M().WebKitCSSMatrix)(V);s.x+=q.m41,s.y+=q.m42}x=x.parentNode||x.host}}const a={},c=sl(r.target),h=sl(u),f=h.width;let T=r.offsetY-(h.top-c.top),E=r.offsetX-(h.left-c.left);return r.changedTouches&&(E=r.changedTouches[0].pageX-h.left,T=r.changedTouches[0].pageY+h.top,$r&&(E-=s.x,T-=s.y)),a.y=1-Math.max(0,Math.min(1,T/h.height)),a.x=Math.max(0,Math.min(1,E/f)),a}function qe(u){return ui(u)&&3===u.nodeType}function xt(u){for(;u.firstChild;)u.removeChild(u.firstChild);return u}function Sn(u){return"function"==typeof u&&(u=u()),(Array.isArray(u)?u:[u]).map(r=>("function"==typeof r&&(r=r()),wr(r)||qe(r)?r:"string"==typeof r&&/\S/.test(r)?z().createTextNode(r):void 0)).filter(r=>r)}function li(u,r){return Sn(r).forEach(s=>u.appendChild(s)),u}function za(u,r){return li(xt(u),r)}function er(u){return void 0===u.button&&void 0===u.buttons||0===u.button&&void 0===u.buttons||"mouseup"===u.type&&0===u.button&&0===u.buttons||"mousedown"===u.type&&0===u.button&&0===u.buttons||!(0!==u.button||1!==u.buttons)}const ci=am("querySelector"),Vn=am("querySelectorAll");function di(u,r){if(!u||!r)return"";if("function"==typeof M().getComputedStyle){let s;try{s=M().getComputedStyle(u)}catch{return""}return s?s.getPropertyValue(r)||s[r]:""}return""}function qo(u){[...z().styleSheets].forEach(r=>{try{const s=[...r.cssRules].map(c=>c.cssText).join(""),a=z().createElement("style");a.textContent=s,u.document.head.appendChild(a)}catch{const a=z().createElement("link");a.rel="stylesheet",a.type=r.type,a.media=r.media.mediaText,a.href=r.href,u.document.head.appendChild(a)}})}var It=Object.freeze({__proto__:null,isReal:Va,isEl:wr,isInFrame:om,createEl:_t,textContent:Pr,prependTo:gf,hasClass:Ha,addClass:Wn,removeClass:xr,toggleClass:Kt,setAttributes:br,getAttributes:$n,getAttribute:Ho,setAttribute:Tr,removeAttribute:rl,blockTextSelection:mf,unblockTextSelection:il,getBoundingClientRect:qa,findPosition:sl,getPointerPosition:Cn,isTextNode:qe,emptyEl:xt,normalizeContent:Sn,appendContent:li,insertContent:za,isSingleLeftClick:er,$:ci,$$:Vn,computedStyle:di,copyStyleSheetsToWindow:qo});let Wc,Ga=!1;const Wa=function(){if(!1===Wc.options.autoSetup)return;const u=Array.prototype.slice.call(z().getElementsByTagName("video")),r=Array.prototype.slice.call(z().getElementsByTagName("audio")),s=Array.prototype.slice.call(z().getElementsByTagName("video-js")),a=u.concat(r,s);if(a&&a.length>0)for(let c=0,h=a.length;c<h;c++){const f=a[c];if(!f||!f.getAttribute){Nn(1);break}void 0===f.player&&null!==f.getAttribute("data-setup")&&Wc(f)}else Ga||Nn(1)};function Nn(u,r){Va()&&(r&&(Wc=r),M().setTimeout(Wa,u))}function zo(){Ga=!0,M().removeEventListener("load",zo)}Va()&&("complete"===z().readyState?zo():M().addEventListener("load",zo));const Go=function(u){const r=z().createElement("style");return r.className=u,r},Hi=function(u,r){u.styleSheet?u.styleSheet.cssText=r:u.textContent=r};var ur=new WeakMap;let yf,so=3;function tr(){return so++}function Xa(u,r){if(!ur.has(u))return;const s=ur.get(u);0===s.handlers[r].length&&(delete s.handlers[r],u.removeEventListener?u.removeEventListener(r,s.dispatcher,!1):u.detachEvent&&u.detachEvent("on"+r,s.dispatcher)),Object.getOwnPropertyNames(s.handlers).length<=0&&(delete s.handlers,delete s.dispatcher,delete s.disabled),0===Object.getOwnPropertyNames(s).length&&ur.delete(u)}function Wo(u,r,s,a){s.forEach(function(c){u(r,c,a)})}function Lt(u){if(u.fixed_)return u;function r(){return!0}function s(){return!1}if(!u||!u.isPropagationStopped||!u.isImmediatePropagationStopped){const a=u||M().event;u={};const c=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const h in a)c.includes(h)||"returnValue"===h&&a.preventDefault||(u[h]=a[h]);if(u.target||(u.target=u.srcElement||z()),u.relatedTarget||(u.relatedTarget=u.fromElement===u.target?u.toElement:u.fromElement),u.preventDefault=function(){a.preventDefault&&a.preventDefault(),u.returnValue=!1,a.returnValue=!1,u.defaultPrevented=!0},u.defaultPrevented=!1,u.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),u.cancelBubble=!0,a.cancelBubble=!0,u.isPropagationStopped=r},u.isPropagationStopped=s,u.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),u.isImmediatePropagationStopped=r,u.stopPropagation()},u.isImmediatePropagationStopped=s,null!=u.clientX){const h=z().documentElement,f=z().body;u.pageX=u.clientX+(h&&h.scrollLeft||f&&f.scrollLeft||0)-(h&&h.clientLeft||f&&f.clientLeft||0),u.pageY=u.clientY+(h&&h.scrollTop||f&&f.scrollTop||0)-(h&&h.clientTop||f&&f.clientTop||0)}u.which=u.charCode||u.keyCode,null!=u.button&&(u.button=1&u.button?0:4&u.button?1:2&u.button?2:0)}return u.fixed_=!0,u}const vf=function(){if("boolean"!=typeof yf){yf=!1;try{const u=Object.defineProperty({},"passive",{get(){yf=!0}});M().addEventListener("test",null,u),M().removeEventListener("test",null,u)}catch{}}return yf},um=["touchstart","touchmove"];function Hn(u,r,s){if(Array.isArray(r))return Wo(Hn,u,r,s);ur.has(u)||ur.set(u,{});const a=ur.get(u);if(a.handlers||(a.handlers={}),a.handlers[r]||(a.handlers[r]=[]),s.guid||(s.guid=tr()),a.handlers[r].push(s),a.dispatcher||(a.disabled=!1,a.dispatcher=function(c,h){if(a.disabled)return;c=Lt(c);const f=a.handlers[c.type];if(f){const y=f.slice(0);for(let T=0,E=y.length;T<E&&!c.isImmediatePropagationStopped();T++)try{y[T].call(u,c,h)}catch(x){Ht.error(x)}}}),1===a.handlers[r].length)if(u.addEventListener){let c=!1;vf()&&um.indexOf(r)>-1&&(c={passive:!0}),u.addEventListener(r,a.dispatcher,c)}else u.attachEvent&&u.attachEvent("on"+r,a.dispatcher)}function lr(u,r,s){if(!ur.has(u))return;const a=ur.get(u);if(!a.handlers)return;if(Array.isArray(r))return Wo(lr,u,r,s);const c=function(f,y){a.handlers[y]=[],Xa(f,y)};if(void 0===r){for(const f in a.handlers)Object.prototype.hasOwnProperty.call(a.handlers||{},f)&&c(u,f);return}const h=a.handlers[r];if(h){if(!s)return void c(u,r);if(s.guid)for(let f=0;f<h.length;f++)h[f].guid===s.guid&&h.splice(f--,1);Xa(u,r)}}function qi(u,r,s){const a=ur.has(u)?ur.get(u):{},c=u.parentNode||u.ownerDocument;if("string"==typeof r?r={type:r,target:u}:r.target||(r.target=u),r=Lt(r),a.dispatcher&&a.dispatcher.call(u,r,s),c&&!r.isPropagationStopped()&&!0===r.bubbles)qi.call(null,c,r,s);else if(!c&&!r.defaultPrevented&&r.target&&r.target[r.type]){ur.has(r.target)||ur.set(r.target,{});const h=ur.get(r.target);r.target[r.type]&&(h.disabled=!0,"function"==typeof r.target[r.type]&&r.target[r.type](),h.disabled=!1)}return!r.defaultPrevented}function oo(u,r,s){if(Array.isArray(r))return Wo(oo,u,r,s);const a=function(){lr(u,r,a),s.apply(this,arguments)};a.guid=s.guid=s.guid||tr(),Hn(u,r,a)}function cr(u,r,s){const a=function(){lr(u,r,a),s.apply(this,arguments)};a.guid=s.guid=s.guid||tr(),Hn(u,r,a)}var OE=Object.freeze({__proto__:null,fixEvent:Lt,on:Hn,off:lr,trigger:qi,one:oo,any:cr});const Ft=function(u,r,s){r.guid||(r.guid=tr());const a=r.bind(u);return a.guid=s?s+"_"+r.guid:r.guid,a},wi=function(u,r){let s=M().performance.now();return function(...c){const h=M().performance.now();h-s>=r&&(u(...c),s=h)}},ao=function(u,r,s,a=M()){let c;const f=function(){const y=this,T=arguments;let E=function(){c=null,E=null,s||u.apply(y,T)};!c&&s&&u.apply(y,T),a.clearTimeout(c),c=a.setTimeout(E,r)};return f.cancel=()=>{a.clearTimeout(c),c=null},f};var Xc=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:30,bind_:Ft,throttle:wi,debounce:ao});let Vr;class Hr{on(r,s){const a=this.addEventListener;this.addEventListener=()=>{},Hn(this,r,s),this.addEventListener=a}off(r,s){lr(this,r,s)}one(r,s){const a=this.addEventListener;this.addEventListener=()=>{},oo(this,r,s),this.addEventListener=a}any(r,s){const a=this.addEventListener;this.addEventListener=()=>{},cr(this,r,s),this.addEventListener=a}trigger(r){const s=r.type||r;"string"==typeof r&&(r={type:s}),r=Lt(r),this.allowedEvents_[s]&&this["on"+s]&&this["on"+s](r),qi(this,r)}queueTrigger(r){Vr||(Vr=new Map);const s=r.type||r;let a=Vr.get(this);a||(a=new Map,Vr.set(this,a));const c=a.get(s);a.delete(s),M().clearTimeout(c);const h=M().setTimeout(()=>{a.delete(s),0===a.size&&(a=null,Vr.delete(this)),this.trigger(r)},0);a.set(s,h)}}Hr.prototype.allowedEvents_={},Hr.prototype.addEventListener=Hr.prototype.on,Hr.prototype.removeEventListener=Hr.prototype.off,Hr.prototype.dispatchEvent=Hr.prototype.trigger;const Kc=u=>"function"==typeof u.name?u.name():"string"==typeof u.name?u.name:u.name_?u.name_:u.constructor&&u.constructor.name?u.constructor.name:typeof u,ks=u=>u instanceof Hr||!!u.eventBusEl_&&["on","one","off","trigger"].every(r=>"function"==typeof u[r]),_f=u=>"string"==typeof u&&/\S/.test(u)||Array.isArray(u)&&!!u.length,Yc=(u,r,s)=>{if(!u||!u.nodeName&&!ks(u))throw new Error(`Invalid target for ${Kc(r)}#${s}; must be a DOM node or evented object.`)},O_=(u,r,s)=>{if(!_f(u))throw new Error(`Invalid event type for ${Kc(r)}#${s}; must be a non-empty string or array.`)},R_=(u,r,s)=>{if("function"!=typeof u)throw new Error(`Invalid listener for ${Kc(r)}#${s}; must be a function.`)},lm=(u,r,s)=>{const a=r.length<3||r[0]===u||r[0]===u.eventBusEl_;let c,h,f;return a?(c=u.eventBusEl_,r.length>=3&&r.shift(),[h,f]=r):(c=r[0],h=r[1],f=r[2]),Yc(c,u,s),O_(h,u,s),R_(f,u,s),f=Ft(u,f),{isTargetingSelf:a,target:c,type:h,listener:f}},Ka=(u,r,s,a)=>{Yc(u,u,r),u.nodeName?OE[r](u,s,a):u[r](s,a)},NE={on(...u){const{isTargetingSelf:r,target:s,type:a,listener:c}=lm(this,u,"on");if(Ka(s,"on",a,c),!r){const h=()=>this.off(s,a,c);h.guid=c.guid;const f=()=>this.off("dispose",h);f.guid=c.guid,Ka(this,"on","dispose",h),Ka(s,"on","dispose",f)}},one(...u){const{isTargetingSelf:r,target:s,type:a,listener:c}=lm(this,u,"one");if(r)Ka(s,"one",a,c);else{const h=(...f)=>{this.off(s,a,h),c.apply(null,f)};h.guid=c.guid,Ka(s,"one",a,h)}},any(...u){const{isTargetingSelf:r,target:s,type:a,listener:c}=lm(this,u,"any");if(r)Ka(s,"any",a,c);else{const h=(...f)=>{this.off(s,a,h),c.apply(null,f)};h.guid=c.guid,Ka(s,"any",a,h)}},off(u,r,s){if(!u||_f(u))lr(this.eventBusEl_,u,r);else{const a=u,c=r;Yc(a,this,"off"),O_(c,this,"off"),R_(s,this,"off"),s=Ft(this,s),this.off("dispose",s),a.nodeName?(lr(a,c,s),lr(a,"dispose",s)):ks(a)&&(a.off(c,s),a.off("dispose",s))}},trigger(u,r){if(Yc(this.eventBusEl_,this,"trigger"),!_f(u&&"string"!=typeof u?u.type:u))throw new Error(`Invalid event type for ${Kc(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return qi(this.eventBusEl_,u,r)}};function cm(u,r={}){const{eventBusKey:s}=r;if(s){if(!u[s].nodeName)throw new Error(`The eventBusKey "${s}" does not refer to an element.`);u.eventBusEl_=u[s]}else u.eventBusEl_=_t("span",{className:"vjs-event-bus"});return Object.assign(u,NE),u.eventedCallbacks&&u.eventedCallbacks.forEach(a=>{a()}),u.on("dispose",()=>{u.off(),[u,u.el_,u.eventBusEl_].forEach(function(a){a&&ur.has(a)&&ur.delete(a)}),M().setTimeout(()=>{u.eventBusEl_=null},0)}),u}const LE={state:{},setState(u){let r;return"function"==typeof u&&(u=u()),ja(u,(s,a)=>{this.state[a]!==s&&(r=r||{},r[a]={from:this.state[a],to:s}),this.state[a]=s}),r&&ks(this)&&this.trigger({changes:r,type:"statechanged"}),r}};function N_(u,r){return Object.assign(u,LE),u.state=Object.assign({},u.state,r),"function"==typeof u.handleStateChanged&&ks(u)&&u.on("statechanged",u.handleStateChanged),u}const Qc=function(u){return"string"!=typeof u?u:u.replace(/./,r=>r.toLowerCase())},Xn=function(u){return"string"!=typeof u?u:u.replace(/./,r=>r.toUpperCase())},L_=function(u,r){return Xn(u)===Xn(r)};var FE=Object.freeze({__proto__:null,toLowerCase:Qc,toTitleCase:Xn,titleCaseEquals:L_});class ue{constructor(r,s,a){if(this.player_=!r&&this.play?r=this:r,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Xt({},this.options_),s=this.options_=Xt(this.options_,s),this.id_=s.id||s.el&&s.el.id,!this.id_){const c=r&&r.id&&r.id()||"no_player";this.id_=`${c}_component_${tr()}`}this.name_=s.name||null,s.el?this.el_=s.el:!1!==s.createEl&&(this.el_=this.createEl()),s.className&&this.el_&&s.className.split(" ").forEach(c=>this.addClass(c)),["on","off","one","any","trigger"].forEach(c=>{this[c]=void 0}),!1!==s.evented&&(cm(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),N_(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==s.initChildren&&this.initChildren(),this.ready(a),!1!==s.reportTouchActivity&&this.enableTouchActivity()}on(r,s){}off(r,s){}one(r,s){}any(r,s){}trigger(r,s){}dispose(r={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let s=this.children_.length-1;s>=0;s--)this.children_[s].dispose&&this.children_[s].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(r.restoreEl?this.el_.parentNode.replaceChild(r.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(r){return r?(this.options_=Xt(this.options_,r),this.options_):this.options_}el(){return this.el_}createEl(r,s,a){return _t(r,s,a)}localize(r,s,a=r){const c=this.player_.language&&this.player_.language(),h=this.player_.languages&&this.player_.languages(),f=h&&h[c],y=c&&c.split("-")[0],T=h&&h[y];let E=a;return f&&f[r]?E=f[r]:T&&T[r]&&(E=T[r]),s&&(E=E.replace(/\{(\d+)\}/g,function(x,P){const V=s[P-1];let q=V;return typeof V>"u"&&(q=x),q})),E}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(r){return this.childIndex_[r]}getChild(r){if(r)return this.childNameIndex_[r]}getDescendant(...r){r=r.reduce((a,c)=>a.concat(c),[]);let s=this;for(let a=0;a<r.length;a++)if(s=s.getChild(r[a]),!s||!s.getChild)return;return s}setIcon(r,s=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const a="http://www.w3.org/2000/svg",c=_t("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),h=z().createElementNS(a,"svg");h.setAttributeNS(null,"viewBox","0 0 512 512");const f=z().createElementNS(a,"use");return h.appendChild(f),f.setAttributeNS(null,"href",`#vjs-icon-${r}`),c.appendChild(h),this.iconIsSet_?s.replaceChild(c,s.querySelector(".vjs-icon-placeholder")):s.appendChild(c),this.iconIsSet_=!0,c}addChild(r,s={},a=this.children_.length){let c,h;if("string"==typeof r){h=Xn(r);const f=s.componentClass||h;s.name=h;const y=ue.getComponent(f);if(!y)throw new Error(`Component ${f} does not exist`);if("function"!=typeof y)return null;c=new y(this.player_||this,s)}else c=r;if(c.parentComponent_&&c.parentComponent_.removeChild(c),this.children_.splice(a,0,c),c.parentComponent_=this,"function"==typeof c.id&&(this.childIndex_[c.id()]=c),h=h||c.name&&Xn(c.name()),h&&(this.childNameIndex_[h]=c,this.childNameIndex_[Qc(h)]=c),"function"==typeof c.el&&c.el()){let f=null;this.children_[a+1]&&(this.children_[a+1].el_?f=this.children_[a+1].el_:wr(this.children_[a+1])&&(f=this.children_[a+1])),this.contentEl().insertBefore(c.el(),f)}return c}removeChild(r){if("string"==typeof r&&(r=this.getChild(r)),!r||!this.children_)return;let s=!1;for(let c=this.children_.length-1;c>=0;c--)if(this.children_[c]===r){s=!0,this.children_.splice(c,1);break}if(!s)return;r.parentComponent_=null,this.childIndex_[r.id()]=null,this.childNameIndex_[Xn(r.name())]=null,this.childNameIndex_[Qc(r.name())]=null;const a=r.el();a&&a.parentNode===this.contentEl()&&this.contentEl().removeChild(r.el())}initChildren(){const r=this.options_.children;if(r){const s=this.options_,a=f=>{const y=f.name;let T=f.opts;if(void 0!==s[y]&&(T=s[y]),!1===T)return;!0===T&&(T={}),T.playerOptions=this.options_.playerOptions;const E=this.addChild(y,T);E&&(this[y]=E)};let c;const h=ue.getComponent("Tech");c=Array.isArray(r)?r:Object.keys(r),c.concat(Object.keys(this.options_).filter(function(f){return!c.some(function(y){return"string"==typeof y?f===y:f===y.name})})).map(f=>{let y,T;return"string"==typeof f?(y=f,T=r[y]||this.options_[y]||{}):(y=f.name,T=f),{name:y,opts:T}}).filter(f=>{const y=ue.getComponent(f.opts.componentClass||Xn(f.name));return y&&!h.isTech(y)}).forEach(a)}}buildCSSClass(){return""}ready(r,s=!1){if(r){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(r);s?r.call(this):this.setTimeout(r,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const r=this.readyQueue_;this.readyQueue_=[],r&&r.length>0&&r.forEach(function(s){s.call(this)},this),this.trigger("ready")},1)}$(r,s){return ci(r,s||this.contentEl())}$$(r,s){return Vn(r,s||this.contentEl())}hasClass(r){return Ha(this.el_,r)}addClass(...r){Wn(this.el_,...r)}removeClass(...r){xr(this.el_,...r)}toggleClass(r,s){Kt(this.el_,r,s)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(r){return Ho(this.el_,r)}setAttribute(r,s){Tr(this.el_,r,s)}removeAttribute(r){rl(this.el_,r)}width(r,s){return this.dimension("width",r,s)}height(r,s){return this.dimension("height",r,s)}dimensions(r,s){this.width(r,!0),this.height(s)}dimension(r,s,a){if(void 0!==s)return(null===s||s!=s)&&(s=0),this.el_.style[r]=-1!==(""+s).indexOf("%")||-1!==(""+s).indexOf("px")?s:"auto"===s?"":s+"px",void(a||this.trigger("componentresize"));if(!this.el_)return 0;const c=this.el_.style[r],h=c.indexOf("px");return parseInt(-1!==h?c.slice(0,h):this.el_["offset"+Xn(r)],10)}currentDimension(r){let s=0;if("width"!==r&&"height"!==r)throw new Error("currentDimension only accepts width or height value");if(s=di(this.el_,r),s=parseFloat(s),0===s||isNaN(s)){const a=`offset${Xn(r)}`;s=this.el_[a]}return s}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const r=this.el_.getBoundingClientRect();return{boundingClientRect:{x:r.x,y:r.y,width:r.width,height:r.height,top:r.top,right:r.right,bottom:r.bottom,left:r.left},center:{x:r.left+r.width/2,y:r.top+r.height/2,width:0,height:0,top:r.top+r.height/2,right:r.left+r.width/2,bottom:r.top+r.height/2,left:r.left+r.width/2}}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(r){this.player_&&("Tab"!==r.key&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&r.stopPropagation(),this.player_.handleKeyDown(r))}handleKeyPress(r){this.handleKeyDown(r)}emitTapEvents(){let h,r=0,s=null;this.on("touchstart",function(y){1===y.touches.length&&(s={pageX:y.touches[0].pageX,pageY:y.touches[0].pageY},r=M().performance.now(),h=!0)}),this.on("touchmove",function(y){if(y.touches.length>1)h=!1;else if(s){const T=y.touches[0].pageX-s.pageX,E=y.touches[0].pageY-s.pageY;Math.sqrt(T*T+E*E)>10&&(h=!1)}});const f=function(){h=!1};this.on("touchleave",f),this.on("touchcancel",f),this.on("touchend",function(y){s=null,!0===h&&M().performance.now()-r<200&&(y.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const r=Ft(this.player(),this.player().reportUserActivity);let s;this.on("touchstart",function(){r(),this.clearInterval(s),s=this.setInterval(r,250)});const a=function(c){r(),this.clearInterval(s)};this.on("touchmove",r),this.on("touchend",a),this.on("touchcancel",a)}setTimeout(r,s){var a;return r=Ft(this,r),this.clearTimersOnDispose_(),a=M().setTimeout(()=>{this.setTimeoutIds_.has(a)&&this.setTimeoutIds_.delete(a),r()},s),this.setTimeoutIds_.add(a),a}clearTimeout(r){return this.setTimeoutIds_.has(r)&&(this.setTimeoutIds_.delete(r),M().clearTimeout(r)),r}setInterval(r,s){r=Ft(this,r),this.clearTimersOnDispose_();const a=M().setInterval(r,s);return this.setIntervalIds_.add(a),a}clearInterval(r){return this.setIntervalIds_.has(r)&&(this.setIntervalIds_.delete(r),M().clearInterval(r)),r}requestAnimationFrame(r){var s;return this.clearTimersOnDispose_(),r=Ft(this,r),s=M().requestAnimationFrame(()=>{this.rafIds_.has(s)&&this.rafIds_.delete(s),r()}),this.rafIds_.add(s),s}requestNamedAnimationFrame(r,s){if(this.namedRafs_.has(r))return;this.clearTimersOnDispose_(),s=Ft(this,s);const a=this.requestAnimationFrame(()=>{s(),this.namedRafs_.has(r)&&this.namedRafs_.delete(r)});return this.namedRafs_.set(r,a),r}cancelNamedAnimationFrame(r){this.namedRafs_.has(r)&&(this.cancelAnimationFrame(this.namedRafs_.get(r)),this.namedRafs_.delete(r))}cancelAnimationFrame(r){return this.rafIds_.has(r)&&(this.rafIds_.delete(r),M().cancelAnimationFrame(r)),r}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([r,s])=>{this[r].forEach((a,c)=>this[s](c))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(r){return(r||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(r){function s(h){const f=M().getComputedStyle(h,null),y=f.getPropertyValue("visibility");return"none"!==f.getPropertyValue("display")&&!["hidden","collapse"].includes(y)}return r||(r=this.el()),!(!function c(h){if(h.offsetWidth+h.offsetHeight+h.getBoundingClientRect().height+h.getBoundingClientRect().width===0)return!1;const f={x:h.getBoundingClientRect().left+h.offsetWidth/2,y:h.getBoundingClientRect().top+h.offsetHeight/2};if(f.x<0||f.x>(z().documentElement.clientWidth||M().innerWidth)||f.y<0||f.y>(z().documentElement.clientHeight||M().innerHeight))return!1;let y=z().elementFromPoint(f.x,f.y);for(;y;){if(y===h)return!0;if(!y.parentNode)return!1;y=y.parentNode}}(r)||!function a(h){return!(!s(h.parentElement)||!s(h)||"0"===h.style.opacity||"0px"===M().getComputedStyle(h).height||"0px"===M().getComputedStyle(h).width)}(r)||r.parentElement&&!(r.tabIndex>=0))}static registerComponent(r,s){if("string"!=typeof r||!r)throw new Error(`Illegal component name, "${r}"; must be a non-empty string.`);const a=ue.getComponent("Tech"),c=a&&a.isTech(s),h=ue===s||ue.prototype.isPrototypeOf(s.prototype);if(c||!h){let y;throw y=c?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${r}"; ${y}.`)}r=Xn(r),ue.components_||(ue.components_={});const f=ue.getComponent("Player");if("Player"===r&&f&&f.players){const y=f.players,T=Object.keys(y);if(y&&T.length>0&&T.map(E=>y[E]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return ue.components_[r]=s,ue.components_[Qc(r)]=s,s}static getComponent(r){if(r&&ue.components_)return ue.components_[r]}}function F_(u,r,s,a){return function dm(u,r,s){if("number"!=typeof r||r<0||r>s)throw new Error(`Failed to execute '${u}' on 'TimeRanges': The index provided (${r}) is non-numeric or out of bounds (0-${s}).`)}(u,a,s.length-1),s[a][r]}function hm(u){let r;return r=void 0===u||0===u.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:u.length,start:F_.bind(null,"start",0,u),end:F_.bind(null,"end",1,u)},M().Symbol&&M().Symbol.iterator&&(r[M().Symbol.iterator]=()=>(u||[]).values()),r}function as(u,r){return Array.isArray(u)?hm(u):void 0===u||void 0===r?hm():hm([[u,r]])}ue.registerComponent("Component",ue);const uo=function(u,r){u=u<0?0:u;let s=Math.floor(u%60),a=Math.floor(u/60%60),c=Math.floor(u/3600);const h=Math.floor(r/60%60),f=Math.floor(r/3600);return(isNaN(u)||u===1/0)&&(c=a=s="-"),c=c>0||f>0?c+":":"",a=((c||h>=10)&&a<10?"0"+a:a)+":",s=s<10?"0"+s:s,c+a+s};let us=uo;function B_(u){us=u}function U_(){us=uo}function Ln(u,r=u){return us(u,r)}var Zc=Object.freeze({__proto__:null,createTimeRanges:as,createTimeRange:as,setFormatTime:B_,resetFormatTime:U_,formatTime:Ln});function hi(u,r){let a,c,s=0;if(!r)return 0;(!u||!u.length)&&(u=as(0,0));for(let h=0;h<u.length;h++)a=u.start(h),c=u.end(h),c>r&&(c=r),s+=c-a;return s/r}function Mn(u){if(u instanceof Mn)return u;"number"==typeof u?this.code=u:"string"==typeof u?this.message=u:ui(u)&&("number"==typeof u.code&&(this.code=u.code),Object.assign(this,u)),this.message||(this.message=Mn.defaultMessages[this.code]||"")}function Ya(u){return null!=u&&"function"==typeof u.then}function zi(u){Ya(u)&&u.then(null,r=>{})}Mn.prototype.code=0,Mn.prototype.message="",Mn.prototype.status=null,Mn.prototype.metadata=null,Mn.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Mn.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},Mn.MEDIA_ERR_CUSTOM=0,Mn.prototype.MEDIA_ERR_CUSTOM=0,Mn.MEDIA_ERR_ABORTED=1,Mn.prototype.MEDIA_ERR_ABORTED=1,Mn.MEDIA_ERR_NETWORK=2,Mn.prototype.MEDIA_ERR_NETWORK=2,Mn.MEDIA_ERR_DECODE=3,Mn.prototype.MEDIA_ERR_DECODE=3,Mn.MEDIA_ERR_SRC_NOT_SUPPORTED=4,Mn.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4,Mn.MEDIA_ERR_ENCRYPTED=5,Mn.prototype.MEDIA_ERR_ENCRYPTED=5;const Jc=function(u){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((s,a,c)=>(u[a]&&(s[a]=u[a]),s),{cues:u.cues&&Array.prototype.map.call(u.cues,function(s){return{startTime:s.startTime,endTime:s.endTime,text:s.text,id:s.id}})})};const ol="vjs-modal-dialog";class Xo extends ue{constructor(r,s){super(r,s),this.handleKeyDown_=a=>this.handleKeyDown(a),this.close_=a=>this.close(a),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=_t("div",{className:`${ol}-content`},{role:"document"}),this.descEl_=_t("p",{className:`${ol}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),Pr(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${ol} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let r=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(r+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),r}open(){if(this.opened_)return void(this.options_.fillAlways&&this.fill());const r=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!r.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&r.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=r.controls(),r.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(r){return"boolean"==typeof r&&this[r?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const r=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&r.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&r.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(r){if("boolean"==typeof r){const s=this.closeable_=!!r;let a=this.getChild("closeButton");if(s&&!a){const c=this.contentEl_;this.contentEl_=this.el_,a=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=c,this.on(a,"close",this.close_)}!s&&a&&(this.off(a,"close",this.close_),this.removeChild(a),a.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(r){const s=this.contentEl(),a=s.parentNode,c=s.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,a.removeChild(s),this.empty(),za(s,r),this.trigger("modalfill"),c?a.insertBefore(s,c):a.appendChild(s);const h=this.getChild("closeButton");h&&a.appendChild(h.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),xt(this.contentEl()),this.trigger("modalempty")}content(r){return typeof r<"u"&&(this.content_=r),this.content_}conditionalFocus_(){const r=z().activeElement,s=this.player_.el_;this.previouslyActiveEl_=null,(s.contains(r)||s===r)&&(this.previouslyActiveEl_=r,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(r){if(this.trigger({type:"modalKeydown",originalEvent:r,target:this,bubbles:!0}),r.stopPropagation(),"Escape"===r.key&&this.closeable())return r.preventDefault(),void this.close();if("Tab"!==r.key)return;const s=this.focusableEls_(),a=this.el_.querySelector(":focus");let c;for(let h=0;h<s.length;h++)if(a===s[h]){c=h;break}z().activeElement===this.el_&&(c=0),r.shiftKey&&0===c?(s[s.length-1].focus(),r.preventDefault()):!r.shiftKey&&c===s.length-1&&(s[0].focus(),r.preventDefault())}focusableEls_(){const r=this.el_.querySelectorAll("*");return Array.prototype.filter.call(r,s=>(s instanceof M().HTMLAnchorElement||s instanceof M().HTMLAreaElement)&&s.hasAttribute("href")||(s instanceof M().HTMLInputElement||s instanceof M().HTMLSelectElement||s instanceof M().HTMLTextAreaElement||s instanceof M().HTMLButtonElement)&&!s.hasAttribute("disabled")||s instanceof M().HTMLIFrameElement||s instanceof M().HTMLObjectElement||s instanceof M().HTMLEmbedElement||s.hasAttribute("tabindex")&&-1!==s.getAttribute("tabindex")||s.hasAttribute("contenteditable"))}}Xo.prototype.options_={pauseOnOpen:!0,temporary:!0},ue.registerComponent("ModalDialog",Xo);class Ko extends Hr{constructor(r=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let s=0;s<r.length;s++)this.addTrack(r[s])}addTrack(r){const s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get(){return this.tracks_[s]}}),-1===this.tracks_.indexOf(r)&&(this.tracks_.push(r),this.trigger({track:r,type:"addtrack",target:this})),r.labelchange_=()=>{this.trigger({track:r,type:"labelchange",target:this})},ks(r)&&r.addEventListener("labelchange",r.labelchange_)}removeTrack(r){let s;for(let a=0,c=this.length;a<c;a++)if(this[a]===r){s=this[a],s.off&&s.off(),this.tracks_.splice(a,1);break}s&&this.trigger({track:s,type:"removetrack",target:this})}getTrackById(r){let s=null;for(let a=0,c=this.length;a<c;a++){const h=this[a];if(h.id===r){s=h;break}}return s}}Ko.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const u in Ko.prototype.allowedEvents_)Ko.prototype["on"+u]=null;const td=function(u,r){for(let s=0;s<u.length;s++)!Object.keys(u[s]).length||r.id===u[s].id||(u[s].enabled=!1)},Yo=function(u,r){for(let s=0;s<u.length;s++)!Object.keys(u[s]).length||r.id===u[s].id||(u[s].selected=!1)};class bf extends Ko{addTrack(r){super.addTrack(r),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),r.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(r.kind)&&r.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(r){super.removeTrack(r),r.removeEventListener&&(this.queueChange_&&r.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&r.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class Tf{constructor(r){Tf.prototype.setCues_.call(this,r),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(r){const s=this.length||0;let a=0;const c=r.length;this.cues_=r,this.length_=r.length;const h=function(f){""+f in this||Object.defineProperty(this,""+f,{get(){return this.cues_[f]}})};if(s<c)for(a=s;a<c;a++)h.call(this,a)}getCueById(r){let s=null;for(let a=0,c=this.length;a<c;a++){const h=this[a];if(h.id===r){s=h;break}}return s}}const UE={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},$_={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},V_={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},H_={disabled:"disabled",hidden:"hidden",showing:"showing"};class rd extends Hr{constructor(r={}){super();const s={id:r.id||"vjs_track_"+tr(),kind:r.kind||"",language:r.language||""};let a=r.label||"";for(const c in s)Object.defineProperty(this,c,{get:()=>s[c],set(){}});Object.defineProperty(this,"label",{get:()=>a,set(c){c!==a&&(a=c,this.trigger("labelchange"))}})}}const al=function(u){return new URL(u,z().baseURI)},pm=function(u){return new URL(u,z().baseURI).href},ul=function(u){if("string"==typeof u){const s=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(u);if(s)return s.pop().toLowerCase()}return""},Cf=function(u,r=M().location){return al(u).origin!==r.origin};var jE=Object.freeze({__proto__:null,parseUrl:al,getAbsoluteURL:pm,getFileExtension:ul,isCrossOrigin:Cf});const gm=function(u,r){const s=new(M().WebVTT.Parser)(M(),M().vttjs,M().WebVTT.StringDecoder()),a=[];s.oncue=function(c){r.addCue(c)},s.onparsingerror=function(c){a.push(c)},s.onflush=function(){r.trigger({type:"loadeddata",target:r})},s.parse(u),a.length>0&&(M().console&&M().console.groupCollapsed&&M().console.groupCollapsed(`Text Track parsing errors for ${r.src}`),a.forEach(c=>Ht.error(c)),M().console&&M().console.groupEnd&&M().console.groupEnd()),s.flush()},Sf=function(u,r){const s={uri:u},a=Cf(u);a&&(s.cors=a);const c="use-credentials"===r.tech_.crossOrigin();c&&(s.withCredentials=c),Re()(s,Ft(this,function(h,f,y){if(h)return Ht.error(h,f);r.loaded_=!0,"function"!=typeof M().WebVTT?r.tech_&&r.tech_.any(["vttjsloaded","vttjserror"],T=>{if("vttjserror"!==T.type)return gm(y,r);Ht.error(`vttjs failed to load, stopping trying to process ${r.src}`)}):gm(y,r)}))};class Za extends rd{constructor(r={}){if(!r.tech)throw new Error("A tech was not provided.");const s=Xt(r,{kind:V_[r.kind]||"subtitles",language:r.language||r.srclang||""});let a=H_[s.mode]||"disabled";const c=s.default;("metadata"===s.kind||"chapters"===s.kind)&&(a="hidden"),super(s),this.tech_=s.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const h=new Tf(this.cues_),f=new Tf(this.activeCues_);let y=!1;this.timeupdateHandler=Ft(this,function(E={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void("timeupdate"!==E.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));this.activeCues=this.activeCues,y&&(this.trigger("cuechange"),y=!1),"timeupdate"!==E.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}}),this.tech_.one("dispose",()=>{this.stopTracking()}),"disabled"!==a&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>c,set(){}},mode:{get:()=>a,set(E){H_[E]&&a!==E&&(a=E,!this.preload_&&"disabled"!==a&&0===this.cues.length&&Sf(this.src,this),this.stopTracking(),"disabled"!==a&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?h:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return f;const E=this.tech_.currentTime(),x=[];for(let P=0,V=this.cues.length;P<V;P++){const q=this.cues[P];q.startTime<=E&&q.endTime>=E&&x.push(q)}if(y=!1,x.length!==this.activeCues_.length)y=!0;else for(let P=0;P<x.length;P++)-1===this.activeCues_.indexOf(x[P])&&(y=!0);return this.activeCues_=x,f.setCues_(this.activeCues_),f},set(){}}}),s.src?(this.src=s.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==s.kind&&"captions"!==s.kind)&&Sf(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(r){let s=r;if(!("getCueAsHTML"in s)){s=new(M().vttjs.VTTCue)(r.startTime,r.endTime,r.text);for(const c in r)c in s||(s[c]=r[c]);s.id=r.id,s.originalCue_=r}const a=this.tech_.textTracks();for(let c=0;c<a.length;c++)a[c]!==this&&a[c].removeCue(s);this.cues_.push(s),this.cues.setCues_(this.cues_)}removeCue(r){let s=this.cues_.length;for(;s--;){const a=this.cues_[s];if(a===r||a.originalCue_&&a.originalCue_===r){this.cues_.splice(s,1),this.cues.setCues_(this.cues_);break}}}}Za.prototype.allowedEvents_={cuechange:"cuechange"};class mm extends rd{constructor(r={}){const s=Xt(r,{kind:$_[r.kind]||""});super(s);let a=!1;Object.defineProperty(this,"enabled",{get:()=>a,set(c){"boolean"!=typeof c||c===a||(a=c,this.trigger("enabledchange"))}}),s.enabled&&(this.enabled=s.enabled),this.loaded_=!0}}class ym extends rd{constructor(r={}){const s=Xt(r,{kind:UE[r.kind]||""});super(s);let a=!1;Object.defineProperty(this,"selected",{get:()=>a,set(c){"boolean"!=typeof c||c===a||(a=c,this.trigger("selectedchange"))}}),s.selected&&(this.selected=s.selected)}}class Ps extends Hr{constructor(r={}){let s;super();const a=new Za(r);this.kind=a.kind,this.src=a.src,this.srclang=a.language,this.label=a.label,this.default=a.default,Object.defineProperties(this,{readyState:{get:()=>s},track:{get:()=>a}}),s=Ps.NONE,a.addEventListener("loadeddata",()=>{s=Ps.LOADED,this.trigger({type:"load",target:this})})}}Ps.prototype.allowedEvents_={load:"load"},Ps.NONE=0,Ps.LOADING=1,Ps.LOADED=2,Ps.ERROR=3;const fi={audio:{ListClass:class nd extends Ko{constructor(r=[]){for(let s=r.length-1;s>=0;s--)if(r[s].enabled){td(r,r[s]);break}super(r),this.changing_=!1}addTrack(r){r.enabled&&td(this,r),super.addTrack(r),r.addEventListener&&(r.enabledChange_=()=>{this.changing_||(this.changing_=!0,td(this,r),this.changing_=!1,this.trigger("change"))},r.addEventListener("enabledchange",r.enabledChange_))}removeTrack(r){super.removeTrack(r),r.removeEventListener&&r.enabledChange_&&(r.removeEventListener("enabledchange",r.enabledChange_),r.enabledChange_=null)}},TrackClass:mm,capitalName:"Audio"},video:{ListClass:class Qa extends Ko{constructor(r=[]){for(let s=r.length-1;s>=0;s--)if(r[s].selected){Yo(r,r[s]);break}super(r),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let s=0;s<this.length;s++)if(this[s].selected)return s;return-1},set(){}})}addTrack(r){r.selected&&Yo(this,r),super.addTrack(r),r.addEventListener&&(r.selectedChange_=()=>{this.changing_||(this.changing_=!0,Yo(this,r),this.changing_=!1,this.trigger("change"))},r.addEventListener("selectedchange",r.selectedChange_))}removeTrack(r){super.removeTrack(r),r.removeEventListener&&r.selectedChange_&&(r.removeEventListener("selectedchange",r.selectedChange_),r.selectedChange_=null)}},TrackClass:ym,capitalName:"Video"},text:{ListClass:bf,TrackClass:Za,capitalName:"Text"}};Object.keys(fi).forEach(function(u){fi[u].getterName=`${u}Tracks`,fi[u].privateName=`${u}Tracks_`});const Ja={remoteText:{ListClass:bf,TrackClass:Za,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class BE{constructor(r=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let s=0,a=r.length;s<a;s++)this.addTrackElement_(r[s])}addTrackElement_(r){const s=this.trackElements_.length;""+s in this||Object.defineProperty(this,s,{get(){return this.trackElements_[s]}}),-1===this.trackElements_.indexOf(r)&&this.trackElements_.push(r)}getTrackElementByTrack_(r){let s;for(let a=0,c=this.trackElements_.length;a<c;a++)if(r===this.trackElements_[a].track){s=this.trackElements_[a];break}return s}removeTrackElement_(r){for(let s=0,a=this.trackElements_.length;s<a;s++)if(r===this.trackElements_[s]){this.trackElements_[s].track&&"function"==typeof this.trackElements_[s].track.off&&this.trackElements_[s].track.off(),"function"==typeof this.trackElements_[s].off&&this.trackElements_[s].off(),this.trackElements_.splice(s,1);break}}},TrackClass:Ps,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Or=Object.assign({},fi,Ja);Ja.names=Object.keys(Ja),fi.names=Object.keys(fi),Or.names=[].concat(Ja.names).concat(fi.names);class Rt extends ue{constructor(r={},s=function(){}){r.reportTouchActivity=!1,super(null,r,s),this.onDurationChange_=a=>this.onDurationChange(a),this.trackProgress_=a=>this.trackProgress(a),this.trackCurrentTime_=a=>this.trackCurrentTime(a),this.stopTrackingCurrentTime_=a=>this.stopTrackingCurrentTime(a),this.disposeSourceHandler_=a=>this.disposeSourceHandler(a),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Or.names.forEach(a=>{const c=Or[a];r&&r[c.getterName]&&(this[c.privateName]=r[c.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(a=>{!1===r[`native${a}Tracks`]&&(this[`featuresNative${a}Tracks`]=!1)}),!1===r.nativeCaptions||!1===r.nativeTextTracks?this.featuresNativeTextTracks=!1:(!0===r.nativeCaptions||!0===r.nativeTextTracks)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==r.preloadTextTracks,this.autoRemoteTextTracks_=new Or.text.ListClass,this.initTrackListeners(),r.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(r){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(r),1)),this.trigger({src:r,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(r){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ft(this,function(){const s=this.bufferedPercent();this.bufferedPercent_!==s&&this.trigger("progress"),this.bufferedPercent_=s,1===s&&this.stopTrackingProgress()}),500)}onDurationChange(r){this.duration_=this.duration()}buffered(){return as(0,0)}bufferedPercent(){return hi(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(fi.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(r){(r=[].concat(r)).forEach(s=>{const a=this[`${s}Tracks`]()||[];let c=a.length;for(;c--;){const h=a[c];"text"===s&&this.removeRemoteTextTrack(h),a.removeTrack(h)}})}cleanupAutoTextTracks(){const r=this.autoRemoteTextTracks_||[];let s=r.length;for(;s--;)this.removeRemoteTextTrack(r[s])}reset(){}crossOrigin(){}setCrossOrigin(){}error(r){return void 0!==r&&(this.error_=new Mn(r),this.trigger("error")),this.error_}played(){return this.hasStarted_?as(0,0):as()}play(){}setScrubbing(r){}scrubbing(){}setCurrentTime(r){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){fi.names.forEach(r=>{const a=()=>{this.trigger(`${r}trackchange`)},c=this[fi[r].getterName]();c.addEventListener("removetrack",a),c.addEventListener("addtrack",a),this.on("dispose",()=>{c.removeEventListener("removetrack",a),c.removeEventListener("addtrack",a)})})}addWebVttScript_(){if(!M().WebVTT)if(z().body.contains(this.el())){if(!this.options_["vtt.js"]&&kr(Te())&&Object.keys(Te()).length>0)return void this.trigger("vttjsloaded");const r=z().createElement("script");r.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",r.onload=()=>{this.trigger("vttjsloaded")},r.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{r.onload=null,r.onerror=null}),M().WebVTT=!0,this.el().parentNode.appendChild(r)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const r=this.textTracks(),s=this.remoteTextTracks(),a=y=>r.addTrack(y.track),c=y=>r.removeTrack(y.track);s.on("addtrack",a),s.on("removetrack",c),this.addWebVttScript_();const h=()=>this.trigger("texttrackchange"),f=()=>{h();for(let y=0;y<r.length;y++){const T=r[y];T.removeEventListener("cuechange",h),"showing"===T.mode&&T.addEventListener("cuechange",h)}};f(),r.addEventListener("change",f),r.addEventListener("addtrack",f),r.addEventListener("removetrack",f),this.on("dispose",function(){s.off("addtrack",a),s.off("removetrack",c),r.removeEventListener("change",f),r.removeEventListener("addtrack",f),r.removeEventListener("removetrack",f);for(let y=0;y<r.length;y++)r[y].removeEventListener("cuechange",h)})}addTextTrack(r,s,a){if(!r)throw new Error("TextTrack kind is required but was not provided");return function q_(u,r,s,a,c={}){const h=u.textTracks();c.kind=r,s&&(c.label=s),a&&(c.language=a),c.tech=u;const f=new Or.text.TrackClass(c);return h.addTrack(f),f}(this,r,s,a)}createRemoteTextTrack(r){const s=Xt(r,{tech:this});return new Ja.remoteTextEl.TrackClass(s)}addRemoteTextTrack(r={},s){const a=this.createRemoteTextTrack(r);return"boolean"!=typeof s&&(s=!1),this.remoteTextTrackEls().addTrackElement_(a),this.remoteTextTracks().addTrack(a.track),!1===s&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(a.track)),a}removeRemoteTextTrack(r){const s=this.remoteTextTrackEls().getTrackElementByTrack_(r);this.remoteTextTrackEls().removeTrackElement_(s),this.remoteTextTracks().removeTrack(r),this.autoRemoteTextTracks_.removeTrack(r)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(r){const s=tr();return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",()=>{this.queuedHanders_.has(s)&&(this.queuedHanders_.delete(s),r())})):this.requestNamedAnimationFrame(s,r),s}cancelVideoFrameCallback(r){this.queuedHanders_.has(r)?this.queuedHanders_.delete(r):this.cancelNamedAnimationFrame(r)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(r){}overrideNativeVideoTracks(r){}canPlayType(r){return""}static canPlayType(r){return""}static canPlaySource(r,s){return Rt.canPlayType(r.type)}static isTech(r){return r.prototype instanceof Rt||r instanceof Rt||r===Rt}static registerTech(r,s){if(Rt.techs_||(Rt.techs_={}),!Rt.isTech(s))throw new Error(`Tech ${r} must be a Tech`);if(!Rt.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Rt.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return r=Xn(r),Rt.techs_[r]=s,Rt.techs_[Qc(r)]=s,"Tech"!==r&&Rt.defaultTechOrder_.push(r),s}static getTech(r){if(r){if(Rt.techs_&&Rt.techs_[r])return Rt.techs_[r];if(r=Xn(r),M()&&M().videojs&&M().videojs[r])return Ht.warn(`The ${r} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),M().videojs[r]}}}Or.names.forEach(function(u){const r=Or[u];Rt.prototype[r.getterName]=function(){return this[r.privateName]=this[r.privateName]||new r.ListClass,this[r.privateName]}}),Rt.prototype.featuresVolumeControl=!0,Rt.prototype.featuresMuteControl=!0,Rt.prototype.featuresFullscreenResize=!1,Rt.prototype.featuresPlaybackRate=!1,Rt.prototype.featuresProgressEvents=!1,Rt.prototype.featuresSourceset=!1,Rt.prototype.featuresTimeupdateEvents=!1,Rt.prototype.featuresNativeTextTracks=!1,Rt.prototype.featuresVideoFrameCallback=!1,Rt.withSourceHandlers=function(u){u.registerSourceHandler=function(s,a){let c=u.sourceHandlers;c||(c=u.sourceHandlers=[]),void 0===a&&(a=c.length),c.splice(a,0,s)},u.canPlayType=function(s){const a=u.sourceHandlers||[];let c;for(let h=0;h<a.length;h++)if(c=a[h].canPlayType(s),c)return c;return""},u.selectSourceHandler=function(s,a){const c=u.sourceHandlers||[];let h;for(let f=0;f<c.length;f++)if(h=c[f].canHandleSource(s,a),h)return c[f];return null},u.canPlaySource=function(s,a){const c=u.selectSourceHandler(s,a);return c?c.canHandleSource(s,a):""},["seekable","seeking","duration"].forEach(function(s){const a=this[s];"function"==typeof a&&(this[s]=function(){return this.sourceHandler_&&this.sourceHandler_[s]?this.sourceHandler_[s].apply(this.sourceHandler_,arguments):a.apply(this,arguments)})},u.prototype),u.prototype.setSource=function(s){let a=u.selectSourceHandler(s,this.options_);a||(u.nativeSourceHandler?a=u.nativeSourceHandler:Ht.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),a!==u.nativeSourceHandler&&(this.currentSource_=s),this.sourceHandler_=a.handleSource(s,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},u.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},ue.registerComponent("Tech",Rt),Rt.registerTech("Tech",Rt),Rt.defaultTechOrder_=[];const Qo={},ls={},ll={};function G_(u,r,s){u.setTimeout(()=>nr(r,Qo[r.type],s,u),1)}function id(u,r,s,a=null){const c="call"+Xn(s),h=u.reduce(sd(c),a),f=h===ll,y=f?null:r[s](h);return function yn(u,r,s,a){for(let c=u.length-1;c>=0;c--){const h=u[c];h[r]&&h[r](a,s)}}(u,s,y,f),y}const X_={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},cs={setCurrentTime:1,setMuted:1,setVolume:1},Ef={play:1,pause:1};function sd(u){return(r,s)=>r===ll?ll:s[u]?s[u](r):r}function nr(u={},r=[],s,a,c=[],h=!1){const[f,...y]=r;if("string"==typeof f)nr(u,Qo[f],s,a,c,h);else if(f){const T=function od(u,r){const s=ls[u.id()];let a=null;if(null==s)return a=r(u),ls[u.id()]=[[r,a]],a;for(let c=0;c<s.length;c++){const[h,f]=s[c];h===r&&(a=f)}return null===a&&(a=r(u),s.push([r,a])),a}(a,f);if(!T.setSource)return c.push(T),nr(u,y,s,a,c,h);T.setSource(Object.assign({},u),function(E,x){if(E)return nr(u,y,s,a,c,h);c.push(T),nr(x,u.type===x.type?y:Qo[x.type],s,a,c,h)})}else y.length?nr(u,y,s,a,c,h):h?s(u,c):nr(u,Qo["*"],s,a,c,!0)}const K_={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},cl=function(u=""){const r=ul(u);return K_[r.toLowerCase()]||""},Jr=function(u){if(Array.isArray(u)){let r=[];u.forEach(function(s){s=Jr(s),Array.isArray(s)?r=r.concat(s):ui(s)&&r.push(s)}),u=r}else u="string"==typeof u&&u.trim()?[bm({src:u})]:ui(u)&&"string"==typeof u.src&&u.src&&u.src.trim()?[bm(u)]:[];return u};function bm(u){if(!u.type){const r=cl(u.src);r&&(u.type=r)}return u}const Tm=Zr?10009:qc?461:8,pi={codes:{play:415,pause:19,ff:417,rw:412,back:Tm},names:{415:"play",19:"pause",417:"ff",412:"rw",[Tm]:"back"},isEventKey(u,r){return r=r.toLowerCase(),!(!this.names[u.keyCode]||this.names[u.keyCode]!==r)},getEventName(u){return this.names[u.keyCode]?this.names[u.keyCode]:this.codes[u.code]?this.names[this.codes[u.code]]:null}};class Q_ extends Hr{constructor(r){super(),this.player_=r,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(r){const s=r.originalEvent?r.originalEvent:r;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(s.key)){if(this.isPaused_)return;s.preventDefault();const a=s.key.substring(5).toLowerCase();this.move(a)}else if(pi.isEventKey(s,"play")||pi.isEventKey(s,"pause")||pi.isEventKey(s,"ff")||pi.isEventKey(s,"rw")){s.preventDefault();const a=pi.getEventName(s);this.performMediaAction_(a)}else pi.isEventKey(s,"Back")&&r.target&&r.target.closeable()&&(s.preventDefault(),r.target.close())}performMediaAction_(r){if(this.player_)switch(r){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+5);break;case"rw":this.userSeek_(this.player_.currentTime()-5)}}userSeek_(r){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(r)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(r){const s=r.relatedTarget;let a=null;const c=this.getCurrentComponent(r.target);s&&(a=!!s.closest(".video-js"),s.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!r.currentTarget.contains(r.relatedTarget)&&!a||!s)&&(c&&"CloseButton"===c.name()?this.refocusComponent():(this.pause(),c&&c.el()&&(this.lastFocusedComponent_=c)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const s=[];function a(c){for(const h of c)h.hasOwnProperty("el_")&&h.getIsFocusable()&&h.getIsAvailableToBeFocused(h.el())&&s.push(h),h.hasOwnProperty("children_")&&h.children_.length>0&&a(h.children_)}return this.player_.children_.forEach(c=>{if(c.hasOwnProperty("el_")){if(c.getIsFocusable&&c.getIsAvailableToBeFocused&&c.getIsFocusable()&&c.getIsAvailableToBeFocused(c.el()))return void s.push(c);c.hasOwnProperty("children_")&&c.children_.length>0?a(c.children_):c.hasOwnProperty("items")&&c.items.length>0?a(c.items):this.findSuitableDOMChild(c)&&s.push(c)}if("ErrorDisplay"===c.name_&&c.opened_){const h=c.el_.querySelector(".vjs-errors-ok-button-container");h&&h.querySelectorAll("button").forEach((y,T)=>{s.push({name:()=>"ModalButton"+(T+1),el:()=>y,getPositions:()=>{const E=y.getBoundingClientRect();return{boundingClientRect:{x:E.x,y:E.y,width:E.width,height:E.height,top:E.top,right:E.right,bottom:E.bottom,left:E.left},center:{x:E.left+E.width/2,y:E.top+E.height/2,width:0,height:0,top:E.top+E.height/2,right:E.left+E.width/2,bottom:E.top+E.height/2,left:E.left+E.width/2}}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:E=>!0,focus:()=>y.focus()})})}}),this.focusableComponents=s,this.focusableComponents}findSuitableDOMChild(r){return r.el()?function s(a){if(r.getIsFocusable(a)&&r.getIsAvailableToBeFocused(a))return a;for(let c=0;c<a.children.length;c++){const f=s(a.children[c]);if(f)return f}return null}(r.el()):null}getCurrentComponent(r){this.updateFocusableComponents();const s=r||document.activeElement;if(this.focusableComponents.length)for(const a of this.focusableComponents)if(a.el()===s)return a}add(r){const s=[...this.focusableComponents];r.hasOwnProperty("el_")&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())&&s.push(r),this.focusableComponents=s,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(r){for(let s=0;s<this.focusableComponents.length;s++)if(this.focusableComponents[s].name()===r.name())return this.focusableComponents.splice(s,1),void this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(r){const s=this.getCurrentComponent();if(!s)return;const a=s.getPositions(),c=this.focusableComponents.filter(f=>f!==s&&this.isInDirection_(a.boundingClientRect,f.getPositions().boundingClientRect,r)),h=this.findBestCandidate_(a.center,c,r);h?this.focus(h):this.trigger({type:"endOfFocusableComponents",direction:r,focusedComponent:s})}findBestCandidate_(r,s,a){let c=1/0,h=null;for(const f of s){const y=f.getPositions().center,T=this.calculateDistance_(r,y,a);T<c&&(c=T,h=f)}return h}isInDirection_(r,s,a){switch(a){case"right":return s.left>=r.right;case"left":return s.right<=r.left;case"down":return s.top>=r.bottom;case"up":return s.bottom<=r.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let r=0;r<this.focusableComponents.length;r++)if(this.focusableComponents[r].name()===this.lastFocusedComponent_.name())return void this.focus(this.focusableComponents[r])}else this.focus(this.updateFocusableComponents()[0])}focus(r){"object"==typeof r&&(r.getIsAvailableToBeFocused(r.el())?r.focus():this.findSuitableDOMChild(r)&&this.findSuitableDOMChild(r).focus())}calculateDistance_(r,s,a){const c=Math.abs(r.x-s.x),h=Math.abs(r.y-s.y);let f;switch(a){case"right":case"left":f=c+100*h;break;case"up":f=2*h+.5*c;break;case"down":f=5*h+c;break;default:f=c+h}return f}searchForTrackSelect_(){const r=this;for(const s of r.updateFocusableComponents())if("TextTrackSelect"===s.constructor.name){r.focus(s);break}}}ue.registerComponent("MediaLoader",class Cm extends ue{constructor(r,s,a){if(super(r,Xt({createEl:!1},s),a),s.playerOptions.sources&&0!==s.playerOptions.sources.length)r.src(s.playerOptions.sources);else for(let h=0,f=s.playerOptions.techOrder;h<f.length;h++){const y=Xn(f[h]);let T=Rt.getTech(y);if(y||(T=ue.getComponent(y)),T&&T.isSupported()){r.loadTech_(y);break}}}});class dl extends ue{constructor(r,s){super(r,s),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=a=>this.handleMouseOver(a),this.handleMouseOut_=a=>this.handleMouseOut(a),this.handleClick_=a=>this.handleClick(a),this.handleKeyDown_=a=>this.handleKeyDown(a),this.emitTapEvents(),this.enable()}createEl(r="div",s={},a={}){s=Object.assign({className:this.buildCSSClass(),tabIndex:0},s),"button"===r&&Ht.error(`Creating a ClickableComponent with an HTML element of ${r} is not supported; use a Button instead.`),a=Object.assign({role:"button"},a),this.tabIndex_=s.tabIndex;const c=_t(r,s,a);return this.player_.options_.experimentalSvgIcons||c.appendChild(_t("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(c),c}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(r){return this.controlTextEl_=_t("span",{className:"vjs-control-text"},{"aria-live":"polite"}),r&&r.appendChild(this.controlTextEl_),this.controlText(this.controlText_,r),this.controlTextEl_}controlText(r,s=this.el()){if(void 0===r)return this.controlText_||"Need Text";const a=this.localize(r);this.controlText_=r,Pr(this.controlTextEl_,a),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&s.setAttribute("title",a)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(r){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(r){" "===r.key||"Enter"===r.key?(r.preventDefault(),r.stopPropagation(),this.trigger("click")):super.handleKeyDown(r)}}ue.registerComponent("ClickableComponent",dl);class ad extends dl{constructor(r,s){super(r,s),this.update(),this.update_=a=>this.update(a),r.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return _t("div",{className:"vjs-poster"})}crossOrigin(r){if(typeof r>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===r||"anonymous"===r||"use-credentials"===r?this.$("img")&&(this.$("img").crossOrigin=r):this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${r}"`)}update(r){const s=this.player().poster();this.setSrc(s),s?this.show():this.hide()}setSrc(r){r?(this.$("img")||this.el_.appendChild(_t("picture",{className:"vjs-poster",tabIndex:-1},{},_t("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=r):this.el_.textContent=""}handleClick(r){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?zi(this.player_.play()):this.player_.pause())}}ad.prototype.crossorigin=ad.prototype.crossOrigin,ue.registerComponent("PosterImage",ad);const xi="#222",Sm={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Em(u,r){let s;if(4===u.length)s=u[1]+u[1]+u[2]+u[2]+u[3]+u[3];else{if(7!==u.length)throw new Error("Invalid color code provided, "+u+"; must be formatted as e.g. #f0e or #f604e2.");s=u.slice(1)}return"rgba("+parseInt(s.slice(0,2),16)+","+parseInt(s.slice(2,4),16)+","+parseInt(s.slice(4,6),16)+","+r+")"}function hl(u,r,s){try{u.style[r]=s}catch{return}}function Dm(u){return u?`${u}px`:""}ue.registerComponent("TextTrackDisplay",class Z_ extends ue{constructor(r,s,a){super(r,s,a);const h=f=>{this.updateDisplayOverlay(),this.updateDisplay(f)};r.on("loadstart",f=>this.toggleDisplay(f)),r.on("texttrackchange",f=>this.updateDisplay(f)),r.on("loadedmetadata",f=>{this.updateDisplayOverlay(),this.preselectTrack(f)}),r.ready(Ft(this,function(){if(r.tech_&&r.tech_.featuresNativeTextTracks)return void this.hide();r.on("fullscreenchange",h),r.on("playerresize",h);const f=M().screen.orientation||M(),y=M().screen.orientation?"change":"orientationchange";f.addEventListener(y,h),r.on("dispose",()=>f.removeEventListener(y,h));const T=this.options_.playerOptions.tracks||[];for(let E=0;E<T.length;E++)this.player_.addRemoteTextTrack(T[E],!0);this.preselectTrack()}))}preselectTrack(){const r={captions:1,subtitles:1},s=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage;let c,h,f;for(let y=0;y<s.length;y++){const T=s[y];a&&a.enabled&&a.language&&a.language===T.language&&T.kind in r?T.kind===a.kind?f=T:f||(f=T):a&&!a.enabled?(f=null,c=null,h=null):T.default&&("descriptions"!==T.kind||c?T.kind in r&&!h&&(h=T):c=T)}f?f.mode="showing":h?h.mode="showing":c&&(c.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof M().WebVTT&&M().WebVTT.processCues(M(),[],this.el_)}updateDisplay(){const r=this.player_.textTracks(),s=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),s){const f=[];for(let y=0;y<r.length;++y){const T=r[y];"showing"===T.mode&&f.push(T)}return void this.updateForTrack(f)}let a=null,c=null,h=r.length;for(;h--;){const f=r[h];"showing"===f.mode&&("descriptions"===f.kind?a=f:c=f)}c?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}updateDisplayOverlay(){if(!this.player_.videoHeight()||!M().CSS.supports("inset-inline: 10px"))return;const r=this.player_.currentWidth(),s=this.player_.currentHeight(),a=r/s,c=this.player_.videoWidth()/this.player_.videoHeight();let h=0,f=0;Math.abs(a-c)>.1&&(a>c?h=Math.round((r-s*c)/2):f=Math.round((s-r/c)/2)),hl(this.el_,"insetInline",Dm(h)),hl(this.el_,"insetBlock",Dm(f))}updateDisplayState(r){const s=this.player_.textTrackSettings.getValues(),a=r.activeCues;let c=a.length;for(;c--;){const h=a[c];if(!h)continue;const f=h.displayState;if(s.color&&(f.firstChild.style.color=s.color),s.textOpacity&&hl(f.firstChild,"color",Em(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(f.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&hl(f.firstChild,"backgroundColor",Em(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?hl(f,"backgroundColor",Em(s.windowColor,s.windowOpacity)):f.style.backgroundColor=s.windowColor),s.edgeStyle&&("dropshadow"===s.edgeStyle?f.firstChild.style.textShadow=`2px 2px 3px ${xi}, 2px 2px 4px ${xi}, 2px 2px 5px ${xi}`:"raised"===s.edgeStyle?f.firstChild.style.textShadow=`1px 1px ${xi}, 2px 2px ${xi}, 3px 3px ${xi}`:"depressed"===s.edgeStyle?f.firstChild.style.textShadow=`1px 1px #ccc, 0 1px #ccc, -1px -1px ${xi}, 0 -1px ${xi}`:"uniform"===s.edgeStyle&&(f.firstChild.style.textShadow=`0 0 4px ${xi}, 0 0 4px ${xi}, 0 0 4px ${xi}, 0 0 4px ${xi}`)),s.fontPercent&&1!==s.fontPercent){const y=M().parseFloat(f.style.fontSize);f.style.fontSize=y*s.fontPercent+"px",f.style.height="auto",f.style.top="auto"}s.fontFamily&&"default"!==s.fontFamily&&("small-caps"===s.fontFamily?f.firstChild.style.fontVariant="small-caps":f.firstChild.style.fontFamily=Sm[s.fontFamily])}}updateForTrack(r){if(Array.isArray(r)||(r=[r]),"function"!=typeof M().WebVTT||r.every(a=>!a.activeCues))return;const s=[];for(let a=0;a<r.length;++a){const c=r[a];for(let h=0;h<c.activeCues.length;++h)s.push(c.activeCues[h])}M().WebVTT.processCues(M(),s,this.el_);for(let a=0;a<r.length;++a){const c=r[a];for(let h=0;h<c.activeCues.length;++h){const f=c.activeCues[h].displayState;Wn(f,"vjs-text-track-cue","vjs-text-track-cue-"+(c.language?c.language:a)),c.language&&Tr(f,"lang",c.language)}this.player_.textTrackSettings&&this.updateDisplayState(c)}}}),ue.registerComponent("LoadingSpinner",class wm extends ue{createEl(){const r=this.player_.isAudio(),s=this.localize(r?"Audio Player":"Video Player"),a=_t("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[s])}),c=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return c.appendChild(a),c}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}});class Kn extends dl{createEl(r,s={},a={}){const c=_t("button",s=Object.assign({className:this.buildCSSClass()},s),a=Object.assign({type:"button"},a));return this.player_.options_.experimentalSvgIcons||c.appendChild(_t("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(c),c}addChild(r,s={}){return Ht.warn(`Adding an actionable (user controllable) child to a Button (${this.constructor.name}) is not supported; use a ClickableComponent instead.`),ue.prototype.addChild.call(this,r,s)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(r){" "!==r.key&&"Enter"!==r.key?super.handleKeyDown(r):r.stopPropagation()}}ue.registerComponent("Button",Kn);class xm extends Kn{constructor(r,s){super(r,s),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",a=>this.handleMouseDown(a))}buildCSSClass(){return"vjs-big-play-button"}handleClick(r){const s=this.player_.play();if(this.mouseused_&&"clientX"in r&&"clientY"in r)return zi(s),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const a=this.player_.getChild("controlBar"),c=a&&a.getChild("playToggle");if(!c)return void this.player_.tech(!0).focus();const h=()=>c.focus();Ya(s)?s.then(h,()=>{}):this.setTimeout(h,1)}handleKeyDown(r){this.mouseused_=!1,super.handleKeyDown(r)}handleMouseDown(r){this.mouseused_=!0}}xm.prototype.controlText_="Play Video",ue.registerComponent("BigPlayButton",xm),ue.registerComponent("CloseButton",class J_ extends Kn{constructor(r,s){super(r,s),this.setIcon("cancel"),this.controlText(s&&s.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(r){this.trigger({type:"close",bubbles:!1})}handleKeyDown(r){"Escape"===r.key?(r.preventDefault(),r.stopPropagation(),this.trigger("click")):super.handleKeyDown(r)}});class Im extends Kn{constructor(r,s={}){super(r,s),s.replay=void 0===s.replay||s.replay,this.setIcon("play"),this.on(r,"play",a=>this.handlePlay(a)),this.on(r,"pause",a=>this.handlePause(a)),s.replay&&this.on(r,"ended",a=>this.handleEnded(a))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(r){this.player_.paused()?zi(this.player_.play()):this.player_.pause()}handleSeeked(r){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(r):this.handlePlay(r)}handlePlay(r){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(r){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(r){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",s=>this.handleSeeked(s))}}Im.prototype.controlText_="Play",ue.registerComponent("PlayToggle",Im);class tu extends ue{constructor(r,s){super(r,s),this.on(r,["timeupdate","ended","seeking"],a=>this.update(a)),this.updateTextNode_()}createEl(){const r=this.buildCSSClass(),s=super.createEl("div",{className:`${r} vjs-time-control vjs-control`}),a=_t("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}\xa0`},{role:"presentation"});return s.appendChild(a),this.contentEl_=_t("span",{className:`${r}-display`},{role:"presentation"}),s.appendChild(this.contentEl_),s}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(r){!this.player_.options_.enableSmoothSeeking&&"seeking"===r.type||this.updateContent(r)}updateTextNode_(r=0){r=Ln(r),this.formattedTime_!==r&&(this.formattedTime_=r,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let s=this.textNode_;s&&this.contentEl_.firstChild!==s&&(s=null,Ht.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=z().createTextNode(this.formattedTime_),this.textNode_&&(s?this.contentEl_.replaceChild(this.textNode_,s):this.contentEl_.appendChild(this.textNode_))}))}updateContent(r){}}tu.prototype.labelText_="Time",tu.prototype.controlText_="Time",ue.registerComponent("TimeDisplay",tu);class xf extends tu{buildCSSClass(){return"vjs-current-time"}updateContent(r){let s;s=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(s)}}xf.prototype.labelText_="Current Time",xf.prototype.controlText_="Current Time",ue.registerComponent("CurrentTimeDisplay",xf);class ye extends tu{constructor(r,s){super(r,s);const a=c=>this.updateContent(c);this.on(r,"durationchange",a),this.on(r,"loadstart",a),this.on(r,"loadedmetadata",a)}buildCSSClass(){return"vjs-duration"}updateContent(r){const s=this.player_.duration();this.updateTextNode_(s)}}ye.prototype.labelText_="Duration",ye.prototype.controlText_="Duration",ue.registerComponent("DurationDisplay",ye),ue.registerComponent("TimeDivider",class Yt extends ue{createEl(){const r=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),s=super.createEl("div"),a=super.createEl("span",{textContent:"/"});return s.appendChild(a),r.appendChild(s),r}});class Gi extends tu{constructor(r,s){super(r,s),this.on(r,"durationchange",a=>this.updateContent(a))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const r=super.createEl();return!1!==this.options_.displayNegative&&r.insertBefore(_t("span",{},{"aria-hidden":!0},"-"),this.contentEl_),r}updateContent(r){if("number"!=typeof this.player_.duration())return;let s;s=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(s)}}Gi.prototype.labelText_="Remaining Time",Gi.prototype.controlText_="Remaining Time",ue.registerComponent("RemainingTimeDisplay",Gi),ue.registerComponent("LiveDisplay",class Os extends ue{constructor(r,s){super(r,s),this.updateShowing(),this.on(this.player(),"durationchange",a=>this.updateShowing(a))}createEl(){const r=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=_t("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(_t("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}\xa0`})),this.contentEl_.appendChild(z().createTextNode(this.localize("LIVE"))),r.appendChild(this.contentEl_),r}dispose(){this.contentEl_=null,super.dispose()}updateShowing(r){this.player().duration()===1/0?this.show():this.hide()}});class Cr extends Kn{constructor(r,s){super(r,s),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=a=>this.updateLiveEdgeStatus(a),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const r=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",r),this.textEl_=_t("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),r.appendChild(this.textEl_),r}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function nu(u,r,s){return u=Number(u),Math.min(s,Math.max(r,isNaN(u)?r:u))}Cr.prototype.controlText_="Seek to live, currently playing live",ue.registerComponent("SeekToLive",Cr);var fl=Object.freeze({__proto__:null,clamp:nu});class Ii extends ue{constructor(r,s){super(r,s),this.handleMouseDown_=a=>this.handleMouseDown(a),this.handleMouseUp_=a=>this.handleMouseUp(a),this.handleKeyDown_=a=>this.handleKeyDown(a),this.handleClick_=a=>this.handleClick(a),this.handleMouseMove_=a=>this.handleMouseMove(a),this.update_=a=>this.update(a),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const r=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(r,"mousemove",this.handleMouseMove_),this.off(r,"mouseup",this.handleMouseUp_),this.off(r,"touchmove",this.handleMouseMove_),this.off(r,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(r,s={},a={}){return s.className=s.className+" vjs-slider",s=Object.assign({tabIndex:0},s),a=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},a),super.createEl(r,s,a)}handleMouseDown(r){const s=this.bar.el_.ownerDocument;"mousedown"===r.type&&r.preventDefault(),"touchstart"===r.type&&!Vi&&r.preventDefault(),mf(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(s,"mousemove",this.handleMouseMove_),this.on(s,"mouseup",this.handleMouseUp_),this.on(s,"touchmove",this.handleMouseMove_),this.on(s,"touchend",this.handleMouseUp_),this.handleMouseMove(r,!0)}handleMouseMove(r){}handleMouseUp(r){const s=this.bar.el_.ownerDocument;il(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(s,"mousemove",this.handleMouseMove_),this.off(s,"mouseup",this.handleMouseUp_),this.off(s,"touchmove",this.handleMouseMove_),this.off(s,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const r=this.getProgress();return r===this.progress_||(this.progress_=r,this.requestNamedAnimationFrame("Slider#update",()=>{const s=this.vertical()?"height":"width";this.bar.el().style[s]=(100*r).toFixed(2)+"%"})),r}getProgress(){return Number(nu(this.getPercent(),0,1).toFixed(4))}calculateDistance(r){const s=Cn(this.el_,r);return this.vertical()?s.y:s.x}handleKeyDown(r){const s=this.options_.playerOptions.spatialNavigation,c=s&&s.horizontalSeek;s&&s.enabled?c&&"ArrowLeft"===r.key||!c&&"ArrowDown"===r.key?(r.preventDefault(),r.stopPropagation(),this.stepBack()):c&&"ArrowRight"===r.key||!c&&"ArrowUp"===r.key?(r.preventDefault(),r.stopPropagation(),this.stepForward()):super.handleKeyDown(r):"ArrowLeft"===r.key||"ArrowDown"===r.key?(r.preventDefault(),r.stopPropagation(),this.stepBack()):"ArrowUp"===r.key||"ArrowRight"===r.key?(r.preventDefault(),r.stopPropagation(),this.stepForward()):super.handleKeyDown(r)}handleClick(r){r.stopPropagation(),r.preventDefault()}vertical(r){if(void 0===r)return this.vertical_||!1;this.vertical_=!!r,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")}}ue.registerComponent("Slider",Ii);const pl=(u,r)=>nu(u/r*100,0,100).toFixed(2)+"%";ue.registerComponent("LoadProgressBar",class If extends ue{constructor(r,s){super(r,s),this.partEls_=[],this.on(r,"progress",a=>this.update(a))}createEl(){const r=super.createEl("div",{className:"vjs-load-progress"}),s=_t("span",{className:"vjs-control-text"}),a=_t("span",{textContent:this.localize("Loaded")}),c=z().createTextNode(": ");return this.percentageEl_=_t("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),r.appendChild(s),s.appendChild(a),s.appendChild(c),s.appendChild(this.percentageEl_),r}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(r){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const s=this.player_.liveTracker,a=this.player_.buffered(),c=s&&s.isLive()?s.seekableEnd():this.player_.duration(),h=this.player_.bufferedEnd(),f=this.partEls_,y=pl(h,c);this.percent_!==y&&(this.el_.style.width=y,Pr(this.percentageEl_,y),this.percent_=y);for(let T=0;T<a.length;T++){const E=a.start(T),x=a.end(T);let P=f[T];P||(P=this.el_.appendChild(_t()),f[T]=P),(P.dataset.start!==E||P.dataset.end!==x)&&(P.dataset.start=E,P.dataset.end=x,P.style.left=pl(E,h),P.style.width=pl(x-E,h))}for(let T=f.length;T>a.length;T--)this.el_.removeChild(f[T-1]);f.length=a.length})}}),ue.registerComponent("TimeTooltip",class eb extends ue{constructor(r,s){super(r,s),this.update=wi(Ft(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(r,s,a){const c=sl(this.el_),h=qa(this.player_.el()),f=r.width*s;if(!h||!c)return;let y=r.left-h.left+f,T=r.width-f+(h.right-r.right);T||(T=r.width-f,y=f);let E=c.width/2;y<E?E+=E-y:T<E&&(E=T),E<0?E=0:E>c.width&&(E=c.width),E=Math.round(E),this.el_.style.right=`-${E}px`,this.write(a)}write(r){Pr(this.el_,r)}updateTime(r,s,a,c){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let h;const f=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const y=this.player_.liveTracker.liveWindow(),T=y-s*y;h=(T<1?"":"-")+Ln(T,y)}else h=Ln(a,f);this.update(r,s,h),c&&c()})}});class Am extends ue{constructor(r,s){super(r,s),this.setIcon("circle"),this.update=wi(Ft(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(r,s){const a=this.getChild("timeTooltip");if(!a)return;const c=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();a.updateTime(r,s,c)}}Am.prototype.options_={children:[]},!$r&&!_r&&Am.prototype.options_.children.push("timeTooltip"),ue.registerComponent("PlayProgressBar",Am);class Af extends ue{constructor(r,s){super(r,s),this.update=wi(Ft(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(r,s){const a=s*this.player_.duration();this.getChild("timeTooltip").updateTime(r,s,a,()=>{this.el_.style.left=r.width*s+"px"})}}Af.prototype.options_={children:["timeTooltip"]},ue.registerComponent("MouseTimeDisplay",Af);class ud extends Ii{constructor(r,s){super(r,s),this.setEventHandlers_()}setEventHandlers_(){this.update_=Ft(this,this.update),this.update=wi(this.update_,30),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=r=>this.enableInterval_(r),this.disableIntervalHandler_=r=>this.disableInterval_(r),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in z()&&"visibilityState"in z()&&this.on(z(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(r){"hidden"===z().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(r)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))}disableInterval_(r){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&r&&"ended"!==r.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(r){if("hidden"===z().visibilityState)return;const s=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const a=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),c=this.player_.liveTracker;let h=this.player_.duration();c&&c.isLive()&&(h=this.player_.liveTracker.liveCurrentTime()),this.percent_!==s&&(this.el_.setAttribute("aria-valuenow",(100*s).toFixed(2)),this.percent_=s),(this.currentTime_!==a||this.duration_!==h)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Ln(a,h),Ln(h,h)],"{1} of {2}")),this.currentTime_=a,this.duration_=h),this.bar&&this.bar.update(qa(this.el()),this.getProgress())}),s}userSeek_(r){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(r)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const r=this.getCurrentTime_();let s;const a=this.player_.liveTracker;return a&&a.isLive()?(s=(r-a.seekableStart())/a.liveWindow(),a.atLiveEdge()&&(s=1)):s=r/this.player_.duration(),s}handleMouseDown(r){er(r)&&(r.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(r))}handleMouseMove(r,s=!1){if(!er(r)||isNaN(this.player_.duration()))return;let a;!s&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);const c=this.calculateDistance(r),h=this.player_.liveTracker;if(h&&h.isLive()){if(c>=.99)return void h.seekToLiveEdge();const f=h.seekableStart(),y=h.liveCurrentTime();if(a=f+c*h.liveWindow(),a>=y&&(a=y),a<=f&&(a=f+.1),a===1/0)return}else a=c*this.player_.duration(),a===this.player_.duration()&&(a-=.1);this.userSeek_(a),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const r=this.getChild("mouseTimeDisplay");r&&r.show()}disable(){super.disable();const r=this.getChild("mouseTimeDisplay");r&&r.hide()}handleMouseUp(r){super.handleMouseUp(r),r&&r.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?zi(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(r){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(r){const s=this.player_.liveTracker;if(" "===r.key||"Enter"===r.key)r.preventDefault(),r.stopPropagation(),this.handleAction(r);else if("Home"===r.key)r.preventDefault(),r.stopPropagation(),this.userSeek_(0);else if("End"===r.key)r.preventDefault(),r.stopPropagation(),s&&s.isLive()?this.userSeek_(s.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(r.key)){r.preventDefault(),r.stopPropagation();const a=.1*parseInt(r.key,10);s&&s.isLive()?this.userSeek_(s.seekableStart()+s.liveWindow()*a):this.userSeek_(this.player_.duration()*a)}else"PageDown"===r.key?(r.preventDefault(),r.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):"PageUp"===r.key?(r.preventDefault(),r.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(r)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in z()&&"visibilityState"in z()&&this.off(z(),"visibilitychange",this.toggleVisibility_),super.dispose()}}ud.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!$r&&!_r&&ud.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),ue.registerComponent("SeekBar",ud);class Zo extends ue{constructor(r,s){super(r,s),this.handleMouseMove=wi(Ft(this,this.handleMouseMove),30),this.throttledHandleMouseSeek=wi(Ft(this,this.handleMouseSeek),30),this.handleMouseUpHandler_=a=>this.handleMouseUp(a),this.handleMouseDownHandler_=a=>this.handleMouseDown(a),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(r){const s=this.getChild("seekBar");if(!s)return;const a=s.getChild("playProgressBar"),c=s.getChild("mouseTimeDisplay");if(!a&&!c)return;const h=s.el(),f=sl(h);let y=Cn(h,r).x;y=nu(y,0,1),c&&c.update(f,y),a&&a.update(f,s.getProgress())}handleMouseSeek(r){const s=this.getChild("seekBar");s&&s.handleMouseMove(r)}enabled(){return this.enabled_}disable(){if(this.children().forEach(r=>r.disable&&r.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const r=this.getChild("seekBar");this.player_.scrubbing(!1),r.videoWasPlaying&&zi(this.player_.play())}}enable(){this.children().forEach(r=>r.enable&&r.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const r=this.el_.ownerDocument;this.off(r,"mousemove",this.throttledHandleMouseSeek),this.off(r,"touchmove",this.throttledHandleMouseSeek),this.off(r,"mouseup",this.handleMouseUpHandler_),this.off(r,"touchend",this.handleMouseUpHandler_)}handleMouseDown(r){const s=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseDown(r),this.on(s,"mousemove",this.throttledHandleMouseSeek),this.on(s,"touchmove",this.throttledHandleMouseSeek),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)}handleMouseUp(r){const s=this.getChild("seekBar");s&&s.handleMouseUp(r),this.removeListenersAddedOnMousedownAndTouchstart()}}Zo.prototype.options_={children:["seekBar"]},ue.registerComponent("ProgressControl",Zo);class hs extends Kn{constructor(r,s){super(r,s),this.setIcon("picture-in-picture-enter"),this.on(r,["enterpictureinpicture","leavepictureinpicture"],a=>this.handlePictureInPictureChange(a)),this.on(r,["disablepictureinpicturechanged","loadedmetadata"],a=>this.handlePictureInPictureEnabledChange(a)),this.on(r,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){"audio"===this.player_.currentType().substring(0,5)||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){z().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in M()?this.enable():this.disable()}handlePictureInPictureChange(r){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(r){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){"function"==typeof z().exitPictureInPicture&&super.show()}}hs.prototype.controlText_="Picture-in-Picture",ue.registerComponent("PictureInPictureToggle",hs);class Mm extends Kn{constructor(r,s){super(r,s),this.setIcon("fullscreen-enter"),this.on(r,"fullscreenchange",a=>this.handleFullscreenChange(a)),!1===z()[r.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(r){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(r){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Mm.prototype.controlText_="Fullscreen",ue.registerComponent("FullscreenToggle",Mm),ue.registerComponent("VolumeLevel",class tb extends ue{createEl(){const r=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",r),r.appendChild(super.createEl("span",{className:"vjs-control-text"})),r}}),ue.registerComponent("VolumeLevelTooltip",class nb extends ue{constructor(r,s){super(r,s),this.update=wi(Ft(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(r,s,a,c){if(!a){const h=qa(this.el_),f=qa(this.player_.el()),y=r.width*s;if(!f||!h)return;const T=r.left-f.left+y,E=r.width-y+(f.right-r.right);let x=h.width/2;T<x?x+=x-T:E<x&&(x=E),x<0?x=0:x>h.width&&(x=h.width),this.el_.style.right=`-${x}px`}this.write(`${c}%`)}write(r){Pr(this.el_,r)}updateVolume(r,s,a,c,h){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(r,s,a,c.toFixed(0)),h&&h()})}});class ld extends ue{constructor(r,s){super(r,s),this.update=wi(Ft(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(r,s,a){const c=100*s;this.getChild("volumeLevelTooltip").updateVolume(r,s,a,c,()=>{a?this.el_.style.bottom=r.height*s+"px":this.el_.style.left=r.width*s+"px"})}}ld.prototype.options_={children:["volumeLevelTooltip"]},ue.registerComponent("MouseVolumeLevelDisplay",ld);class ru extends Ii{constructor(r,s){super(r,s),this.on("slideractive",a=>this.updateLastVolume_(a)),this.on(r,"volumechange",a=>this.updateARIAAttributes(a)),r.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(r){er(r)&&super.handleMouseDown(r)}handleMouseMove(r){const s=this.getChild("mouseVolumeLevelDisplay");if(s){const a=this.el(),c=qa(a),h=this.vertical();let f=Cn(a,r);f=h?f.y:f.x,f=nu(f,0,1),s.update(c,f,h)}er(r)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(r)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(r){const s=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",s),this.el_.setAttribute("aria-valuetext",s+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const r=this.player_.volume();this.one("sliderinactive",()=>{0===this.player_.volume()&&this.player_.lastVolume_(r)})}}ru.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!$r&&!_r&&ru.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),ru.prototype.playerEvent="volumechange",ue.registerComponent("VolumeBar",ru);class Mf extends ue{constructor(r,s={}){s.vertical=s.vertical||!1,(typeof s.volumeBar>"u"||kr(s.volumeBar))&&(s.volumeBar=s.volumeBar||{},s.volumeBar.vertical=s.vertical),super(r,s),function(u,r){r.tech_&&!r.tech_.featuresVolumeControl&&u.addClass("vjs-hidden"),u.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?u.removeClass("vjs-hidden"):u.addClass("vjs-hidden")})}(this,r),this.throttledHandleMouseMove=wi(Ft(this,this.handleMouseMove),30),this.handleMouseUpHandler_=a=>this.handleMouseUp(a),this.on("mousedown",a=>this.handleMouseDown(a)),this.on("touchstart",a=>this.handleMouseDown(a)),this.on("mousemove",a=>this.handleMouseMove(a)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let r="vjs-volume-horizontal";return this.options_.vertical&&(r="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${r}`})}handleMouseDown(r){const s=this.el_.ownerDocument;this.on(s,"mousemove",this.throttledHandleMouseMove),this.on(s,"touchmove",this.throttledHandleMouseMove),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)}handleMouseUp(r){const s=this.el_.ownerDocument;this.off(s,"mousemove",this.throttledHandleMouseMove),this.off(s,"touchmove",this.throttledHandleMouseMove),this.off(s,"mouseup",this.handleMouseUpHandler_),this.off(s,"touchend",this.handleMouseUpHandler_)}handleMouseMove(r){this.volumeBar.handleMouseMove(r)}}Mf.prototype.options_={children:["volumeBar"]},ue.registerComponent("VolumeControl",Mf);class Pm extends Kn{constructor(r,s){super(r,s),function(u,r){r.tech_&&!r.tech_.featuresMuteControl&&u.addClass("vjs-hidden"),u.on(r,"loadstart",function(){r.tech_.featuresMuteControl?u.removeClass("vjs-hidden"):u.addClass("vjs-hidden")})}(this,r),this.on(r,["loadstart","volumechange"],a=>this.update(a))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(r){const s=this.player_.volume(),a=this.player_.lastVolume_();0===s?(this.player_.volume(a<.1?.1:a),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())}update(r){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const r=this.player_.volume();let s=3;this.setIcon("volume-high"),$r&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===r||this.player_.muted()?(this.setIcon("volume-mute"),s=0):r<.33?(this.setIcon("volume-low"),s=1):r<.67&&(this.setIcon("volume-medium"),s=2),xr(this.el_,[0,1,2,3].reduce((a,c)=>a+`${c?" ":""}vjs-vol-${c}`,"")),Wn(this.el_,`vjs-vol-${s}`)}updateControlText_(){const s=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==s&&this.controlText(s)}}Pm.prototype.controlText_="Mute",ue.registerComponent("MuteToggle",Pm);class Pf extends ue{constructor(r,s={}){s.inline=!(typeof s.inline<"u")||s.inline,(typeof s.volumeControl>"u"||kr(s.volumeControl))&&(s.volumeControl=s.volumeControl||{},s.volumeControl.vertical=!s.inline),super(r,s),this.handleKeyPressHandler_=a=>this.handleKeyPress(a),this.on(r,["loadstart"],a=>this.volumePanelState_(a)),this.on(this.muteToggle,"keyup",a=>this.handleKeyPress(a)),this.on(this.volumeControl,"keyup",a=>this.handleVolumeControlKeyUp(a)),this.on("keydown",a=>this.handleKeyPress(a)),this.on("mouseover",a=>this.handleMouseOver(a)),this.on("mouseout",a=>this.handleMouseOut(a)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let r="vjs-volume-panel-horizontal";return this.options_.inline||(r="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${r}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(r){"Escape"===r.key&&this.muteToggle.focus()}handleMouseOver(r){this.addClass("vjs-hover"),Hn(z(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(r){this.removeClass("vjs-hover"),lr(z(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(r){"Escape"===r.key&&this.handleMouseOut()}}Pf.prototype.options_={children:["muteToggle","volumeControl"]},ue.registerComponent("VolumePanel",Pf);class cd extends Kn{constructor(r,s){super(r,s),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(r.language())])),this.show()):this.hide()}getSkipForwardTime(){const r=this.options_.playerOptions;return r.controlBar&&r.controlBar.skipButtons&&r.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(r){if(isNaN(this.player_.duration()))return;const s=this.player_.currentTime(),a=this.player_.liveTracker,c=a&&a.isLive()?a.seekableEnd():this.player_.duration();let h;h=s+this.skipTime<=c?s+this.skipTime:c,this.player_.currentTime(h)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}cd.prototype.controlText_="Skip Forward",ue.registerComponent("SkipForward",cd);class Of extends Kn{constructor(r,s){super(r,s),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(r.language())])),this.show()):this.hide()}getSkipBackwardTime(){const r=this.options_.playerOptions;return r.controlBar&&r.controlBar.skipButtons&&r.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(r){const s=this.player_.currentTime(),a=this.player_.liveTracker,c=a&&a.isLive()&&a.seekableStart();let h;h=c&&s-this.skipTime<=c?c:s>=this.skipTime?s-this.skipTime:0,this.player_.currentTime(h)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}Of.prototype.controlText_="Skip Backward",ue.registerComponent("SkipBackward",Of);class Rf extends ue{constructor(r,s){super(r,s),s&&(this.menuButton_=s.menuButton),this.focusedChild_=-1,this.on("keydown",a=>this.handleKeyDown(a)),this.boundHandleBlur_=a=>this.handleBlur(a),this.boundHandleTapClick_=a=>this.handleTapClick(a)}addEventListenerForItem(r){r instanceof ue&&(this.on(r,"blur",this.boundHandleBlur_),this.on(r,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(r){r instanceof ue&&(this.off(r,"blur",this.boundHandleBlur_),this.off(r,["tap","click"],this.boundHandleTapClick_))}removeChild(r){"string"==typeof r&&(r=this.getChild(r)),this.removeEventListenerForItem(r),super.removeChild(r)}addItem(r){const s=this.addChild(r);s&&this.addEventListenerForItem(s)}createEl(){this.contentEl_=_t(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const s=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return s.appendChild(this.contentEl_),Hn(s,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),s}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(r){const s=r.relatedTarget||z().activeElement;if(!this.children().some(a=>a.el()===s)){const a=this.menuButton_;a&&a.buttonPressed_&&s!==a.el().firstChild&&a.unpressButton()}}handleTapClick(r){if(this.menuButton_){this.menuButton_.unpressButton();const s=this.children();if(!Array.isArray(s))return;const a=s.filter(c=>c.el()===r.target)[0];if(!a)return;"CaptionSettingsMenuItem"!==a.name()&&this.menuButton_.focus()}}handleKeyDown(r){"ArrowLeft"===r.key||"ArrowDown"===r.key?(r.preventDefault(),r.stopPropagation(),this.stepForward()):("ArrowRight"===r.key||"ArrowUp"===r.key)&&(r.preventDefault(),r.stopPropagation(),this.stepBack())}stepForward(){let r=0;void 0!==this.focusedChild_&&(r=this.focusedChild_+1),this.focus(r)}stepBack(){let r=0;void 0!==this.focusedChild_&&(r=this.focusedChild_-1),this.focus(r)}focus(r=0){const s=this.children().slice();s.length&&s[0].hasClass("vjs-menu-title")&&s.shift(),s.length>0&&(r<0?r=0:r>=s.length&&(r=s.length-1),this.focusedChild_=r,s[r].el_.focus())}}ue.registerComponent("Menu",Rf);class dd extends ue{constructor(r,s={}){super(r,s),this.menuButton_=new Kn(r,s),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const a=Kn.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+a,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const c=h=>this.handleClick(h);this.handleMenuKeyUp_=h=>this.handleMenuKeyUp(h),this.on(this.menuButton_,"tap",c),this.on(this.menuButton_,"click",c),this.on(this.menuButton_,"keydown",h=>this.handleKeyDown(h)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Hn(z(),"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",h=>this.handleMouseLeave(h)),this.on("keydown",h=>this.handleSubmenuKeyDown(h))}update(){const r=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=r,this.addChild(r),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const r=new Rf(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const s=_t("li",{className:"vjs-menu-title",textContent:Xn(this.options_.title),tabIndex:-1}),a=new ue(this.player_,{el:s});r.addItem(a)}if(this.items=this.createItems(),this.items)for(let s=0;s<this.items.length;s++)r.addItem(this.items[s]);return r}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(r){super.setIcon(r,this.menuButton_.el_)}buildWrapperCSSClass(){let r="vjs-menu-button";return r+=!0===this.options_.inline?"-inline":"-popup",`vjs-menu-button ${r} ${Kn.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let r="vjs-menu-button";return r+=!0===this.options_.inline?"-inline":"-popup",`vjs-menu-button ${r} ${super.buildCSSClass()}`}controlText(r,s=this.menuButton_.el()){return this.menuButton_.controlText(r,s)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(r){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(r){this.removeClass("vjs-hover"),lr(z(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(r){"Esc"===r.key||"Tab"===r.key?(this.buttonPressed_&&this.unpressButton(),"Tab"===!r.key&&(r.preventDefault(),this.menuButton_.focus())):("Up"===r.key||"Down"===r.key&&(!this.player_.options_.playerOptions.spatialNavigation||!this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(r.preventDefault(),this.pressButton()))}handleMenuKeyUp(r){("Esc"===r.key||"Tab"===r.key)&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(r){this.handleSubmenuKeyDown(r)}handleSubmenuKeyDown(r){("Esc"===r.key||"Tab"===r.key)&&(this.buttonPressed_&&this.unpressButton(),"Tab"===!r.key&&(r.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),$r&&om())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}ue.registerComponent("MenuButton",dd);class hd extends dd{constructor(r,s){const a=s.tracks;if(super(r,s),this.items.length<=1&&this.hide(),!a)return;const c=Ft(this,this.update);a.addEventListener("removetrack",c),a.addEventListener("addtrack",c),a.addEventListener("labelchange",c),this.player_.on("ready",c),this.player_.on("dispose",function(){a.removeEventListener("removetrack",c),a.removeEventListener("addtrack",c),a.removeEventListener("labelchange",c)})}}ue.registerComponent("TrackButton",hd);class Jo extends dl{constructor(r,s){super(r,s),this.selectable=s.selectable,this.isSelected_=s.selected||!1,this.multiSelectable=s.multiSelectable,this.selected(this.isSelected_),this.el_.setAttribute("role",this.selectable?this.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem")}createEl(r,s,a){this.nonIconControl=!0;const c=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},s),a),h=_t("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?c.appendChild(h):c.replaceChild(h,c.querySelector(".vjs-icon-placeholder")),c}handleKeyDown(r){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(r.key)||super.handleKeyDown(r)}handleClick(r){this.selected(!0)}selected(r){this.selectable&&(r?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}ue.registerComponent("MenuItem",Jo);class gl extends Jo{constructor(r,s){const a=s.track,c=r.textTracks();s.label=a.label||a.language||"Unknown",s.selected="showing"===a.mode,super(r,s),this.track=a,this.kinds=(s.kinds||[s.kind||this.track.kind]).filter(Boolean);const h=(...y)=>{this.handleTracksChange.apply(this,y)},f=(...y)=>{this.handleSelectedLanguageChange.apply(this,y)};if(r.on(["loadstart","texttrackchange"],h),c.addEventListener("change",h),c.addEventListener("selectedlanguagechange",f),this.on("dispose",function(){r.off(["loadstart","texttrackchange"],h),c.removeEventListener("change",h),c.removeEventListener("selectedlanguagechange",f)}),void 0===c.onchange){let y;this.on(["tap","click"],function(){if("object"!=typeof M().Event)try{y=new(M().Event)("change")}catch{}y||(y=z().createEvent("Event"),y.initEvent("change",!0,!0)),c.dispatchEvent(y)})}this.handleTracksChange()}handleClick(r){const s=this.track,a=this.player_.textTracks();if(super.handleClick(r),a)for(let c=0;c<a.length;c++){const h=a[c];-1!==this.kinds.indexOf(h.kind)&&(h===s?"showing"!==h.mode&&(h.mode="showing"):"disabled"!==h.mode&&(h.mode="disabled"))}}handleTracksChange(r){const s="showing"===this.track.mode;s!==this.isSelected_&&this.selected(s)}handleSelectedLanguageChange(r){if("showing"===this.track.mode){const s=this.player_.cache_.selectedLanguage;if(s&&s.enabled&&s.language===this.track.language&&s.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}ue.registerComponent("TextTrackMenuItem",gl);class Om extends gl{constructor(r,s){s.track={player:r,kind:s.kind,kinds:s.kinds,default:!1,mode:"disabled"},s.kinds||(s.kinds=[s.kind]),s.track.label=s.label?s.label:s.kinds.join(" and ")+" off",s.selectable=!0,s.multiSelectable=!1,super(r,s)}handleTracksChange(r){const s=this.player().textTracks();let a=!0;for(let c=0,h=s.length;c<h;c++){const f=s[c];if(this.options_.kinds.indexOf(f.kind)>-1&&"showing"===f.mode){a=!1;break}}a!==this.isSelected_&&this.selected(a)}handleSelectedLanguageChange(r){const s=this.player().textTracks();let a=!0;for(let c=0,h=s.length;c<h;c++){const f=s[c];if(["captions","descriptions","subtitles"].indexOf(f.kind)>-1&&"showing"===f.mode){a=!1;break}}a&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}ue.registerComponent("OffTextTrackMenuItem",Om);class rr extends hd{constructor(r,s={}){s.tracks=r.textTracks(),super(r,s)}createItems(r=[],s=gl){let a;this.label_&&(a=`${this.label_} off`),r.push(new Om(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;const c=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let h=0;h<c.length;h++){const f=c[h];if(this.kinds_.indexOf(f.kind)>-1){const y=new s(this.player_,{track:f,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});y.addClass(`vjs-${f.kind}-menu-item`),r.push(y)}}return r}}ue.registerComponent("TextTrackButton",rr);class lo extends Jo{constructor(r,s){const a=s.track,c=s.cue,h=r.currentTime();s.selectable=!0,s.multiSelectable=!1,s.label=c.text,s.selected=c.startTime<=h&&h<c.endTime,super(r,s),this.track=a,this.cue=c}handleClick(r){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}ue.registerComponent("ChaptersTrackMenuItem",lo);class Dn extends rr{constructor(r,s,a){super(r,s,a),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(c=>{c.selected(this.track_.activeCues[0]===c.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(r){if(r&&r.track&&"chapters"!==r.track.kind)return;const s=this.findChaptersTrack();s!==this.track_?(this.setTrack(s),super.update()):(!this.items||s&&s.cues&&s.cues.length!==this.items.length)&&super.update()}setTrack(r){if(this.track_!==r){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=r,this.track_){this.track_.mode="hidden";const s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const r=this.player_.textTracks()||[];for(let s=r.length-1;s>=0;s--){const a=r[s];if(a.kind===this.kind_)return a}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Xn(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const r=[];if(!this.track_)return r;const s=this.track_.cues;if(!s)return r;for(let a=0,c=s.length;a<c;a++){const f=new lo(this.player_,{track:this.track_,cue:s[a]});r.push(f)}return r}}Dn.prototype.kind_="chapters",Dn.prototype.controlText_="Chapters",ue.registerComponent("ChaptersButton",Dn);class Nf extends rr{constructor(r,s,a){super(r,s,a),this.setIcon("audio-description");const c=r.textTracks(),h=Ft(this,this.handleTracksChange);c.addEventListener("change",h),this.on("dispose",function(){c.removeEventListener("change",h)})}handleTracksChange(r){const s=this.player().textTracks();let a=!1;for(let c=0,h=s.length;c<h;c++){const f=s[c];if(f.kind!==this.kind_&&"showing"===f.mode){a=!0;break}}a?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}Nf.prototype.kind_="descriptions",Nf.prototype.controlText_="Descriptions",ue.registerComponent("DescriptionsButton",Nf);class Lf extends rr{constructor(r,s,a){super(r,s,a),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}Lf.prototype.kind_="subtitles",Lf.prototype.controlText_="Subtitles",ue.registerComponent("SubtitlesButton",Lf);class Ff extends gl{constructor(r,s){s.track={player:r,kind:s.kind,label:s.kind+" settings",selectable:!1,default:!1,mode:"disabled"},s.selectable=!1,s.name="CaptionSettingsMenuItem",super(r,s),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+s.kind+" settings dialog")}handleClick(r){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}ue.registerComponent("CaptionSettingsMenuItem",Ff);class Bf extends rr{constructor(r,s,a){super(r,s,a),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const r=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(r.push(new Ff(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(r)}}Bf.prototype.kind_="captions",Bf.prototype.controlText_="Captions",ue.registerComponent("CaptionsButton",Bf);class Uf extends gl{createEl(r,s,a){const c=super.createEl(r,s,a),h=c.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",c):h.appendChild(_t("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),h.appendChild(_t("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),c}}ue.registerComponent("SubsCapsMenuItem",Uf);class fd extends rr{constructor(r,s={}){super(r,s),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Xn(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let r=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(r.push(new Ff(this.player_,{kind:this.label_})),this.hideThreshold_+=1),r=super.createItems(r,Uf),r}}fd.prototype.kinds_=["captions","subtitles"],fd.prototype.controlText_="Subtitles",ue.registerComponent("SubsCapsButton",fd);class ml extends Jo{constructor(r,s){const a=s.track,c=r.audioTracks();s.label=a.label||a.language||"Unknown",s.selected=a.enabled,super(r,s),this.track=a,this.addClass(`vjs-${a.kind}-menu-item`);const h=(...f)=>{this.handleTracksChange.apply(this,f)};c.addEventListener("change",h),this.on("dispose",()=>{c.removeEventListener("change",h)})}createEl(r,s,a){const c=super.createEl(r,s,a),h=c.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(h.appendChild(_t("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),h.appendChild(_t("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),c}handleClick(r){if(super.handleClick(r),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const s=this.player_.audioTracks();for(let a=0;a<s.length;a++){const c=s[a];c!==this.track&&(c.enabled=c===this.track)}}}handleTracksChange(r){this.selected(this.track.enabled)}}ue.registerComponent("AudioTrackMenuItem",ml);class Rs extends hd{constructor(r,s={}){s.tracks=r.audioTracks(),super(r,s),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(r=[]){this.hideThreshold_=1;const s=this.player_.audioTracks();for(let a=0;a<s.length;a++)r.push(new ml(this.player_,{track:s[a],selectable:!0,multiSelectable:!1}));return r}}Rs.prototype.controlText_="Audio Track",ue.registerComponent("AudioTrackButton",Rs);class jf extends Jo{constructor(r,s){const a=s.rate,c=parseFloat(a,10);s.label=a,s.selected=c===r.playbackRate(),s.selectable=!0,s.multiSelectable=!1,super(r,s),this.label=a,this.rate=c,this.on(r,"ratechange",h=>this.update(h))}handleClick(r){super.handleClick(),this.player().playbackRate(this.rate)}update(r){this.selected(this.player().playbackRate()===this.rate)}}jf.prototype.contentElType="button",ue.registerComponent("PlaybackRateMenuItem",jf);class yl extends dd{constructor(r,s){super(r,s),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(r,"loadstart",a=>this.updateVisibility(a)),this.on(r,"ratechange",a=>this.updateLabel(a)),this.on(r,"playbackrateschange",a=>this.handlePlaybackRateschange(a))}createEl(){const r=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=_t("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),r.appendChild(this.labelEl_),r}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const r=this.playbackRates(),s=[];for(let a=r.length-1;a>=0;a--)s.push(new jf(this.player(),{rate:r[a]+"x"}));return s}handlePlaybackRateschange(r){this.update()}playbackRates(){const r=this.player();return r.playbackRates&&r.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(r){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(r){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}yl.prototype.controlText_="Playback Rate",ue.registerComponent("PlaybackRateMenuButton",yl);class vl extends ue{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(r="div",s={},a={}){return s.className||(s.className=this.buildCSSClass()),super.createEl(r,s,a)}}ue.registerComponent("Spacer",vl),ue.registerComponent("CustomControlSpacer",class pd extends vl{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:"\xa0"})}});class gd extends ue{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}gd.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},ue.registerComponent("ControlBar",gd);class $f extends Xo{constructor(r,s){super(r,s),this.on(r,"error",a=>{this.open(a)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const r=this.player().error();return r?this.localize(r.message):""}}$f.prototype.options_=Object.assign({},Xo.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),ue.registerComponent("ErrorDisplay",$f);class Vf extends ue{constructor(r,s={}){super(r,s),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),_t("select",{id:this.options_.id},{},this.options_.SelectOptions.map(s=>{const a=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${tr()}`)+"-"+s[1].replace(/\W+/g,""),c=_t("option",{id:a,value:this.localize(s[0]),textContent:s[1]});return c.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${a}`),c}))}}ue.registerComponent("TextTrackSelect",Vf);class ea extends ue{constructor(r,s={}){super(r,s);const a=_t("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(a);const c=this.options_.selects;for(const h of c){const f=this.options_.selectConfigs[h],y=f.className,T=f.id.replace("%s",this.options_.id_);let E=null;const x=`vjs_select_${tr()}`;if("colors"===this.options_.type){E=_t("span",{className:y});const V=_t("label",{id:T,className:"vjs-label",textContent:f.label});V.setAttribute("for",x),E.appendChild(V)}const P=new Vf(r,{SelectOptions:f.options,legendId:this.options_.legendId,id:x,labelId:T});this.addChild(P),"colors"===this.options_.type&&(E.appendChild(P.el()),this.el().appendChild(E))}}createEl(){return _t("fieldset",{className:this.options_.className})}}ue.registerComponent("TextTrackFieldset",ea);class ta extends ue{constructor(r,s={}){super(r,s);const a=this.options_.textTrackComponentid,c=new ea(r,{id_:a,legendId:`captions-text-legend-${a}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(c);const h=new ea(r,{id_:a,legendId:`captions-background-${a}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(h);const f=new ea(r,{id_:a,legendId:`captions-window-${a}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(f)}createEl(){return _t("div",{className:"vjs-track-settings-colors"})}}ue.registerComponent("TextTrackSettingsColors",ta);class iu extends ue{constructor(r,s={}){super(r,s);const a=this.options_.textTrackComponentid,c=new ea(r,{id_:a,legendId:`captions-font-size-${a}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(c);const h=new ea(r,{id_:a,legendId:`captions-edge-style-${a}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(h);const f=new ea(r,{id_:a,legendId:`captions-font-family-${a}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(f)}createEl(){return _t("div",{className:"vjs-track-settings-font"})}}ue.registerComponent("TextTrackSettingsFont",iu);class Rm extends ue{constructor(r,s={}){super(r,s);const a=this.localize("restore all settings to the default values"),c=new Kn(r,{controlText:a,className:"vjs-default-button"});c.el().classList.remove("vjs-control","vjs-button"),c.el().textContent=this.localize("Reset"),this.addChild(c);const h=new Kn(r,{controlText:a,className:"vjs-done-button"});h.el().classList.remove("vjs-control","vjs-button"),h.el().textContent=this.localize("Done"),this.addChild(h)}createEl(){return _t("div",{className:"vjs-track-settings-controls"})}}ue.registerComponent("TrackSettingsControls",Rm);const Nm="vjs-text-track-settings",md=["#000","Black"],rb=["#00F","Blue"],Lm=["#0FF","Cyan"],Fm=["#0F0","Green"],ib=["#F0F","Magenta"],sb=["#F00","Red"],yd=["#FFF","White"],su=["#FF0","Yellow"],Hf=["1","Opaque"],na=["0.5","Semi-Transparent"],vd=["0","Transparent"],Wi={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[md,yd,sb,Fm,rb,su,ib,Lm],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[Hf,na,vd],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[yd,md,sb,Fm,rb,su,ib,Lm],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:u=>"1.00"===u?null:Number(u)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[Hf,na],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[vd,na,Hf],className:"vjs-window-opacity vjs-opacity"}};function ob(u,r){if(r&&(u=r(u)),u&&"none"!==u)return u}Wi.windowColor.options=Wi.backgroundColor.options,ue.registerComponent("TextTrackSettings",class ab extends Xo{constructor(r,s){s.temporary=!1,super(r,s),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(r),this.endDialog=_t("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===s.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(r){const s=new ta(r,{textTrackComponentid:this.id_,selectConfigs:Wi,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(s);const a=new iu(r,{textTrackComponentid:this.id_,selectConfigs:Wi,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(a);const c=new Rm(r);this.addChild(c)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),ja(Wi,r=>{this.on(this.$(r.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return os(Wi,(r,s,a)=>{const c=function Bm(u,r){return ob(u.options[u.options.selectedIndex].value,r)}(this.$(s.selector),s.parser);return void 0!==c&&(r[a]=c),r},{})}setValues(r){ja(Wi,(s,a)=>{!function Um(u,r,s){if(r)for(let a=0;a<u.options.length;a++)if(ob(u.options[a].value,s)===r){u.selectedIndex=a;break}}(this.$(s.selector),r[a],s.parser)})}setDefaults(){ja(Wi,r=>{const s=r.hasOwnProperty("default")?r.default:0;this.$(r.selector).selectedIndex=s})}restoreSettings(){let r;try{r=JSON.parse(M().localStorage.getItem(Nm))}catch(s){Ht.warn(s)}r&&this.setValues(r)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const r=this.getValues();try{Object.keys(r).length?M().localStorage.setItem(Nm,JSON.stringify(r)):M().localStorage.removeItem(Nm)}catch(s){Ht.warn(s)}}updateDisplay(){const r=this.player_.getChild("textTrackDisplay");r&&r.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}),ue.registerComponent("ResizeManager",class fs extends ue{constructor(r,s){let a=s.ResizeObserver||M().ResizeObserver;null===s.ResizeObserver&&(a=!1),super(r,Xt({createEl:!a,reportTouchActivity:!1},s)),this.ResizeObserver=s.ResizeObserver||M().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=ao(()=>{this.resizeHandler()},100,!1,this),a?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(r.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const h=this.debouncedHandler_;let f=this.unloadListener_=function(){lr(this,"resize",h),lr(this,"unload",f),f=null};Hn(this.el_.contentWindow,"unload",f),Hn(this.el_.contentWindow,"resize",h)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});const ub={trackingThreshold:20,liveTolerance:15};ue.registerComponent("LiveTracker",class _d extends ue{constructor(r,s){super(r,Xt(ub,s,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=c=>this.handlePlay(c),this.handleFirstTimeupdate_=c=>this.handleFirstTimeupdate(c),this.handleSeeked_=c=>this.handleSeeked(c),this.seekToLiveEdge_=c=>this.seekToLiveEdge(c),this.reset_(),this.on(this.player_,"durationchange",c=>this.handleDurationchange(c)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const r=this.player_.seekable();if(!r||!r.length)return;const s=Number(M().performance.now().toFixed(4)),a=-1===this.lastTime_?0:(s-this.lastTime_)/1e3;this.lastTime_=s,this.pastSeekEnd_=this.pastSeekEnd()+a;const c=this.liveCurrentTime(),h=this.player_.currentTime();let f=this.player_.paused()||this.seekedBehindLive_||Math.abs(c-h)>this.options_.liveTolerance;(!this.timeupdateSeen_||c===1/0)&&(f=!1),f!==this.behindLiveEdge_&&(this.behindLiveEdge_=f,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const r=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&r>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const r=this.player_.seekable(),s=[];let a=r?r.length:0;for(;a--;)s.push(r.end(a));return s.length?s.sort()[s.length-1]:1/0}seekableStart(){const r=this.player_.seekable(),s=[];let a=r?r.length:0;for(;a--;)s.push(r.start(a));return s.length?s.sort()[0]:0}liveWindow(){const r=this.liveCurrentTime();return r===1/0?0:r-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const r=this.seekableEnd();return-1!==this.lastSeekEnd_&&r!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=r,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}),ue.registerComponent("TitleBar",class qf extends ue{constructor(r,s){super(r,s),this.on("statechanged",a=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:_t("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${tr()}`}),description:_t("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${tr()}`})},_t("div",{className:"vjs-title-bar"},{},Qt(this.els))}updateDom_(){const r=this.player_.tech_,s=r&&r.el_,a={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(c=>{const h=this.state[c],f=this.els[c],y=a[c];xt(f),h&&Pr(f,h),s&&(s.removeAttribute(y),h&&s.setAttribute(y,f.id))}),this.state.title||this.state.description?this.show():this.hide()}update(r){this.setState(r)}dispose(){const r=this.player_.tech_,s=r&&r.el_;s&&(s.removeAttribute("aria-labelledby"),s.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});const jm={initialDisplay:4e3,position:[],takeFocus:!1};ue.registerComponent("TransientButton",class bd extends Kn{constructor(r,s){super(r,s=Xt(jm,s)),this.controlText(s.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],a=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(r=>`vjs-${r}`).join(" ")}`}createEl(){const r=_t("button",{},{type:"button",class:this.buildCSSClass()},_t("span"));return this.controlTextEl_=r.querySelector("span"),r}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}});const _l=u=>{const r=u.el();if(r.hasAttribute("src"))return u.triggerSourceset(r.src),!0;const s=u.$$("source"),a=[];let c="";if(!s.length)return!1;for(let h=0;h<s.length;h++){const f=s[h].src;f&&-1===a.indexOf(f)&&a.push(f)}return!!a.length&&(1===a.length&&(c=a[0]),u.triggerSourceset(c),!0)},lb=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(u){const r=z().createElement(this.nodeName.toLowerCase());r.innerHTML=u;const s=z().createDocumentFragment();for(;r.childNodes.length;)s.appendChild(r.childNodes[0]);return this.innerText="",M().Element.prototype.appendChild.call(this,s),this.innerHTML}}),zf=(u,r)=>{let s={};for(let a=0;a<u.length&&(s=Object.getOwnPropertyDescriptor(u[a],r),!(s&&s.set&&s.get));a++);return s.enumerable=!0,s.configurable=!0,s},Gf=function(u){const r=u.el();if(r.resetSourceWatch_)return;const s={},a=(u=>zf([u.el(),M().HTMLMediaElement.prototype,M().Element.prototype,lb],"innerHTML"))(u),c=h=>(...f)=>{const y=h.apply(r,f);return _l(u),y};["append","appendChild","insertAdjacentHTML"].forEach(h=>{r[h]&&(s[h]=r[h],r[h]=c(s[h]))}),Object.defineProperty(r,"innerHTML",Xt(a,{set:c(a.set)})),r.resetSourceWatch_=()=>{r.resetSourceWatch_=null,Object.keys(s).forEach(h=>{r[h]=s[h]}),Object.defineProperty(r,"innerHTML",a)},u.one("sourceset",r.resetSourceWatch_)},Vm=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?pm(M().Element.prototype.getAttribute.call(this,"src")):""},set(u){return M().Element.prototype.setAttribute.call(this,"src",u),u}});class Ve extends Rt{constructor(r,s){super(r,s);const a=r.source;let c=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,a&&(this.el_.currentSrc!==a.src||r.tag&&3===r.tag.initNetworkState_)?this.setSource(a):this.handleLateInit_(this.el_),r.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const h=this.el_.childNodes;let f=h.length;const y=[];for(;f--;){const T=h[f];"track"===T.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(T),this.remoteTextTracks().addTrack(T.track),this.textTracks().addTrack(T.track),!c&&!this.el_.hasAttribute("crossorigin")&&Cf(T.src)&&(c=!0)):y.push(T))}for(let T=0;T<y.length;T++)this.el_.removeChild(y[T])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&c&&Ht.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(nl||Hc)&&!0===r.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Ve.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){!function(u){if(!u.featuresSourceset)return;const r=u.el();if(r.resetSourceset_)return;const s=(u=>zf([u.el(),M().HTMLMediaElement.prototype,Vm],"src"))(u),a=r.setAttribute,c=r.load;Object.defineProperty(r,"src",Xt(s,{set:h=>{const f=s.set.call(r,h);return u.triggerSourceset(r.src),f}})),r.setAttribute=(h,f)=>{const y=a.call(r,h,f);return/src/i.test(h)&&u.triggerSourceset(r.src),y},r.load=()=>{const h=c.call(r);return _l(u)||(u.triggerSourceset(""),Gf(u)),h},r.currentSrc?u.triggerSourceset(r.currentSrc):_l(u)||Gf(u),r.resetSourceset_=()=>{r.resetSourceset_=null,r.load=c,r.setAttribute=a,Object.defineProperty(r,"src",s),r.resetSourceWatch_&&r.resetSourceWatch_()}}(this)}restoreMetadataTracksInIOSNativePlayer_(){const r=this.textTracks();let s;const a=()=>{s=[];for(let h=0;h<r.length;h++){const f=r[h];"metadata"===f.kind&&s.push({track:f,storedMode:f.mode})}};a(),r.addEventListener("change",a),this.on("dispose",()=>r.removeEventListener("change",a));const c=()=>{for(let h=0;h<s.length;h++){const f=s[h];"disabled"===f.track.mode&&f.track.mode!==f.storedMode&&(f.track.mode=f.storedMode)}r.removeEventListener("change",c)};this.on("webkitbeginfullscreen",()=>{r.removeEventListener("change",a),r.removeEventListener("change",c),r.addEventListener("change",c)}),this.on("webkitendfullscreen",()=>{r.removeEventListener("change",a),r.addEventListener("change",a),r.removeEventListener("change",c)})}overrideNative_(r,s){if(s!==this[`featuresNative${r}Tracks`])return;const a=r.toLowerCase();this[`${a}TracksListeners_`]&&Object.keys(this[`${a}TracksListeners_`]).forEach(c=>{this.el()[`${a}Tracks`].removeEventListener(c,this[`${a}TracksListeners_`][c])}),this[`featuresNative${r}Tracks`]=!s,this[`${a}TracksListeners_`]=null,this.proxyNativeTracksForType_(a)}overrideNativeAudioTracks(r){this.overrideNative_("Audio",r)}overrideNativeVideoTracks(r){this.overrideNative_("Video",r)}proxyNativeTracksForType_(r){const s=fi[r],a=this.el()[s.getterName],c=this[s.getterName]();if(!this[`featuresNative${s.capitalName}Tracks`]||!a||!a.addEventListener)return;const h={change:y=>{const T={type:"change",target:c,currentTarget:c,srcElement:c};c.trigger(T),"text"===r&&this[Ja.remoteText.getterName]().trigger(T)},addtrack(y){c.addTrack(y.track)},removetrack(y){c.removeTrack(y.track)}},f=function(){const y=[];for(let T=0;T<c.length;T++){let E=!1;for(let x=0;x<a.length;x++)if(a[x]===c[T]){E=!0;break}E||y.push(c[T])}for(;y.length;)c.removeTrack(y.shift())};this[s.getterName+"Listeners_"]=h,Object.keys(h).forEach(y=>{const T=h[y];a.addEventListener(y,T),this.on("dispose",E=>a.removeEventListener(y,T))}),this.on("loadstart",f),this.on("dispose",y=>this.off("loadstart",f))}proxyNativeTracks_(){fi.names.forEach(r=>{this.proxyNativeTracksForType_(r)})}createEl(){let r=this.options_.tag;if(!r||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(r){const a=r.cloneNode(!0);r.parentNode&&r.parentNode.insertBefore(a,r),Ve.disposeMediaElement(r),r=a}else{r=z().createElement("video");const c=Xt({},this.options_.tag&&$n(this.options_.tag));(!nl||!0!==this.options_.nativeControlsForTouch)&&delete c.controls,br(r,Object.assign(c,{id:this.options_.techId,class:"vjs-tech"}))}r.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Tr(r,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(r.disablePictureInPicture=this.options_.disablePictureInPicture);const s=["loop","muted","playsinline","autoplay"];for(let a=0;a<s.length;a++){const c=s[a],h=this.options_[c];typeof h<"u"&&(h?Tr(r,c,c):rl(r,c),r[c]=h)}return r}handleLateInit_(r){if(0===r.networkState||3===r.networkState)return;if(0===r.readyState){let a=!1;const c=function(){a=!0};this.on("loadstart",c);const h=function(){a||this.trigger("loadstart")};return this.on("loadedmetadata",h),void this.ready(function(){this.off("loadstart",c),this.off("loadedmetadata",h),a||this.trigger("loadstart")})}const s=["loadstart"];s.push("loadedmetadata"),r.readyState>=2&&s.push("loadeddata"),r.readyState>=3&&s.push("canplay"),r.readyState>=4&&s.push("canplaythrough"),this.ready(function(){s.forEach(function(a){this.trigger(a)},this)})}setScrubbing(r){this.isScrubbing_=r}scrubbing(){return this.isScrubbing_}setCurrentTime(r){try{this.isScrubbing_&&this.el_.fastSeek&&Gc?this.el_.fastSeek(r):this.el_.currentTime=r}catch(s){Ht(s,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&_r&&Vi&&0===this.el_.currentTime){const r=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",r))};return this.on("timeupdate",r),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const r=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},s=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",r),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",()=>{this.off("webkitbeginfullscreen",s),this.off("webkitendfullscreen",r)})}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const r=this.el_;if(r.paused&&r.networkState<=r.HAVE_METADATA)zi(this.el_.play()),this.setTimeout(function(){r.pause();try{r.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},0);else try{r.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(r){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(r):super.requestVideoFrameCallback(r)}cancelVideoFrameCallback(r){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(r):super.cancelVideoFrameCallback(r)}src(r){if(void 0===r)return this.el_.src;this.setSrc(r)}reset(){Ve.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(r){this.el_.controls=!!r}addTextTrack(r,s,a){return this.featuresNativeTextTracks?this.el_.addTextTrack(r,s,a):super.addTextTrack(r,s,a)}createRemoteTextTrack(r){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(r);const s=z().createElement("track");return r.kind&&(s.kind=r.kind),r.label&&(s.label=r.label),(r.language||r.srclang)&&(s.srclang=r.language||r.srclang),r.default&&(s.default=r.default),r.id&&(s.id=r.id),r.src&&(s.src=r.src),s}addRemoteTextTrack(r,s){const a=super.addRemoteTextTrack(r,s);return this.featuresNativeTextTracks&&this.el().appendChild(a),a}removeRemoteTextTrack(r){if(super.removeRemoteTextTrack(r),this.featuresNativeTextTracks){const s=this.$$("track");let a=s.length;for(;a--;)(r===s[a]||r===s[a].track)&&this.el().removeChild(s[a])}}getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const r={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(r.droppedVideoFrames=this.el().webkitDroppedFrameCount,r.totalVideoFrames=this.el().webkitDecodedFrameCount),M().performance&&(r.creationTime=M().performance.now()),r}}$o(Ve,"TEST_VID",function(){if(!Va())return;const u=z().createElement("video"),r=z().createElement("track");return r.kind="captions",r.srclang="en",r.label="English",u.appendChild(r),u}),Ve.isSupported=function(){try{Ve.TEST_VID.volume=.5}catch{return!1}return!(!Ve.TEST_VID||!Ve.TEST_VID.canPlayType)},Ve.canPlayType=function(u){return Ve.TEST_VID.canPlayType(u)},Ve.canPlaySource=function(u,r){return Ve.canPlayType(u.type)},Ve.canControlVolume=function(){try{const u=Ve.TEST_VID.volume;Ve.TEST_VID.volume=u/2+.1;const r=u!==Ve.TEST_VID.volume;return r&&$r?(M().setTimeout(()=>{Ve&&Ve.prototype&&(Ve.prototype.featuresVolumeControl=u!==Ve.TEST_VID.volume)}),!1):r}catch{return!1}},Ve.canMuteVolume=function(){try{const u=Ve.TEST_VID.muted;return Ve.TEST_VID.muted=!u,Ve.TEST_VID.muted?Tr(Ve.TEST_VID,"muted","muted"):rl(Ve.TEST_VID,"muted"),u!==Ve.TEST_VID.muted}catch{return!1}},Ve.canControlPlaybackRate=function(){if(_r&&Vi&&ro<58)return!1;try{const u=Ve.TEST_VID.playbackRate;return Ve.TEST_VID.playbackRate=u/2+.1,u!==Ve.TEST_VID.playbackRate}catch{return!1}},Ve.canOverrideAttributes=function(){try{const u=()=>{};Object.defineProperty(z().createElement("video"),"src",{get:u,set:u}),Object.defineProperty(z().createElement("audio"),"src",{get:u,set:u}),Object.defineProperty(z().createElement("video"),"innerHTML",{get:u,set:u}),Object.defineProperty(z().createElement("audio"),"innerHTML",{get:u,set:u})}catch{return!1}return!0},Ve.supportsNativeTextTracks=function(){return Gc||$r&&Vi},Ve.supportsNativeVideoTracks=function(){return!(!Ve.TEST_VID||!Ve.TEST_VID.videoTracks)},Ve.supportsNativeAudioTracks=function(){return!(!Ve.TEST_VID||!Ve.TEST_VID.audioTracks)},Ve.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([u,r]){$o(Ve.prototype,u,()=>Ve[r](),!0)}),Ve.prototype.featuresVolumeControl=Ve.canControlVolume(),Ve.prototype.movingMediaElementInDOM=!$r,Ve.prototype.featuresFullscreenResize=!0,Ve.prototype.featuresProgressEvents=!0,Ve.prototype.featuresTimeupdateEvents=!0,Ve.prototype.featuresVideoFrameCallback=!(!Ve.TEST_VID||!Ve.TEST_VID.requestVideoFrameCallback),Ve.disposeMediaElement=function(u){if(u){for(u.parentNode&&u.parentNode.removeChild(u);u.hasChildNodes();)u.removeChild(u.firstChild);u.removeAttribute("src"),"function"==typeof u.load&&function(){try{u.load()}catch{}}()}},Ve.resetMediaElement=function(u){if(!u)return;const r=u.querySelectorAll("source");let s=r.length;for(;s--;)u.removeChild(r[s]);u.removeAttribute("src"),"function"==typeof u.load&&function(){try{u.load()}catch{}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(u){Ve.prototype[u]=function(){return this.el_[u]||this.el_.hasAttribute(u)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(u){Ve.prototype["set"+Xn(u)]=function(r){this.el_[u]=r,r?this.el_.setAttribute(u,u):this.el_.removeAttribute(u)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(u){Ve.prototype[u]=function(){return this.el_[u]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(u){Ve.prototype["set"+Xn(u)]=function(r){this.el_[u]=r}}),["pause","load","play"].forEach(function(u){Ve.prototype[u]=function(){return this.el_[u]()}}),Rt.withSourceHandlers(Ve),Ve.nativeSourceHandler={},Ve.nativeSourceHandler.canPlayType=function(u){try{return Ve.TEST_VID.canPlayType(u)}catch{return""}},Ve.nativeSourceHandler.canHandleSource=function(u,r){if(u.type)return Ve.nativeSourceHandler.canPlayType(u.type);if(u.src){const s=ul(u.src);return Ve.nativeSourceHandler.canPlayType(`video/${s}`)}return""},Ve.nativeSourceHandler.handleSource=function(u,r,s){r.setSrc(u.src)},Ve.nativeSourceHandler.dispose=function(){},Ve.registerSourceHandler(Ve.nativeSourceHandler),Rt.registerTech("Html5",Ve);const Hm=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Cd={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Sd=["tiny","xsmall","small","medium","large","xlarge","huge"],co={};Sd.forEach(u=>{const r="x"===u.charAt(0)?`x-${u.substring(1)}`:u;co[u]=`vjs-layout-${r}`});const db={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class $t extends ue{constructor(r,s,a){if(r.id=r.id||s.id||`vjs_video_${tr()}`,(s=Object.assign($t.getTagSettings(r),s)).initChildren=!1,s.createEl=!1,s.evented=!1,s.reportTouchActivity=!1,!s.language){const f=r.closest("[lang]");f&&(s.language=f.getAttribute("lang"))}if(super(null,s,a),this.boundDocumentFullscreenChange_=f=>this.documentFullscreenChange_(f),this.boundFullWindowOnEscKey_=f=>this.fullWindowOnEscKey(f),this.boundUpdateStyleEl_=f=>this.updateStyleEl_(f),this.boundApplyInitTime_=f=>this.applyInitTime_(f),this.boundUpdateCurrentBreakpoint_=f=>this.updateCurrentBreakpoint_(f),this.boundHandleTechClick_=f=>this.handleTechClick_(f),this.boundHandleTechDoubleClick_=f=>this.handleTechDoubleClick_(f),this.boundHandleTechTouchStart_=f=>this.handleTechTouchStart_(f),this.boundHandleTechTouchMove_=f=>this.handleTechTouchMove_(f),this.boundHandleTechTouchEnd_=f=>this.handleTechTouchEnd_(f),this.boundHandleTechTap_=f=>this.handleTechTap_(f),this.boundUpdatePlayerHeightOnAudioOnlyMode_=f=>this.updatePlayerHeightOnAudioOnlyMode_(f),this.isFullscreen_=!1,this.log=Ua(this.id_),this.fsApi_=Uc,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=r,this.tagAttributes=r&&$n(r),this.language(this.options_.language),s.languages){const f={};Object.getOwnPropertyNames(s.languages).forEach(function(y){f[y.toLowerCase()]=s.languages[y]}),this.languages_=f}else this.languages_=$t.prototype.options_.languages;this.resetCache_(),this.poster_=s.poster||"",this.controls_=!!s.controls,r.controls=!1,r.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],r.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),s.plugins&&Object.keys(s.plugins).forEach(f=>{if("function"!=typeof this[f])throw new Error(`plugin "${f}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),cm(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Hn(z(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const c=Xt(this.options_);if(s.plugins&&Object.keys(s.plugins).forEach(f=>{this[f](s.plugins[f])}),s.debug&&this.debug(!0),this.options_.playerOptions=c,this.middleware_=[],this.playbackRates(s.playbackRates),s.experimentalSvgIcons){const y=(new(M().DOMParser)).parseFromString('<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play">\n      <path d="M16 10v28l22-14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">\n      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">\n      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">\n      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">\n      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">\n      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">\n      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">\n      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">\n      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">\n      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">\n      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">\n      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">\n      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">\n      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">\n      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">\n      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">\n      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">\n      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-share">\n      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">\n      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-square">\n      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">\n      <circle cx="24" cy="24" r="20"></circle>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">\n      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">\n      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">\n      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">\n      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">\n      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">\n      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">\n      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">\n      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">\n      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>\n      <path fill="none" d="M-1-3h24v24H-1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">\n      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">\n      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">\n      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">\n      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">\n      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>\n    </symbol>\n  </defs>\n</svg>',"image/svg+xml");if(y.querySelector("parsererror"))Ht.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const E=y.documentElement;E.style.display="none",this.el_.appendChild(E),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio("audio"===r.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),s.spatialNavigation&&s.spatialNavigation.enabled&&(this.spatialNavigation=new Q_(this),this.addClass("vjs-spatial-navigation-enabled")),nl&&this.addClass("vjs-touch-enabled"),$r||this.addClass("vjs-workinghover"),$t.players[this.id_]=this;const h=La.split(".")[0];this.addClass(`vjs-v${h}`),this.userActive(!0),this.reportUserActivity(),this.one("play",f=>this.listenForUserActivity_(f)),this.on("keydown",f=>this.handleKeyDown(f)),this.on("languagechange",f=>this.handleLanguagechange(f)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),lr(z(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),lr(z(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),$t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function Df(u){ls.hasOwnProperty(u.id())&&delete ls[u.id()]}(this),Or.names.forEach(r=>{const a=this[Or[r].getterName]();a&&a.off&&a.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let s,r=this.tag,a=this.playerElIngest_=r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player");const c="video-js"===this.tag.tagName.toLowerCase();a?s=this.el_=r.parentNode:c||(s=this.el_=super.createEl("div"));const h=$n(r);if(c){for(s=this.el_=r,r=this.tag=z().createElement("video");s.children.length;)r.appendChild(s.firstChild);Ha(s,"video-js")||Wn(s,"video-js"),s.appendChild(r),a=this.playerElIngest_=s,Object.keys(s).forEach(T=>{try{r[T]=s[T]}catch{}})}r.setAttribute("tabindex","-1"),h.tabindex="-1",Vi&&tl&&(r.setAttribute("role","application"),h.role="application"),r.removeAttribute("width"),r.removeAttribute("height"),"width"in h&&delete h.width,"height"in h&&delete h.height,Object.getOwnPropertyNames(h).forEach(function(T){c&&"class"===T||s.setAttribute(T,h[T]),c&&r.setAttribute(T,h[T])}),r.playerId=r.id,r.id+="_html5_api",r.className="vjs-tech",r.player=s.player=this,this.addClass("vjs-paused");const f=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(T=>pf[T]).map(T=>"vjs-device-"+T.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...f),!0!==M().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Go("vjs-styles-dimensions");const T=ci(".vjs-styles-defaults"),E=ci("head");E.insertBefore(this.styleEl_,T?T.nextSibling:E.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const y=r.getElementsByTagName("a");for(let T=0;T<y.length;T++){const E=y.item(T);Wn(E,"vjs-hidden"),E.setAttribute("hidden","hidden")}return r.initNetworkState_=r.networkState,r.parentNode&&!a&&r.parentNode.insertBefore(s,r),gf(r,s),this.children_.unshift(r),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=s,s}crossOrigin(r){if(typeof r>"u")return this.techGet_("crossOrigin");null===r||"anonymous"===r||"use-credentials"===r?(this.techCall_("setCrossOrigin",r),this.posterImage&&this.posterImage.crossOrigin(r)):Ht.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${r}"`)}width(r){return this.dimension("width",r)}height(r){return this.dimension("height",r)}dimension(r,s){const a=r+"_";if(void 0===s)return this[a]||0;if(""===s||"auto"===s)return this[a]=void 0,void this.updateStyleEl_();const c=parseFloat(s);isNaN(c)?Ht.error(`Improper value "${s}" supplied for for ${r}`):(this[a]=c,this.updateStyleEl_())}fluid(r){if(void 0===r)return!!this.fluid_;this.fluid_=!!r,ks(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),r?(this.addClass("vjs-fluid"),this.fill(!1),((u,r)=>{ks(u)?r():(u.eventedCallbacks||(u.eventedCallbacks=[]),u.eventedCallbacks.push(r))})(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(r){if(void 0===r)return!!this.fill_;this.fill_=!!r,r?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(r){if(void 0===r)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(r))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=r,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===M().VIDEOJS_NO_DYNAMIC_STYLE){const y="number"==typeof this.width_?this.width_:this.options_.width,T="number"==typeof this.height_?this.height_:this.options_.height,E=this.tech_&&this.tech_.el();return void(E&&(y>=0&&(E.width=y),T>=0&&(E.height=T)))}let r,s,a,c;a=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const h=a.split(":"),f=h[1]/h[0];r=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/f:this.videoWidth()||300,s=void 0!==this.height_?this.height_:r*f,c=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(c),Hi(this.styleEl_,`\n      .${c} {\n        width: ${r}px;\n        height: ${s}px;\n      }\n\n      .${c}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*f}%;\n      }\n    `)}loadTech_(r,s){this.tech_&&this.unloadTech_();const a=Xn(r),c=r.charAt(0).toLowerCase()+r.slice(1);"Html5"!==a&&this.tag&&(Rt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=a,this.isReady_=!1;let h=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(h=!1);const f={source:s,autoplay:h,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${c}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Or.names.forEach(T=>{const E=Or[T];f[E.getterName]=this[E.privateName]}),Object.assign(f,this.options_[a]),Object.assign(f,this.options_[c]),Object.assign(f,this.options_[r.toLowerCase()]),this.tag&&(f.tag=this.tag),s&&s.src===this.cache_.src&&this.cache_.currentTime>0&&(f.startTime=this.cache_.currentTime);const y=Rt.getTech(r);if(!y)throw new Error(`No Tech named '${a}' exists! '${a}' should be registered using videojs.registerTech()'`);this.tech_=new y(f),this.tech_.ready(Ft(this,this.handleTechReady_),!0),function(u,r){u.forEach(function(s){const a=r.addRemoteTextTrack(s).track;!s.src&&s.cues&&s.cues.forEach(c=>a.addCue(c))}),r.textTracks()}(this.textTracksJson_||[],this.tech_),Hm.forEach(T=>{this.on(this.tech_,T,E=>this[`handleTech${Xn(T)}_`](E))}),Object.keys(Cd).forEach(T=>{this.on(this.tech_,T,E=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${Cd[T]}_`].bind(this),event:E}):this[`handleTech${Cd[T]}_`](E)})}),this.on(this.tech_,"loadstart",T=>this.handleTechLoadStart_(T)),this.on(this.tech_,"sourceset",T=>this.handleTechSourceset_(T)),this.on(this.tech_,"waiting",T=>this.handleTechWaiting_(T)),this.on(this.tech_,"ended",T=>this.handleTechEnded_(T)),this.on(this.tech_,"seeking",T=>this.handleTechSeeking_(T)),this.on(this.tech_,"play",T=>this.handleTechPlay_(T)),this.on(this.tech_,"pause",T=>this.handleTechPause_(T)),this.on(this.tech_,"durationchange",T=>this.handleTechDurationChange_(T)),this.on(this.tech_,"fullscreenchange",(T,E)=>this.handleTechFullscreenChange_(T,E)),this.on(this.tech_,"fullscreenerror",(T,E)=>this.handleTechFullscreenError_(T,E)),this.on(this.tech_,"enterpictureinpicture",T=>this.handleTechEnterPictureInPicture_(T)),this.on(this.tech_,"leavepictureinpicture",T=>this.handleTechLeavePictureInPicture_(T)),this.on(this.tech_,"error",T=>this.handleTechError_(T)),this.on(this.tech_,"posterchange",T=>this.handleTechPosterChange_(T)),this.on(this.tech_,"textdata",T=>this.handleTechTextData_(T)),this.on(this.tech_,"ratechange",T=>this.handleTechRateChange_(T)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==a||!this.tag)&&gf(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Or.names.forEach(r=>{const s=Or[r];this[s.privateName]=this[s.getterName]()}),this.textTracksJson_=function(u){const r=u.$$("track"),s=Array.prototype.map.call(r,c=>c.track);return Array.prototype.map.call(r,function(c){const h=Jc(c.track);return c.src&&(h.src=c.src),h}).concat(Array.prototype.filter.call(u.textTracks(),function(c){return-1===s.indexOf(c)}).map(Jc))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(r){return void 0===r&&Ht.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}version(){return{"video.js":La}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(r){if(!this.tech_||"string"!=typeof r)return;const s=()=>{const c=this.muted();this.muted(!0);const h=()=>{this.muted(c)};this.playTerminatedQueue_.push(h);const f=this.play();if(Ya(f))return f.catch(y=>{throw h(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${y||""}`)})};let a;return"any"!==r||this.muted()?a="muted"!==r||this.muted()?this.play():s():(a=this.play(),Ya(a)&&(a=a.catch(s))),Ya(a)?a.then(()=>{this.trigger({type:"autoplay-success",autoplay:r})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:r})}):void 0}updateSourceCaches_(r=""){let s=r,a="";"string"!=typeof s&&(s=r.src,a=r.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],s&&!a&&(a=((u,r)=>{if(!r)return"";if(u.cache_.source.src===r&&u.cache_.source.type)return u.cache_.source.type;const s=u.cache_.sources.filter(c=>c.src===r);if(s.length)return s[0].type;const a=u.$$("source");for(let c=0;c<a.length;c++){const h=a[c];if(h.type&&h.src&&h.src===r)return h.type}return cl(r)})(this,s)),this.cache_.source=Xt({},r,{src:s,type:a});const c=this.cache_.sources.filter(T=>T.src&&T.src===s),h=[],f=this.$$("source"),y=[];for(let T=0;T<f.length;T++){const E=$n(f[T]);h.push(E),E.src&&E.src===s&&y.push(E.src)}y.length&&!c.length?this.cache_.sources=h:c.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=s}handleTechSourceset_(r){if(!this.changingSrc_){let s=h=>this.updateSourceCaches_(h);const a=this.currentSource().src,c=r.src;a&&!/^blob:/.test(a)&&/^blob:/.test(c)&&(!this.lastSource_||this.lastSource_.tech!==c&&this.lastSource_.player!==a)&&(s=()=>{}),s(c),r.src||this.tech_.any(["sourceset","loadstart"],h=>{if("sourceset"===h.type)return;const f=this.techGet_("currentSrc");this.lastSource_.tech=f,this.updateSourceCaches_(f)})}this.lastSource_={player:this.currentSource().src,tech:r.src},this.trigger({src:r.src,type:"sourceset"})}hasStarted(r){if(void 0===r)return this.hasStarted_;r!==this.hasStarted_&&(this.hasStarted_=r,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(r=>r.callback(r.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const r=this.currentTime(),s=()=>{r!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",s))};this.on("timeupdate",s)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(r){this.controls_&&(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,r):this.paused()?zi(this.play()):this.pause())}handleTechDoubleClick_(r){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),a=>a.contains(r.target))||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,r):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(r){r.cancelable&&r.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(r){const s=r.target.player;if(s&&s!==this)return;const a=this.el();let c=z()[this.fsApi_.fullscreenElement]===a;!c&&a.matches&&(c=a.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(c)}handleTechFullscreenChange_(r,s){s&&(s.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(s.isFullscreen))}handleTechFullscreenError_(r,s){this.trigger("fullscreenerror",s)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(r){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(r){this.isInPictureInPicture(!1)}handleTechError_(){const r=this.tech_.error();r&&this.error(r)}handleTechTextData_(){let r=null;arguments.length>1&&(r=arguments[1]),this.trigger("textdata",r)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(r,s){this.ready(function(){if(r in cs)return function W_(u,r,s,a){return r[s](u.reduce(sd(s),a))}(this.middleware_,this.tech_,r,s);if(r in Ef)return id(this.middleware_,this.tech_,r,s);try{this.tech_&&this.tech_[r](s)}catch(a){throw Ht(a),a}},!0)}techGet_(r){if(this.tech_&&this.tech_.isReady_){if(r in X_)return function _m(u,r,s){return u.reduceRight(sd(s),r[s]())}(this.middleware_,this.tech_,r);if(r in Ef)return id(this.middleware_,this.tech_,r);try{return this.tech_[r]()}catch(s){throw void 0===this.tech_[r]?(Ht(`Video.js: ${r} method not defined for ${this.techName_} playback technology.`,s),s):"TypeError"===s.name?(Ht(`Video.js: ${r} unavailable on ${this.techName_} playback technology element.`,s),this.tech_.isReady_=!1,s):(Ht(s),s)}}}play(){return new Promise(r=>{this.play_(r)})}play_(r=zi){this.playCallbacks_.push(r);const s=!(this.changingSrc_||!this.src()&&!this.currentSrc()),a=!(!Gc&&!$r);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s)return this.waitToPlay_=f=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!s&&a&&this.load());const c=this.techGet_("play");a&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===c?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(c)}runPlayTerminatedQueue_(){const r=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],r.forEach(function(s){s()})}runPlayCallbacks_(r){const s=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],s.forEach(function(a){a(r)})}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||as(0,0)}scrubbing(r){if(typeof r>"u")return this.scrubbing_;this.scrubbing_=!!r,this.techCall_("setScrubbing",this.scrubbing_),r?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(r){return void 0===r?(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime):(r<0&&(r=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",r),this.cache_.initTime=0,void(isFinite(r)&&(this.cache_.currentTime=Number(r)))):(this.cache_.initTime=r,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_)))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(r){if(void 0===r)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(r=parseFloat(r))<0&&(r=1/0),r!==this.cache_.duration&&(this.cache_.duration=r,r===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(r)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let r=this.techGet_("buffered");return(!r||!r.length)&&(r=as(0,0)),r}seekable(){let r=this.techGet_("seekable");return(!r||!r.length)&&(r=as(0,0)),r}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return hi(this.buffered(),this.duration())}bufferedEnd(){const r=this.buffered(),s=this.duration();let a=r.end(r.length-1);return a>s&&(a=s),a}volume(r){let s;return void 0!==r?(s=Math.max(0,Math.min(1,r)),this.cache_.volume=s,this.techCall_("setVolume",s),void(s>0&&this.lastVolume_(s))):(s=parseFloat(this.techGet_("volume")),isNaN(s)?1:s)}muted(r){if(void 0===r)return this.techGet_("muted")||!1;this.techCall_("setMuted",r)}defaultMuted(r){return void 0!==r&&this.techCall_("setDefaultMuted",r),this.techGet_("defaultMuted")||!1}lastVolume_(r){if(void 0===r||0===r)return this.cache_.lastVolume;this.cache_.lastVolume=r}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(r){if(void 0!==r){const s=this.isFullscreen_;return this.isFullscreen_=!!r,this.isFullscreen_!==s&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(r){this.isInPictureInPicture()&&this.exitPictureInPicture();const s=this;return new Promise((a,c)=>{function h(){s.off("fullscreenerror",y),s.off("fullscreenchange",f)}function f(){h(),a()}function y(E,x){h(),c(x)}s.one("fullscreenchange",f),s.one("fullscreenerror",y);const T=s.requestFullscreenHelper_(r);T&&(T.then(h,h),T.then(a,c))})}requestFullscreenHelper_(r){let s;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==r&&(s=r)),this.fsApi_.requestFullscreen){const a=this.el_[this.fsApi_.requestFullscreen](s);return a&&a.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),a}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const r=this;return new Promise((s,a)=>{function c(){r.off("fullscreenerror",f),r.off("fullscreenchange",h)}function h(){c(),s()}function f(T,E){c(),a(E)}r.one("fullscreenchange",h),r.one("fullscreenerror",f);const y=r.exitFullscreenHelper_();y&&(y.then(c,c),y.then(s,a))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const r=z()[this.fsApi_.exitFullscreen]();return r&&zi(r.then(()=>this.isFullscreen(!1))),r}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=z().documentElement.style.overflow,Hn(z(),"keydown",this.boundFullWindowOnEscKey_),z().documentElement.style.overflow="hidden",Wn(z().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(r){"Escape"===r.key&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,lr(z(),"keydown",this.boundFullWindowOnEscKey_),z().documentElement.style.overflow=this.docOrigOverflow,xr(z().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(r){if(void 0===r)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",r),this.options_.disablePictureInPicture=r,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(r){return void 0!==r?(this.isInPictureInPicture_=!!r,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&M().documentPictureInPicture){const r=z().createElement(this.el().tagName);return r.classList=this.el().classList,r.classList.add("vjs-pip-container"),this.posterImage&&r.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&r.appendChild(this.titleBar.el().cloneNode(!0)),r.appendChild(_t("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),M().documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(s=>(qo(s),this.el_.parentNode.insertBefore(r,this.el_),s.document.body.appendChild(this.el_),s.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:s}),s.addEventListener("pagehide",a=>{const c=a.target.querySelector(".video-js");r.parentNode.replaceChild(c,r),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),s))}return"pictureInPictureEnabled"in z()&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return M().documentPictureInPicture&&M().documentPictureInPicture.window?(M().documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in z()?z().exitPictureInPicture():void 0}handleKeyDown(r){const{userActions:s}=this.options_;!s||!s.hotkeys||(c=>{const h=c.tagName.toLowerCase();return!!c.isContentEditable||("input"===h?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(c.type):-1!==["textarea"].indexOf(h))})(this.el_.ownerDocument.activeElement)||("function"==typeof s.hotkeys?s.hotkeys.call(this,r):this.handleHotkeys(r))}handleHotkeys(r){const s=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:a=(f=>"f"===r.key.toLowerCase()),muteKey:c=(f=>"m"===r.key.toLowerCase()),playPauseKey:h=(f=>"k"===r.key.toLowerCase()||" "===r.key.toLowerCase())}=s;if(a.call(this,r)){r.preventDefault(),r.stopPropagation();const f=ue.getComponent("FullscreenToggle");!1!==z()[this.fsApi_.fullscreenEnabled]&&f.prototype.handleClick.call(this,r)}else c.call(this,r)?(r.preventDefault(),r.stopPropagation(),ue.getComponent("MuteToggle").prototype.handleClick.call(this,r)):h.call(this,r)&&(r.preventDefault(),r.stopPropagation(),ue.getComponent("PlayToggle").prototype.handleClick.call(this,r))}canPlayType(r){let s;for(let a=0,c=this.options_.techOrder;a<c.length;a++){const h=c[a];let f=Rt.getTech(h);if(f||(f=ue.getComponent(h)),f){if(f.isSupported()&&(s=f.canPlayType(r),s))return s}else Ht.error(`The "${h}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(r){const s=this.options_.techOrder.map(y=>[y,Rt.getTech(y)]).filter(([y,T])=>T?T.isSupported():(Ht.error(`The "${y}" tech is undefined. Skipped browser support check for that tech.`),!1)),a=function(y,T,E){let x;return y.some(P=>T.some(V=>{if(x=E(P,V),x)return!0})),x};let c;const f=([y,T],E)=>{if(T.canPlaySource(E,this.options_[y.toLowerCase()]))return{source:E,tech:y}};return c=this.options_.sourceOrder?a(r,s,(y=f,(T,E)=>y(E,T))):a(s,r,f),c||!1;var y}handleSrc_(r,s){if(typeof r>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const a=Jr(r);if(a.length){if(this.changingSrc_=!0,s||(this.cache_.sources=a),this.updateSourceCaches_(a[0]),G_(this,a[0],(c,h)=>{if(this.middleware_=h,s||(this.cache_.sources=a),this.updateSourceCaches_(c),this.src_(c))return a.length>1?this.handleSrc_(a.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());!function vm(u,r){u.forEach(s=>s.setTech&&s.setTech(r))}(h,this.tech_)}),a.length>1){const c=()=>{this.error(null),this.handleSrc_(a.slice(1),!0)},h=()=>{this.off("error",c)};this.one("error",c),this.one("playing",h),this.resetRetryOnError_=()=>{this.off("error",c),this.off("playing",h)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)}src(r){return this.handleSrc_(r,!1)}src_(r){const s=this.selectSource([r]);return!s||(L_(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",r):this.techCall_("src",r.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1))}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){this.paused()?this.doReset_():zi(this.play().then(()=>this.doReset_()))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),ks(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:r,durationDisplay:s,progressControl:a,remainingTimeDisplay:c}=this.controlBar||{},{seekBar:h}=a||{};r&&r.updateContent(),s&&s.updateContent(),c&&c.updateContent(),h&&(h.update(),h.loadProgressBar&&h.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const r=this.currentSource(),s=[];return 0!==Object.keys(r).length&&s.push(r),this.cache_.sources||s}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(r){return void 0!==r?(this.techCall_("setPreload",r),void(this.options_.preload=r)):this.techGet_("preload")}autoplay(r){if(void 0===r)return this.options_.autoplay||!1;let s;"string"==typeof r&&/(any|play|muted)/.test(r)||!0===r&&this.options_.normalizeAutoplay?(this.options_.autoplay=r,this.manualAutoplay_("string"==typeof r?r:"play"),s=!1):this.options_.autoplay=!!r,s=typeof s>"u"?this.options_.autoplay:s,this.tech_&&this.techCall_("setAutoplay",s)}playsinline(r){return void 0!==r&&(this.techCall_("setPlaysinline",r),this.options_.playsinline=r),this.techGet_("playsinline")}loop(r){return void 0!==r?(this.techCall_("setLoop",r),void(this.options_.loop=r)):this.techGet_("loop")}poster(r){if(void 0===r)return this.poster_;r||(r=""),r!==this.poster_&&(this.poster_=r,this.techCall_("setPoster",r),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const r=this.tech_.poster()||"";r!==this.poster_&&(this.poster_=r,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(r){if(void 0===r)return!!this.controls_;this.controls_!==(r=!!r)&&(this.controls_=r,this.usingNativeControls()&&this.techCall_("setControls",r),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(r){if(void 0===r)return!!this.usingNativeControls_;this.usingNativeControls_!==(r=!!r)&&(this.usingNativeControls_=r,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(r){if(void 0===r)return this.error_||null;if(to("beforeerror").forEach(s=>{const a=s(this,r);ui(a)&&!Array.isArray(a)||"string"==typeof a||"number"==typeof a||null===a?r=a:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&r&&4===r.code){const s=function(){this.error(r)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),void this.one("loadstart",function(){this.off(["click","touchstart"],s)})}if(null===r)return this.error_=null,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Mn(r),this.addClass("vjs-error"),Ht.error(`(CODE:${this.error_.code} ${Mn.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),to("error").forEach(s=>s(this,this.error_))}reportUserActivity(r){this.userActivity_=!0}userActive(r){if(void 0===r)return this.userActive_;if((r=!!r)!==this.userActive_){if(this.userActive_=r,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(s){s.stopPropagation(),s.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let r,s,a;const c=Ft(this,this.reportUserActivity),y=function(P){c(),this.clearInterval(r)};this.on("mousedown",function(){c(),this.clearInterval(r),r=this.setInterval(c,250)}),this.on("mousemove",function(P){(P.screenX!==s||P.screenY!==a)&&(s=P.screenX,a=P.screenY,c())}),this.on("mouseup",y),this.on("mouseleave",y);const T=this.getChild("controlBar");let E;T&&!$r&&!_r&&(T.on("mouseenter",function(P){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),T.on("mouseleave",function(P){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",c),this.on("keyup",c),this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(E);const P=this.options_.inactivityTimeout;P<=0||(E=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},P))},250)}playbackRate(r){if(void 0===r)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",r)}defaultPlaybackRate(r){return void 0!==r?this.techCall_("setDefaultPlaybackRate",r):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(r){if(void 0===r)return!!this.isAudio_;this.isAudio_=!!r}updatePlayerHeightOnAudioOnlyMode_(){const r=this.getChild("ControlBar");!r||this.audioOnlyCache_.controlBarHeight===r.currentHeight()||(this.audioOnlyCache_.controlBarHeight=r.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const r=this.children(),s=this.getChild("ControlBar"),a=s&&s.currentHeight();r.forEach(c=>{c!==s&&c.el_&&!c.hasClass("vjs-hidden")&&(c.hide(),this.audioOnlyCache_.hiddenChildren.push(c))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=a,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(a),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(r=>r.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(r){if("boolean"!=typeof r||r===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=r,r){const s=[];return this.isInPictureInPicture()&&s.push(this.exitPictureInPicture()),this.isFullscreen()&&s.push(this.exitFullscreen()),this.audioPosterMode()&&s.push(this.audioPosterMode(!1)),Promise.all(s).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(r){return"boolean"!=typeof r||r===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=r,r?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(r,s,a){if(this.tech_)return this.tech_.addTextTrack(r,s,a)}addRemoteTextTrack(r,s){if(this.tech_)return this.tech_.addRemoteTextTrack(r,s)}removeRemoteTextTrack(r={}){let{track:s}=r;if(s||(s=r),this.tech_)return this.tech_.removeRemoteTextTrack(s)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(r){if(void 0===r)return this.language_;this.language_!==String(r).toLowerCase()&&(this.language_=String(r).toLowerCase(),ks(this)&&this.trigger("languagechange"))}languages(){return Xt($t.prototype.options_.languages,this.languages_)}toJSON(){const r=Xt(this.options_),s=r.tracks;r.tracks=[];for(let a=0;a<s.length;a++){let c=s[a];c=Xt(c),c.player=void 0,r.tracks[a]=c}return r}createModal(r,s){(s=s||{}).content=r||"";const a=new Xo(this,s);return this.addChild(a),a.on("dispose",()=>{this.removeChild(a)}),a.open(),a}updateCurrentBreakpoint_(){if(!this.responsive())return;const r=this.currentBreakpoint(),s=this.currentWidth();for(let a=0;a<Sd.length;a++){const c=Sd[a];if(s<=this.breakpoints_[c]){if(r===c)return;r&&this.removeClass(co[r]),this.addClass(co[c]),this.breakpoint_=c;break}}}removeCurrentBreakpoint_(){const r=this.currentBreakpointClass();this.breakpoint_="",r&&this.removeClass(r)}breakpoints(r){return void 0===r||(this.breakpoint_="",this.breakpoints_=Object.assign({},db,r),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(r){return void 0===r?this.responsive_:(r=!!r)!==this.responsive_?(this.responsive_=r,r?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),r):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return co[this.breakpoint_]||""}loadMedia(r,s){if(!r||"object"!=typeof r)return;const a=this.crossOrigin();this.reset(),this.cache_.media=Xt(r);const{artist:c,artwork:h,description:f,poster:y,src:T,textTracks:E,title:x}=this.cache_.media;!h&&y&&(this.cache_.media.artwork=[{src:y,type:cl(y)}]),a&&this.crossOrigin(a),T&&this.src(T),y&&this.poster(y),Array.isArray(E)&&E.forEach(P=>this.addRemoteTextTrack(P,!1)),this.titleBar&&this.titleBar.update({title:x,description:f||c||""}),this.ready(s)}getMedia(){if(!this.cache_.media){const r=this.poster(),c={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),h=>({kind:h.kind,label:h.label,language:h.language,src:h.src}))};return r&&(c.poster=r,c.artwork=[{src:c.poster,type:cl(c.poster)}]),c}return Xt(this.cache_.media)}static getTagSettings(r){const s={sources:[],tracks:[]},a=$n(r),c=a["data-setup"];if(Ha(r,"vjs-fill")&&(a.fill=!0),Ha(r,"vjs-fluid")&&(a.fluid=!0),null!==c){const[h,f]=ae()(c||"{}");h&&Ht.error(h),Object.assign(a,f)}if(Object.assign(s,a),r.hasChildNodes()){const h=r.childNodes;for(let f=0,y=h.length;f<y;f++){const T=h[f],E=T.nodeName.toLowerCase();"source"===E?s.sources.push($n(T)):"track"===E&&s.tracks.push($n(T))}}return s}debug(r){if(void 0===r)return this.debugEnabled_;r?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(r){if(void 0===r)return this.cache_.playbackRates;Array.isArray(r)&&r.every(s=>"number"==typeof s)&&(this.cache_.playbackRates=r,this.trigger("playbackrateschange"))}}Or.names.forEach(function(u){const r=Or[u];$t.prototype[r.getterName]=function(){return this.tech_?this.tech_[r.getterName]():(this[r.privateName]=this[r.privateName]||new r.ListClass,this[r.privateName])}}),$t.prototype.crossorigin=$t.prototype.crossOrigin,$t.players={};const bl=M().navigator;$t.prototype.options_={techOrder:Rt.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:bl&&(bl.languages&&bl.languages[0]||bl.userLanguage||bl.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1},Hm.forEach(function(u){$t.prototype[`handleTech${Xn(u)}_`]=function(){return this.trigger(u)}}),ue.registerComponent("Player",$t);const ho="plugin",fo="activePlugins_",ou={},Tl=u=>ou.hasOwnProperty(u),ra=u=>Tl(u)?ou[u]:void 0,ia=(u,r)=>{u[fo]=u[fo]||{},u[fo][r]=!0},Ns=(u,r,s)=>{const a=(s?"before":"")+"pluginsetup";u.trigger(a,r),u.trigger(a+":"+r.name,r)},Wf=(u,r)=>(r.prototype.name=u,function(...s){Ns(this,{name:u,plugin:r,instance:null},!0);const a=new r(this,...s);return this[u]=()=>a,Ns(this,a.getEventHash()),a});let ps=(()=>{class u{constructor(s){if(this.constructor===u)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=s,this.log||(this.log=this.player.log.createLogger(this.name)),cm(this),delete this.trigger,N_(this,this.constructor.defaultState),ia(s,this.name),this.dispose=this.dispose.bind(this),s.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(s={}){return s.name=this.name,s.plugin=this.constructor,s.instance=this,s}trigger(s,a={}){return qi(this.eventBusEl_,s,this.getEventHash(a))}handleStateChanged(s){}dispose(){const{name:s,player:a}=this;this.trigger("dispose"),this.off(),a.off("dispose",this.dispose),a[fo][s]=!1,this.player=this.state=null,a[s]=Wf(s,ou[s])}static isBasic(s){const a="string"==typeof s?ra(s):s;return"function"==typeof a&&!u.prototype.isPrototypeOf(a.prototype)}static registerPlugin(s,a){if("string"!=typeof s)throw new Error(`Illegal plugin name, "${s}", must be a string, was ${typeof s}.`);if(Tl(s))Ht.warn(`A plugin named "${s}" already exists. You may want to avoid re-registering plugins!`);else if($t.prototype.hasOwnProperty(s))throw new Error(`Illegal plugin name, "${s}", cannot share a name with an existing player method!`);if("function"!=typeof a)throw new Error(`Illegal plugin for "${s}", must be a function, was ${typeof a}.`);return ou[s]=a,s!==ho&&($t.prototype[s]=u.isBasic(a)?function(u,r){const s=function(){Ns(this,{name:u,plugin:r,instance:null},!0);const a=r.apply(this,arguments);return ia(this,u),Ns(this,{name:u,plugin:r,instance:a}),a};return Object.keys(r).forEach(function(a){s[a]=r[a]}),s}(s,a):Wf(s,a)),a}static deregisterPlugin(s){if(s===ho)throw new Error("Cannot de-register base plugin.");Tl(s)&&(delete ou[s],delete $t.prototype[s])}static getPlugins(s=Object.keys(ou)){let a;return s.forEach(c=>{const h=ra(c);h&&(a=a||{},a[c]=h)}),a}static getPluginVersion(s){const a=ra(s);return a&&a.VERSION||""}}return u.getPlugin=ra,u.BASE_PLUGIN_NAME=ho,u})();function gs(u,r,s,a){return function uu(u,r){let s=!1;return function(...a){return s||Ht.warn(u),s=!0,r.apply(this,a)}}(`${r} is deprecated and will be removed in ${u}.0; please use ${s} instead.`,a)}ps.registerPlugin(ho,ps),$t.prototype.usingPlugin=function(u){return!!this[fo]&&!0===this[fo][u]},$t.prototype.hasPlugin=function(u){return!!Tl(u)};const fb=u=>0===u.indexOf("#")?u.slice(1):u;function J(u,r,s){let a=J.getPlayer(u);if(a)return r&&Ht.warn(`Player "${u}" is already initialised. Options will not be applied.`),s&&a.ready(s),a;const c="string"==typeof u?ci("#"+fb(u)):u;if(!wr(c))throw new TypeError("The element or ID supplied is not valid. (videojs)");const f="getRootNode"in c&&c.getRootNode()instanceof M().ShadowRoot?c.getRootNode():c.ownerDocument.body;(!c.ownerDocument.defaultView||!f.contains(c))&&Ht.warn("The element supplied is not included in the DOM"),!0===(r=r||{}).restoreEl&&(r.restoreEl=(c.parentNode&&c.parentNode.hasAttribute&&c.parentNode.hasAttribute("data-vjs-player")?c.parentNode:c).cloneNode(!0)),to("beforesetup").forEach(T=>{const E=T(c,Xt(r));ui(E)&&!Array.isArray(E)?r=Xt(r,E):Ht.error("please return an object in beforesetup hooks")});const y=ue.getComponent("Player");return a=new y(c,r,s),to("setup").forEach(T=>T(a)),a}if(J.hooks_=Ms,J.hooks=to,J.hook=function(u,r){to(u,r)},J.hookOnce=function(u,r){to(u,[].concat(r).map(s=>{const a=(...c)=>(lf(u,a),s(...c));return a}))},J.removeHook=lf,!0!==M().VIDEOJS_NO_DYNAMIC_STYLE&&Va()){let u=ci(".vjs-styles-defaults");if(!u){u=Go("vjs-styles-defaults");const r=ci("head");r&&r.insertBefore(u,r.firstChild),Hi(u,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Nn(1,J),J.VERSION=La,J.options=$t.prototype.options_,J.getPlayers=()=>$t.players,J.getPlayer=u=>{const r=$t.players;let s;if("string"==typeof u){const a=fb(u),c=r[a];if(c)return c;s=ci("#"+a)}else s=u;if(wr(s)){const{player:a,playerId:c}=s;if(a||r[c])return a||r[c]}},J.getAllPlayers=()=>Object.keys($t.players).map(u=>$t.players[u]).filter(Boolean),J.players=$t.players,J.getComponent=ue.getComponent,J.registerComponent=(u,r)=>(Rt.isTech(r)&&Ht.warn(`The ${u} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),ue.registerComponent.call(ue,u,r)),J.getTech=Rt.getTech,J.registerTech=Rt.registerTech,J.use=function z_(u,r){Qo[u]=Qo[u]||[],Qo[u].push(r)},Object.defineProperty(J,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(J.middleware,"TERMINATOR",{value:ll,writeable:!1,enumerable:!0}),J.browser=pf,J.obj=cf,J.mergeOptions=gs(9,"videojs.mergeOptions","videojs.obj.merge",Xt),J.defineLazyProperty=gs(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",$o),J.bind=gs(9,"videojs.bind","native Function.prototype.bind",Ft),J.registerPlugin=ps.registerPlugin,J.deregisterPlugin=ps.deregisterPlugin,J.plugin=(u,r)=>(Ht.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ps.registerPlugin(u,r)),J.getPlugins=ps.getPlugins,J.getPlugin=ps.getPlugin,J.getPluginVersion=ps.getPluginVersion,J.addLanguage=function(u,r){return u=(""+u).toLowerCase(),(J.options.languages=Xt(J.options.languages,{[u]:r}))[u]},J.log=Ht,J.createLogger=Ua,J.time=Zc,J.createTimeRange=gs(9,"videojs.createTimeRange","videojs.time.createTimeRanges",as),J.createTimeRanges=gs(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",as),J.formatTime=gs(9,"videojs.formatTime","videojs.time.formatTime",Ln),J.setFormatTime=gs(9,"videojs.setFormatTime","videojs.time.setFormatTime",B_),J.resetFormatTime=gs(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",U_),J.parseUrl=gs(9,"videojs.parseUrl","videojs.url.parseUrl",al),J.isCrossOrigin=gs(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Cf),J.EventTarget=Hr,J.any=cr,J.on=Hn,J.one=oo,J.off=lr,J.trigger=qi,J.xhr=Re(),J.TextTrack=Za,J.AudioTrack=mm,J.VideoTrack=ym,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(u=>{J[u]=function(){return Ht.warn(`videojs.${u}() is deprecated; use videojs.dom.${u}() instead`),It[u].apply(null,arguments)}}),J.computedStyle=gs(9,"videojs.computedStyle","videojs.dom.computedStyle",di),J.dom=It,J.fn=Xc,J.num=fl,J.str=FE,J.url=jE,J.Error={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};class $E{constructor(r){let s=this;return s.id=r.id,s.label=s.id,s.width=r.width,s.height=r.height,s.bitrate=r.bandwidth,s.frameRate=r.frameRate,s.enabled_=r.enabled,Object.defineProperty(s,"enabled",{get:()=>s.enabled_(),set(a){s.enabled_(a)}}),s}}class Xf extends J.EventTarget{constructor(){super();let r=this;return r.levels_=[],r.selectedIndex_=-1,Object.defineProperty(r,"selectedIndex",{get:()=>r.selectedIndex_}),Object.defineProperty(r,"length",{get:()=>r.levels_.length}),r[Symbol.iterator]=()=>r.levels_.values(),r}addQualityLevel(r){let s=this.getQualityLevelById(r.id);if(s)return s;const a=this.levels_.length;return s=new $E(r),""+a in this||Object.defineProperty(this,a,{get(){return this.levels_[a]}}),this.levels_.push(s),this.trigger({qualityLevel:s,type:"addqualitylevel"}),s}removeQualityLevel(r){let s=null;for(let a=0,c=this.length;a<c;a++)if(this[a]===r){s=this.levels_.splice(a,1)[0],this.selectedIndex_===a?this.selectedIndex_=-1:this.selectedIndex_>a&&this.selectedIndex_--;break}return s&&this.trigger({qualityLevel:r,type:"removequalitylevel"}),s}getQualityLevelById(r){for(let s=0,a=this.length;s<a;s++){const c=this[s];if(c.id===r)return c}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}Xf.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const u in Xf.prototype.allowedEvents_)Xf.prototype["on"+u]=null;const sa=function(u){return function(u,r){const s=u.qualityLevels,a=new Xf,c=function(){a.dispose(),u.qualityLevels=s,u.off("dispose",c)};return u.on("dispose",c),u.qualityLevels=()=>a,u.qualityLevels.VERSION="4.1.0",a}(this,J.obj.merge({},u))};J.registerPlugin("qualityLevels",sa),sa.VERSION="4.1.0";const ei=dt,Ed=(u,r)=>r&&r.responseURL&&u!==r.responseURL?r.responseURL:u,en=u=>J.log.debug?J.log.debug.bind(J,"VHS:",`${u} >`):function(){};function tn(...u){const r=J.obj||J;return(r.merge||r.mergeOptions).apply(r,u)}function Yn(...u){const r=J.time||J;return(r.createTimeRanges||r.createTimeRanges).apply(r,u)}const Qn=1/30,qr=.1,Kf=function(u,r){const s=[];let a;if(u&&u.length)for(a=0;a<u.length;a++)r(u.start(a),u.end(a))&&s.push([u.start(a),u.end(a)]);return Yn(s)},Ls=function(u,r){return Kf(u,function(s,a){return s-qr<=r&&a+qr>=r})},po=function(u,r){return Kf(u,function(s){return s-Qn>=r})},qm=u=>{const r=[];if(!u||!u.length)return"";for(let s=0;s<u.length;s++)r.push(u.start(s)+" => "+u.end(s));return r.join(", ")},dr=u=>{const r=[];for(let s=0;s<u.length;s++)r.push({start:u.start(s),end:u.end(s)});return r},go=function(u){if(u&&u.length&&u.end)return u.end(u.length-1)},zm=function(u,r){let s=0;if(!u||!u.length)return s;for(let a=0;a<u.length;a++){const c=u.start(a),h=u.end(a);if(!(r>h)){if(r>c&&r<=h){s+=h-r;continue}s+=h-c}}return s},Dd=(u,r)=>{if(!r.preload)return r.duration;let s=0;return(r.parts||[]).forEach(function(a){s+=a.duration}),(r.preloadHints||[]).forEach(function(a){"PART"===a.type&&(s+=u.partTargetDuration)}),s},Qf=u=>(u.segments||[]).reduce((r,s,a)=>(s.parts?s.parts.forEach(function(c,h){r.push({duration:c.duration,segmentIndex:a,partIndex:h,part:c,segment:s})}):r.push({duration:s.duration,segmentIndex:a,partIndex:null,segment:s,part:null}),r),[]),Gm=u=>{const r=u.segments&&u.segments.length&&u.segments[u.segments.length-1];return r&&r.parts||[]},Wm=({preloadSegment:u})=>{if(!u)return;const{parts:r,preloadHints:s}=u;let a=(s||[]).reduce((c,h)=>c+("PART"===h.type?1:0),0);return a+=r&&r.length?r.length:0,a},Xm=(u,r)=>{if(r.endList)return 0;if(u&&u.suggestedPresentationDelay)return u.suggestedPresentationDelay;const s=Gm(r).length>0;return s&&r.serverControl&&r.serverControl.partHoldBack?r.serverControl.partHoldBack:s&&r.partTargetDuration?3*r.partTargetDuration:r.serverControl&&r.serverControl.holdBack?r.serverControl.holdBack:r.targetDuration?3*r.targetDuration:0},wd=function(u,r,s){if(typeof r>"u"&&(r=u.mediaSequence+u.segments.length),r<u.mediaSequence)return 0;const a=function(u,r){let s=0,a=r-u.mediaSequence,c=u.segments[a];if(c){if(typeof c.start<"u")return{result:c.start,precise:!0};if(typeof c.end<"u")return{result:c.end-c.duration,precise:!0}}for(;a--;){if(c=u.segments[a],typeof c.end<"u")return{result:s+c.end,precise:!0};if(s+=Dd(u,c),typeof c.start<"u")return{result:s+c.start,precise:!0}}return{result:s,precise:!1}}(u,r);if(a.precise)return a.result;const c=function(u,r){let a,s=0,c=r-u.mediaSequence;for(;c<u.segments.length;c++){if(a=u.segments[c],typeof a.start<"u")return{result:a.start-s,precise:!0};if(s+=Dd(u,a),typeof a.end<"u")return{result:a.end-s,precise:!0}}return{result:-1,precise:!1}}(u,r);return c.precise?c.result:a.result+s},Cl=function(u,r,s){if(!u)return 0;if("number"!=typeof s&&(s=0),typeof r>"u"){if(u.totalDuration)return u.totalDuration;if(!u.endList)return M()[1/0]}return wd(u,r,s)},Sl=function({defaultDuration:u,durationList:r,startIndex:s,endIndex:a}){let c=0;if(s>a&&([s,a]=[a,s]),s<0){for(let h=s;h<Math.min(0,a);h++)c+=u;s=0}for(let h=s;h<a;h++)c+=r[h].duration;return c},El=function(u,r,s,a){if(!u||!u.segments)return null;if(u.endList)return Cl(u);if(null===r)return null;let c=wd(u,u.mediaSequence+u.segments.length,r=r||0);return s&&(c-=a="number"==typeof a?a:Xm(null,u)),Math.max(0,c)},Km=function(u){return u.excludeUntil&&u.excludeUntil>Date.now()},Id=function(u){return u.excludeUntil&&u.excludeUntil===1/0},lu=function(u){const r=Km(u);return!u.disabled&&!r},Qm=function(u,r){return r.attributes&&r.attributes[u]},mo=(u,r)=>{if(1===u.playlists.length)return!0;const s=r.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===u.playlists.filter(a=>!!lu(a)&&(a.attributes.BANDWIDTH||0)<s).length},oa=(u,r)=>!(!u&&!r||!u&&r||u&&!r||!(u===r||u.id&&r.id&&u.id===r.id||u.resolvedUri&&r.resolvedUri&&u.resolvedUri===r.resolvedUri||u.uri&&r.uri&&u.uri===r.uri)),Zm=function(u,r){const s=u&&u.mediaGroups&&u.mediaGroups.AUDIO||{};let a=!1;for(const c in s){for(const h in s[c])if(a=r(s[c][h]),a)break;if(a)break}return!!a},Md=u=>{if(!u||!u.playlists||!u.playlists.length)return Zm(u,s=>s.playlists&&s.playlists.length||s.uri);for(let r=0;r<u.playlists.length;r++){const s=u.playlists[r],a=s.attributes&&s.attributes.CODECS;if(!(a&&a.split(",").every(h=>Pt(h))||Zm(u,h=>oa(s,h))))return!1}return!0};var zr={liveEdgeDelay:Xm,duration:Cl,seekable:function(u,r,s){const c=r||0;let h=El(u,r,!0,s);return null===h?Yn():(h<c&&(h=c),Yn(c,h))},getMediaInfoForTime:function({playlist:u,currentTime:r,startingSegmentIndex:s,startingPartIndex:a,startTime:c,exactManifestTimings:h}){let f=r-c;const y=Qf(u);let T=0;for(let E=0;E<y.length;E++){const x=y[E];if(s===x.segmentIndex&&("number"!=typeof a||"number"!=typeof x.partIndex||a===x.partIndex)){T=E;break}}if(f<0){if(T>0)for(let E=T-1;E>=0;E--){const x=y[E];if(f+=x.duration,h){if(f<0)continue}else if(f+Qn<=0)continue;return{partIndex:x.partIndex,segmentIndex:x.segmentIndex,startTime:c-Sl({defaultDuration:u.targetDuration,durationList:y,startIndex:T,endIndex:E})}}return{partIndex:y[0]&&y[0].partIndex||null,segmentIndex:y[0]&&y[0].segmentIndex||0,startTime:r}}if(T<0){for(let E=T;E<0;E++)if(f-=u.targetDuration,f<0)return{partIndex:y[0]&&y[0].partIndex||null,segmentIndex:y[0]&&y[0].segmentIndex||0,startTime:r};T=0}for(let E=T;E<y.length;E++){const x=y[E];if(f-=x.duration,0!==f&&!(x.duration>Qn&&f+Qn>=0)||E===y.length-1){if(h){if(f>0)continue}else if(f-Qn>=0)continue;return{partIndex:x.partIndex,segmentIndex:x.segmentIndex,startTime:c+Sl({defaultDuration:u.targetDuration,durationList:y,startIndex:T,endIndex:E})}}}return{segmentIndex:y[y.length-1].segmentIndex,partIndex:y[y.length-1].partIndex,startTime:r}},isEnabled:lu,isDisabled:function(u){return u.disabled},isExcluded:Km,isIncompatible:Id,playlistEnd:El,isAes:function(u){for(let r=0;r<u.segments.length;r++)if(u.segments[r].key)return!0;return!1},hasAttribute:Qm,estimateSegmentRequestTime:function(u,r,s,a=0){return Qm("BANDWIDTH",s)?(u*s.attributes.BANDWIDTH-8*a)/r:NaN},isLowestEnabledRendition:mo,isAudioOnly:Md,playlistMatch:oa,segmentDurationWithParts:Dd};const{log:Jm}=J,Dl=(u,r)=>`${u}-${r}`,e0=(u,r,s)=>`placeholder-uri-${u}-${r}-${s}`,cu=(u,r)=>{u.mediaGroups&&["AUDIO","SUBTITLES"].forEach(s=>{if(u.mediaGroups[s])for(const a in u.mediaGroups[s])for(const c in u.mediaGroups[s][a])r(u.mediaGroups[s][a][c],s,a,c)})},wl=({playlist:u,uri:r,id:s})=>{u.id=s,u.playlistErrors_=0,r&&(u.uri=r),u.attributes=u.attributes||{}},Sb=(u,r,s=e0)=>{u.uri=r;for(let c=0;c<u.playlists.length;c++)u.playlists[c].uri||(u.playlists[c].uri=`placeholder-uri-${c}`);const a=Md(u);cu(u,(c,h,f,y)=>{if(!c.playlists||!c.playlists.length){if(a&&"AUDIO"===h&&!c.uri)for(let T=0;T<u.playlists.length;T++){const E=u.playlists[T];if(E.attributes&&E.attributes.AUDIO&&E.attributes.AUDIO===f)return}c.playlists=[Je({},c)]}c.playlists.forEach(function(T,E){const x=s(h,f,y,T),P=Dl(E,x);T.uri?T.resolvedUri=T.resolvedUri||ei(u.uri,T.uri):(T.uri=0===E?x:P,T.resolvedUri=T.uri),T.id=T.id||P,T.attributes=T.attributes||{},u.playlists[T.id]=T,u.playlists[T.uri]=T})}),(u=>{let r=u.playlists.length;for(;r--;){const s=u.playlists[r];wl({playlist:s,id:Dl(r,s.uri)}),s.resolvedUri=ei(u.uri,s.uri),u.playlists[s.id]=s,u.playlists[s.uri]=s,s.attributes.BANDWIDTH||Jm.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(u),(u=>{cu(u,r=>{r.uri&&(r.resolvedUri=ei(u.uri,r.uri))})})(u)};class Zf{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(r=[]){if(null!==this.offset_||!r.length)return;const[s]=r;void 0!==s.programDateTime&&(this.offset_=s.programDateTime/1e3)}setPendingDateRanges(r=[]){if(!r.length)return;const[s]=r,a=s.startDate.getTime();this.trimProcessedDateRanges_(a),this.pendingDateRanges_=r.reduce((c,h)=>(c.set(h.id,h),c),new Map)}processDateRange(r){this.pendingDateRanges_.delete(r.id),this.processedDateRanges_.set(r.id,r)}getDateRangesToProcess(){if(null===this.offset_)return[];const r={},s=[];this.pendingDateRanges_.forEach((a,c)=>{if(!this.processedDateRanges_.has(c)&&(a.startTime=a.startDate.getTime()/1e3-this.offset_,a.processDateRange=()=>this.processDateRange(a),s.push(a),a.class))if(r[a.class]){const h=r[a.class].push(a);a.classListIndex=h-1}else r[a.class]=[a],a.classListIndex=0});for(const a of s){const c=r[a.class]||[];a.endTime=a.endDate?a.endDate.getTime()/1e3-this.offset_:a.endOnNext&&c[a.classListIndex+1]?c[a.classListIndex+1].startTime:a.duration?a.startTime+a.duration:a.plannedDuration?a.startTime+a.plannedDuration:a.startTime}return s}trimProcessedDateRanges_(r){new Map(this.processedDateRanges_).forEach((a,c)=>{a.startDate.getTime()<r&&this.processedDateRanges_.delete(c)})}}const aa=({requestType:u,request:r,error:s,parseFailure:a})=>{const h=r.status>=400&&r.status<=499,f={uri:r.uri,requestType:u},y=(r.status<200||r.status>299)&&!h||a;return s&&h?(f.error=Je({},s),f.errorType=J.Error.NetworkRequestFailed):r.aborted?f.errorType=J.Error.NetworkRequestAborted:r.timedout?f.erroType=J.Error.NetworkRequestTimeout:y&&(f.errorType=a?J.Error.NetworkBodyParserFailed:J.Error.NetworkBadStatus,f.status=r.status,f.headers=r.headers),f},{EventTarget:Db}=J,zE=(u,r)=>{if(!u)return r;const s=tn(u,r);if(u.preloadHints&&!r.preloadHints&&delete s.preloadHints,u.parts&&!r.parts)delete s.parts;else if(u.parts&&r.parts)for(let a=0;a<r.parts.length;a++)u.parts&&u.parts[a]&&(s.parts[a]=tn(u.parts[a],r.parts[a]));return!u.skipped&&r.skipped&&(s.skipped=!1),u.preload&&!r.preload&&(s.preload=!1),s},kd=(u,r)=>{!u.resolvedUri&&u.uri&&(u.resolvedUri=ei(r,u.uri)),u.key&&!u.key.resolvedUri&&(u.key.resolvedUri=ei(r,u.key.uri)),u.map&&!u.map.resolvedUri&&(u.map.resolvedUri=ei(r,u.map.uri)),u.map&&u.map.key&&!u.map.key.resolvedUri&&(u.map.key.resolvedUri=ei(r,u.map.key.uri)),u.parts&&u.parts.length&&u.parts.forEach(s=>{s.resolvedUri||(s.resolvedUri=ei(r,s.uri))}),u.preloadHints&&u.preloadHints.length&&u.preloadHints.forEach(s=>{s.resolvedUri||(s.resolvedUri=ei(r,s.uri))})},wb=function(u){const r=u.segments||[],s=u.preloadSegment;if(s&&s.parts&&s.parts.length){if(s.preloadHints)for(let a=0;a<s.preloadHints.length;a++)if("MAP"===s.preloadHints[a].type)return r;s.duration=u.targetDuration,s.preload=!0,r.push(s)}return r},xb=(u,r)=>u===r||u.segments&&r.segments&&u.segments.length===r.segments.length&&u.endList===r.endList&&u.mediaSequence===r.mediaSequence&&u.preloadSegment===r.preloadSegment,r0=(u,r,s=xb)=>{const a=tn(u,{}),c=a.playlists[r.id];if(!c||s(c,r))return null;r.segments=wb(r);const h=tn(c,r);if(h.preloadSegment&&!r.preloadSegment&&delete h.preloadSegment,c.segments){if(r.skip){r.segments=r.segments||[];for(let f=0;f<r.skip.skippedSegments;f++)r.segments.unshift({skipped:!0})}h.segments=((u,r,s)=>{const a=u.slice(),c=r.slice();s=s||0;const h=[];let f;for(let y=0;y<c.length;y++){const T=a[y+s],E=c[y];T?(f=T.map||f,h.push(zE(T,E))):(f&&!E.map&&(E.map=f),h.push(E))}return h})(c.segments,r.segments,r.mediaSequence-c.mediaSequence)}h.segments.forEach(f=>{kd(f,h.resolvedUri)});for(let f=0;f<a.playlists.length;f++)a.playlists[f].id===r.id&&(a.playlists[f]=h);return a.playlists[r.id]=h,a.playlists[r.uri]=h,cu(u,(f,y,T,E)=>{if(f.playlists)for(let x=0;x<f.playlists.length;x++)r.id===f.playlists[x].id&&(f.playlists[x]=h)}),a},s0=(u,r)=>{const s=u.segments||[],a=s[s.length-1],c=a&&a.parts&&a.parts[a.parts.length-1],h=c&&c.duration||a&&a.duration;return r&&h?1e3*h:500*(u.partTargetDuration||u.targetDuration||10)},Ib=(u,r,s)=>{if(!u)return;const a=[];return u.forEach(c=>{if(!c.attributes)return;const{BANDWIDTH:h,RESOLUTION:f,CODECS:y}=c.attributes;a.push({id:c.id,bandwidth:h,resolution:f,codecs:y})}),{type:r,isLive:s,renditions:a}};class du extends Db{constructor(r,s,a={}){if(super(),!r)throw new Error("A non-empty playlist URL or object is required");this.logger_=en("PlaylistLoader");const{withCredentials:c=!1}=a;this.src=r,this.vhs_=s,this.withCredentials=c,this.addDateRangesToTextTrack_=a.addDateRangesToTextTrack;const h=s.options_;this.customTagParsers=h&&h.customTagParsers||[],this.customTagMappers=h&&h.customTagMappers||[],this.llhls=h&&h.llhls,this.dateRangesStorage_=new Zf,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const r=this.media();if(!r)return;this.dateRangesStorage_.setOffset(r.segments),this.dateRangesStorage_.setPendingDateRanges(r.dateRanges);const s=this.dateRangesStorage_.getDateRangesToProcess();!s.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(s)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const r=this.media();let s=ei(this.main.uri,r.uri);this.llhls&&(s=((u,r)=>{if(r.endList||!r.serverControl)return u;const s={};if(r.serverControl.canBlockReload){const{preloadSegment:a}=r;let c=r.mediaSequence+r.segments.length;if(a){const h=a.parts||[],f=Wm(r)-1;f>-1&&f!==h.length-1&&(s._HLS_part=f),(f>-1||h.length)&&c--}s._HLS_msn=c}if(r.serverControl&&r.serverControl.canSkipUntil&&(s._HLS_skip=r.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(s).length){const a=new(M().URL)(u);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(c){s.hasOwnProperty(c)&&a.searchParams.set(c,s[c])}),u=a.toString()}return u})(s,r)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials,requestType:"hls-playlist"},(a,c)=>{if(this.request){if(a)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(r,s,a){const{uri:c,id:h}=s;this.request=null,a&&(this.state=a),this.error={playlist:this.main.playlists[h],status:r.status,message:`HLS playlist request error at URL: ${c}.`,responseText:r.responseText,code:r.status>=500?4:2,metadata:aa({requestType:r.requestType,request:r,error:r.error})},this.trigger("error")}parseManifest_({url:r,manifestString:s}){try{return(({onwarn:u,oninfo:r,manifestString:s,customTagParsers:a=[],customTagMappers:c=[],llhls:h})=>{const f=new be;u&&f.on("warn",u),r&&f.on("info",r),a.forEach(E=>f.addParser(E)),c.forEach(E=>f.addTagMapper(E)),f.push(s),f.end();const y=f.manifest;if(h||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(E){y.hasOwnProperty(E)&&delete y[E]}),y.segments&&y.segments.forEach(function(E){["parts","preloadHints"].forEach(function(x){E.hasOwnProperty(x)&&delete E[x]})})),!y.targetDuration){let E=10;y.segments&&y.segments.length&&(E=y.segments.reduce((x,P)=>Math.max(x,P.duration),0)),u&&u({message:`manifest has no targetDuration defaulting to ${E}`}),y.targetDuration=E}const T=Gm(y);if(T.length&&!y.partTargetDuration){const E=T.reduce((x,P)=>Math.max(x,P.duration),0);u&&(u({message:`manifest has no partTargetDuration defaulting to ${E}`}),Jm.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),y.partTargetDuration=E}return y})({onwarn:({message:a})=>this.logger_(`m3u8-parser warn for ${r}: ${a}`),oninfo:({message:a})=>this.logger_(`m3u8-parser info for ${r}: ${a}`),manifestString:s,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(a){this.error=a,this.error.metadata={errorType:J.Error.StreamingHlsPlaylistParserError,error:a}}}haveMetadata({playlistString:r,playlistObject:s,url:a,id:c}){this.request=null,this.state="HAVE_METADATA";const h={playlistInfo:{type:"media",uri:a}};this.trigger({type:"playlistparsestart",metadata:h});const f=s||this.parseManifest_({url:a,manifestString:r});f.lastRequest=Date.now(),wl({playlist:f,uri:a,id:c});const y=r0(this.main,f);this.targetDuration=f.partTargetDuration||f.targetDuration,this.pendingMedia_=null,y?(this.main=y,this.media_=this.main.playlists[c]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(s0(this.media(),!!y)),h.parsedPlaylist=Ib(this.main.playlists,h.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:h}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),M().clearTimeout(this.mediaUpdateTimeout),M().clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new Zf,this.off()}stopRequest(){if(this.request){const r=this.request;this.request=null,r.onreadystatechange=null,r.abort()}}media(r,s){if(!r)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof r){if(!this.main.playlists[r])throw new Error("Unknown playlist URI: "+r);r=this.main.playlists[r]}if(M().clearTimeout(this.finalRenditionTimeout),s){const y=(r.partTargetDuration||r.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=M().setTimeout(this.media.bind(this,r,!1),y))}const a=this.state,c=!this.media_||r.id!==this.media_.id,h=this.main.playlists[r.id];if(h&&h.endList||r.endList&&r.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=r,void(c&&(this.trigger("mediachanging"),this.trigger("HAVE_MAIN_MANIFEST"===a?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(s0(r,!0)),!c)return;if(this.state="SWITCHING_MEDIA",this.request){if(r.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=r;const f={playlistInfo:{type:"media",uri:r.uri}};this.trigger({type:"playlistrequeststart",metadata:f}),this.request=this.vhs_.xhr({uri:r.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(y,T)=>{if(this.request){if(r.lastRequest=Date.now(),r.resolvedUri=Ed(r.resolvedUri,T),y)return this.playlistRequestError(this.request,r,a);this.trigger({type:"playlistrequestcomplete",metadata:f}),this.haveMetadata({playlistString:T.responseText,url:r.uri,id:r.id}),this.trigger("HAVE_MAIN_MANIFEST"===a?"loadedmetadata":"mediachange")}})}pause(){this.mediaUpdateTimeout&&(M().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(r){this.mediaUpdateTimeout&&(M().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const s=this.media();if(r){const a=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=M().setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},a)}else this.started?this.trigger(s&&!s.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()}updateMediaUpdateTimeout_(r){this.mediaUpdateTimeout&&(M().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=M().setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(r)},r))}start(){if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=M().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);const r={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:r}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(s,a)=>{if(!this.request)return;if(this.request=null,s)return this.error={status:a.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:a.responseText,code:2,metadata:aa({requestType:a.requestType,request:a,error:s})},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:r}),this.src=Ed(this.src,a),this.trigger({type:"playlistparsestart",metadata:r});const c=this.parseManifest_({manifestString:a.responseText,url:this.src});r.parsedPlaylist=Ib(c.playlists,r.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:r}),this.setupInitialPlaylist(c)})}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(r){if(this.state="HAVE_MAIN_MANIFEST",r.playlists)return this.main=r,Sb(this.main,this.srcUri()),r.playlists.forEach(a=>{a.segments=wb(a),a.segments.forEach(c=>{kd(c,a.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const s=this.srcUri()||M().location.href;this.main=((u,r)=>{const s=Dl(0,r),a={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:M().location.href,resolvedUri:M().location.href,playlists:[{uri:r,id:s,resolvedUri:r,attributes:{}}]};return a.playlists[s]=a.playlists[0],a.playlists[r]=a.playlists[0],a})(0,s),this.haveMetadata({playlistObject:r,url:s,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(r,s){const a=this.main,c=r.ID;let h=a.playlists.length;for(;h--;){const f=a.playlists[h];if(f.attributes["PATHWAY-ID"]===c){const y=f.resolvedUri,T=f.id;if(s){const E=this.createCloneURI_(f.resolvedUri,r),x=Dl(c,E),P=this.createCloneAttributes_(c,f.attributes),V=this.createClonePlaylist_(f,x,r,P);a.playlists[h]=V,a.playlists[x]=V,a.playlists[E]=V}else a.playlists.splice(h,1);delete a.playlists[T],delete a.playlists[y]}}this.updateOrDeleteCloneMedia(r,s)}updateOrDeleteCloneMedia(r,s){const a=this.main,c=r.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(h=>{if(a.mediaGroups[h]&&a.mediaGroups[h][c])for(const f in a.mediaGroups[h])if(f===c){for(const y in a.mediaGroups[h][f])a.mediaGroups[h][f][y].playlists.forEach((E,x)=>{const P=a.playlists[E.id],q=P.resolvedUri;delete a.playlists[P.id],delete a.playlists[q]});delete a.mediaGroups[h][f]}}),s&&this.createClonedMediaGroups_(r)}addClonePathway(r,s={}){const a=this.main,c=a.playlists.length,h=this.createCloneURI_(s.resolvedUri,r),f=Dl(r.ID,h),y=this.createCloneAttributes_(r.ID,s.attributes),T=this.createClonePlaylist_(s,f,r,y);a.playlists[c]=T,a.playlists[f]=T,a.playlists[h]=T,this.createClonedMediaGroups_(r)}createClonedMediaGroups_(r){const s=r.ID,a=r["BASE-ID"],c=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(h=>{if(c.mediaGroups[h]&&!c.mediaGroups[h][s])for(const f in c.mediaGroups[h])if(f===a){c.mediaGroups[h][s]={};for(const y in c.mediaGroups[h][f]){const T=c.mediaGroups[h][f][y];c.mediaGroups[h][s][y]=Je({},T);const E=c.mediaGroups[h][s][y],x=this.createCloneURI_(T.resolvedUri,r);E.resolvedUri=x,E.uri=x,E.playlists=[],T.playlists.forEach((P,V)=>{const q=c.playlists[P.id],L=e0(h,s,y),X=Dl(s,L);if(q&&!c.playlists[X]){const te=this.createClonePlaylist_(q,X,r),ne=te.resolvedUri;c.playlists[X]=te,c.playlists[ne]=te}E.playlists[V]=this.createClonePlaylist_(P,X,r)})}}})}createClonePlaylist_(r,s,a,c){const h=this.createCloneURI_(r.resolvedUri,a),f={resolvedUri:h,uri:h,id:s};return r.segments&&(f.segments=[]),c&&(f.attributes=c),tn(r,f)}createCloneURI_(r,s){const a=new URL(r);a.hostname=s["URI-REPLACEMENT"].HOST;const c=s["URI-REPLACEMENT"].PARAMS;for(const h of Object.keys(c))a.searchParams.set(h,c[h]);return a.href}createCloneAttributes_(r,s){const a={"PATHWAY-ID":r};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(c=>{s[c]&&(a[c]=r)}),a}getKeyIdSet(r){if(r.contentProtection){const s=new Set;for(const a in r.contentProtection){const c=r.contentProtection[a].attributes.keyId;c&&s.add(c.toLowerCase())}return s}}}const hu=function(u,r,s,a){const c="arraybuffer"===u.responseType?u.response:u.responseText;!r&&c&&(u.responseTime=Date.now(),u.roundTripTime=u.responseTime-u.requestTime,u.bytesReceived=c.byteLength||c.length,u.bandwidth||(u.bandwidth=Math.floor(u.bytesReceived/u.roundTripTime*8*1e3))),s.headers&&(u.responseHeaders=s.headers),r&&"ETIMEDOUT"===r.code&&(u.timedout=!0),!r&&!u.aborted&&200!==s.statusCode&&206!==s.statusCode&&0!==s.statusCode&&(r=new Error("XHR Failed with a response of: "+(u&&(c||u.responseText)))),a(r,u)},ep=function(){const u=function r(s,a){s=tn({timeout:45e3},s);const c=r.beforeRequest||J.Vhs.xhr.beforeRequest,h=r._requestCallbackSet||J.Vhs.xhr._requestCallbackSet||new Set,f=r._responseCallbackSet||J.Vhs.xhr._responseCallbackSet;c&&"function"==typeof c&&(J.log.warn("beforeRequest is deprecated, use onRequest instead."),h.add(c));const y=!0===J.Vhs.xhr.original?J.xhr:J.Vhs.xhr,T=((u,r)=>{if(!u||!u.size)return;let s=r;return u.forEach(a=>{s=a(s)}),s})(h,s);h.delete(c);const E=y(T||s,function(P,V){return((u,r,s,a)=>{!u||!u.size||u.forEach(c=>{c(r,s,a)})})(f,E,P,V),hu(E,P,V,a)}),x=E.abort;return E.abort=function(){return E.aborted=!0,x.apply(E,arguments)},E.uri=s.uri,E.requestType=s.requestType,E.requestTime=Date.now(),E};return u.original=!0,u},yo=function(u){const r={};return u.byterange&&(r.Range=function(u){let r;const s=u.offset;return r="bigint"==typeof u.offset||"bigint"==typeof u.length?M().BigInt(u.offset)+M().BigInt(u.length)-M().BigInt(1):u.offset+u.length-1,"bytes="+s+"-"+r}(u.byterange)),r},u0=function(u,r){return u.start(r)+"-"+u.end(r)},l0=function(u,r){const s=u.toString(16);return"00".substring(0,2-s.length)+s+(r%2?" ":"")},Od=function(u){return u>=32&&u<126?String.fromCharCode(u):"."},xl=function(u){const r={};return Object.keys(u).forEach(s=>{const a=u[s];r[s]=Wt(a)?{bytes:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength}:a}),r},Xi=function(u){const r=u.byterange||{length:1/0,offset:0};return[r.length,r.offset,u.resolvedUri].join(",")},c0=function(u){return u.resolvedUri},d0=u=>{const r=Array.prototype.slice.call(u),s=16;let c,h,a="";for(let f=0;f<r.length/s;f++)c=r.slice(f*s,f*s+s).map(l0).join(""),h=r.slice(f*s,f*s+s).map(Od).join(""),a+=c+" "+h+"\n";return a};var tp=Object.freeze({__proto__:null,createTransferableMessage:xl,initSegmentId:Xi,segmentKeyId:c0,hexDump:d0,tagDump:({bytes:u})=>d0(u),textRanges:u=>{let s,r="";for(s=0;s<u.length;s++)r+=u0(u,s)+" ";return r}});const rp=({programTime:u,playlist:r,retryCount:s=2,seekTo:a,pauseAfterSeek:c=!0,tech:h,callback:f})=>{if(!f)throw new Error("seekToProgramTime: callback must be provided");if(typeof u>"u"||!r||!a)return f({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!h.hasStarted_)return f({message:"player must be playing a live stream to start buffering"});if(!(u=>{if(!u.segments||0===u.segments.length)return!1;for(let r=0;r<u.segments.length;r++)if(!u.segments[r].dateTimeObject)return!1;return!0})(r))return f({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});const y=((u,r)=>{let s;try{s=new Date(u)}catch{return null}if(!r||!r.segments||0===r.segments.length)return null;let a=r.segments[0];if(s<new Date(a.dateTimeObject))return null;for(let T=0;T<r.segments.length-1&&(a=r.segments[T],!(s<new Date(r.segments[T+1].dateTimeObject)));T++);const c=r.segments[r.segments.length-1],h=c.dateTimeObject,f=c.videoTimingInfo?(u=>u.transmuxedPresentationEnd-u.transmuxedPresentationStart-u.transmuxerPrependedSeconds)(c.videoTimingInfo):c.duration+.25*c.duration;return s>new Date(h.getTime()+1e3*f)?null:(s>new Date(h)&&(a=c),{segment:a,estimatedStart:a.videoTimingInfo?a.videoTimingInfo.transmuxedPresentationStart:zr.duration(r,r.mediaSequence+r.segments.indexOf(a)),type:a.videoTimingInfo?"accurate":"estimate"})})(u,r);if(!y)return f({message:`${u} was not found in the stream`});const T=y.segment,E=((u,r)=>{let s,a;try{s=new Date(u),a=new Date(r)}catch{}const c=s.getTime();return(a.getTime()-c)/1e3})(T.dateTimeObject,u);if("estimate"===y.type)return 0===s?f({message:`${u} is not buffered yet. Try again`}):(a(y.estimatedStart+E),void h.one("seeked",()=>{rp({programTime:u,playlist:r,retryCount:s-1,seekTo:a,pauseAfterSeek:c,tech:h,callback:f})}));const x=T.start+E;h.one("seeked",()=>f(null,h.currentTime())),c&&h.pause(),a(x)},Il=(u,r)=>{if(4===u.readyState)return r()},{EventTarget:Al}=J,ip=function(u,r){if(!xb(u,r)||u.sidx&&r.sidx&&(u.sidx.offset!==r.sidx.offset||u.sidx.length!==r.sidx.length))return!1;if(!u.sidx&&r.sidx||u.sidx&&!r.sidx||u.segments&&!r.segments||!u.segments&&r.segments)return!1;if(!u.segments&&!r.segments)return!0;for(let s=0;s<u.segments.length;s++){const a=u.segments[s],c=r.segments[s];if(a.uri!==c.uri)return!1;if(!a.byterange&&!c.byterange)continue;const h=a.byterange,f=c.byterange;if(h&&!f||!h&&f||h.offset!==f.offset||h.length!==f.length)return!1}return!0},p0=(u,r,s,a)=>`placeholder-uri-${u}-${r}-${a.attributes.NAME||s}`,m0=(u,r)=>(!u.map&&!r.map||!(!u.map||!r.map||u.map.byterange.offset!==r.map.byterange.offset||u.map.byterange.length!==r.map.byterange.length))&&u.uri===r.uri&&u.byterange.offset===r.byterange.offset&&u.byterange.length===r.byterange.length,y0=(u,r)=>{const s={};for(const a in u){const h=u[a].sidx;if(h){const f=or(h);if(!r[f])break;m0(r[f].sidxInfo,h)&&(s[f]=r[f])}}return s};class sp extends Al{constructor(r,s,a={},c){super(),this.mainPlaylistLoader_=c||this,c||(this.isMain_=!0);const{withCredentials:h=!1}=a;if(this.vhs_=s,this.withCredentials=h,this.addMetadataToTextTrack=a.addMetadataToTextTrack,!r)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=en("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=r,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=r}requestErrored_(r,s,a){return!this.request||(this.request=null,r?(this.error="object"!=typeof r||r instanceof Error?{status:s.status,message:"DASH request error at URL: "+s.uri,response:s.response,code:2,metadata:r.metadata}:r,a&&(this.state=a),this.trigger("error"),!0):void 0)}addSidxSegments_(r,s,a){const c=r.sidx&&or(r.sidx);if(!r.sidx||!c||this.mainPlaylistLoader_.sidxMapping_[c])return void(this.mediaRequest_=M().setTimeout(()=>a(!1),0));const h=Ed(r.sidx.resolvedUri),f=(T,E)=>{if(this.requestErrored_(T,E,s))return;const x=this.mainPlaylistLoader_.sidxMapping_,{requestType:P}=E;let V;try{V=DE()(Ke(E.response).subarray(8))}catch(q){return q.metadata=aa({requestType:P,request:E,parseFailure:!0}),void this.requestErrored_(q,E,s)}return x[c]={sidxInfo:r.sidx,sidx:V},k(r,V,r.sidx.resolvedUri),a(!0)};this.request=((u,r,s,a)=>{let h,c=[],f=!1;const y=function(P,V,q,L){return V.abort(),f=!0,s(P,V,q,L)},T=function(P,V){if(f)return;if(P)return P.metadata=aa({requestType:a,request:V,error:P}),y(P,V,"",c);const q=V.responseText.substring(c&&c.byteLength||0,V.responseText.length);if(c=function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];if((s=s.filter(function(y){return y&&(y.byteLength||y.length)&&"string"!=typeof y})).length<=1)return Ke(s[0]);var c=s.reduce(function(y,T,E){return y+(T.byteLength||T.length)},0),h=new Uint8Array(c),f=0;return s.forEach(function(y){y=Ke(y),h.set(y,f),f+=y.byteLength}),h}(c,Vu(q,!0)),h=h||Yu(c),c.length<10||h&&c.length<h+2)return Il(V,()=>y(P,V,"",c));const L=tm(c);return"ts"===L&&c.length<188||!L&&c.length<376?Il(V,()=>y(P,V,"",c)):y(null,V,L,c)},x=r({uri:u,beforeSend(P){P.overrideMimeType("text/plain; charset=x-user-defined"),P.addEventListener("progress",function({}){return hu(P,null,{statusCode:P.status},T)})}},function(P,V){return hu(x,P,V,T)});return x})(h,this.vhs_.xhr,(T,E,x,P)=>{if(T)return f(T,E);if(!x||"mp4"!==x)return f({status:E.status,message:`Unsupported ${x||"unknown"} container type for sidx segment at URL: ${h}`,response:"",playlist:r,internal:!0,playlistExclusionDuration:1/0,code:2},E);const{offset:V,length:q}=r.sidx.byterange;if(P.length>=q+V)return f(T,{response:P.subarray(V,V+q),status:E.status,uri:E.uri});this.request=this.vhs_.xhr({uri:h,responseType:"arraybuffer",requestType:"dash-sidx",headers:yo({byterange:r.sidx.byterange})},f)},"dash-sidx")}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},M().clearTimeout(this.minimumUpdatePeriodTimeout_),M().clearTimeout(this.mediaRequest_),M().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const r=this.request;this.request=null,r.onreadystatechange=null,r.abort()}}media(r){if(!r)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const s=this.state;if("string"==typeof r){if(!this.mainPlaylistLoader_.main.playlists[r])throw new Error("Unknown playlist URI: "+r);r=this.mainPlaylistLoader_.main.playlists[r]}const a=!this.media_||r.id!==this.media_.id;if(a&&this.loadedPlaylists_[r.id]&&this.loadedPlaylists_[r.id].endList)return this.state="HAVE_METADATA",this.media_=r,void(a&&(this.trigger("mediachanging"),this.trigger("mediachange")));a&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(r,s,c=>{this.haveMetadata({startingState:s,playlist:r})}))}haveMetadata({startingState:r,playlist:s}){this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),this.trigger("HAVE_MAIN_MANIFEST"===r?"loadedmetadata":"mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),M().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(M().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(r){M().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const s=this.media();if(r){const a=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=M().setTimeout(()=>this.load(),a)}else this.started?s&&!s.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_((r,s)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])}):this.mediaRequest_=M().setTimeout(()=>this.haveMain_(),0)}requestMain_(r){const s={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:s}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(a,c)=>{if(a){const{requestType:f}=c;a.metadata=aa({requestType:f,request:c,error:a})}if(this.requestErrored_(a,c))return void("HAVE_NOTHING"===this.state&&(this.started=!1));this.trigger({type:"manifestrequestcomplete",metadata:s});const h=c.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=c.responseText,this.mainLoaded_=c.responseHeaders&&c.responseHeaders.date?Date.parse(c.responseHeaders.date):Date.now(),this.mainPlaylistLoader_.srcUrl=Ed(this.mainPlaylistLoader_.srcUrl,c),h?(this.handleMain_(),void this.syncClientServerClock_(()=>r(c,h))):r(c,h)})}syncClientServerClock_(r){const s=(u=>(u=>{const r=mt(u,"UTCTiming")[0];if(!r)return null;const s=nt(r);switch(s.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":s.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":s.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":s.method="DIRECT",s.value=Date.parse(s.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return s})(Kr(u)))(this.mainPlaylistLoader_.mainXml_);return null===s?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),r()):"DIRECT"===s.method?(this.mainPlaylistLoader_.clientOffset_=s.value-Date.now(),r()):void(this.request=this.vhs_.xhr({uri:ei(this.mainPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(a,c)=>{if(!this.request)return;if(a){const{requestType:f}=c;return this.error.metadata=aa({requestType:f,request:c,error:a}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),r()}let h;h="HEAD"===s.method?c.responseHeaders&&c.responseHeaders.date?Date.parse(c.responseHeaders.date):this.mainLoaded_:Date.parse(c.responseText),this.mainPlaylistLoader_.clientOffset_=h-Date.now(),r()}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const r=this.mainPlaylistLoader_.main,s={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};let a;this.trigger({type:"manifestparsestart",metadata:s});try{a=(({mainXml:u,srcUrl:r,clientOffset:s,sidxMapping:a,previousManifest:c})=>{const h=((u,r={})=>{const s=((u,r={})=>{const{manifestUri:s="",NOW:a=Date.now(),clientOffset:c=0,eventHandler:h=function(){}}=r,f=mt(u,"Period");if(!f.length)throw new Error("INVALID_NUMBER_OF_PERIOD");const y=mt(u,"Location"),T=nt(u),E=Na([{baseUrl:s}],mt(u,"BaseURL")),x=mt(u,"ContentSteering");T.type=T.type||"static",T.sourceDuration=T.mediaPresentationDuration||0,T.NOW=a,T.clientOffset=c,y.length&&(T.locations=y.map(Js));const P=[];return f.forEach((V,q)=>{const L=nt(V),X=P[q-1];L.start=(({attributes:u,priorPeriodAttributes:r,mpdType:s})=>"number"==typeof u.start?u.start:r&&"number"==typeof r.start&&"number"==typeof r.duration?r.start+r.duration:r||"static"!==s?null:0)({attributes:L,priorPeriodAttributes:X?X.attributes:null,mpdType:T.type}),P.push({node:V,attributes:L})}),{locations:T.locations,contentSteeringInfo:bE(x,h),representationInfo:Ei(P.map(E_(T,E))),eventStream:Ei(P.map(Mt))}})(Kr(u),r),a=(u=>u.map(T_))(s.representationInfo);return zg({dashPlaylists:a,locations:s.locations,contentSteering:s.contentSteeringInfo,sidxMapping:r.sidxMapping,previousManifest:r.previousManifest,eventStream:s.eventStream})})(u,{manifestUri:r,clientOffset:s,sidxMapping:a,previousManifest:c});return Sb(h,r,p0),h})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:r})}catch(h){this.error=h,this.error.metadata={errorType:J.Error.StreamingDashManifestParserError,error:h},this.trigger("error")}r&&(a=((u,r,s)=>{let a=!0,c=tn(u,{duration:r.duration,minimumUpdatePeriod:r.minimumUpdatePeriod,timelineStarts:r.timelineStarts});for(let h=0;h<r.playlists.length;h++){const f=r.playlists[h];if(f.sidx){const T=or(f.sidx);s&&s[T]&&s[T].sidx&&k(f,s[T].sidx,f.sidx.resolvedUri)}const y=r0(c,f,ip);y&&(c=y,a=!1)}return cu(r,(h,f,y,T)=>{if(h.playlists&&h.playlists.length){const E=h.playlists[0].id,x=r0(c,h.playlists[0],ip);x&&(c=x,T in c.mediaGroups[f][y]||(c.mediaGroups[f][y][T]=h),c.mediaGroups[f][y][T].playlists[0]=c.playlists[E],a=!1)}}),((u,r)=>{cu(u,(s,a,c,h)=>{h in r.mediaGroups[a][c]||delete u.mediaGroups[a][c][h]})})(c,r),r.minimumUpdatePeriod!==u.minimumUpdatePeriod&&(a=!1),a?null:c})(r,a,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=a||r;const c=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(c&&c!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=c),(!r||a&&a.minimumUpdatePeriod!==r.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(a),a){const{duration:h,endList:f}=a,y=[];a.playlists.forEach(E=>{y.push({id:E.id,bandwidth:E.attributes.BANDWIDTH,resolution:E.attributes.RESOLUTION,codecs:E.attributes.CODECS})}),s.parsedManifest={duration:h,isLive:!f,renditions:y},this.trigger({type:"manifestparsecomplete",metadata:s})}return!!a}updateMinimumUpdatePeriodTimeout_(){const r=this.mainPlaylistLoader_;r.createMupOnMedia_&&(r.off("loadedmetadata",r.createMupOnMedia_),r.createMupOnMedia_=null),r.minimumUpdatePeriodTimeout_&&(M().clearTimeout(r.minimumUpdatePeriodTimeout_),r.minimumUpdatePeriodTimeout_=null);let s=r.main&&r.main.minimumUpdatePeriod;0===s&&(r.media()?s=1e3*r.media().targetDuration:(r.createMupOnMedia_=r.updateMinimumUpdatePeriodTimeout_,r.one("loadedmetadata",r.createMupOnMedia_))),"number"!=typeof s||s<=0?s<0&&this.logger_(`found invalid minimumUpdatePeriod of ${s}, not setting a timeout`):this.createMUPTimeout_(s)}createMUPTimeout_(r){const s=this.mainPlaylistLoader_;s.minimumUpdatePeriodTimeout_=M().setTimeout(()=>{s.minimumUpdatePeriodTimeout_=null,s.trigger("minimumUpdatePeriod"),s.createMUPTimeout_(r)},r)}refreshXml_(){this.requestMain_((r,s)=>{s&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((u,r)=>{let a=y0(u.playlists,r);return cu(u,(c,h,f,y)=>{c.playlists&&c.playlists.length&&(a=tn(a,y0(c.playlists,r)))}),a})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,a=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(r){if(!r)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const s=this.mainPlaylistLoader_.main.playlists,a=!this.media_||this.media_!==s[r];if(a?this.media_=s[r]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const c=()=>{this.media().endList||(this.mediaUpdateTimeout=M().setTimeout(()=>{this.trigger("mediaupdatetimeout"),c()},s0(this.media(),!!a)))};c()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(r){if(r&&this.mainPlaylistLoader_.main.eventStream){const s=this.mainPlaylistLoader_.main.eventStream.map(a=>({cueTime:a.start,frames:[{data:a.messageData}]}));this.addMetadataToTextTrack("EventStream",s,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(r){if(r.contentProtection){const s=new Set;for(const a in r.contentProtection){const c=r.contentProtection[a].attributes["cenc:default_KID"];c&&s.add(c.replace(/-/g,"").toLowerCase())}return s}}}var Er={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Rd=function(u){return u.on=u.addEventListener,u.off=u.removeEventListener,u},fu=function(u){return function(){const r=function(u){try{return URL.createObjectURL(new Blob([u],{type:"application/javascript"}))}catch{const s=new BlobBuilder;return s.append(u),URL.createObjectURL(s.getBlob())}}(u),s=Rd(new Worker(r));s.objURL=r;const a=s.terminate;return s.on=s.addEventListener,s.off=s.removeEventListener,s.terminate=function(){return URL.revokeObjectURL(r),a.call(this)},s}},_0=function(u){return`var browserWorkerPolyFill = ${Rd.toString()};\nbrowserWorkerPolyFill(self);\n`+u},b0=function(u){return u.toString().replace(/^function.+?{/,"").slice(0,-1)},T0=_0(b0(function(){var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=function(){this.init=function(){var g={};this.on=function(v,C){g[v]||(g[v]=[]),g[v]=g[v].concat(C)},this.off=function(v,C){var _;return!!g[v]&&(_=g[v].indexOf(C),g[v]=g[v].slice(),g[v].splice(_,1),_>-1)},this.trigger=function(v){var C,_,S,w;if(C=g[v])if(2===arguments.length)for(S=C.length,_=0;_<S;++_)C[_].call(this,arguments[1]);else{for(w=[],_=arguments.length,_=1;_<arguments.length;++_)w.push(arguments[_]);for(S=C.length,_=0;_<S;++_)C[_].apply(this,w)}},this.dispose=function(){g={}}}};r.prototype.pipe=function(g){return this.on("data",function(v){g.push(v)}),this.on("done",function(v){g.flush(v)}),this.on("partialdone",function(v){g.partialFlush(v)}),this.on("endedtimeline",function(v){g.endTimeline(v)}),this.on("reset",function(v){g.reset(v)}),g},r.prototype.push=function(g){this.trigger("data",g)},r.prototype.flush=function(g){this.trigger("done",g)},r.prototype.partialFlush=function(g){this.trigger("partialdone",g)},r.prototype.endTimeline=function(g){this.trigger("endedtimeline",g)},r.prototype.reset=function(g){this.trigger("reset",g)};var y,T,E,x,P,V,q,L,X,te,ne,Q,ge,_e,W,Ee,st,Qe,Vt,qn,hr,kn,ct,cn,Ai,Mi,To,ki,ni,ma,Co,ms,eh,cy,ql,dy,g,v,s=r,a=Math.pow(2,32),h={getUint64:function(g){var C,v=new DataView(g.buffer,g.byteOffset,g.byteLength);return v.getBigUint64?(C=v.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(C):C:v.getUint32(0)*a+v.getUint32(4)},MAX_UINT32:a},f=h.MAX_UINT32;(function(){var g;if(ct={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(g in ct)ct.hasOwnProperty(g)&&(ct[g]=[g.charCodeAt(0),g.charCodeAt(1),g.charCodeAt(2),g.charCodeAt(3)]);cn=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Mi=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Ai=new Uint8Array([0,0,0,1]),To=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ki=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ni={video:To,audio:ki},ms=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Co=new Uint8Array([0,0,0,0,0,0,0,0]),eh=new Uint8Array([0,0,0,0,0,0,0,0]),cy=eh,ql=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),dy=eh,ma=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),y=function(g){var _,S,v=[],C=0;for(_=1;_<arguments.length;_++)v.push(arguments[_]);for(_=v.length;_--;)C+=v[_].byteLength;for(S=new Uint8Array(C+8),new DataView(S.buffer,S.byteOffset,S.byteLength).setUint32(0,S.byteLength),S.set(g,4),_=0,C=8;_<v.length;_++)S.set(v[_],C),C+=v[_].byteLength;return S},T=function(){return y(ct.dinf,y(ct.dref,ms))},E=function(g){return y(ct.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,g.audioobjecttype<<3|g.samplingfrequencyindex>>>1,g.samplingfrequencyindex<<7|g.channelcount<<3,6,1,2]))},x=function(){return y(ct.ftyp,cn,Ai,cn,Mi)},Ee=function(g){return y(ct.hdlr,ni[g])},P=function(g){return y(ct.mdat,g)},W=function(g){var v=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,g.duration>>>24&255,g.duration>>>16&255,g.duration>>>8&255,255&g.duration,85,196,0,0]);return g.samplerate&&(v[12]=g.samplerate>>>24&255,v[13]=g.samplerate>>>16&255,v[14]=g.samplerate>>>8&255,v[15]=255&g.samplerate),y(ct.mdhd,v)},_e=function(g){return y(ct.mdia,W(g),Ee(g.type),q(g))},V=function(g){return y(ct.mfhd,new Uint8Array([0,0,0,0,(4278190080&g)>>24,(16711680&g)>>16,(65280&g)>>8,255&g]))},q=function(g){return y(ct.minf,"video"===g.type?y(ct.vmhd,ma):y(ct.smhd,Co),T(),Qe(g))},L=function(g,v){for(var C=[],_=v.length;_--;)C[_]=qn(v[_]);return y.apply(null,[ct.moof,V(g)].concat(C))},X=function(g){for(var v=g.length,C=[];v--;)C[v]=Q(g[v]);return y.apply(null,[ct.moov,ne(4294967295)].concat(C).concat(te(g)))},te=function(g){for(var v=g.length,C=[];v--;)C[v]=hr(g[v]);return y.apply(null,[ct.mvex].concat(C))},ne=function(g){var v=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&g)>>24,(16711680&g)>>16,(65280&g)>>8,255&g,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return y(ct.mvhd,v)},st=function(g){var _,S,v=g.samples||[],C=new Uint8Array(4+v.length);for(S=0;S<v.length;S++)C[S+4]=(_=v[S].flags).dependsOn<<4|_.isDependedOn<<2|_.hasRedundancy;return y(ct.sdtp,C)},Qe=function(g){return y(ct.stbl,Vt(g),y(ct.stts,dy),y(ct.stsc,cy),y(ct.stsz,ql),y(ct.stco,eh))},Vt=function(C){return y(ct.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===C.type?g(C):v(C))},g=function(C){var F,U,_=C.sps||[],S=C.pps||[],w=[],O=[];for(F=0;F<_.length;F++)w.push((65280&_[F].byteLength)>>>8),w.push(255&_[F].byteLength),w=w.concat(Array.prototype.slice.call(_[F]));for(F=0;F<S.length;F++)O.push((65280&S[F].byteLength)>>>8),O.push(255&S[F].byteLength),O=O.concat(Array.prototype.slice.call(S[F]));if(U=[ct.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&C.width)>>8,255&C.width,(65280&C.height)>>8,255&C.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),y(ct.avcC,new Uint8Array([1,C.profileIdc,C.profileCompatibility,C.levelIdc,255].concat([_.length],w,[S.length],O))),y(ct.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],C.sarRatio){var $=C.sarRatio[0],G=C.sarRatio[1];U.push(y(ct.pasp,new Uint8Array([(4278190080&$)>>24,(16711680&$)>>16,(65280&$)>>8,255&$,(4278190080&G)>>24,(16711680&G)>>16,(65280&G)>>8,255&G])))}return y.apply(null,U)},v=function(C){return y(ct.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&C.channelcount)>>8,255&C.channelcount,(65280&C.samplesize)>>8,255&C.samplesize,0,0,0,0,(65280&C.samplerate)>>8,255&C.samplerate,0,0]),E(C))},ge=function(g){var v=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&g.id)>>24,(16711680&g.id)>>16,(65280&g.id)>>8,255&g.id,0,0,0,0,(4278190080&g.duration)>>24,(16711680&g.duration)>>16,(65280&g.duration)>>8,255&g.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&g.width)>>8,255&g.width,0,0,(65280&g.height)>>8,255&g.height,0,0]);return y(ct.tkhd,v)},qn=function(g){var v,C,_,S,O,F;return v=y(ct.tfhd,new Uint8Array([0,0,0,58,(4278190080&g.id)>>24,(16711680&g.id)>>16,(65280&g.id)>>8,255&g.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),O=Math.floor(g.baseMediaDecodeTime/f),F=Math.floor(g.baseMediaDecodeTime%f),C=y(ct.tfdt,new Uint8Array([1,0,0,0,O>>>24&255,O>>>16&255,O>>>8&255,255&O,F>>>24&255,F>>>16&255,F>>>8&255,255&F])),"audio"===g.type?(_=kn(g,92),y(ct.traf,v,C,_)):(S=st(g),_=kn(g,S.length+92),y(ct.traf,v,C,_,S))},Q=function(g){return g.duration=g.duration||4294967295,y(ct.trak,ge(g),_e(g))},hr=function(g){var v=new Uint8Array([0,0,0,0,(4278190080&g.id)>>24,(16711680&g.id)>>16,(65280&g.id)>>8,255&g.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==g.type&&(v[v.length-1]=0),y(ct.trex,v)},function(){var g,v,C;C=function(_,S){var w=0,O=0,F=0,U=0;return _.length&&(void 0!==_[0].duration&&(w=1),void 0!==_[0].size&&(O=2),void 0!==_[0].flags&&(F=4),void 0!==_[0].compositionTimeOffset&&(U=8)),[0,0,w|O|F|U,1,(4278190080&_.length)>>>24,(16711680&_.length)>>>16,(65280&_.length)>>>8,255&_.length,(4278190080&S)>>>24,(16711680&S)>>>16,(65280&S)>>>8,255&S]},v=function(_,S){var w,O,F,U,$,G;for(F=C(U=_.samples||[],S+=20+16*U.length),(O=new Uint8Array(F.length+16*U.length)).set(F),w=F.length,G=0;G<U.length;G++)O[w++]=(4278190080&($=U[G]).duration)>>>24,O[w++]=(16711680&$.duration)>>>16,O[w++]=(65280&$.duration)>>>8,O[w++]=255&$.duration,O[w++]=(4278190080&$.size)>>>24,O[w++]=(16711680&$.size)>>>16,O[w++]=(65280&$.size)>>>8,O[w++]=255&$.size,O[w++]=$.flags.isLeading<<2|$.flags.dependsOn,O[w++]=$.flags.isDependedOn<<6|$.flags.hasRedundancy<<4|$.flags.paddingValue<<1|$.flags.isNonSyncSample,O[w++]=61440&$.flags.degradationPriority,O[w++]=15&$.flags.degradationPriority,O[w++]=(4278190080&$.compositionTimeOffset)>>>24,O[w++]=(16711680&$.compositionTimeOffset)>>>16,O[w++]=(65280&$.compositionTimeOffset)>>>8,O[w++]=255&$.compositionTimeOffset;return y(ct.trun,O)},g=function(_,S){var w,O,F,U,$,G;for(F=C(U=_.samples||[],S+=20+8*U.length),(w=new Uint8Array(F.length+8*U.length)).set(F),O=F.length,G=0;G<U.length;G++)w[O++]=(4278190080&($=U[G]).duration)>>>24,w[O++]=(16711680&$.duration)>>>16,w[O++]=(65280&$.duration)>>>8,w[O++]=255&$.duration,w[O++]=(4278190080&$.size)>>>24,w[O++]=(16711680&$.size)>>>16,w[O++]=(65280&$.size)>>>8,w[O++]=255&$.size;return y(ct.trun,w)},kn=function(_,S){return"audio"===_.type?g(_,S):v(_,S)}}();var nh,Qi,Gl,rh,my,yy,ih,Bn,Dp={ftyp:x,mdat:P,moof:L,moov:X,initSegment:function(g){var _,v=x(),C=X(g);return(_=new Uint8Array(v.byteLength+C.byteLength)).set(v),_.set(C,v.byteLength),_}},fy=function(g,v){var C={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return C.dataOffset=v,C.compositionTimeOffset=g.pts-g.dts,C.duration=g.duration,C.size=4*g.length,C.size+=g.byteLength,g.keyFrame&&(C.flags.dependsOn=2,C.flags.isNonSyncSample=0),C},wT={groupNalsIntoFrames:function(g){var v,C,_=[],S=[];for(S.byteLength=0,S.nalCount=0,S.duration=0,_.byteLength=0,v=0;v<g.length;v++)"access_unit_delimiter_rbsp"===(C=g[v]).nalUnitType?(_.length&&(_.duration=C.dts-_.dts,S.byteLength+=_.byteLength,S.nalCount+=_.length,S.duration+=_.duration,S.push(_)),(_=[C]).byteLength=C.data.byteLength,_.pts=C.pts,_.dts=C.dts):("slice_layer_without_partitioning_rbsp_idr"===C.nalUnitType&&(_.keyFrame=!0),_.duration=C.dts-_.dts,_.byteLength+=C.data.byteLength,_.push(C));return S.length&&(!_.duration||_.duration<=0)&&(_.duration=S[S.length-1].duration),S.byteLength+=_.byteLength,S.nalCount+=_.length,S.duration+=_.duration,S.push(_),S},groupFramesIntoGops:function(g){var v,C,_=[],S=[];for(_.byteLength=0,_.nalCount=0,_.duration=0,_.pts=g[0].pts,_.dts=g[0].dts,S.byteLength=0,S.nalCount=0,S.duration=0,S.pts=g[0].pts,S.dts=g[0].dts,v=0;v<g.length;v++)(C=g[v]).keyFrame?(_.length&&(S.push(_),S.byteLength+=_.byteLength,S.nalCount+=_.nalCount,S.duration+=_.duration),(_=[C]).nalCount=C.length,_.byteLength=C.byteLength,_.pts=C.pts,_.dts=C.dts,_.duration=C.duration):(_.duration+=C.duration,_.nalCount+=C.length,_.byteLength+=C.byteLength,_.push(C));return S.length&&_.duration<=0&&(_.duration=S[S.length-1].duration),S.byteLength+=_.byteLength,S.nalCount+=_.nalCount,S.duration+=_.duration,S.push(_),S},extendFirstKeyFrame:function(g){var v;return!g[0][0].keyFrame&&g.length>1&&(v=g.shift(),g.byteLength-=v.byteLength,g.nalCount-=v.nalCount,g[0][0].dts=v.dts,g[0][0].pts=v.pts,g[0][0].duration+=v.duration),g},generateSampleTable:function(g,v){var C,_,S,w,F=v||0,U=[];for(C=0;C<g.length;C++)for(w=g[C],_=0;_<w.length;_++)F+=(S=fy(w[_],F)).size,U.push(S);return U},concatenateNalData:function(g){var v,C,_,S,w,O,F=0,se=new Uint8Array(g.byteLength+4*g.nalCount),He=new DataView(se.buffer);for(v=0;v<g.length;v++)for(S=g[v],C=0;C<S.length;C++)for(w=S[C],_=0;_<w.length;_++)He.setUint32(F,(O=w[_]).data.byteLength),se.set(O.data,F+=4),F+=O.data.byteLength;return se},generateSampleTableForFrame:function(g,v){var C,S=[];return C=fy(g,v||0),S.push(C),S},concatenateNalDataForFrame:function(g){var v,C,_=0,F=new Uint8Array(g.byteLength+4*g.length),U=new DataView(F.buffer);for(v=0;v<g.length;v++)U.setUint32(_,(C=g[v]).data.byteLength),F.set(C.data,_+=4),_+=C.data.byteLength;return F}},ya=[33,16,5,32,164,27],th=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],nn=function(g){for(var v=[];g--;)v.push(0);return v};Qi=function(g){return 9e4*g},Gl=function(g,v){return g*v},rh=function(g){return g/9e4},my=function(g,v){return g/v},yy=function(g,v){return Qi(my(g,v))},ih=function(g,v){return Gl(rh(g),v)},Bn=function(g,v,C){return rh(C?g:g-v)};var vn={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:Qi,secondsToAudioTs:Gl,videoTsToSeconds:rh,audioTsToSeconds:my,audioTsToVideoTs:yy,videoTsToAudioTs:ih,metadataTsToSeconds:Bn},xp=vn,Ap={prefixWithSilence:function(g,v,C,_){var S,$,G,se,w=0,O=0,F=0,U=0;if(v.length&&(S=xp.audioTsToVideoTs(g.baseMediaDecodeTime,g.samplerate),w=Math.ceil(xp.ONE_SECOND_IN_TS/(g.samplerate/1024)),C&&_&&(O=S-Math.max(C,_),U=(F=Math.floor(O/w))*w),!(F<1||U>xp.ONE_SECOND_IN_TS/2))){for(($=function(){if(!nh){var g={96e3:[ya,[227,64],nn(154),[56]],88200:[ya,[231],nn(170),[56]],64e3:[ya,[248,192],nn(240),[56]],48e3:[ya,[255,192],nn(268),[55,148,128],nn(54),[112]],44100:[ya,[255,192],nn(268),[55,163,128],nn(84),[112]],32e3:[ya,[255,192],nn(268),[55,234],nn(226),[112]],24e3:[ya,[255,192],nn(268),[55,255,128],nn(268),[111,112],nn(126),[224]],16e3:[ya,[255,192],nn(268),[55,255,128],nn(268),[111,255],nn(269),[223,108],nn(195),[1,192]],12e3:[th,nn(268),[3,127,248],nn(268),[6,255,240],nn(268),[13,255,224],nn(268),[27,253,128],nn(259),[56]],11025:[th,nn(268),[3,127,248],nn(268),[6,255,240],nn(268),[13,255,224],nn(268),[27,255,192],nn(268),[55,175,128],nn(108),[112]],8e3:[th,nn(268),[3,121,16],nn(47),[7]]};nh=function(g){return Object.keys(g).reduce(function(v,C){return v[C]=new Uint8Array(g[C].reduce(function(_,S){return _.concat(S)},[])),v},{})}(g)}return nh}()[g.samplerate])||($=v[0].data),G=0;G<F;G++)v.splice(0,0,{data:$,dts:(se=v[0]).dts-w,pts:se.pts-w});return g.baseMediaDecodeTime-=Math.floor(xp.videoTsToAudioTs(U,g.samplerate)),U}},trimAdtsFramesByEarliestDts:function(g,v,C){return v.minSegmentDts>=C?g:(v.minSegmentDts=1/0,g.filter(function(_){return _.dts>=C&&(v.minSegmentDts=Math.min(v.minSegmentDts,_.dts),v.minSegmentPts=v.minSegmentDts,!0)}))},generateSampleTable:function(g){var v,_=[];for(v=0;v<g.length;v++)_.push({size:g[v].data.byteLength,duration:1024});return _},concatenateFrameData:function(g){var v,C,_=0,S=new Uint8Array(function(g){var v,_=0;for(v=0;v<g.length;v++)_+=g[v].data.byteLength;return _}(g));for(v=0;v<g.length;v++)S.set((C=g[v]).data,_),_+=C.data.byteLength;return S}},vy=vn.ONE_SECOND_IN_TS,Ty={clearDtsInfo:function(g){delete g.minSegmentDts,delete g.maxSegmentDts,delete g.minSegmentPts,delete g.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(g,v){var C,S=g.minSegmentDts;return v||(S-=g.timelineStartInfo.dts),C=g.timelineStartInfo.baseMediaDecodeTime,C+=S,C=Math.max(0,C),"audio"===g.type&&(C*=g.samplerate/vy,C=Math.floor(C)),C},collectDtsInfo:function(g,v){"number"==typeof v.pts&&(void 0===g.timelineStartInfo.pts&&(g.timelineStartInfo.pts=v.pts),g.minSegmentPts=void 0===g.minSegmentPts?v.pts:Math.min(g.minSegmentPts,v.pts),g.maxSegmentPts=void 0===g.maxSegmentPts?v.pts:Math.max(g.maxSegmentPts,v.pts)),"number"==typeof v.dts&&(void 0===g.timelineStartInfo.dts&&(g.timelineStartInfo.dts=v.dts),g.minSegmentDts=void 0===g.minSegmentDts?v.dts:Math.min(g.minSegmentDts,v.dts),g.maxSegmentDts=void 0===g.maxSegmentDts?v.dts:Math.max(g.maxSegmentDts,v.dts))}},va={parseSei:function(g){for(var v=0,C={payloadType:-1,payloadSize:0},_=0,S=0;v<g.byteLength&&128!==g[v];){for(;255===g[v];)_+=255,v++;for(_+=g[v++];255===g[v];)S+=255,v++;if(S+=g[v++],!C.payload&&4===_){if("GA94"===String.fromCharCode(g[v+3],g[v+4],g[v+5],g[v+6])){C.payloadType=_,C.payloadSize=S,C.payload=g.subarray(v,v+S);break}C.payload=void 0}v+=S,_=0,S=0}return C},parseUserData:function(g){return 181!==g.payload[0]||49!=(g.payload[1]<<8|g.payload[2])||"GA94"!==String.fromCharCode(g.payload[3],g.payload[4],g.payload[5],g.payload[6])||3!==g.payload[7]?null:g.payload.subarray(8,g.payload.length-1)},parseCaptionPackets:function(g,v){var _,S,w,O,C=[];if(!(64&v[0]))return C;for(S=31&v[0],_=0;_<S;_++)O={type:3&v[2+(w=3*_)],pts:g},4&v[w+2]&&(O.ccData=v[w+3]<<8|v[w+4],C.push(O));return C},discardEmulationPreventionBytes:function(g){for(var S,w,v=g.byteLength,C=[],_=1;_<v-2;)0===g[_]&&0===g[_+1]&&3===g[_+2]?(C.push(_+2),_+=2):_++;if(0===C.length)return g;S=v-C.length,w=new Uint8Array(S);var O=0;for(_=0;_<S;O++,_++)O===C[0]&&(O++,C.shift()),w[_]=g[O];return w},USER_DATA_REGISTERED_ITU_T_T35:4},Mp=s,sh=va,Xr=function(g){g=g||{},Xr.prototype.init.call(this),this.parse708captions_="boolean"!=typeof g.parse708captions||g.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Un(0,0),new Un(0,1),new Un(1,0),new Un(1,1)],this.parse708captions_&&(this.cc708Stream_=new dn({captionServices:g.captionServices})),this.reset(),this.ccStreams_.forEach(function(v){v.on("data",this.trigger.bind(this,"data")),v.on("partialdone",this.trigger.bind(this,"partialdone")),v.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Xr.prototype=new Mp,Xr.prototype.push=function(g){var v,C,_;if("sei_rbsp"===g.nalUnitType&&(v=sh.parseSei(g.escapedRBSP)).payload&&v.payloadType===sh.USER_DATA_REGISTERED_ITU_T_T35&&(C=sh.parseUserData(v))){if(g.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(g.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));_=sh.parseCaptionPackets(g.pts,C),this.captionPackets_=this.captionPackets_.concat(_),this.latestDts_!==g.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=g.dts}},Xr.prototype.flushCCStreams=function(g){this.ccStreams_.forEach(function(v){return"flush"===g?v.flush():v.partialFlush()},this)},Xr.prototype.flushStream=function(g){this.captionPackets_.length?(this.captionPackets_.forEach(function(v,C){v.presortIndex=C}),this.captionPackets_.sort(function(v,C){return v.pts===C.pts?v.presortIndex-C.presortIndex:v.pts-C.pts}),this.captionPackets_.forEach(function(v){v.type<2?this.dispatchCea608Packet(v):this.dispatchCea708Packet(v)},this),this.captionPackets_.length=0,this.flushCCStreams(g)):this.flushCCStreams(g)},Xr.prototype.flush=function(){return this.flushStream("flush")},Xr.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Xr.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(g){g.reset()})},Xr.prototype.dispatchCea608Packet=function(g){this.setsTextOrXDSActive(g)?this.activeCea608Channel_[g.type]=null:this.setsChannel1Active(g)?this.activeCea608Channel_[g.type]=0:this.setsChannel2Active(g)&&(this.activeCea608Channel_[g.type]=1),null!==this.activeCea608Channel_[g.type]&&this.ccStreams_[(g.type<<1)+this.activeCea608Channel_[g.type]].push(g)},Xr.prototype.setsChannel1Active=function(g){return 4096==(30720&g.ccData)},Xr.prototype.setsChannel2Active=function(g){return 6144==(30720&g.ccData)},Xr.prototype.setsTextOrXDSActive=function(g){return 256==(28928&g.ccData)||4138==(30974&g.ccData)||6186==(30974&g.ccData)},Xr.prototype.dispatchCea708Packet=function(g){this.parse708captions_&&this.cc708Stream_.push(g)};var Dy={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},So=function(g){return 32<=g&&g<=127||160<=g&&g<=255},Oi=function(g){this.windowNum=g,this.reset()};Oi.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Oi.prototype.getText=function(){return this.rows.join("\n")},Oi.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Oi.prototype.newLine=function(g){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(g),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Oi.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Oi.prototype.addText=function(g){this.rows[this.rowIdx]+=g},Oi.prototype.backspace=function(){if(!this.isEmpty()){var g=this.rows[this.rowIdx];this.rows[this.rowIdx]=g.substr(0,g.length-1)}};var Wl=function(g,v,C){this.serviceNum=g,this.text="",this.currentWindow=new Oi(-1),this.windows=[],this.stream=C,"string"==typeof v&&this.createTextDecoder(v)};Wl.prototype.init=function(g,v){this.startPts=g;for(var C=0;C<8;C++)this.windows[C]=new Oi(C),"function"==typeof v&&(this.windows[C].beforeRowOverflow=v)},Wl.prototype.setCurrentWindow=function(g){this.currentWindow=this.windows[g]},Wl.prototype.createTextDecoder=function(g){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(g)}catch(v){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+g+" encoding. "+v})}};var dn=function(g){g=g||{},dn.prototype.init.call(this);var S,v=this,C=g.captionServices||{},_={};Object.keys(C).forEach(w=>{S=C[w],/^SERVICE/.test(w)&&(_[w]=S.encoding)}),this.serviceEncodings=_,this.current708Packet=null,this.services={},this.push=function(w){3===w.type?(v.new708Packet(),v.add708Bytes(w)):(null===v.current708Packet&&v.new708Packet(),v.add708Bytes(w))}};dn.prototype=new Mp,dn.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},dn.prototype.add708Bytes=function(g){var v=g.ccData,C=v>>>8,_=255&v;this.current708Packet.ptsVals.push(g.pts),this.current708Packet.data.push(C),this.current708Packet.data.push(_)},dn.prototype.push708Packet=function(){var g=this.current708Packet,v=g.data,C=null,_=null,S=0,w=v[S++];for(g.seq=w>>6,g.sizeCode=63&w;S<v.length;S++)_=31&(w=v[S++]),7==(C=w>>5)&&_>0&&(C=w=v[S++]),this.pushServiceBlock(C,S,_),_>0&&(S+=_-1)},dn.prototype.pushServiceBlock=function(g,v,C){var _,S=v,w=this.current708Packet.data,O=this.services[g];for(O||(O=this.initService(g,S));S<v+C&&S<w.length;S++)So(_=w[S])?S=this.handleText(S,O):24===_?S=this.multiByteCharacter(S,O):16===_?S=this.extendedCommands(S,O):128<=_&&_<=135?S=this.setCurrentWindow(S,O):152<=_&&_<=159?S=this.defineWindow(S,O):136===_?S=this.clearWindows(S,O):140===_?S=this.deleteWindows(S,O):137===_?S=this.displayWindows(S,O):138===_?S=this.hideWindows(S,O):139===_?S=this.toggleWindows(S,O):151===_?S=this.setWindowAttributes(S,O):144===_?S=this.setPenAttributes(S,O):145===_?S=this.setPenColor(S,O):146===_?S=this.setPenLocation(S,O):143===_?O=this.reset(S,O):8===_?O.currentWindow.backspace():12===_?O.currentWindow.clearText():13===_?O.currentWindow.pendingNewLine=!0:14===_?O.currentWindow.clearText():141===_&&S++},dn.prototype.extendedCommands=function(g,v){var _=this.current708Packet.data[++g];return So(_)&&(g=this.handleText(g,v,{isExtended:!0})),g},dn.prototype.getPts=function(g){return this.current708Packet.ptsVals[Math.floor(g/2)]},dn.prototype.initService=function(g,v){var _,S,C=this;return(_="SERVICE"+g)in this.serviceEncodings&&(S=this.serviceEncodings[_]),this.services[g]=new Wl(g,S,C),this.services[g].init(this.getPts(v),function(w){C.flushDisplayed(w,C.services[g])}),this.services[g]},dn.prototype.handleText=function(g,v,C){var G,se,_=C&&C.isExtended,S=C&&C.isMultiByte,w=this.current708Packet.data,O=_?4096:0,F=w[g],$=v.currentWindow;if(S?(se=[F,w[g+1]],g++):se=[F],v.textDecoder_&&!_)G=v.textDecoder_.decode(new Uint8Array(se));else if(S){const ee=function He(ee){return ee.map(ht=>("0"+(255&ht).toString(16)).slice(-2)).join("")}(se);G=String.fromCharCode(parseInt(ee,16))}else G=function(g){var v=Dy[g]||g;return 4096&g&&g===v?"":String.fromCharCode(v)}(O|F);return $.pendingNewLine&&!$.isEmpty()&&$.newLine(this.getPts(g)),$.pendingNewLine=!1,$.addText(G),g},dn.prototype.multiByteCharacter=function(g,v){var C=this.current708Packet.data,S=C[g+2];return So(C[g+1])&&So(S)&&(g=this.handleText(++g,v,{isMultiByte:!0})),g},dn.prototype.setCurrentWindow=function(g,v){return v.setCurrentWindow(7&this.current708Packet.data[g]),g},dn.prototype.defineWindow=function(g,v){var C=this.current708Packet.data,_=C[g];v.setCurrentWindow(7&_);var w=v.currentWindow;return _=C[++g],w.visible=(32&_)>>5,w.rowLock=(16&_)>>4,w.columnLock=(8&_)>>3,w.priority=7&_,_=C[++g],w.relativePositioning=(128&_)>>7,w.anchorVertical=127&_,_=C[++g],w.anchorHorizontal=_,_=C[++g],w.anchorPoint=(240&_)>>4,w.rowCount=15&_,_=C[++g],w.columnCount=63&_,_=C[++g],w.windowStyle=(56&_)>>3,w.penStyle=7&_,w.virtualRowCount=w.rowCount+1,g},dn.prototype.setWindowAttributes=function(g,v){var C=this.current708Packet.data,_=C[g],S=v.currentWindow.winAttr;return _=C[++g],S.fillOpacity=(192&_)>>6,S.fillRed=(48&_)>>4,S.fillGreen=(12&_)>>2,S.fillBlue=3&_,_=C[++g],S.borderType=(192&_)>>6,S.borderRed=(48&_)>>4,S.borderGreen=(12&_)>>2,S.borderBlue=3&_,_=C[++g],S.borderType+=(128&_)>>5,S.wordWrap=(64&_)>>6,S.printDirection=(48&_)>>4,S.scrollDirection=(12&_)>>2,S.justify=3&_,_=C[++g],S.effectSpeed=(240&_)>>4,S.effectDirection=(12&_)>>2,S.displayEffect=3&_,g},dn.prototype.flushDisplayed=function(g,v){for(var C=[],_=0;_<8;_++)v.windows[_].visible&&!v.windows[_].isEmpty()&&C.push(v.windows[_].getText());v.endPts=g,v.text=C.join("\n\n"),this.pushCaption(v),v.startPts=g},dn.prototype.pushCaption=function(g){""!==g.text&&(this.trigger("data",{startPts:g.startPts,endPts:g.endPts,text:g.text,stream:"cc708_"+g.serviceNum}),g.text="",g.startPts=g.endPts)},dn.prototype.displayWindows=function(g,v){var _=this.current708Packet.data[++g],S=this.getPts(g);this.flushDisplayed(S,v);for(var w=0;w<8;w++)_&1<<w&&(v.windows[w].visible=1);return g},dn.prototype.hideWindows=function(g,v){var _=this.current708Packet.data[++g],S=this.getPts(g);this.flushDisplayed(S,v);for(var w=0;w<8;w++)_&1<<w&&(v.windows[w].visible=0);return g},dn.prototype.toggleWindows=function(g,v){var _=this.current708Packet.data[++g],S=this.getPts(g);this.flushDisplayed(S,v);for(var w=0;w<8;w++)_&1<<w&&(v.windows[w].visible^=1);return g},dn.prototype.clearWindows=function(g,v){var _=this.current708Packet.data[++g],S=this.getPts(g);this.flushDisplayed(S,v);for(var w=0;w<8;w++)_&1<<w&&v.windows[w].clearText();return g},dn.prototype.deleteWindows=function(g,v){var _=this.current708Packet.data[++g],S=this.getPts(g);this.flushDisplayed(S,v);for(var w=0;w<8;w++)_&1<<w&&v.windows[w].reset();return g},dn.prototype.setPenAttributes=function(g,v){var C=this.current708Packet.data,_=C[g],S=v.currentWindow.penAttr;return _=C[++g],S.textTag=(240&_)>>4,S.offset=(12&_)>>2,S.penSize=3&_,_=C[++g],S.italics=(128&_)>>7,S.underline=(64&_)>>6,S.edgeType=(56&_)>>3,S.fontStyle=7&_,g},dn.prototype.setPenColor=function(g,v){var C=this.current708Packet.data,_=C[g],S=v.currentWindow.penColor;return _=C[++g],S.fgOpacity=(192&_)>>6,S.fgRed=(48&_)>>4,S.fgGreen=(12&_)>>2,S.fgBlue=3&_,_=C[++g],S.bgOpacity=(192&_)>>6,S.bgRed=(48&_)>>4,S.bgGreen=(12&_)>>2,S.bgBlue=3&_,_=C[++g],S.edgeRed=(48&_)>>4,S.edgeGreen=(12&_)>>2,S.edgeBlue=3&_,g},dn.prototype.setPenLocation=function(g,v){var C=this.current708Packet.data,_=C[g],S=v.currentWindow.penLoc;return v.currentWindow.pendingNewLine=!0,_=C[++g],S.row=15&_,_=C[++g],S.column=63&_,g},dn.prototype.reset=function(g,v){var C=this.getPts(g);return this.flushDisplayed(C,v),this.initService(v.serviceNum,g)};var OT={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},oh=function(g){return null===g?"":(g=OT[g]||g,String.fromCharCode(g))},RT=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Eo=function(){for(var g=[],v=15;v--;)g.push({text:"",indent:0,offset:0});return g},Un=function(g,v){Un.prototype.init.call(this),this.field_=g||0,this.dataChannel_=v||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(C){var _,S,w,O,F;if((_=32639&C.ccData)!==this.lastControlCode_){if(4096==(61440&_)?this.lastControlCode_=_:_!==this.PADDING_&&(this.lastControlCode_=null),w=_>>>8,O=255&_,_!==this.PADDING_)if(_===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(_===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(C.pts),this.flushDisplayed(C.pts),S=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=S,this.startPts_=C.pts;else if(_===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(C.pts);else if(_===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(C.pts);else if(_===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(C.pts);else if(_===this.CARRIAGE_RETURN_)this.clearFormatting(C.pts),this.flushDisplayed(C.pts),this.shiftRowsUp_(),this.startPts_=C.pts;else if(_===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(_===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(C.pts),this.displayed_=Eo();else if(_===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Eo();else if(_===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(C.pts),this.displayed_=Eo()),this.mode_="paintOn",this.startPts_=C.pts;else if(this.isSpecialCharacter(w,O))F=oh((w=(3&w)<<8)|O),this[this.mode_](C.pts,F),this.column_++;else if(this.isExtCharacter(w,O))"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),F=oh((w=(3&w)<<8)|O),this[this.mode_](C.pts,F),this.column_++;else if(this.isMidRowCode(w,O))this.clearFormatting(C.pts),this[this.mode_](C.pts," "),this.column_++,14==(14&O)&&this.addFormatting(C.pts,["i"]),1==(1&O)&&this.addFormatting(C.pts,["u"]);else if(this.isOffsetControlCode(w,O)){const $=3&O;this.nonDisplayed_[this.row_].offset=$,this.column_+=$}else if(this.isPAC(w,O)){var U=RT.indexOf(7968&_);if("rollUp"===this.mode_&&(U-this.rollUpRows_+1<0&&(U=this.rollUpRows_-1),this.setRollUp(C.pts,U)),U!==this.row_&&U>=0&&U<=14&&(this.clearFormatting(C.pts),this.row_=U),1&O&&-1===this.formatting_.indexOf("u")&&this.addFormatting(C.pts,["u"]),16==(16&_)){const $=(14&_)>>1;this.column_=4*$,this.nonDisplayed_[this.row_].indent+=$}this.isColorPAC(O)&&14==(14&O)&&this.addFormatting(C.pts,["i"])}else this.isNormalChar(w)&&(0===O&&(O=null),F=oh(w),F+=oh(O),this[this.mode_](C.pts,F),this.column_+=F.length)}else this.lastControlCode_=null}};Un.prototype=new Mp,Un.prototype.flushDisplayed=function(g){const v=_=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+_+"."})},C=[];this.displayed_.forEach((_,S)=>{if(_&&_.text&&_.text.length){try{_.text=_.text.trim()}catch{v(S)}_.text.length&&C.push({text:_.text,line:S+1,position:10+Math.min(70,10*_.indent)+2.5*_.offset})}else null==_&&v(S)}),C.length&&this.trigger("data",{startPts:this.startPts_,endPts:g,content:C,stream:this.name_})},Un.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Eo(),this.nonDisplayed_=Eo(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Un.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Un.prototype.isSpecialCharacter=function(g,v){return g===this.EXT_&&v>=48&&v<=63},Un.prototype.isExtCharacter=function(g,v){return(g===this.EXT_+1||g===this.EXT_+2)&&v>=32&&v<=63},Un.prototype.isMidRowCode=function(g,v){return g===this.EXT_&&v>=32&&v<=47},Un.prototype.isOffsetControlCode=function(g,v){return g===this.OFFSET_&&v>=33&&v<=35},Un.prototype.isPAC=function(g,v){return g>=this.BASE_&&g<this.BASE_+8&&v>=64&&v<=127},Un.prototype.isColorPAC=function(g){return g>=64&&g<=79||g>=96&&g<=127},Un.prototype.isNormalChar=function(g){return g>=32&&g<=127},Un.prototype.setRollUp=function(g,v){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(g),this.nonDisplayed_=Eo(),this.displayed_=Eo()),void 0!==v&&v!==this.row_)for(var C=0;C<this.rollUpRows_;C++)this.displayed_[v-C]=this.displayed_[this.row_-C],this.displayed_[this.row_-C]={text:"",indent:0,offset:0};void 0===v&&(v=this.row_),this.topRow_=v-this.rollUpRows_+1},Un.prototype.addFormatting=function(g,v){this.formatting_=this.formatting_.concat(v);var C=v.reduce(function(_,S){return _+"<"+S+">"},"");this[this.mode_](g,C)},Un.prototype.clearFormatting=function(g){if(this.formatting_.length){var v=this.formatting_.reverse().reduce(function(C,_){return C+"</"+_+">"},"");this.formatting_=[],this[this.mode_](g,v)}},Un.prototype.popOn=function(g,v){var C=this.nonDisplayed_[this.row_].text;this.nonDisplayed_[this.row_].text=C+=v},Un.prototype.rollUp=function(g,v){var C=this.displayed_[this.row_].text;this.displayed_[this.row_].text=C+=v},Un.prototype.shiftRowsUp_=function(){var g;for(g=0;g<this.topRow_;g++)this.displayed_[g]={text:"",indent:0,offset:0};for(g=this.row_+1;g<15;g++)this.displayed_[g]={text:"",indent:0,offset:0};for(g=this.topRow_;g<this.row_;g++)this.displayed_[g]=this.displayed_[g+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Un.prototype.paintOn=function(g,v){var C=this.displayed_[this.row_].text;this.displayed_[this.row_].text=C+=v};var wy={CaptionStream:Xr,Cea608Stream:Un,Cea708Stream:dn},Pp={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Cu=function(g,v){var C=1;for(g>v&&(C=-1);Math.abs(v-g)>4294967296;)g+=8589934592*C;return g},uh=function(g){var v,C;uh.prototype.init.call(this),this.type_=g||"shared",this.push=function(_){"metadata"!==_.type?"shared"!==this.type_&&_.type!==this.type_||(void 0===C&&(C=_.dts),_.dts=Cu(_.dts,C),_.pts=Cu(_.pts,C),v=_.dts,this.trigger("data",_)):this.trigger("data",_)},this.flush=function(){C=v,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){C=void 0,v=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};uh.prototype=new s;var Du,Op={TimestampRolloverStream:uh,handleRollover:Cu},Xl=(g,v,C)=>{if(!g)return-1;for(var _=C;_<g.length;_++)if(g[_]===v)return _;return-1},Ae=function(g,v,C){var _,S="";for(_=v;_<C;_++)S+="%"+("00"+g[_].toString(16)).slice(-2);return S},Su=function(g,v,C){return decodeURIComponent(Ae(g,v,C))},je=function(g,v,C){return unescape(Ae(g,v,C))},Eu=function(g){return g[0]<<21|g[1]<<14|g[2]<<7|g[3]},Kl={APIC:function(g){var C,_,v=1;3===g.data[0]&&!((C=Xl(g.data,0,v))<0)&&(g.mimeType=je(g.data,v,C),g.pictureType=g.data[v=C+1],v++,!((_=Xl(g.data,0,v))<0)&&(g.description=Su(g.data,v,_),v=_+1,"--\x3e"===g.mimeType?g.url=je(g.data,v,g.data.length):g.pictureData=g.data.subarray(v,g.data.length)))},"T*":function(g){3===g.data[0]&&(g.value=Su(g.data,1,g.data.length).replace(/\0*$/,""),g.values=g.value.split("\0"))},TXXX:function(g){var v;3===g.data[0]&&-1!==(v=Xl(g.data,0,1))&&(g.description=Su(g.data,1,v),g.value=Su(g.data,v+1,g.data.length).replace(/\0*$/,""),g.data=g.value)},"W*":function(g){g.url=je(g.data,0,g.data.length).replace(/\0.*$/,"")},WXXX:function(g){var v;3===g.data[0]&&-1!==(v=Xl(g.data,0,1))&&(g.description=Su(g.data,1,v),g.url=je(g.data,v+1,g.data.length).replace(/\0.*$/,""))},PRIV:function(g){var v;for(v=0;v<g.data.length;v++)if(0===g.data[v]){g.owner=je(g.data,0,v);break}g.privateData=g.data.subarray(v+1),g.data=g.privateData}},_a={parseId3Frames:function(g){var v,_=10,S=0,w=[];if(!(g.length<10||g[0]!=="I".charCodeAt(0)||g[1]!=="D".charCodeAt(0)||g[2]!=="3".charCodeAt(0))){S=Eu(g.subarray(6,10)),S+=10,64&g[5]&&(_+=4,_+=Eu(g.subarray(10,14)),S-=Eu(g.subarray(16,20)));do{if((v=Eu(g.subarray(_+4,_+8)))<1)break;var F={id:String.fromCharCode(g[_],g[_+1],g[_+2],g[_+3]),data:g.subarray(_+10,_+v+10)};F.key=F.id,Kl[F.id]?Kl[F.id](F):"T"===F.id[0]?Kl["T*"](F):"W"===F.id[0]&&Kl["W*"](F),w.push(F),_+=10,_+=v}while(_<S);return w}},parseSyncSafeInteger:Eu,frameParsers:Kl},Yl=Pp,js=_a;Du=function(g){var w,v={descriptor:g&&g.descriptor},C=0,_=[],S=0;if(Du.prototype.init.call(this),this.dispatchType=Yl.METADATA_STREAM_TYPE.toString(16),v.descriptor)for(w=0;w<v.descriptor.length;w++)this.dispatchType+=("00"+v.descriptor[w].toString(16)).slice(-2);this.push=function(O){var F,U,$,G,se;if("timed-metadata"===O.type){if(O.dataAlignmentIndicator&&(S=0,_.length=0),0===_.length&&(O.data.length<10||O.data[0]!=="I".charCodeAt(0)||O.data[1]!=="D".charCodeAt(0)||O.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(_.push(O),S+=O.data.byteLength,1===_.length&&(C=js.parseSyncSafeInteger(O.data.subarray(6,10)),C+=10),!(S<C)){for(F={data:new Uint8Array(C),frames:[],pts:_[0].pts,dts:_[0].dts},se=0;se<C;)F.data.set(_[0].data.subarray(0,C-se),se),se+=_[0].data.byteLength,S-=_[0].data.byteLength,_.shift();U=10,64&F.data[5]&&(U+=4,U+=js.parseSyncSafeInteger(F.data.subarray(10,14)),C-=js.parseSyncSafeInteger(F.data.subarray(16,20)));do{if(($=js.parseSyncSafeInteger(F.data.subarray(U+4,U+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((G={id:String.fromCharCode(F.data[U],F.data[U+1],F.data[U+2],F.data[U+3]),data:F.data.subarray(U+10,U+$+10)}).key=G.id,js.frameParsers[G.id]?js.frameParsers[G.id](G):"T"===G.id[0]?js.frameParsers["T*"](G):"W"===G.id[0]&&js.frameParsers["W*"](G),"com.apple.streaming.transportStreamTimestamp"===G.owner){var ee=G.data,ht=(1&ee[3])<<30|ee[4]<<22|ee[5]<<14|ee[6]<<6|ee[7]>>>2;ht*=4,G.timeStamp=ht+=3&ee[7],void 0===F.pts&&void 0===F.dts&&(F.pts=G.timeStamp,F.dts=G.timeStamp),this.trigger("timestamp",G)}F.frames.push(G),U+=10,U+=$}while(U<C);this.trigger("data",F)}}}},Du.prototype=new s;var dh,Zl,Jl,Np=Du,Ql=s,ch=wy,yi=Pp,FT=Op.TimestampRolloverStream;dh=function(){var g=new Uint8Array(188),v=0;dh.prototype.init.call(this),this.push=function(C){var w,_=0,S=188;for(v?((w=new Uint8Array(C.byteLength+v)).set(g.subarray(0,v)),w.set(C,v),v=0):w=C;S<w.byteLength;)71!==w[_]||71!==w[S]?(_++,S++):(this.trigger("data",w.subarray(_,S)),_+=188,S+=188);_<w.byteLength&&(g.set(w.subarray(_),0),v=w.byteLength-_)},this.flush=function(){188===v&&71===g[0]&&(this.trigger("data",g),v=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){v=0,this.trigger("reset")}},dh.prototype=new Ql,Zl=function(){var g,v,C,_;Zl.prototype.init.call(this),_=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,g=function(S,w){var O=0;w.payloadUnitStartIndicator&&(O+=S[O]+1),"pat"===w.type?v(S.subarray(O),w):C(S.subarray(O),w)},v=function(S,w){w.section_number=S[7],w.last_section_number=S[8],_.pmtPid=(31&S[10])<<8|S[11],w.pmtPid=_.pmtPid},C=function(S,w){var F,$;if(1&S[5]){for(_.programMapTable={video:null,audio:null,"timed-metadata":{}},F=3+((15&S[1])<<8|S[2])-4,$=12+((15&S[10])<<8|S[11]);$<F;){var G=S[$],se=(31&S[$+1])<<8|S[$+2];G===yi.H264_STREAM_TYPE&&null===_.programMapTable.video?_.programMapTable.video=se:G===yi.ADTS_STREAM_TYPE&&null===_.programMapTable.audio?_.programMapTable.audio=se:G===yi.METADATA_STREAM_TYPE&&(_.programMapTable["timed-metadata"][se]=G),$+=5+((15&S[$+3])<<8|S[$+4])}w.programMapTable=_.programMapTable}},this.push=function(S){var w={},O=4;if(w.payloadUnitStartIndicator=!!(64&S[1]),w.pid=31&S[1],w.pid<<=8,w.pid|=S[2],(48&S[3])>>>4>1&&(O+=S[O]+1),0===w.pid)w.type="pat",g(S.subarray(O),w),this.trigger("data",w);else if(w.pid===this.pmtPid)for(w.type="pmt",g(S.subarray(O),w),this.trigger("data",w);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([S,O,w]):this.processPes_(S,O,w)},this.processPes_=function(S,w,O){O.streamType=O.pid===this.programMapTable.video?yi.H264_STREAM_TYPE:O.pid===this.programMapTable.audio?yi.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][O.pid],O.type="pes",O.data=S.subarray(w),this.trigger("data",O)}},Zl.prototype=new Ql,Zl.STREAM_TYPES={h264:27,adts:15},Jl=function(){var w,g=this,v=!1,C={data:[],size:0},_={data:[],size:0},S={data:[],size:0},F=function(U,$,G){var ve,se=new Uint8Array(U.size),He={type:$},ee=0,ht=0,At=!1;if(U.data.length&&!(U.size<9)){for(He.trackId=U.data[0].pid,ee=0;ee<U.data.length;ee++)se.set((ve=U.data[ee]).data,ht),ht+=ve.data.byteLength;(function(U,$){var G;const se=U[0]<<16|U[1]<<8|U[2];$.data=new Uint8Array,1===se&&($.packetLength=6+(U[4]<<8|U[5]),$.dataAlignmentIndicator=0!=(4&U[6]),192&(G=U[7])&&($.pts=(14&U[9])<<27|(255&U[10])<<20|(254&U[11])<<12|(255&U[12])<<5|(254&U[13])>>>3,$.pts*=4,$.pts+=(6&U[13])>>>1,$.dts=$.pts,64&G&&($.dts=(14&U[14])<<27|(255&U[15])<<20|(254&U[16])<<12|(255&U[17])<<5|(254&U[18])>>>3,$.dts*=4,$.dts+=(6&U[18])>>>1)),$.data=U.subarray(9+U[8]))})(se,He),At="video"===$||He.packetLength<=U.size,(G||At)&&(U.size=0,U.data.length=0),At&&g.trigger("data",He)}};Jl.prototype.init.call(this),this.push=function(U){({pat:function(){},pes:function(){var $,G;switch(U.streamType){case yi.H264_STREAM_TYPE:$=C,G="video";break;case yi.ADTS_STREAM_TYPE:$=_,G="audio";break;case yi.METADATA_STREAM_TYPE:$=S,G="timed-metadata";break;default:return}U.payloadUnitStartIndicator&&F($,G,!0),$.data.push(U),$.size+=U.data.byteLength},pmt:function(){var $={type:"metadata",tracks:[]};null!==(w=U.programMapTable).video&&$.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.video,codec:"avc",type:"video"}),null!==w.audio&&$.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.audio,codec:"adts",type:"audio"}),v=!0,g.trigger("data",$)}})[U.type]()},this.reset=function(){C.size=0,C.data.length=0,_.size=0,_.data.length=0,this.trigger("reset")},this.flushStreams_=function(){F(C,"video"),F(_,"audio"),F(S,"timed-metadata")},this.flush=function(){if(!v&&w){var U={type:"metadata",tracks:[]};null!==w.video&&U.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.video,codec:"avc",type:"video"}),null!==w.audio&&U.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.audio,codec:"adts",type:"audio"}),g.trigger("data",U)}v=!1,this.flushStreams_(),this.trigger("done")}},Jl.prototype=new Ql;var My={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:dh,TransportParseStream:Zl,ElementaryStream:Jl,TimestampRolloverStream:FT,CaptionStream:ch.CaptionStream,Cea608Stream:ch.Cea608Stream,Cea708Stream:ch.Cea708Stream,MetadataStream:Np};for(var Fp in yi)yi.hasOwnProperty(Fp)&&(My[Fp]=yi[Fp]);var hh,ky=My,BT=vn.ONE_SECOND_IN_TS,ri=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];hh=function(g){var v,C=0;hh.prototype.init.call(this),this.skipWarn_=function(_,S){this.trigger("log",{level:"warn",message:`adts skiping bytes ${_} to ${S} in frame ${C} outside syncword`})},this.push=function(_){var w,O,F,U,$,S=0;if(g||(C=0),"audio"===_.type){v&&v.length?(F=v,(v=new Uint8Array(F.byteLength+_.data.byteLength)).set(F),v.set(_.data,F.byteLength)):v=_.data;for(var G;S+7<v.length;)if(255===v[S]&&240==(246&v[S+1])){if("number"==typeof G&&(this.skipWarn_(G,S),G=null),O=2*(1&~v[S+1]),$=(U=1024*(1+(3&v[S+6])))*BT/ri[(60&v[S+2])>>>2],v.byteLength-S<(w=(3&v[S+3])<<11|v[S+4]<<3|(224&v[S+5])>>5))break;this.trigger("data",{pts:_.pts+C*$,dts:_.dts+C*$,sampleCount:U,audioobjecttype:1+(v[S+2]>>>6&3),channelcount:(1&v[S+2])<<2|(192&v[S+3])>>>6,samplerate:ri[(60&v[S+2])>>>2],samplingfrequencyindex:(60&v[S+2])>>>2,samplesize:16,data:v.subarray(S+7+O,S+w)}),C++,S+=w}else"number"!=typeof G&&(G=S),S++;"number"==typeof G&&(this.skipWarn_(G,S),G=null),v=v.subarray(S)}},this.flush=function(){C=0,this.trigger("done")},this.reset=function(){v=void 0,this.trigger("reset")},this.endTimeline=function(){v=void 0,this.trigger("endedtimeline")}},hh.prototype=new s;var Oy,UT=hh;Oy=function(g){var v=g.byteLength,C=0,_=0;this.length=function(){return 8*v},this.bitsAvailable=function(){return 8*v+_},this.loadWord=function(){var S=g.byteLength-v,w=new Uint8Array(4),O=Math.min(4,v);if(0===O)throw new Error("no bytes available");w.set(g.subarray(S,S+O)),C=new DataView(w.buffer).getUint32(0),_=8*O,v-=O},this.skipBits=function(S){var w;_>S?(C<<=S,_-=S):(S-=_,S-=8*(w=Math.floor(S/8)),v-=w,this.loadWord(),C<<=S,_-=S)},this.readBits=function(S){var w=Math.min(_,S),O=C>>>32-w;return(_-=w)>0?C<<=w:v>0&&this.loadWord(),(w=S-w)>0?O<<w|this.readBits(w):O},this.skipLeadingZeros=function(){var S;for(S=0;S<_;++S)if(C&2147483648>>>S)return C<<=S,_-=S,S;return this.loadWord(),S+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var S=this.skipLeadingZeros();return this.readBits(S+1)-1},this.readExpGolomb=function(){var S=this.readUnsignedExpGolomb();return 1&S?1+S>>>1:-1*(S>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var ph,ec,Ny,fh=s,Ry=Oy;ec=function(){var v,C,g=0;ec.prototype.init.call(this),this.push=function(_){var S;C?((S=new Uint8Array(C.byteLength+_.data.byteLength)).set(C),S.set(_.data,C.byteLength),C=S):C=_.data;for(var w=C.byteLength;g<w-3;g++)if(1===C[g+2]){v=g+5;break}for(;v<w;)switch(C[v]){case 0:if(0!==C[v-1]){v+=2;break}if(0!==C[v-2]){v++;break}g+3!==v-2&&this.trigger("data",C.subarray(g+3,v-2));do{v++}while(1!==C[v]&&v<w);g=v-2,v+=3;break;case 1:if(0!==C[v-1]||0!==C[v-2]){v+=3;break}this.trigger("data",C.subarray(g+3,v-2)),g=v-2,v+=3;break;default:v+=3}C=C.subarray(g),v-=g,g=0},this.reset=function(){C=null,g=0,this.trigger("reset")},this.flush=function(){C&&C.byteLength>3&&this.trigger("data",C.subarray(g+3)),C=null,g=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},ec.prototype=new fh,Ny={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ph=function(){var v,C,_,S,w,O,F,g=new ec;ph.prototype.init.call(this),v=this,this.push=function(U){"video"===U.type&&(C=U.trackId,_=U.pts,S=U.dts,g.push(U))},g.on("data",function(U){var $={trackId:C,pts:_,dts:S,data:U,nalUnitTypeCode:31&U[0]};switch($.nalUnitTypeCode){case 5:$.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:$.nalUnitType="sei_rbsp",$.escapedRBSP=w(U.subarray(1));break;case 7:$.nalUnitType="seq_parameter_set_rbsp",$.escapedRBSP=w(U.subarray(1)),$.config=O($.escapedRBSP);break;case 8:$.nalUnitType="pic_parameter_set_rbsp";break;case 9:$.nalUnitType="access_unit_delimiter_rbsp"}v.trigger("data",$)}),g.on("done",function(){v.trigger("done")}),g.on("partialdone",function(){v.trigger("partialdone")}),g.on("reset",function(){v.trigger("reset")}),g.on("endedtimeline",function(){v.trigger("endedtimeline")}),this.flush=function(){g.flush()},this.partialFlush=function(){g.partialFlush()},this.reset=function(){g.reset()},this.endTimeline=function(){g.endTimeline()},F=function(U,$){var He,G=8,se=8;for(He=0;He<U;He++)0!==se&&(se=(G+$.readExpGolomb()+256)%256),G=0===se?G:se},w=function(U){for(var He,ee,$=U.byteLength,G=[],se=1;se<$-2;)0===U[se]&&0===U[se+1]&&3===U[se+2]?(G.push(se+2),se+=2):se++;if(0===G.length)return U;He=$-G.length,ee=new Uint8Array(He);var ht=0;for(se=0;se<He;ht++,se++)ht===G[0]&&(ht++,G.shift()),ee[se]=U[ht];return ee},O=function(U){var ee,ht,At,ve,De,Tt,tg,ov,av,ng,Nu,Io,$=0,G=0,se=0,He=0,wn=[1,1];if(ht=(ee=new Ry(U)).readUnsignedByte(),ve=ee.readUnsignedByte(),At=ee.readUnsignedByte(),ee.skipUnsignedExpGolomb(),Ny[ht]&&(3===(De=ee.readUnsignedExpGolomb())&&ee.skipBits(1),ee.skipUnsignedExpGolomb(),ee.skipUnsignedExpGolomb(),ee.skipBits(1),ee.readBoolean()))for(Nu=3!==De?8:12,Io=0;Io<Nu;Io++)ee.readBoolean()&&F(Io<6?16:64,ee);if(ee.skipUnsignedExpGolomb(),0===(Tt=ee.readUnsignedExpGolomb()))ee.readUnsignedExpGolomb();else if(1===Tt)for(ee.skipBits(1),ee.skipExpGolomb(),ee.skipExpGolomb(),tg=ee.readUnsignedExpGolomb(),Io=0;Io<tg;Io++)ee.skipExpGolomb();if(ee.skipUnsignedExpGolomb(),ee.skipBits(1),ov=ee.readUnsignedExpGolomb(),av=ee.readUnsignedExpGolomb(),0===(ng=ee.readBits(1))&&ee.skipBits(1),ee.skipBits(1),ee.readBoolean()&&($=ee.readUnsignedExpGolomb(),G=ee.readUnsignedExpGolomb(),se=ee.readUnsignedExpGolomb(),He=ee.readUnsignedExpGolomb()),ee.readBoolean()&&ee.readBoolean())switch(ee.readUnsignedByte()){case 1:wn=[1,1];break;case 2:wn=[12,11];break;case 3:wn=[10,11];break;case 4:wn=[16,11];break;case 5:wn=[40,33];break;case 6:wn=[24,11];break;case 7:wn=[20,11];break;case 8:wn=[32,11];break;case 9:wn=[80,33];break;case 10:wn=[18,11];break;case 11:wn=[15,11];break;case 12:wn=[64,33];break;case 13:wn=[160,99];break;case 14:wn=[4,3];break;case 15:wn=[3,2];break;case 16:wn=[2,1];break;case 255:wn=[ee.readUnsignedByte()<<8|ee.readUnsignedByte(),ee.readUnsignedByte()<<8|ee.readUnsignedByte()]}return{profileIdc:ht,levelIdc:At,profileCompatibility:ve,width:16*(ov+1)-2*$-2*G,height:(2-ng)*(av+1)*16-2*se-2*He,sarRatio:wn}}},ph.prototype=new fh;var tc,Ly={H264Stream:ph,NalByteStream:ec},jT=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Fy=function(g,v){var C=g[v+6]<<21|g[v+7]<<14|g[v+8]<<7|g[v+9];return C=C>=0?C:0,(16&g[v+5])>>4?C+20:C+10},gh=function(g,v){return g.length-v<10||g[v]!=="I".charCodeAt(0)||g[v+1]!=="D".charCodeAt(0)||g[v+2]!=="3".charCodeAt(0)?v:(v+=Fy(g,v),gh(g,v))},By=function(g){return g[0]<<21|g[1]<<14|g[2]<<7|g[3]},HT=function(g,v,C){return unescape(function(g,v,C){var _,S="";for(_=v;_<C;_++)S+="%"+("00"+g[_].toString(16)).slice(-2);return S}(g,v,C))},mh={isLikelyAacData:function(g){var v=gh(g,0);return g.length>=v+2&&255==(255&g[v])&&240==(240&g[v+1])&&16==(22&g[v+1])},parseId3TagSize:Fy,parseAdtsSize:function(g,v){return 6144&g[v+3]|g[v+4]<<3|(224&g[v+5])>>5},parseType:function(g,v){return g[v]==="I".charCodeAt(0)&&g[v+1]==="D".charCodeAt(0)&&g[v+2]==="3".charCodeAt(0)?"timed-metadata":!0&g[v]&&240==(240&g[v+1])?"audio":null},parseSampleRate:function(g){for(var v=0;v+5<g.length;){if(255===g[v]&&240==(246&g[v+1]))return jT[(60&g[v+2])>>>2];v++}return null},parseAacTimestamp:function(g){var v,C,_;v=10,64&g[5]&&(v+=4,v+=By(g.subarray(10,14)));do{if((C=By(g.subarray(v+4,v+8)))<1)return null;if("PRIV"===String.fromCharCode(g[v],g[v+1],g[v+2],g[v+3])){_=g.subarray(v+10,v+C+10);for(var w=0;w<_.byteLength;w++)if(0===_[w]){if("com.apple.streaming.transportStreamTimestamp"===HT(_,0,w)){var F=_.subarray(w+1),U=(1&F[3])<<30|F[4]<<22|F[5]<<14|F[6]<<6|F[7]>>>2;return(U*=4)+(3&F[7])}break}}v+=10,v+=C}while(v<g.byteLength);return null}},Up=mh;tc=function(){var g=new Uint8Array,v=0;tc.prototype.init.call(this),this.setTimestamp=function(C){v=C},this.push=function(C){var O,F,U,_=0,S=0;for(g.length?(U=g.length,(g=new Uint8Array(C.byteLength+U)).set(g.subarray(0,U)),g.set(C,U)):g=C;g.length-S>=3;)if(g[S]!=="I".charCodeAt(0)||g[S+1]!=="D".charCodeAt(0)||g[S+2]!=="3".charCodeAt(0))if(255!=(255&g[S])||240!=(240&g[S+1]))S++;else{if(g.length-S<7||S+(_=Up.parseAdtsSize(g,S))>g.length)break;F={type:"audio",data:g.subarray(S,S+_),pts:v,dts:v},this.trigger("data",F),S+=_}else{if(g.length-S<10||S+(_=Up.parseId3TagSize(g,S))>g.length)break;O={type:"timed-metadata",data:g.subarray(S,S+_)},this.trigger("data",O),S+=_}g=g.length-S>0?g.subarray(S):new Uint8Array},this.reset=function(){g=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){g=new Uint8Array,this.trigger("endedtimeline")}},tc.prototype=new s;var bh,Mu,ic,Do,nc=s,xu=Dp,ba=wT,Ri=Ap,Zi=Ty,$s=ky,Iu=vn,$y=UT,Vy=Ly.H264Stream,WT=tc,vh=mh.isLikelyAacData,rc=vn.ONE_SECOND_IN_TS,_h=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Au=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],XT=function(g,v){v.stream=g,this.trigger("log",v)},Hy=function(g,v){for(var C=Object.keys(v),_=0;_<C.length;_++){var S=C[_];"headOfPipeline"===S||!v[S].on||v[S].on("log",XT.bind(g,S))}},$p=function(g,v){var C;if(g.length!==v.length)return!1;for(C=0;C<g.length;C++)if(g[C]!==v[C])return!1;return!0},Th=function(g,v,C,_,S,w){return{start:{dts:g,pts:g+(C-v)},end:{dts:g+(_-v),pts:g+(S-C)},prependedContentDuration:w,baseMediaDecodeTime:g}};Mu=function(g,v){var _,C=[],S=0,w=0,O=1/0;_=(v=v||{}).firstSequenceNumber||0,Mu.prototype.init.call(this),this.push=function(F){Zi.collectDtsInfo(g,F),g&&_h.forEach(function(U){g[U]=F[U]}),C.push(F)},this.setEarliestDts=function(F){S=F},this.setVideoBaseMediaDecodeTime=function(F){O=F},this.setAudioAppendStart=function(F){w=F},this.flush=function(){var F,U,$,G,se,He,ee;0!==C.length?(F=Ri.trimAdtsFramesByEarliestDts(C,g,S),g.baseMediaDecodeTime=Zi.calculateTrackBaseMediaDecodeTime(g,v.keepOriginalTimestamps),ee=Ri.prefixWithSilence(g,F,w,O),g.samples=Ri.generateSampleTable(F),$=xu.mdat(Ri.concatenateFrameData(F)),C=[],U=xu.moof(_,[g]),G=new Uint8Array(U.byteLength+$.byteLength),_++,G.set(U),G.set($,U.byteLength),Zi.clearDtsInfo(g),se=Math.ceil(1024*rc/g.samplerate),F.length&&(He=F.length*se,this.trigger("segmentTimingInfo",Th(Iu.audioTsToVideoTs(g.baseMediaDecodeTime,g.samplerate),F[0].dts,F[0].pts,F[0].dts+He,F[0].pts+He,ee||0)),this.trigger("timingInfo",{start:F[0].pts,end:F[0].pts+He})),this.trigger("data",{track:g,boxes:G}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Zi.clearDtsInfo(g),C=[],this.trigger("reset")}},Mu.prototype=new nc,bh=function(g,v){var C,w,O,_=[],S=[];C=(v=v||{}).firstSequenceNumber||0,bh.prototype.init.call(this),delete g.minPTS,this.gopCache_=[],this.push=function(F){Zi.collectDtsInfo(g,F),"seq_parameter_set_rbsp"===F.nalUnitType&&!w&&(w=F.config,g.sps=[F.data],Au.forEach(function(U){g[U]=w[U]},this)),"pic_parameter_set_rbsp"===F.nalUnitType&&!O&&(O=F.data,g.pps=[F.data]),_.push(F)},this.flush=function(){for(var F,U,$,G,se,He,ht,At,ee=0;_.length&&"access_unit_delimiter_rbsp"!==_[0].nalUnitType;)_.shift();if(0===_.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(F=ba.groupNalsIntoFrames(_),($=ba.groupFramesIntoGops(F))[0][0].keyFrame||((U=this.getGopForFusion_(_[0],g))?(ee=U.duration,$.unshift(U),$.byteLength+=U.byteLength,$.nalCount+=U.nalCount,$.pts=U.pts,$.dts=U.dts,$.duration+=U.duration):$=ba.extendFirstKeyFrame($)),S.length){var ve;if(!(ve=v.alignGopsAtEnd?this.alignGopsAtEnd_($):this.alignGopsAtStart_($)))return this.gopCache_.unshift({gop:$.pop(),pps:g.pps,sps:g.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),_=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Zi.clearDtsInfo(g),$=ve}Zi.collectDtsInfo(g,$),g.samples=ba.generateSampleTable($),se=xu.mdat(ba.concatenateNalData($)),g.baseMediaDecodeTime=Zi.calculateTrackBaseMediaDecodeTime(g,v.keepOriginalTimestamps),this.trigger("processedGopsInfo",$.map(function(De){return{pts:De.pts,dts:De.dts,byteLength:De.byteLength}})),this.trigger("segmentTimingInfo",Th(g.baseMediaDecodeTime,(ht=$[0]).dts,ht.pts,(At=$[$.length-1]).dts+At.duration,At.pts+At.duration,ee)),this.trigger("timingInfo",{start:$[0].pts,end:$[$.length-1].pts+$[$.length-1].duration}),this.gopCache_.unshift({gop:$.pop(),pps:g.pps,sps:g.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),_=[],this.trigger("baseMediaDecodeTime",g.baseMediaDecodeTime),this.trigger("timelineStartInfo",g.timelineStartInfo),G=xu.moof(C,[g]),He=new Uint8Array(G.byteLength+se.byteLength),C++,He.set(G),He.set(se,G.byteLength),this.trigger("data",{track:g,boxes:He}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),_=[],this.gopCache_.length=0,S.length=0,this.trigger("reset")},this.resetStream_=function(){Zi.clearDtsInfo(g),w=void 0,O=void 0},this.getGopForFusion_=function(F){var se,He,ee,ht,At,G=1/0;for(At=0;At<this.gopCache_.length;At++)ee=(ht=this.gopCache_[At]).gop,g.pps&&$p(g.pps[0],ht.pps[0])&&g.sps&&$p(g.sps[0],ht.sps[0])&&(ee.dts<g.timelineStartInfo.dts||(se=F.dts-ee.dts-ee.duration)>=-1e4&&se<=45e3&&(!He||G>se)&&(He=ht,G=se));return He?He.gop:null},this.alignGopsAtStart_=function(F){var U,$,G,se,He,ee,ht,At;for(He=F.byteLength,ee=F.nalCount,ht=F.duration,U=$=0;U<S.length&&$<F.length&&(G=S[U]).pts!==(se=F[$]).pts;)se.pts>G.pts?U++:($++,He-=se.byteLength,ee-=se.nalCount,ht-=se.duration);return 0===$?F:$===F.length?null:((At=F.slice($)).byteLength=He,At.duration=ht,At.nalCount=ee,At.pts=At[0].pts,At.dts=At[0].dts,At)},this.alignGopsAtEnd_=function(F){var U,$,G,se,He,ee,ht;for(U=S.length-1,$=F.length-1,He=null,ee=!1;U>=0&&$>=0;){if((G=S[U]).pts===(se=F[$]).pts){ee=!0;break}G.pts>se.pts?U--:(U===S.length-1&&(He=$),$--)}if(!ee&&null===He)return null;if(0===(ht=ee?$:He))return F;var At=F.slice(ht),ve=At.reduce(function(De,Tt){return De.byteLength+=Tt.byteLength,De.duration+=Tt.duration,De.nalCount+=Tt.nalCount,De},{byteLength:0,duration:0,nalCount:0});return At.byteLength=ve.byteLength,At.duration=ve.duration,At.nalCount=ve.nalCount,At.pts=At[0].pts,At.dts=At[0].dts,At},this.alignGopsWith=function(F){S=F}},bh.prototype=new nc,Do=function(g,v){this.numberOfTracks=0,this.metadataStream=v,this.remuxTracks=!(typeof(g=g||{}).remux<"u"&&!g.remux),this.keepOriginalTimestamps="boolean"==typeof g.keepOriginalTimestamps&&g.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Do.prototype.init.call(this),this.push=function(C){return C.content||C.text?this.pendingCaptions.push(C):C.frames?this.pendingMetadata.push(C):(this.pendingTracks.push(C.track),this.pendingBytes+=C.boxes.byteLength,"video"===C.track.type&&(this.videoTrack=C.track,this.pendingBoxes.push(C.boxes)),void("audio"===C.track.type&&(this.audioTrack=C.track,this.pendingBoxes.unshift(C.boxes))))}},Do.prototype=new nc,Do.prototype.flush=function(g){var _,S,w,F,v=0,C={captions:[],captionStreams:{},metadata:[],info:{}},O=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==g&&"AudioSegmentStream"!==g)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(O=this.videoTrack.timelineStartInfo.pts,Au.forEach(function(U){C.info[U]=this.videoTrack[U]},this)):this.audioTrack&&(O=this.audioTrack.timelineStartInfo.pts,_h.forEach(function(U){C.info[U]=this.audioTrack[U]},this)),this.videoTrack||this.audioTrack){for(C.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,w=xu.initSegment(this.pendingTracks),C.initSegment=new Uint8Array(w.byteLength),C.initSegment.set(w),C.data=new Uint8Array(this.pendingBytes),F=0;F<this.pendingBoxes.length;F++)C.data.set(this.pendingBoxes[F],v),v+=this.pendingBoxes[F].byteLength;for(F=0;F<this.pendingCaptions.length;F++)(_=this.pendingCaptions[F]).startTime=Iu.metadataTsToSeconds(_.startPts,O,this.keepOriginalTimestamps),_.endTime=Iu.metadataTsToSeconds(_.endPts,O,this.keepOriginalTimestamps),C.captionStreams[_.stream]=!0,C.captions.push(_);for(F=0;F<this.pendingMetadata.length;F++)(S=this.pendingMetadata[F]).cueTime=Iu.metadataTsToSeconds(S.pts,O,this.keepOriginalTimestamps),C.metadata.push(S);for(C.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",C),F=0;F<C.captions.length;F++)this.trigger("caption",_=C.captions[F]);for(F=0;F<C.metadata.length;F++)this.trigger("id3Frame",S=C.metadata[F])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Do.prototype.setRemux=function(g){this.remuxTracks=g},ic=function(g){var _,S,v=this,C=!0;ic.prototype.init.call(this),this.baseMediaDecodeTime=(g=g||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var w={};this.transmuxPipeline_=w,w.type="aac",w.metadataStream=new $s.MetadataStream,w.aacStream=new WT,w.audioTimestampRolloverStream=new $s.TimestampRolloverStream("audio"),w.timedMetadataTimestampRolloverStream=new $s.TimestampRolloverStream("timed-metadata"),w.adtsStream=new $y,w.coalesceStream=new Do(g,w.metadataStream),w.headOfPipeline=w.aacStream,w.aacStream.pipe(w.audioTimestampRolloverStream).pipe(w.adtsStream),w.aacStream.pipe(w.timedMetadataTimestampRolloverStream).pipe(w.metadataStream).pipe(w.coalesceStream),w.metadataStream.on("timestamp",function(O){w.aacStream.setTimestamp(O.timeStamp)}),w.aacStream.on("data",function(O){"timed-metadata"!==O.type&&"audio"!==O.type||w.audioSegmentStream||(S=S||{timelineStartInfo:{baseMediaDecodeTime:v.baseMediaDecodeTime},codec:"adts",type:"audio"},w.coalesceStream.numberOfTracks++,w.audioSegmentStream=new Mu(S,g),w.audioSegmentStream.on("log",v.getLogTrigger_("audioSegmentStream")),w.audioSegmentStream.on("timingInfo",v.trigger.bind(v,"audioTimingInfo")),w.adtsStream.pipe(w.audioSegmentStream).pipe(w.coalesceStream),v.trigger("trackinfo",{hasAudio:!!S,hasVideo:!!_}))}),w.coalesceStream.on("data",this.trigger.bind(this,"data")),w.coalesceStream.on("done",this.trigger.bind(this,"done")),Hy(this,w)},this.setupTsPipeline=function(){var w={};this.transmuxPipeline_=w,w.type="ts",w.metadataStream=new $s.MetadataStream,w.packetStream=new $s.TransportPacketStream,w.parseStream=new $s.TransportParseStream,w.elementaryStream=new $s.ElementaryStream,w.timestampRolloverStream=new $s.TimestampRolloverStream,w.adtsStream=new $y,w.h264Stream=new Vy,w.captionStream=new $s.CaptionStream(g),w.coalesceStream=new Do(g,w.metadataStream),w.headOfPipeline=w.packetStream,w.packetStream.pipe(w.parseStream).pipe(w.elementaryStream).pipe(w.timestampRolloverStream),w.timestampRolloverStream.pipe(w.h264Stream),w.timestampRolloverStream.pipe(w.adtsStream),w.timestampRolloverStream.pipe(w.metadataStream).pipe(w.coalesceStream),w.h264Stream.pipe(w.captionStream).pipe(w.coalesceStream),w.elementaryStream.on("data",function(O){var F;if("metadata"===O.type){for(F=O.tracks.length;F--;)_||"video"!==O.tracks[F].type?!S&&"audio"===O.tracks[F].type&&((S=O.tracks[F]).timelineStartInfo.baseMediaDecodeTime=v.baseMediaDecodeTime):(_=O.tracks[F]).timelineStartInfo.baseMediaDecodeTime=v.baseMediaDecodeTime;_&&!w.videoSegmentStream&&(w.coalesceStream.numberOfTracks++,w.videoSegmentStream=new bh(_,g),w.videoSegmentStream.on("log",v.getLogTrigger_("videoSegmentStream")),w.videoSegmentStream.on("timelineStartInfo",function(U){S&&!g.keepOriginalTimestamps&&(S.timelineStartInfo=U,w.audioSegmentStream.setEarliestDts(U.dts-v.baseMediaDecodeTime))}),w.videoSegmentStream.on("processedGopsInfo",v.trigger.bind(v,"gopInfo")),w.videoSegmentStream.on("segmentTimingInfo",v.trigger.bind(v,"videoSegmentTimingInfo")),w.videoSegmentStream.on("baseMediaDecodeTime",function(U){S&&w.audioSegmentStream.setVideoBaseMediaDecodeTime(U)}),w.videoSegmentStream.on("timingInfo",v.trigger.bind(v,"videoTimingInfo")),w.h264Stream.pipe(w.videoSegmentStream).pipe(w.coalesceStream)),S&&!w.audioSegmentStream&&(w.coalesceStream.numberOfTracks++,w.audioSegmentStream=new Mu(S,g),w.audioSegmentStream.on("log",v.getLogTrigger_("audioSegmentStream")),w.audioSegmentStream.on("timingInfo",v.trigger.bind(v,"audioTimingInfo")),w.audioSegmentStream.on("segmentTimingInfo",v.trigger.bind(v,"audioSegmentTimingInfo")),w.adtsStream.pipe(w.audioSegmentStream).pipe(w.coalesceStream)),v.trigger("trackinfo",{hasAudio:!!S,hasVideo:!!_})}}),w.coalesceStream.on("data",this.trigger.bind(this,"data")),w.coalesceStream.on("id3Frame",function(O){O.dispatchType=w.metadataStream.dispatchType,v.trigger("id3Frame",O)}),w.coalesceStream.on("caption",this.trigger.bind(this,"caption")),w.coalesceStream.on("done",this.trigger.bind(this,"done")),Hy(this,w)},this.setBaseMediaDecodeTime=function(w){var O=this.transmuxPipeline_;g.keepOriginalTimestamps||(this.baseMediaDecodeTime=w),S&&(S.timelineStartInfo.dts=void 0,S.timelineStartInfo.pts=void 0,Zi.clearDtsInfo(S),O.audioTimestampRolloverStream&&O.audioTimestampRolloverStream.discontinuity()),_&&(O.videoSegmentStream&&(O.videoSegmentStream.gopCache_=[]),_.timelineStartInfo.dts=void 0,_.timelineStartInfo.pts=void 0,Zi.clearDtsInfo(_),O.captionStream.reset()),O.timestampRolloverStream&&O.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(w){S&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(w)},this.setRemux=function(w){var O=this.transmuxPipeline_;g.remux=w,O&&O.coalesceStream&&O.coalesceStream.setRemux(w)},this.alignGopsWith=function(w){_&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(w)},this.getLogTrigger_=function(w){var O=this;return function(F){F.stream=w,O.trigger("log",F)}},this.push=function(w){if(C){var O=vh(w);O&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!O&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),C=!1}this.transmuxPipeline_.headOfPipeline.push(w)},this.flush=function(){C=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ic.prototype=new nc;var lc,zp,Xp,Eh,Kp,sc={Transmuxer:ic,VideoSegmentStream:bh,AudioSegmentStream:Mu,AUDIO_PROPERTIES:_h,VIDEO_PROPERTIES:Au,generateSegmentTimingInfo:Th},oc_toUnsigned=function(g){return g>>>0},zy=function(g){var v="";return v+=String.fromCharCode(g[0]),v+=String.fromCharCode(g[1]),(v+=String.fromCharCode(g[2]))+String.fromCharCode(g[3])},ac=oc_toUnsigned,QT=zy,Gy=function(g,v){var _,S,w,O,F,C=[];if(!v.length)return null;for(_=0;_<g.byteLength;)S=ac(g[_]<<24|g[_+1]<<16|g[_+2]<<8|g[_+3]),w=QT(g.subarray(_+4,_+8)),O=S>1?_+S:g.byteLength,w===v[0]&&(1===v.length?C.push(g.subarray(_+8,O)):(F=Gy(g.subarray(_+8,O),v.slice(1))).length&&(C=C.concat(F))),_=O;return C},ZT=oc_toUnsigned,JT=h.getUint64,Xy=function(g){var v={version:g[0],flags:new Uint8Array(g.subarray(1,4))};return v.baseMediaDecodeTime=1===v.version?JT(g.subarray(4)):ZT(g[4]<<24|g[5]<<16|g[6]<<8|g[7]),v},Vp=function(g){return{isLeading:(12&g[0])>>>2,dependsOn:3&g[0],isDependedOn:(192&g[1])>>>6,hasRedundancy:(48&g[1])>>>4,paddingValue:(14&g[1])>>>1,isNonSyncSample:1&g[1],degradationPriority:g[2]<<8|g[3]}},uc=function(g){var se,v={version:g[0],flags:new Uint8Array(g.subarray(1,4)),samples:[]},C=new DataView(g.buffer,g.byteOffset,g.byteLength),_=1&v.flags[2],S=4&v.flags[2],w=1&v.flags[1],O=2&v.flags[1],F=4&v.flags[1],U=8&v.flags[1],$=C.getUint32(4),G=8;for(_&&(v.dataOffset=C.getInt32(G),G+=4),S&&$&&(se={flags:Vp(g.subarray(G,G+4))},G+=4,w&&(se.duration=C.getUint32(G),G+=4),O&&(se.size=C.getUint32(G),G+=4),U&&(se.compositionTimeOffset=1===v.version?C.getInt32(G):C.getUint32(G),G+=4),v.samples.push(se),$--);$--;)se={},w&&(se.duration=C.getUint32(G),G+=4),O&&(se.size=C.getUint32(G),G+=4),F&&(se.flags=Vp(g.subarray(G,G+4)),G+=4),U&&(se.compositionTimeOffset=1===v.version?C.getInt32(G):C.getUint32(G),G+=4),v.samples.push(se);return v},Yy=function(g){var G,v=new DataView(g.buffer,g.byteOffset,g.byteLength),C={version:g[0],flags:new Uint8Array(g.subarray(1,4)),trackId:v.getUint32(4)},_=1&C.flags[2],S=2&C.flags[2],w=8&C.flags[2],O=16&C.flags[2],F=32&C.flags[2],U=65536&C.flags[0],$=131072&C.flags[0];return G=8,_&&(G+=4,C.baseDataOffset=v.getUint32(12),G+=4),S&&(C.sampleDescriptionIndex=v.getUint32(G),G+=4),w&&(C.defaultSampleDuration=v.getUint32(G),G+=4),O&&(C.defaultSampleSize=v.getUint32(G),G+=4),F&&(C.defaultSampleFlags=v.getUint32(G)),U&&(C.durationIsEmpty=!0),!_&&$&&(C.baseDataOffsetIsMoof=!0),C},iC=(lc=typeof window<"u"?window:typeof u<"u"?u:typeof self<"u"?self:{},va.discardEmulationPreventionBytes),sC=wy.CaptionStream,cc=Gy,Zy=Xy,Jy=uc,oC=Yy,aC=lc,ev=function(g,v){for(var C=g,_=0;_<v.length;_++){var S=v[_];if(C<S.size)return S;C-=S.size}return null},Hp=function(){var v,C,_,S,w,O,g=!1;this.isInitialized=function(){return g},this.init=function(F){v=new sC,g=!0,O=!!F&&F.isPartial,v.on("data",function(U){U.startTime=U.startPts/S,U.endTime=U.endPts/S,w.captions.push(U),w.captionStreams[U.stream]=!0}),v.on("log",function(U){w.logs.push(U)})},this.isNewInit=function(F,U){return!(F&&0===F.length||U&&"object"==typeof U&&0===Object.keys(U).length||_===F[0]&&S===U[_])},this.parse=function(F,U,$){var G;if(!this.isInitialized())return null;if(!U||!$)return null;if(this.isNewInit(U,$))S=$[_=U[0]];else if(null===_||!S)return C.push(F),null;for(;C.length>0;){var se=C.shift();this.parse(se,U,$)}return G=function(g,v,C){if(null===v)return null;var S=function(g,v){var C=cc(g,["moof","traf"]),_=cc(g,["mdat"]),S={},w=[];return _.forEach(function(O,F){w.push({mdat:O,traf:C[F]})}),w.forEach(function(O){var At,ve,F=O.mdat,U=O.traf,$=cc(U,["tfhd"]),G=oC($[0]),se=G.trackId,He=cc(U,["tfdt"]),ee=He.length>0?Zy(He[0]).baseMediaDecodeTime:0,ht=cc(U,["trun"]);v===se&&ht.length>0&&(At=function(g,v,C){var _=v,S=C.defaultSampleDuration||0,w=C.defaultSampleSize||0,O=C.trackId,F=[];return g.forEach(function(U){var G=Jy(U).samples;G.forEach(function(se){void 0===se.duration&&(se.duration=S),void 0===se.size&&(se.size=w),se.trackId=O,se.dts=_,void 0===se.compositionTimeOffset&&(se.compositionTimeOffset=0),"bigint"==typeof _?(se.pts=_+aC.BigInt(se.compositionTimeOffset),_+=aC.BigInt(se.duration)):(se.pts=_+se.compositionTimeOffset,_+=se.duration)}),F=F.concat(G)}),F}(ht,ee,G),ve=function(g,v,C){var w,O,F,U,_=new DataView(g.buffer,g.byteOffset,g.byteLength),S={logs:[],seiNals:[]};for(O=0;O+4<g.length;O+=F)if(F=_.getUint32(O),O+=4,!(F<=0))switch(31&g[O]){case 6:var $=g.subarray(O+1,O+1+F),G=ev(O,v);if(w={nalUnitType:"sei_rbsp",size:F,data:$,escapedRBSP:iC($),trackId:C},G)w.pts=G.pts,w.dts=G.dts,U=G;else{if(!U){S.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+O+" for trackId "+C+". See mux.js#223."});break}w.pts=U.pts,w.dts=U.dts}S.seiNals.push(w)}return S}(F,At,se),S[se]||(S[se]={seiNals:[],logs:[]}),S[se].seiNals=S[se].seiNals.concat(ve.seiNals),S[se].logs=S[se].logs.concat(ve.logs))}),S}(g,v)[v]||{};return{seiNals:S.seiNals,logs:S.logs,timescale:C}}(F,_,S),G&&G.logs&&(w.logs=w.logs.concat(G.logs)),null!==G&&G.seiNals?(this.pushNals(G.seiNals),this.flushStream(),w):w.logs.length?{logs:w.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(F){if(!this.isInitialized()||!F||0===F.length)return null;F.forEach(function(U){v.push(U)})},this.flushStream=function(){if(!this.isInitialized())return null;O?v.partialFlush():v.flush()},this.clearParsedCaptions=function(){w.captions=[],w.captionStreams={},w.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;v.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){C=[],_=null,S=null,w?this.clearParsedCaptions():w={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},wo=function(g){for(var v=0,C=String.fromCharCode(g[v]),_="";"\0"!==C;)_+=C,v++,C=String.fromCharCode(g[v]);return _+C},Nr=h.getUint64,dc=function(g){return void 0!==g||null!==g},ku={parseEmsgBox:function(g){var _,S,w,O,F,U,$,v=4,C=g[0];if(0===C)v+=(_=wo(g.subarray(v))).length,v+=(S=wo(g.subarray(v))).length,w=(se=new DataView(g.buffer)).getUint32(v),F=se.getUint32(v+=4),U=se.getUint32(v+=4),$=se.getUint32(v+=4),v+=4;else if(1===C){var se;w=(se=new DataView(g.buffer)).getUint32(v),O=Nr(g.subarray(v+=4)),U=se.getUint32(v+=8),$=se.getUint32(v+=4),v+=4,v+=(_=wo(g.subarray(v))).length,v+=(S=wo(g.subarray(v))).length}var He={scheme_id_uri:_,value:S,timescale:w||1,presentation_time:O,presentation_time_delta:F,event_duration:U,id:$,message_data:new Uint8Array(g.subarray(v,g.byteLength))};return function(g,v){var C="\0"!==v.scheme_id_uri,_=0===g&&dc(v.presentation_time_delta)&&C,S=1===g&&dc(v.presentation_time)&&C;return!(g>1)&&_||S}(C,He)?He:void 0},scaleTime:function(g,v,C,_){return g||0===g?g/v:_+C/v}},Vs=oc_toUnsigned,_s=function(g){return("00"+g.toString(16)).slice(-2)},bn=Gy,Ji=zy,xo=ku,nv=h.getUint64,Dh=lc,Yp=_a.parseId3Frames;zp=function(g,v){var _=bn(v,["moof","traf"]).reduce(function(S,w){var se,O=bn(w,["tfhd"])[0],F=Vs(O[4]<<24|O[5]<<16|O[6]<<8|O[7]),U=g[F]||9e4,$=bn(w,["tfdt"])[0],G=new DataView($.buffer,$.byteOffset,$.byteLength);let He;return"bigint"==typeof(se=1===$[0]?nv($.subarray(4,12)):G.getUint32(4))?He=se/Dh.BigInt(U):"number"==typeof se&&!isNaN(se)&&(He=se/U),He<Number.MAX_SAFE_INTEGER&&(He=Number(He)),He<S&&(S=He),S},1/0);return"bigint"==typeof _||isFinite(_)?_:0},Eh=function(g){var C=0===g[0]?12:20;return Vs(g[C]<<24|g[C+1]<<16|g[C+2]<<8|g[C+3])},Xp=function(g){var v=bn(g,["moov","trak"]),C=[];return v.forEach(function(_){var O,F,S={},w=bn(_,["tkhd"])[0];w&&(F=(O=new DataView(w.buffer,w.byteOffset,w.byteLength)).getUint8(0),S.id=O.getUint32(0===F?12:20));var U=bn(_,["mdia","hdlr"])[0];if(U){var $=Ji(U.subarray(8,12));S.type="vide"===$?"video":"soun"===$?"audio":$}var G=bn(_,["mdia","minf","stbl","stsd"])[0];if(G){var se=G.subarray(8);S.codec=Ji(se.subarray(4,8));var ee,He=bn(se,[S.codec])[0];He&&(/^[asm]vc[1-9]$/i.test(S.codec)?(ee=He.subarray(78),"avcC"===Ji(ee.subarray(4,8))&&ee.length>11?(S.codec+=".",S.codec+=_s(ee[9]),S.codec+=_s(ee[10]),S.codec+=_s(ee[11])):S.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(S.codec)?(ee=He.subarray(28),"esds"===Ji(ee.subarray(4,8))&&ee.length>20&&0!==ee[19]?(S.codec+="."+_s(ee[19]),S.codec+="."+_s(ee[20]>>>2&63).replace(/^0/,"")):S.codec="mp4a.40.2"):S.codec=S.codec.toLowerCase())}var At=bn(_,["mdia","mdhd"])[0];At&&(S.timescale=Eh(At)),C.push(S)}),C},Kp=function(g,v=0){return bn(g,["emsg"]).map(_=>{var S=xo.parseEmsgBox(new Uint8Array(_)),w=Yp(S.message_data);return{cueTime:xo.scaleTime(S.presentation_time,S.timescale,S.presentation_time_delta,v),duration:xo.scaleTime(S.event_duration,S.timescale),frames:w}})};var Qp_startTime=zp,Qp_tracks=Xp,Qp_getEmsgID3=Kp,rv=Pp,dC=function(g){var v=31&g[1];return(v<<=8)|g[2]},wh=function(g){return!!(64&g[1])},xh=function(g){var v=0;return(48&g[3])>>>4>1&&(v+=g[4]+1),v},Zp=function(g){switch(g){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},hc={parseType:function(g,v){var C=dC(g);return 0===C?"pat":C===v?"pmt":v?"pes":null},parsePat:function(g){var v=wh(g),C=4+xh(g);return v&&(C+=g[C]+1),(31&g[C+10])<<8|g[C+11]},parsePmt:function(g){var v={},C=wh(g),_=4+xh(g);if(C&&(_+=g[_]+1),1&g[_+5]){var w;w=3+((15&g[_+1])<<8|g[_+2])-4;for(var F=12+((15&g[_+10])<<8|g[_+11]);F<w;){var U=_+F;v[(31&g[U+1])<<8|g[U+2]]=g[U],F+=5+((15&g[U+3])<<8|g[U+4])}return v}},parsePayloadUnitStartIndicator:wh,parsePesType:function(g,v){switch(v[dC(g)]){case rv.H264_STREAM_TYPE:return"video";case rv.ADTS_STREAM_TYPE:return"audio";case rv.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(g){if(!wh(g))return null;var C=4+xh(g);if(C>=g.byteLength)return null;var S,_=null;return 192&(S=g[C+7])&&((_={}).pts=(14&g[C+9])<<27|(255&g[C+10])<<20|(254&g[C+11])<<12|(255&g[C+12])<<5|(254&g[C+13])>>>3,_.pts*=4,_.pts+=(6&g[C+13])>>>1,_.dts=_.pts,64&S&&(_.dts=(14&g[C+14])<<27|(255&g[C+15])<<20|(254&g[C+16])<<12|(255&g[C+17])<<5|(254&g[C+18])>>>3,_.dts*=4,_.dts+=(6&g[C+18])>>>1)),_},videoPacketContainsKeyFrame:function(g){for(var v=4+xh(g),C=g.subarray(v),_=0,S=0,w=!1;S<C.byteLength-3;S++)if(1===C[S+2]){_=S+5;break}for(;_<C.byteLength;)switch(C[_]){case 0:if(0!==C[_-1]){_+=2;break}if(0!==C[_-2]){_++;break}S+3!==_-2&&"slice_layer_without_partitioning_rbsp_idr"===Zp(31&C[S+3])&&(w=!0);do{_++}while(1!==C[_]&&_<C.length);S=_-2,_+=3;break;case 1:if(0!==C[_-1]||0!==C[_-2]){_+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Zp(31&C[S+3])&&(w=!0),S=_-2,_+=3;break;default:_+=3}return C=C.subarray(S),_-=S,S=0,C&&C.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Zp(31&C[S+3])&&(w=!0),w}},Ih=Pp,Hs=Op.handleRollover,rn={};rn.ts=hc,rn.aac=mh;var es=vn.ONE_SECOND_IN_TS,Lr=188,iv=function(g,v,C){for(var w,F,U,$,_=0,S=Lr,G=!1;S<=g.byteLength;)if(71!==g[_]||71!==g[S]&&S!==g.byteLength)_++,S++;else{if("pes"===(w=g.subarray(_,S),rn.ts.parseType(w,v.pid))&&(F=rn.ts.parsePesType(w,v.table),U=rn.ts.parsePayloadUnitStartIndicator(w),"audio"===F&&U&&($=rn.ts.parsePesTime(w))&&($.type="audio",C.audio.push($),G=!0)),G)break;_+=Lr,S+=Lr}for(_=(S=g.byteLength)-Lr,G=!1;_>=0;)if(71!==g[_]||71!==g[S]&&S!==g.byteLength)_--,S--;else{if("pes"===(w=g.subarray(_,S),rn.ts.parseType(w,v.pid))&&(F=rn.ts.parsePesType(w,v.table),U=rn.ts.parsePayloadUnitStartIndicator(w),"audio"===F&&U&&($=rn.ts.parsePesTime(w))&&($.type="audio",C.audio.push($),G=!0)),G)break;_-=Lr,S-=Lr}},gC=function(g,v,C){for(var w,F,U,$,G,se,He,_=0,S=Lr,ee=!1,ht={data:[],size:0};S<g.byteLength;)if(71!==g[_]||71!==g[S])_++,S++;else{if("pes"===(w=g.subarray(_,S),rn.ts.parseType(w,v.pid))&&(F=rn.ts.parsePesType(w,v.table),U=rn.ts.parsePayloadUnitStartIndicator(w),"video"===F&&(U&&!ee&&($=rn.ts.parsePesTime(w))&&($.type="video",C.video.push($),ee=!0),!C.firstKeyFrame))){if(U&&0!==ht.size){for(G=new Uint8Array(ht.size),se=0;ht.data.length;)He=ht.data.shift(),G.set(He,se),se+=He.byteLength;if(rn.ts.videoPacketContainsKeyFrame(G)){var At=rn.ts.parsePesTime(G);At?(C.firstKeyFrame=At,C.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}ht.size=0}ht.data.push(w),ht.size+=w.byteLength}if(ee&&C.firstKeyFrame)break;_+=Lr,S+=Lr}for(_=(S=g.byteLength)-Lr,ee=!1;_>=0;)if(71!==g[_]||71!==g[S])_--,S--;else{if("pes"===(w=g.subarray(_,S),rn.ts.parseType(w,v.pid))&&(F=rn.ts.parsePesType(w,v.table),U=rn.ts.parsePayloadUnitStartIndicator(w),"video"===F&&U&&($=rn.ts.parsePesTime(w))&&($.type="video",C.video.push($),ee=!0)),ee)break;_-=Lr,S-=Lr}},Mh_inspect=function(g,v){var _;return _=rn.aac.isLikelyAacData(g)?function(g){for(var F,v=!1,C=0,_=null,S=null,w=0,O=0;g.length-O>=3;){switch(rn.aac.parseType(g,O)){case"timed-metadata":if(g.length-O<10){v=!0;break}if((w=rn.aac.parseId3TagSize(g,O))>g.length){v=!0;break}null===S&&(F=g.subarray(O,O+w),S=rn.aac.parseAacTimestamp(F)),O+=w;break;case"audio":if(g.length-O<7){v=!0;break}if((w=rn.aac.parseAdtsSize(g,O))>g.length){v=!0;break}null===_&&(F=g.subarray(O,O+w),_=rn.aac.parseSampleRate(F)),C++,O+=w;break;default:O++}if(v)return null}if(null===_||null===S)return null;var $=es/_;return{audio:[{type:"audio",dts:S,pts:S},{type:"audio",dts:S+1024*C*$,pts:S+1024*C*$}]}}(g):function(g){var v={pid:null,table:null},C={};for(var _ in function(g,v){for(var S,C=0,_=Lr;_<g.byteLength;)if(71!==g[C]||71!==g[_])C++,_++;else{switch(S=g.subarray(C,_),rn.ts.parseType(S,v.pid)){case"pat":v.pid=rn.ts.parsePat(S);break;case"pmt":var O=rn.ts.parsePmt(S);v.table=v.table||{},Object.keys(O).forEach(function(F){v.table[F]=O[F]})}C+=Lr,_+=Lr}}(g,v),v.table)if(v.table.hasOwnProperty(_))switch(v.table[_]){case Ih.H264_STREAM_TYPE:C.video=[],gC(g,v,C),0===C.video.length&&delete C.video;break;case Ih.ADTS_STREAM_TYPE:C.audio=[],iv(g,v,C),0===C.audio.length&&delete C.audio}return C}(g),_&&(_.audio||_.video)?(function(g,v){if(g.audio&&g.audio.length){var C=v;(typeof C>"u"||isNaN(C))&&(C=g.audio[0].dts),g.audio.forEach(function(w){w.dts=Hs(w.dts,C),w.pts=Hs(w.pts,C),w.dtsTime=w.dts/es,w.ptsTime=w.pts/es})}if(g.video&&g.video.length){var _=v;if((typeof _>"u"||isNaN(_))&&(_=g.video[0].dts),g.video.forEach(function(w){w.dts=Hs(w.dts,_),w.pts=Hs(w.pts,_),w.dtsTime=w.dts/es,w.ptsTime=w.pts/es}),g.firstKeyFrame){var S=g.firstKeyFrame;S.dts=Hs(S.dts,_),S.pts=Hs(S.pts,_),S.dtsTime=S.dts/es,S.ptsTime=S.pts/es}}}(_,v),_):null};class sv{constructor(v,C){this.options=C||{},this.self=v,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new sc.Transmuxer(this.options),function(g,v){v.on("data",function(C){const _=C.initSegment;C.initSegment={data:_.buffer,byteOffset:_.byteOffset,byteLength:_.byteLength};const S=C.data;C.data=S.buffer,g.postMessage({action:"data",segment:C,byteOffset:S.byteOffset,byteLength:S.byteLength},[C.data])}),v.on("done",function(C){g.postMessage({action:"done"})}),v.on("gopInfo",function(C){g.postMessage({action:"gopInfo",gopInfo:C})}),v.on("videoSegmentTimingInfo",function(C){const _={start:{decode:vn.videoTsToSeconds(C.start.dts),presentation:vn.videoTsToSeconds(C.start.pts)},end:{decode:vn.videoTsToSeconds(C.end.dts),presentation:vn.videoTsToSeconds(C.end.pts)},baseMediaDecodeTime:vn.videoTsToSeconds(C.baseMediaDecodeTime)};C.prependedContentDuration&&(_.prependedContentDuration=vn.videoTsToSeconds(C.prependedContentDuration)),g.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:_})}),v.on("audioSegmentTimingInfo",function(C){const _={start:{decode:vn.videoTsToSeconds(C.start.dts),presentation:vn.videoTsToSeconds(C.start.pts)},end:{decode:vn.videoTsToSeconds(C.end.dts),presentation:vn.videoTsToSeconds(C.end.pts)},baseMediaDecodeTime:vn.videoTsToSeconds(C.baseMediaDecodeTime)};C.prependedContentDuration&&(_.prependedContentDuration=vn.videoTsToSeconds(C.prependedContentDuration)),g.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:_})}),v.on("id3Frame",function(C){g.postMessage({action:"id3Frame",id3Frame:C})}),v.on("caption",function(C){g.postMessage({action:"caption",caption:C})}),v.on("trackinfo",function(C){g.postMessage({action:"trackinfo",trackInfo:C})}),v.on("audioTimingInfo",function(C){g.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:vn.videoTsToSeconds(C.start),end:vn.videoTsToSeconds(C.end)}})}),v.on("videoTimingInfo",function(C){g.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:vn.videoTsToSeconds(C.start),end:vn.videoTsToSeconds(C.end)}})}),v.on("log",function(C){g.postMessage({action:"log",log:C})})}(this.self,this.transmuxer)}pushMp4Captions(v){this.captionParser||(this.captionParser=new Hp,this.captionParser.init());const C=new Uint8Array(v.data,v.byteOffset,v.byteLength),_=this.captionParser.parse(C,v.trackIds,v.timescales);this.self.postMessage({action:"mp4Captions",captions:_&&_.captions||[],logs:_&&_.logs||[],data:C.buffer},[C.buffer])}probeMp4StartTime({timescales:v,data:C}){const _=Qp_startTime(v,C);this.self.postMessage({action:"probeMp4StartTime",startTime:_,data:C},[C.buffer])}probeMp4Tracks({data:v}){const C=Qp_tracks(v);this.self.postMessage({action:"probeMp4Tracks",tracks:C,data:v},[v.buffer])}probeEmsgID3({data:v,offset:C}){const _=Qp_getEmsgID3(v,C);this.self.postMessage({action:"probeEmsgID3",id3Frames:_,emsgData:v},[v.buffer])}probeTs({data:v,baseStartTime:C}){const _="number"!=typeof C||isNaN(C)?void 0:C*vn.ONE_SECOND_IN_TS,S=Mh_inspect(v,_);let w=null;S&&(w={hasVideo:S.video&&2===S.video.length||!1,hasAudio:S.audio&&2===S.audio.length||!1},w.hasVideo&&(w.videoStart=S.video[0].ptsTime),w.hasAudio&&(w.audioStart=S.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:w,data:v},[v.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(v){const C=new Uint8Array(v.data,v.byteOffset,v.byteLength);this.transmuxer.push(C)}reset(){this.transmuxer.reset()}setTimestampOffset(v){this.transmuxer.setBaseMediaDecodeTime(Math.round(vn.secondsToVideoTs(v.timestampOffset||0)))}setAudioAppendStart(v){this.transmuxer.setAudioAppendStart(Math.ceil(vn.secondsToVideoTs(v.appendStart)))}setRemux(v){this.transmuxer.setRemux(v.remux)}flush(v){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(v){this.transmuxer.alignGopsWith(v.gopsToAlignWith.slice())}}self.onmessage=function(g){"init"===g.data.action&&g.data.options?this.messageHandlers=new sv(self,g.data.options):(this.messageHandlers||(this.messageHandlers=new sv(self)),g.data&&g.data.action&&"init"!==g.data.action&&this.messageHandlers[g.data.action]&&this.messageHandlers[g.data.action](g.data))}}));var C0=fu(T0);const ap=u=>{const{transmuxer:r,bytes:s,audioAppendStart:a,gopsToAlignWith:c,remux:h,onData:f,onTrackInfo:y,onAudioTimingInfo:T,onVideoTimingInfo:E,onVideoSegmentTimingInfo:x,onAudioSegmentTimingInfo:P,onId3:V,onCaptions:q,onDone:L,onEndedTimeline:X,onTransmuxerLog:te,isEndOfTimeline:ne,segment:Q,triggerSegmentEventFn:ge}=u,_e={buffer:[]};let W=ne;if(r.onmessage=Qe=>{r.currentTransmux===u&&("data"===Qe.data.action&&((u,r,s)=>{const{type:a,initSegment:c,captions:h,captionStreams:f,metadata:y,videoFrameDtsTime:T,videoFramePtsTime:E}=u.data.segment;r.buffer.push({captions:h,captionStreams:f,metadata:y});const x=u.data.segment.boxes||{data:u.data.segment.data},P={type:a,data:new Uint8Array(x.data,x.data.byteOffset,x.data.byteLength),initSegment:new Uint8Array(c.data,c.byteOffset,c.byteLength)};typeof T<"u"&&(P.videoFrameDtsTime=T),typeof E<"u"&&(P.videoFramePtsTime=E),s(P)})(Qe,_e,f),"trackinfo"===Qe.data.action&&y(Qe.data.trackInfo),"gopInfo"===Qe.data.action&&((u,r)=>{r.gopInfo=u.data.gopInfo})(Qe,_e),"audioTimingInfo"===Qe.data.action&&T(Qe.data.audioTimingInfo),"videoTimingInfo"===Qe.data.action&&E(Qe.data.videoTimingInfo),"videoSegmentTimingInfo"===Qe.data.action&&x(Qe.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===Qe.data.action&&P(Qe.data.audioSegmentTimingInfo),"id3Frame"===Qe.data.action&&V([Qe.data.id3Frame],Qe.data.id3Frame.dispatchType),"caption"===Qe.data.action&&q(Qe.data.caption),"endedtimeline"===Qe.data.action&&(W=!1,X()),"log"===Qe.data.action&&te(Qe.data.log),"transmuxed"===Qe.data.type&&(W||(r.onmessage=null,(({transmuxedData:u,callback:r})=>{u.buffer=[],r(u)})({transmuxedData:_e,callback:L}),Ld(r))))},r.onerror=()=>{const Qe={message:"Received an error message from the transmuxer worker",metadata:{errorType:J.Error.StreamingFailedToTransmuxSegment,segmentInfo:da({segment:Q})}};L(null,Qe)},a&&r.postMessage({action:"setAudioAppendStart",appendStart:a}),Array.isArray(c)&&r.postMessage({action:"alignGopsWith",gopsToAlignWith:c}),typeof h<"u"&&r.postMessage({action:"setRemux",remux:h}),s.byteLength){const Qe=s instanceof ArrayBuffer?s:s.buffer,Vt=s instanceof ArrayBuffer?0:s.byteOffset;ge({type:"segmenttransmuxingstart",segment:Q}),r.postMessage({action:"push",data:Qe,byteOffset:Vt,byteLength:s.byteLength},[Qe])}ne&&r.postMessage({action:"endTimeline"}),r.postMessage({action:"flush"})},Ld=u=>{u.currentTransmux=null,u.transmuxQueue.length&&(u.currentTransmux=u.transmuxQueue.shift(),"function"==typeof u.currentTransmux?u.currentTransmux():ap(u.currentTransmux))},Ml=(u,r)=>{u.postMessage({action:r}),Ld(u)};var up_reset=u=>{((u,r)=>{if(!r.currentTransmux)return r.currentTransmux=u,void Ml(r,u);r.transmuxQueue.push(Ml.bind(null,r,u))})("reset",u)};const gu=function(u){const r=u.transmuxer,s=u.endAction||u.action,a=u.callback,c=Je({},u,{endAction:null,transmuxer:null,callback:null}),h=f=>{f.data.action===s&&(r.removeEventListener("message",h),f.data.data&&(f.data.data=new Uint8Array(f.data.data,u.byteOffset||0,u.byteLength||f.data.data.byteLength),u.data&&(u.data=f.data.data)),a(f.data))};if(r.addEventListener("message",h),u.data){const f=u.data instanceof ArrayBuffer;c.byteOffset=f?0:u.data.byteOffset,c.byteLength=u.data.byteLength,r.postMessage(c,[f?u.data:u.data.buffer])}else r.postMessage(c)},kl=u=>{u.forEach(r=>{r.abort()})},cp=(u,r)=>{const{requestType:s}=r,a=aa({requestType:s,request:r,error:u});return r.timedout?{status:r.status,message:"HLS request timed-out at URL: "+r.uri,code:-101,xhr:r,metadata:a}:r.aborted?{status:r.status,message:"HLS request aborted at URL: "+r.uri,code:-102,xhr:r,metadata:a}:u?{status:r.status,message:"HLS request errored at URL: "+r.uri,code:2,xhr:r,metadata:a}:"arraybuffer"===r.responseType&&0===r.response.byteLength?{status:r.status,message:"Empty HLS response at URL: "+r.uri,code:2,xhr:r,metadata:a}:null},Fd=(u,r,s,a)=>(c,h)=>{const f=h.response,y=cp(c,h);if(y)return s(y,u);if(16!==f.byteLength)return s({status:h.status,message:"Invalid HLS key at URL: "+h.uri,code:2,xhr:h},u);const T=new DataView(f),E=new Uint32Array([T.getUint32(0),T.getUint32(4),T.getUint32(8),T.getUint32(12)]);for(let P=0;P<r.length;P++)r[P].bytes=E;return a({type:"segmentkeyloadcomplete",segment:u,keyInfo:{uri:h.uri}}),s(null,u)},dp=(u,r)=>{const s=tm(u.map.bytes);if("mp4"!==s){const c=s||"unknown";return r({internal:!0,message:`Found unsupported ${c} container for initialization segment at URL: ${u.map.resolvedUri||u.map.uri}`,code:2,metadata:{mediaType:c}})}gu({action:"probeMp4Tracks",data:u.map.bytes,transmuxer:u.transmuxer,callback:({tracks:a,data:c})=>(u.map.bytes=c,a.forEach(function(h){u.map.tracks=u.map.tracks||{},!u.map.tracks[h.type]&&(u.map.tracks[h.type]=h,"number"==typeof h.id&&h.timescale&&(u.map.timescales=u.map.timescales||{},u.map.timescales[h.id]=h.timescale))}),r(null))})},x0=({segment:u,bytes:r,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:f,captionsFn:y,isEndOfTimeline:T,endedTimelineFn:E,dataFn:x,doneFn:P,onTransmuxerLog:V,triggerSegmentEventFn:q})=>{const L=u.map&&u.map.tracks||{},X=!(!L.audio||!L.video);let te=a.bind(null,u,"audio","start");const ne=a.bind(null,u,"audio","end");let Q=a.bind(null,u,"video","start");const ge=a.bind(null,u,"video","end");gu({action:"probeTs",transmuxer:u.transmuxer,data:r,baseStartTime:u.baseStartTime,callback:W=>{u.bytes=r=W.data;const Ee=W.result;Ee&&(s(u,{hasAudio:Ee.hasAudio,hasVideo:Ee.hasVideo,isMuxed:X}),s=null),(u=>{if(!u.transmuxer.currentTransmux)return u.transmuxer.currentTransmux=u,void ap(u);u.transmuxer.transmuxQueue.push(u)})({bytes:r,transmuxer:u.transmuxer,audioAppendStart:u.audioAppendStart,gopsToAlignWith:u.gopsToAlignWith,remux:X,onData:W=>{W.type="combined"===W.type?"video":W.type,x(u,W)},onTrackInfo:W=>{s&&(X&&(W.isMuxed=!0),s(u,W))},onAudioTimingInfo:W=>{te&&typeof W.start<"u"&&(te(W.start),te=null),ne&&typeof W.end<"u"&&ne(W.end)},onVideoTimingInfo:W=>{Q&&typeof W.start<"u"&&(Q(W.start),Q=null),ge&&typeof W.end<"u"&&ge(W.end)},onVideoSegmentTimingInfo:W=>{q({type:"segmenttransmuxingtiminginfoavailable",segment:u,timingInfo:{pts:{start:W.start.presentation,end:W.end.presentation},dts:{start:W.start.decode,end:W.end.decode}}}),c(W)},onAudioSegmentTimingInfo:W=>{q({type:"segmenttransmuxingtiminginfoavailable",segment:u,timingInfo:{pts:{start:W.start.pts,end:W.end.pts},dts:{start:W.start.dts,end:W.end.dts}}}),h(W)},onId3:(W,Ee)=>{f(u,W,Ee)},onCaptions:W=>{y(u,[W])},isEndOfTimeline:T,onEndedTimeline:()=>{E()},onTransmuxerLog:V,onDone:(W,Ee)=>{P&&(W.type="combined"===W.type?"video":W.type,q({type:"segmenttransmuxingcomplete",segment:u}),P(Ee,u,W))},segment:u,triggerSegmentEventFn:q})}})},I0=({segment:u,bytes:r,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:f,captionsFn:y,isEndOfTimeline:T,endedTimelineFn:E,dataFn:x,doneFn:P,onTransmuxerLog:V,triggerSegmentEventFn:q})=>{let L=new Uint8Array(r);if(function(r){return Rn(r,["moof"]).length>0}(L)){u.isFmp4=!0;const{tracks:X}=u.map,te={isFmp4:!0,hasVideo:!!X.video,hasAudio:!!X.audio};X.audio&&X.audio.codec&&"enca"!==X.audio.codec&&(te.audioCodec=X.audio.codec),X.video&&X.video.codec&&"encv"!==X.video.codec&&(te.videoCodec=X.video.codec),X.video&&X.audio&&(te.isMuxed=!0),s(u,te);const ne=(Q,ge)=>{x(u,{data:L,type:te.hasAudio&&!te.isMuxed?"audio":"video"}),ge&&ge.length&&f(u,ge),Q&&Q.length&&y(u,Q),P(null,u,{})};gu({action:"probeMp4StartTime",timescales:u.map.timescales,data:L,transmuxer:u.transmuxer,callback:({data:Q,startTime:ge})=>{r=Q.buffer,u.bytes=L=Q,te.hasAudio&&!te.isMuxed&&a(u,"audio","start",ge),te.hasVideo&&a(u,"video","start",ge),gu({action:"probeEmsgID3",data:L,transmuxer:u.transmuxer,offset:ge,callback:({emsgData:_e,id3Frames:W})=>{r=_e.buffer,u.bytes=L=_e,X.video&&_e.byteLength&&u.transmuxer?gu({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:u.transmuxer,data:L,timescales:u.map.timescales,trackIds:[X.video.id],callback:Ee=>{r=Ee.data.buffer,u.bytes=L=Ee.data,Ee.logs.forEach(function(st){V(tn(st,{stream:"mp4CaptionParser"}))}),ne(Ee.captions,W)}}):ne(void 0,W)}})}})}else{if(u.transmuxer)return typeof u.container>"u"&&(u.container=tm(L)),"ts"!==u.container&&"aac"!==u.container?(s(u,{hasAudio:!1,hasVideo:!1}),void P(null,u,{})):void x0({segment:u,bytes:r,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:f,captionsFn:y,isEndOfTimeline:T,endedTimelineFn:E,dataFn:x,doneFn:P,onTransmuxerLog:V,triggerSegmentEventFn:q});P(null,u,{})}},jb=function({id:u,key:r,encryptedBytes:s,decryptionWorker:a,segment:c,doneFn:h},f){const y=E=>{if(E.data.source===u){a.removeEventListener("message",y);const x=E.data.decrypted;f(new Uint8Array(x.bytes,x.byteOffset,x.byteLength))}};let T;a.onerror=()=>{const E="An error occurred in the decryption worker",x=da({segment:c}),P={message:E,metadata:{error:new Error(E),errorType:J.Error.StreamingFailedToDecryptSegment,segmentInfo:x,keyInfo:{uri:c.key.resolvedUri||c.map.key.resolvedUri}}};h(P,c)},a.addEventListener("message",y),T=r.bytes.slice?r.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.bytes)),a.postMessage(xl({source:u,encrypted:s,key:T,iv:r.iv}),[s.buffer,T.buffer])},k0=({xhr:u,xhrOptions:r,decryptionWorker:s,segment:a,abortFn:c,progressFn:h,trackInfoFn:f,timingInfoFn:y,videoSegmentTimingInfoFn:T,audioSegmentTimingInfoFn:E,id3Fn:x,captionsFn:P,isEndOfTimeline:V,endedTimelineFn:q,dataFn:L,doneFn:X,onTransmuxerLog:te,triggerSegmentEventFn:ne})=>{const Q=[],ge=(({activeXhrs:u,decryptionWorker:r,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:f,captionsFn:y,isEndOfTimeline:T,endedTimelineFn:E,dataFn:x,doneFn:P,onTransmuxerLog:V,triggerSegmentEventFn:q})=>{let L=0,X=!1;return(te,ne)=>{if(!X){if(te)return X=!0,kl(u),P(te,ne);if(L+=1,L===u.length){const Q=function(){if(ne.encryptedBytes)return(({decryptionWorker:u,segment:r,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:f,captionsFn:y,isEndOfTimeline:T,endedTimelineFn:E,dataFn:x,doneFn:P,onTransmuxerLog:V,triggerSegmentEventFn:q})=>{q({type:"segmentdecryptionstart"}),jb({id:r.requestId,key:r.key,encryptedBytes:r.encryptedBytes,decryptionWorker:u,segment:r,doneFn:P},L=>{r.bytes=L,q({type:"segmentdecryptioncomplete",segment:r}),I0({segment:r,bytes:r.bytes,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:f,captionsFn:y,isEndOfTimeline:T,endedTimelineFn:E,dataFn:x,doneFn:P,onTransmuxerLog:V,triggerSegmentEventFn:q})})})({decryptionWorker:r,segment:ne,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:f,captionsFn:y,isEndOfTimeline:T,endedTimelineFn:E,dataFn:x,doneFn:P,onTransmuxerLog:V,triggerSegmentEventFn:q});I0({segment:ne,bytes:ne.bytes,trackInfoFn:s,timingInfoFn:a,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:f,captionsFn:y,isEndOfTimeline:T,endedTimelineFn:E,dataFn:x,doneFn:P,onTransmuxerLog:V,triggerSegmentEventFn:q})};if(ne.endOfAllRequests=Date.now(),ne.map&&ne.map.encryptedBytes&&!ne.map.bytes)return q({type:"segmentdecryptionstart",segment:ne}),jb({decryptionWorker:r,id:ne.requestId+"-init",encryptedBytes:ne.map.encryptedBytes,key:ne.map.key,segment:ne,doneFn:P},ge=>{ne.map.bytes=ge,q({type:"segmentdecryptioncomplete",segment:ne}),dp(ne,_e=>{if(_e)return kl(u),P(_e,ne);Q()})});Q()}}}})({activeXhrs:Q,decryptionWorker:s,trackInfoFn:f,timingInfoFn:y,videoSegmentTimingInfoFn:T,audioSegmentTimingInfoFn:E,id3Fn:x,captionsFn:P,isEndOfTimeline:V,endedTimelineFn:q,dataFn:L,doneFn:X,onTransmuxerLog:te,triggerSegmentEventFn:ne});if(a.key&&!a.key.bytes){const Qe=[a.key];a.map&&!a.map.bytes&&a.map.key&&a.map.key.resolvedUri===a.key.resolvedUri&&Qe.push(a.map.key);const Vt=tn(r,{uri:a.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),qn=Fd(a,Qe,ge,ne);ne({type:"segmentkeyloadstart",segment:a,keyInfo:{uri:a.key.resolvedUri}});const kn=u(Vt,qn);Q.push(kn)}if(a.map&&!a.map.bytes){if(a.map.key&&(!a.key||a.key.resolvedUri!==a.map.key.resolvedUri)){const kn=tn(r,{uri:a.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),ct=Fd(a,[a.map.key],ge,ne);ne({type:"segmentkeyloadstart",segment:a,keyInfo:{uri:a.map.key.resolvedUri}});const Ai=u(kn,ct);Q.push(Ai)}const Vt=tn(r,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:yo(a.map),requestType:"segment-media-initialization"}),qn=(({segment:u,finishProcessingFn:r,triggerSegmentEventFn:s})=>(a,c)=>{const h=cp(a,c);if(h)return r(h,u);const f=new Uint8Array(c.response);if(s({type:"segmentloaded",segment:u}),u.map.key)return u.map.encryptedBytes=f,r(null,u);u.map.bytes=f,dp(u,function(y){if(y)return y.xhr=c,y.status=c.status,r(y,u);r(null,u)})})({segment:a,finishProcessingFn:ge,triggerSegmentEventFn:ne});ne({type:"segmentloadstart",segment:a});const hr=u(Vt,qn);Q.push(hr)}const _e=tn(r,{uri:a.part&&a.part.resolvedUri||a.resolvedUri,responseType:"arraybuffer",headers:yo(a),requestType:"segment"}),W=(({segment:u,finishProcessingFn:r,responseType:s,triggerSegmentEventFn:a})=>(c,h)=>{const f=cp(c,h);if(f)return r(f,u);a({type:"segmentloaded",segment:u});const y="arraybuffer"!==s&&h.responseText?(u=>{const r=new Uint8Array(new ArrayBuffer(u.length));for(let s=0;s<u.length;s++)r[s]=u.charCodeAt(s);return r.buffer})(h.responseText.substring(u.lastReachedChar||0)):h.response;return u.stats=(u=>({bandwidth:u.bandwidth,bytesReceived:u.bytesReceived||0,roundTripTime:u.roundTripTime||0}))(h),u.key?u.encryptedBytes=new Uint8Array(y):u.bytes=new Uint8Array(y),r(null,u)})({segment:a,finishProcessingFn:ge,responseType:_e.responseType,triggerSegmentEventFn:ne});ne({type:"segmentloadstart",segment:a});const Ee=u(_e,W);Ee.addEventListener("progress",(({segment:u,progressFn:r})=>P=>{if(!P.target.aborted)return u.stats=tn(u.stats,(u=>{const r=u.target,a={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-r.requestTime||0};return a.bytesReceived=u.loaded,a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3),a})(P)),!u.stats.firstBytesReceivedAt&&u.stats.bytesReceived&&(u.stats.firstBytesReceivedAt=Date.now()),r(P,u)})({segment:a,progressFn:h,trackInfoFn:f,timingInfoFn:y,videoSegmentTimingInfoFn:T,audioSegmentTimingInfoFn:E,id3Fn:x,captionsFn:P,isEndOfTimeline:V,endedTimelineFn:q,dataFn:L})),Q.push(Ee);const st={};return Q.forEach(Qe=>{Qe.addEventListener("loadend",(({loadendState:u,abortFn:r})=>s=>{s.target.aborted&&r&&!u.calledAbortFn&&(r(),u.calledAbortFn=!0)})({loadendState:st,abortFn:c}))}),()=>kl(Q)},hp=en("CodecUtils"),Pl=(u,r)=>{const s=r.attributes||{};return u&&u.mediaGroups&&u.mediaGroups.AUDIO&&s.AUDIO&&u.mediaGroups.AUDIO[s.AUDIO]},Rl=function(u){const r={};return u.forEach(({mediaType:s,type:a,details:c})=>{r[s]=r[s]||[],r[s].push(Se(`${a}${c}`))}),Object.keys(r).forEach(function(s){if(r[s].length>1)return hp(`multiple ${s} codecs found as attributes: ${r[s].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(r[s]=null);r[s]=r[s][0]}),r},Ud=function(u){let r=0;return u.audio&&r++,u.video&&r++,r},vo=function(u,r){const s=r.attributes||{},a=Rl(function(u){const r=u.attributes||{};if(r.CODECS)return pe(r.CODECS)}(r)||[]);if(Pl(u,r)&&!a.audio&&!((u,r)=>{if(!Pl(u,r))return!0;const a=u.mediaGroups.AUDIO[(r.attributes||{}).AUDIO];for(const c in a)if(!a[c].uri&&!a[c].playlists)return!0;return!1})(u,r)){const c=Rl(function(r,s){if(!r.mediaGroups.AUDIO||!s)return null;var a=r.mediaGroups.AUDIO[s];if(!a)return null;for(var c in a){var h=a[c];if(h.default&&h.playlists)return pe(h.playlists[0].attributes.CODECS)}return null}(u,s.AUDIO)||[]);c.audio&&(a.audio=c.audio)}return a},Nl=en("PlaylistSelector"),jd=function(u){if(!u||!u.playlist)return;const r=u.playlist;return JSON.stringify({id:r.id,bandwidth:u.bandwidth,width:u.width,height:u.height,codecs:r.attributes&&r.attributes.CODECS||""})},_o=function(u,r){if(!u)return"";const s=M().getComputedStyle(u);return s?s[r]:""},mu=function(u,r){const s=u.slice();u.sort(function(a,c){const h=r(a,c);return 0===h?s.indexOf(a)-s.indexOf(c):h})},$d=function(u,r){let s,a;return u.attributes.BANDWIDTH&&(s=u.attributes.BANDWIDTH),s=s||M().Number.MAX_VALUE,r.attributes.BANDWIDTH&&(a=r.attributes.BANDWIDTH),a=a||M().Number.MAX_VALUE,s-a};let O0=function(u,r,s,a,c,h){if(!u)return;const f={bandwidth:r,width:s,height:a,limitRenditionByPlayerDimensions:c};let y=u.playlists;zr.isAudioOnly(u)&&(y=h.getAudioTrackPlaylists_(),f.audioOnly=!0);let T=y.map(W=>{let Ee;const st=W.attributes&&W.attributes.RESOLUTION&&W.attributes.RESOLUTION.width,Qe=W.attributes&&W.attributes.RESOLUTION&&W.attributes.RESOLUTION.height;return Ee=W.attributes&&W.attributes.BANDWIDTH,Ee=Ee||M().Number.MAX_VALUE,{bandwidth:Ee,width:st,height:Qe,playlist:W}});mu(T,(W,Ee)=>W.bandwidth-Ee.bandwidth),T=T.filter(W=>!zr.isIncompatible(W.playlist));let E=T.filter(W=>zr.isEnabled(W.playlist));E.length||(E=T.filter(W=>!zr.isDisabled(W.playlist)));const x=E.filter(W=>W.bandwidth*Er.BANDWIDTH_VARIANCE<r);let P=x[x.length-1];const V=x.filter(W=>W.bandwidth===P.bandwidth)[0];if(!1===c){const W=V||E[0]||T[0];if(W&&W.playlist){let Ee="sortedPlaylistReps";return V&&(Ee="bandwidthBestRep"),E[0]&&(Ee="enabledPlaylistReps"),Nl(`choosing ${jd(W)} using ${Ee} with options`,f),W.playlist}return Nl("could not choose a playlist with options",f),null}const q=x.filter(W=>W.width&&W.height);mu(q,(W,Ee)=>W.width-Ee.width);const L=q.filter(W=>W.width===s&&W.height===a);P=L[L.length-1];const X=L.filter(W=>W.bandwidth===P.bandwidth)[0];let te,ne,Q,ge;if(X||(te=q.filter(W=>W.width>s||W.height>a),ne=te.filter(W=>W.width===te[0].width&&W.height===te[0].height),P=ne[ne.length-1],Q=ne.filter(W=>W.bandwidth===P.bandwidth)[0]),h.leastPixelDiffSelector){const W=q.map(Ee=>(Ee.pixelDiff=Math.abs(Ee.width-s)+Math.abs(Ee.height-a),Ee));mu(W,(Ee,st)=>Ee.pixelDiff===st.pixelDiff?st.bandwidth-Ee.bandwidth:Ee.pixelDiff-st.pixelDiff),ge=W[0]}const _e=ge||Q||X||V||E[0]||T[0];if(_e&&_e.playlist){let W="sortedPlaylistReps";return ge?W="leastPixelDiffRep":Q?W="resolutionPlusOneRep":X?W="resolutionBestRep":V?W="bandwidthBestRep":E[0]&&(W="enabledPlaylistReps"),Nl(`choosing ${jd(_e)} using ${W} with options`,f),_e.playlist}return Nl("could not choose a playlist with options",f),null};const R0=function(){let u=this.useDevicePixelRatio&&M().devicePixelRatio||1;return isNaN(this.customPixelRatio)||(u=this.customPixelRatio),O0(this.playlists.main,this.systemBandwidth,parseInt(_o(this.tech_.el(),"width"),10)*u,parseInt(_o(this.tech_.el(),"height"),10)*u,this.limitRenditionByPlayerDimensions,this.playlistController_)};function la(u){try{return new URL(u).pathname.split("/").slice(-2).join("/")}catch{return""}}const pp={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Gb=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Ll=(u,r,s)=>{u.metadataTrack_||(u.metadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,J.browser.IS_ANY_SAFARI||(u.metadataTrack_.inBandMetadataTrackDispatchType=r))},ca=function(u,r,s){let a,c;if(s&&s.cues)for(a=s.cues.length;a--;)c=s.cues[a],c.startTime>=u&&c.endTime<=r&&s.removeCue(c)},$0=u=>"number"==typeof u&&isFinite(u),Ki=1/60,Ul=u=>{const{startOfSegment:r,duration:s,segment:a,part:c,playlist:{mediaSequence:h,id:f,segments:y=[]},mediaIndex:T,partIndex:E,timeline:x}=u,P=y.length-1;let V="mediaIndex/partIndex increment";u.getMediaInfoForTime?V=`getMediaInfoForTime (${u.getMediaInfoForTime})`:u.isSyncRequest&&(V="getSyncSegmentCandidate (isSyncRequest)"),u.independent&&(V+=` with independent ${u.independent}`);const q="number"==typeof E,L=u.segment.uri?"segment":"pre-segment",X=q?Wm({preloadSegment:a})-1:0;return`${L} [${h+T}/${h+P}]`+(q?` part [${E}/${X}]`:"")+` segment start/end [${a.start} => ${a.end}]`+(q?` part start/end [${c.start} => ${c.end}]`:"")+` startOfSegment [${r}] duration [${s}] timeline [${x}] selected by [${V}] playlist [${f}]`},Qb=u=>`${u}TimingInfo`,Zb=({timelineChangeController:u,currentTimeline:r,segmentTimeline:s,loaderType:a,audioDisabled:c})=>{if(r===s)return!1;if("audio"===a){const h=u.lastTimelineChange({type:"main"});return!h||h.to!==s}if("main"===a&&c){const h=u.pendingTimelineChange({type:"audio"});return!(h&&h.to===s)}return!1},Jb=u=>{if(!u)return!1;const r=u.pendingTimelineChange({type:"audio"}),s=u.pendingTimelineChange({type:"main"}),a=r&&s;return!(!a||-1===r.from||-1===s.from||!a||r.to===s.to)},gp=u=>{u&&(u.pause(),u.resetEverything(),u.load())},V0=({segmentDuration:u,maxDuration:r})=>!!u&&Math.round(u)>r+Qn,da=({type:u,segment:r})=>{if(r)return{type:u||r.type,uri:r.resolvedUri||r.uri,start:void 0===r.startOfSegment?r.start:r.startOfSegment,duration:r.duration,isEncrypted:!!(r.key||r.map&&r.map.ke),isMediaInitialization:!(!r.map||r.map.bytes)}};class jl extends J.EventTarget{constructor(r,s={}){if(super(),!r)throw new TypeError("Initialization settings are required");if("function"!=typeof r.currentTime)throw new TypeError("No currentTime getter specified");if(!r.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=r.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=r.hasPlayed,this.currentTime_=r.currentTime,this.seekable_=r.seekable,this.seeking_=r.seeking,this.duration_=r.duration,this.mediaSource_=r.mediaSource,this.vhs_=r.vhs,this.loaderType_=r.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=r.segmentMetadataTrack,this.goalBufferLength_=r.goalBufferLength,this.sourceType_=r.sourceType,this.sourceUpdater_=r.sourceUpdater,this.inbandTextTracks_=r.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=r.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=r.parse708captions,this.useDtsForTimestampOffset_=r.useDtsForTimestampOffset,this.captionServices_=r.captionServices,this.exactManifestTimings=r.exactManifestTimings,this.addMetadataToTextTrack=r.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=r.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=r.decrypter,this.syncController_=r.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=en(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(a){a!==this.state_&&(this.logger_(`${this.state_} -> ${a}`),this.state_=a,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.sourceUpdater_.on("codecschange",a=>{this.trigger(Je({type:"codecschange"},a))}),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",a=>{this.trigger(Je({type:"timelinechange"},a)),this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return(u=>{const r=new C0;r.currentTransmux=null,r.transmuxQueue=[];const s=r.terminate;return r.terminate=()=>(r.currentTransmux=null,r.transmuxQueue.length=0,s.call(r)),r.postMessage({action:"init",options:u}),r})({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&M().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(r){this.audioDisabled_=!r,r?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,M().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(r){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==r:(this.state="READY",!0)}error(r){return typeof r<"u"&&(this.logger_("error occurred:",r),this.error_=r),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&up_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const r=this.getMediaInfo_();if(!this.sourceUpdater_||!r)return Yn();if("main"===this.loaderType_){const{hasAudio:s,hasVideo:a,isMuxed:c}=r;if(a&&s&&!this.audioDisabled_&&!c)return this.sourceUpdater_.buffered();if(a)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(r,s=!1){if(!r)return null;const a=Xi(r);let c=this.initSegments_[a];return s&&!c&&r.bytes&&(this.initSegments_[a]=c={resolvedUri:r.resolvedUri,byterange:r.byterange,bytes:r.bytes,tracks:r.tracks,timescales:r.timescales}),c||r}segmentKey(r,s=!1){if(!r)return null;const a=c0(r);let c=this.keyCache_[a];this.cacheEncryptionKeys_&&s&&!c&&r.bytes&&(this.keyCache_[a]=c={resolvedUri:r.resolvedUri,bytes:r.bytes});const h={resolvedUri:(c||r).resolvedUri};return c&&(h.bytes=c.bytes),h}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(r,s={}){if(!r)return;const a=this.playlist_,c=this.pendingSegment_;this.playlist_=r,this.xhrOptions_=s,"INIT"===this.state&&(r.syncInfo={mediaSequence:r.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(r));let h=null;if(a&&(a.id?h=a.id:a.uri&&(h=a.uri)),this.logger_(`playlist update [${h} => ${r.id||r.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(r,this.currentTime_()),this.logger_(`Playlist update:\ncurrentTime: ${this.currentTime_()}\nbufferedEnd: ${go(this.buffered_())}\n`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!a||a.uri!==r.uri)return null!==this.mediaIndex&&(r.endList||"number"!=typeof r.partTargetDuration?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const f=r.mediaSequence-a.mediaSequence;if(this.logger_(`live window shift [${f}]`),null!==this.mediaIndex)if(this.mediaIndex-=f,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const y=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!y.parts||!y.parts.length||!y.parts[this.partIndex])){const T=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=T}}c&&(c.mediaIndex-=f,c.mediaIndex<0?(c.mediaIndex=null,c.partIndex=null):(c.mediaIndex>=0&&(c.segment=r.segments[c.mediaIndex]),c.partIndex>=0&&c.segment.parts&&(c.part=c.segment.parts[c.partIndex]))),this.syncController_.saveExpiredSegmentInfo(a,r)}pause(){this.checkBufferTimeout_&&(M().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(r){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,r),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&up_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,"hls"===this.sourceType_&&!(this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4)&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(r,s,a=(()=>{}),c=!1){if(s===1/0&&(s=this.duration_()),s<=r)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let h=1;const f=()=>{h--,0===h&&a()};(c||!this.audioDisabled_)&&(h++,this.sourceUpdater_.removeAudio(r,s,f)),(c||"main"===this.loaderType_)&&(this.gopBuffer_=((u,r,s,a)=>{const c=Math.ceil((r-a)*As.ONE_SECOND_IN_TS),h=Math.ceil((s-a)*As.ONE_SECOND_IN_TS),f=u.slice();let y=u.length;for(;y--&&!(u[y].pts<=h););if(-1===y)return f;let T=y+1;for(;T--&&!(u[T].pts<=c););return T=Math.max(T,0),f.splice(T,y-T+1),f})(this.gopBuffer_,r,s,this.timeMapping_),h++,this.sourceUpdater_.removeVideo(r,s,f));for(const y in this.inbandTextTracks_)ca(r,s,this.inbandTextTracks_[y]);ca(r,s,this.segmentMetadataTrack_),f()}monitorBuffer_(){this.checkBufferTimeout_&&M().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=M().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&M().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=M().setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const r=this.chooseNextRequest_();if(!r)return;const s={segmentInfo:da({type:this.loaderType_,segment:r})};this.trigger({type:"segmentselected",metadata:s}),"number"==typeof r.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:r.timeline})),this.loadSegment_(r)}isEndOfStream_(r=this.mediaIndex,s=this.playlist_,a=this.partIndex){if(!s||!this.mediaSource_)return!1;const c="number"==typeof r&&s.segments[r];return s.endList&&"open"===this.mediaSource_.readyState&&r+1===s.segments.length&&(!c||!c.parts||a+1===c.parts.length)}chooseNextRequest_(){const r=this.buffered_(),s=go(r)||0,a=zm(r,this.currentTime_()),c=!this.hasPlayed_()&&a>=1,h=a>=this.goalBufferLength_(),f=this.playlist_.segments;if(!f.length||c||h)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const y={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(y.isSyncRequest)y.mediaIndex=function(u,r,s){r=r||[];const a=[];let c=0;for(let h=0;h<r.length;h++){const f=r[h];if(u===f.timeline&&(a.push(h),c+=f.duration,c>s))return h}return 0===a.length?0:a[a.length-1]}(this.currentTimeline_,f,s),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${y.mediaIndex}`);else if(null!==this.mediaIndex){const V=f[this.mediaIndex],q="number"==typeof this.partIndex?this.partIndex:-1;y.startOfSegment=V.end?V.end:s,V.parts&&V.parts[q+1]?(y.mediaIndex=this.mediaIndex,y.partIndex=q+1):y.mediaIndex=this.mediaIndex+1}else{let V,q,L;const X=this.fetchAtBuffer_?s:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:\nFor TargetTime: ${X}.\nCurrentTime: ${this.currentTime_()}\nBufferedEnd: ${s}\nFetch At Buffer: ${this.fetchAtBuffer_}\n`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const te=this.getSyncInfoFromMediaSequenceSync_(X);if(!te){const ne="No sync info found while using media sequence sync";return this.error({message:ne,metadata:{errorType:J.Error.StreamingFailedToSelectNextSegment,error:new Error(ne)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${te.start} --\x3e ${te.end})`),V=te.segmentIndex,q=te.partIndex,L=te.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const te=zr.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:X,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});V=te.segmentIndex,q=te.partIndex,L=te.startTime}y.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${X}`:`currentTime ${X}`,y.mediaIndex=V,y.startOfSegment=L,y.partIndex=q,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${y.mediaIndex} `)}const T=f[y.mediaIndex];let E=T&&"number"==typeof y.partIndex&&T.parts&&T.parts[y.partIndex];if(!T||"number"==typeof y.partIndex&&!E)return null;if("number"!=typeof y.partIndex&&T.parts&&(y.partIndex=0,E=T.parts[0]),!a&&E&&!(this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments)&&!E.independent)if(0===y.partIndex){const V=f[y.mediaIndex-1],q=V.parts&&V.parts.length&&V.parts[V.parts.length-1];q&&q.independent&&(y.mediaIndex-=1,y.partIndex=V.parts.length-1,y.independent="previous segment")}else T.parts[y.partIndex-1].independent&&(y.partIndex-=1,y.independent="previous part");return y.mediaIndex>=f.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,y.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(y))}getSyncInfoFromMediaSequenceSync_(r){if(!this.mediaSequenceSync_)return null;const s=Math.max(r,this.mediaSequenceSync_.start);r!==s&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${r} to ${s}`);const a=this.mediaSequenceSync_.getSyncInfoForTime(s);if(!a)return null;if(!a.isAppended)return a;const c=this.mediaSequenceSync_.getSyncInfoForTime(a.end);return c?(c.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),c):null}generateSegmentInfo_(r){const{independent:s,playlist:a,mediaIndex:c,startOfSegment:h,isSyncRequest:f,partIndex:y,forceTimestampOffset:T,getMediaInfoForTime:E}=r,x=a.segments[c],P="number"==typeof y&&x.parts[y],V={requestId:"segment-loader-"+Math.random(),uri:P&&P.resolvedUri||x.resolvedUri,mediaIndex:c,partIndex:P?y:null,isSyncRequest:f,startOfSegment:h,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:x.timeline,duration:P&&P.duration||x.duration,segment:x,part:P,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:E,independent:s},q=typeof T<"u"?T:this.isPendingTimestampOffset_;V.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:x.timeline,currentTimeline:this.currentTimeline_,startOfSegment:h,buffered:this.buffered_(),overrideCheck:q});const L=go(this.sourceUpdater_.audioBuffered());return"number"==typeof L&&(V.audioAppendStart=L-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(V.gopsToAlignWith=((u,r,s)=>{if(typeof r>"u"||null===r||!u.length)return[];const a=Math.ceil((r-this.timeMapping_+3)*As.ONE_SECOND_IN_TS);let c;for(c=0;c<u.length&&!(u[c].pts>a);c++);return u.slice(c)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset())),V}timestampOffsetForSegment_(r){return(({segmentTimeline:u,currentTimeline:r,startOfSegment:s,buffered:a,overrideCheck:c})=>c||u!==r?u<r?s:a.length?a.end(a.length-1):s:null)(r)}earlyAbortWhenNeeded_(r){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(r.firstBytesReceivedAt||Date.now())<1e3)return;const s=this.currentTime_(),a=r.bandwidth,c=this.pendingSegment_.duration,h=zr.estimateSegmentRequestTime(c,a,this.playlist_,r.bytesReceived),f=function(u,r,s=1){return((u.length?u.end(u.length-1):0)-r)/s}(this.buffered_(),s,this.vhs_.tech_.playbackRate())-1;if(h<=f)return;const y=function(u){const{main:r,currentTime:s,bandwidth:a,duration:c,segmentDuration:h,timeUntilRebuffer:f,currentTimeline:y,syncController:T}=u,E=r.playlists.filter(L=>!zr.isIncompatible(L));let x=E.filter(zr.isEnabled);x.length||(x=E.filter(L=>!zr.isDisabled(L)));const V=x.filter(zr.hasAttribute.bind(null,"BANDWIDTH")).map(L=>{const te=T.getSyncPoint(L,c,y,s)?1:2;return{playlist:L,rebufferingImpact:zr.estimateSegmentRequestTime(h,a,L)*te-f}}),q=V.filter(L=>L.rebufferingImpact<=0);return mu(q,(L,X)=>$d(X.playlist,L.playlist)),q.length?q[0]:(mu(V,(L,X)=>L.rebufferingImpact-X.rebufferingImpact),V[0]||null)}({main:this.vhs_.playlists.main,currentTime:s,bandwidth:a,duration:this.duration_(),segmentDuration:c,timeUntilRebuffer:f,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!y)return;let x=.5;f<=Qn&&(x=1),y.playlist&&y.playlist.uri!==this.playlist_.uri&&!(h-f-y.rebufferingImpact<x)&&(this.bandwidth=y.playlist.attributes.BANDWIDTH*Er.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(r){this.logger_(`Aborting ${Ul(r)}`),this.mediaRequestsAborted+=1}handleProgress_(r,s){this.earlyAbortWhenNeeded_(s.stats),!this.checkForAbort_(s.requestId)&&this.trigger("progress")}handleTrackInfo_(r,s){const{hasAudio:a,hasVideo:c}=s,h={segmentInfo:da({type:this.loaderType_,segment:r}),trackInfo:{hasAudio:a,hasVideo:c}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:h}),this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)&&(this.checkForIllegalMediaSwitch(s)||(function(u,r){if(!u&&!r||!u&&r||u&&!r)return!1;if(u===r)return!0;const s=Object.keys(u).sort(),a=Object.keys(r).sort();if(s.length!==a.length)return!1;for(let c=0;c<s.length;c++){const h=s[c];if(h!==a[c]||u[h]!==r[h])return!1}return!0}(this.currentMediaInfo_,s=s||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=s,this.currentMediaInfo_=s,this.logger_("trackinfo update",s),this.trigger("trackinfo")),!this.checkForAbort_(r.requestId)&&(this.pendingSegment_.trackInfo=s,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(r,s,a,c){if(this.earlyAbortWhenNeeded_(r.stats),this.checkForAbort_(r.requestId))return;const h=this.pendingSegment_,f=Qb(s);h[f]=h[f]||{},h[f][a]=c,this.logger_(`timinginfo: ${s} - ${a} - ${c}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(r,s){if(this.earlyAbortWhenNeeded_(r.stats),this.checkForAbort_(r.requestId))return;if(0===s.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,r,s));const c=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),h={};s.forEach(f=>{h[f.stream]=h[f.stream]||{startTime:1/0,captions:[],endTime:0};const y=h[f.stream];y.startTime=Math.min(y.startTime,f.startTime+c),y.endTime=Math.max(y.endTime,f.endTime+c),y.captions.push(f)}),Object.keys(h).forEach(f=>{const{startTime:y,endTime:T,captions:E}=h[f],x=this.inbandTextTracks_;this.logger_(`adding cues from ${y} -> ${T} for ${f}`),function(u,r,s){if(!u[s]){r.trigger({type:"usage",name:"vhs-608"});let a=s;/^cc708_/.test(s)&&(a="SERVICE"+s.split("_")[1]);const c=r.textTracks().getTrackById(a);if(c)u[s]=c;else{let f=s,y=s,T=!1;const E=(r.options_.vhs&&r.options_.vhs.captionServices||{})[a];E&&(f=E.label,y=E.language,T=E.default),u[s]=r.addRemoteTextTrack({kind:"captions",id:a,default:T,label:f,language:y},!1).track}}}(x,this.vhs_.tech_,f),ca(y,T,x[f]),function({inbandTextTracks:u,captionArray:r,timestampOffset:s}){if(!r)return;const a=M().WebKitDataCue||M().VTTCue;r.forEach(c=>{const h=c.stream;c.content?c.content.forEach(f=>{const y=new a(c.startTime+s,c.endTime+s,f.text);y.line=f.line,y.align="left",y.position=f.position,y.positionAlign="line-left",u[h].addCue(y)}):u[h].addCue(new a(c.startTime+s,c.endTime+s,c.text))})}({captionArray:E,inbandTextTracks:x,timestampOffset:c})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(r,s,a){this.earlyAbortWhenNeeded_(r.stats),this.checkForAbort_(r.requestId)||(this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(a,s,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,r,s,a)))}processMetadataQueue_(){this.metadataQueue_.id3.forEach(r=>r()),this.metadataQueue_.caption.forEach(r=>r()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const r=this.callQueue_;this.callQueue_=[],r.forEach(s=>s())}processLoadQueue_(){const r=this.loadQueue_;this.loadQueue_=[],r.forEach(s=>s())}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const r=this.pendingSegment_;return!(!r||this.getCurrentMediaInfo_()&&Zb({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:r.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})&&(Jb(this.timelineChangeController_)&&gp(this),1))}getCurrentMediaInfo_(r=this.pendingSegment_){return r&&r.trackInfo||this.currentMediaInfo_}getMediaInfo_(r=this.pendingSegment_){return this.getCurrentMediaInfo_(r)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const r=this.pendingSegment_,s=this.getCurrentMediaInfo_();if(!r||!s)return!1;const{hasAudio:a,hasVideo:c,isMuxed:h}=s;return!(c&&!r.videoTimingInfo||a&&!this.audioDisabled_&&!h&&!r.audioTimingInfo||Zb({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:r.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})&&(Jb(this.timelineChangeController_)&&gp(this),1))}handleData_(r,s){if(this.earlyAbortWhenNeeded_(r.stats),this.checkForAbort_(r.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,r,s));const a=this.pendingSegment_;if(this.setTimeMapping_(a.timeline),this.updateMediaSecondsLoaded_(a.part||a.segment),"closed"!==this.mediaSource_.readyState){if(r.map&&(r.map=this.initSegmentForMap(r.map,!0),a.segment.map=r.map),r.key&&this.segmentKey(r.key,!0),a.isFmp4=r.isFmp4,a.timingInfo=a.timingInfo||{},a.isFmp4)this.trigger("fmp4"),a.timingInfo.start=a[Qb(s.type)].start;else{const c=this.getCurrentMediaInfo_(),h="main"===this.loaderType_&&c&&c.hasVideo;let f;h&&(f=a.videoTimingInfo.start),a.timingInfo.start=this.trueSegmentStart_({currentStart:a.timingInfo.start,playlist:a.playlist,mediaIndex:a.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:h,firstVideoFrameTimeForData:f,videoTimingInfo:a.videoTimingInfo,audioTimingInfo:a.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(a,s.type),this.updateSourceBufferTimestampOffset_(a),a.isSyncRequest){this.updateTimingInfoEnd_(a),this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:"main"===this.loaderType_});const c=this.chooseNextRequest_();if(c.mediaIndex!==a.mediaIndex||c.partIndex!==a.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}a.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(a,s)}}updateAppendInitSegmentStatus(r,s){"main"===this.loaderType_&&"number"==typeof r.timestampOffset&&!r.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[s]!==r.playlist&&(this.appendInitSegment_[s]=!0)}getInitSegmentAndUpdateState_({type:r,initSegment:s,map:a,playlist:c}){if(a){const h=Xi(a);if(this.activeInitSegmentId_===h)return null;s=this.initSegmentForMap(a,!0).bytes,this.activeInitSegmentId_=h}return s&&this.appendInitSegment_[r]?(this.playlistOfLastInitSegment_[r]=c,this.appendInitSegment_[r]=!1,this.activeInitSegmentId_=null,s):null}handleQuotaExceededError_({segmentInfo:r,type:s,bytes:a},c){const h=this.sourceUpdater_.audioBuffered(),f=this.sourceUpdater_.videoBuffered();h.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+dr(h).join(", ")),f.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+dr(f).join(", "));const y=h.length?h.start(0):0,T=h.length?h.end(h.length-1):0,E=f.length?f.start(0):0,x=f.length?f.end(f.length-1):0;if(T-y<=1&&x-E<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${a.byteLength}, audio buffer: ${dr(h).join(", ")}, video buffer: ${dr(f).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:r,type:s,bytes:a}));const V=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${V}`),this.remove(0,V,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=M().setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3)},!0)}handleAppendError_({segmentInfo:r,type:s,bytes:a},c){if(c){if(22===c.code)return void this.handleQuotaExceededError_({segmentInfo:r,type:s,bytes:a});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",c),this.error({message:`${s} append of ${a.length}b failed for segment #${r.mediaIndex} in playlist ${r.playlist.id}`,metadata:{errorType:J.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:r,type:s,initSegment:a,data:c,bytes:h}){if(!h){const y=[c];let T=c.byteLength;a&&(y.unshift(a),T+=a.byteLength),h=(u=>{let s,r=0;return u.bytes&&(s=new Uint8Array(u.bytes),u.segments.forEach(a=>{s.set(a,r),r+=a.byteLength})),s})({bytes:T,segments:y})}const f={segmentInfo:da({type:this.loaderType_,segment:r})};this.trigger({type:"segmentappendstart",metadata:f}),this.sourceUpdater_.appendBuffer({segmentInfo:r,type:s,bytes:h},this.handleAppendError_.bind(this,{segmentInfo:r,type:s,bytes:h}))}handleSegmentTimingInfo_(r,s,a){if(!this.pendingSegment_||s!==this.pendingSegment_.requestId)return;const c=this.pendingSegment_.segment,h=`${r}TimingInfo`;c[h]||(c[h]={}),c[h].transmuxerPrependedSeconds=a.prependedContentDuration||0,c[h].transmuxedPresentationStart=a.start.presentation,c[h].transmuxedDecodeStart=a.start.decode,c[h].transmuxedPresentationEnd=a.end.presentation,c[h].transmuxedDecodeEnd=a.end.decode,c[h].baseMediaDecodeTime=a.baseMediaDecodeTime}appendData_(r,s){const{type:a,data:c}=s;if(!c||!c.byteLength||"audio"===a&&this.audioDisabled_)return;const h=this.getInitSegmentAndUpdateState_({type:a,initSegment:s.initSegment,playlist:r.playlist,map:r.isFmp4?r.segment.map:null});this.appendToSourceBuffer_({segmentInfo:r,type:a,initSegment:h,data:c})}loadSegment_(r){this.state="WAITING",this.pendingSegment_=r,this.trimBackBuffer_(r),"number"==typeof r.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(r):this.loadQueue_.push(()=>{const s=Je({},r,{forceTimestampOffset:!0});Je(r,this.generateSegmentInfo_(s)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(r)})}updateTransmuxerAndRequestSegment_(r){this.shouldUpdateTransmuxerTimestampOffset_(r.timestampOffset)&&(this.gopBuffer_.length=0,r.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:r.timestampOffset}));const s=this.createSimplifiedSegmentObj_(r),f=this.isEndOfStream_(r.mediaIndex,r.playlist,r.partIndex)||null!==this.mediaIndex&&r.timeline!==this.currentTimeline_&&r.timeline>0;this.logger_(`Requesting\n${la(r.uri)}\n${Ul(r)}`),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),r.abortRequests=k0({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,r),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",r.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",r.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:f,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:y,level:T,stream:E})=>{this.logger_(`${Ul(r)} logged from transmuxer stream ${E} as a ${T}: ${y}`)},triggerSegmentEventFn:({type:y,segment:T,keyInfo:E,trackInfo:x,timingInfo:P})=>{const q={segmentInfo:da({segment:T})};E&&(q.keyInfo=E),x&&(q.trackInfo=x),P&&(q.timingInfo=P),this.trigger({type:y,metadata:q})}})}trimBackBuffer_(r){const s=((u,r,s)=>{let a=r-Er.BACK_BUFFER_LENGTH;return u.length&&(a=Math.max(a,u.start(0))),Math.min(r-s,a)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);s>0&&this.remove(0,s)}createSimplifiedSegmentObj_(r){const s=r.segment,a=r.part,f={resolvedUri:a?a.resolvedUri:s.resolvedUri,byterange:a?a.byterange:s.byterange,requestId:r.requestId,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,part:r.part,type:this.loaderType_,start:r.startOfSegment,duration:r.duration,isEncrypted:r.segment.key||r.segment.map&&r.segment.map.key,isMediaInitialization:r.segment.map&&!r.segment.map.bytes},y=r.playlist.segments[r.mediaIndex-1];if(y&&y.timeline===s.timeline&&(y.videoTimingInfo?f.baseStartTime=y.videoTimingInfo.transmuxedDecodeEnd:y.audioTimingInfo&&(f.baseStartTime=y.audioTimingInfo.transmuxedDecodeEnd)),s.key){const T=s.key.iv||new Uint32Array([0,0,0,r.mediaIndex+r.playlist.mediaSequence]);f.key=this.segmentKey(s.key),f.key.iv=T}return s.map&&(f.map=this.initSegmentForMap(s.map)),f}saveTransferStats_(r){this.mediaRequests+=1,r&&(this.mediaBytesTransferred+=r.bytesReceived,this.mediaTransferDuration+=r.roundTripTime)}saveBandwidthRelatedStats_(r,s){this.pendingSegment_.byteLength=s.bytesReceived,r<Ki?this.logger_(`Ignoring segment's bandwidth because its duration of ${r} is less than the min to record ${Ki}`):(this.trigger({type:"bandwidthupdated",metadata:{bandwidthInfo:{from:this.bandwidth,to:s.bandwidth}}}),this.bandwidth=s.bandwidth,this.roundTrip=s.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(r,s,a){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,r,s,a));if(this.saveTransferStats_(s.stats),!this.pendingSegment_||s.requestId!==this.pendingSegment_.requestId)return;if(r){if(this.pendingSegment_=null,this.state="READY",-102===r.code)return;return this.pause(),-101===r.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(r),void this.trigger("error"))}const c=this.pendingSegment_;this.saveBandwidthRelatedStats_(c.duration,s.stats),c.endOfAllRequests=s.endOfAllRequests,a.gopInfo&&(this.gopBuffer_=((u,r,s)=>{if(!r.length)return u;if(this.safeAppend_)return r.slice();const a=r[0].pts;let c=0;for(;c<u.length&&!(u[c].pts>=a);c++);return u.slice(0,c).concat(r)})(this.gopBuffer_,a.gopInfo)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(c)}setTimeMapping_(r){const s=this.syncController_.mappingForTimeline(r);null!==s&&(this.timeMapping_=s)}updateMediaSecondsLoaded_(r){this.mediaSecondsLoaded+="number"==typeof r.start&&"number"==typeof r.end?r.end-r.start:r.duration}shouldUpdateTransmuxerTimestampOffset_(r){return null!==r&&("main"===this.loaderType_&&r!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&r!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:r,playlist:s,mediaIndex:a,firstVideoFrameTimeForData:c,currentVideoTimestampOffset:h,useVideoTimingInfo:f,videoTimingInfo:y,audioTimingInfo:T}){if(typeof r<"u")return r;if(!f)return T.start;const E=s.segments[a-1];return 0===a||!E||typeof E.start>"u"||E.end!==c+h?c:y.start}waitForAppendsToComplete_(r){const s=this.getCurrentMediaInfo_(r);if(!s)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:a,hasVideo:c,isMuxed:h}=s,f="main"===this.loaderType_&&c,y=!this.audioDisabled_&&a&&!h;if(r.waitingOnAppends=0,!r.hasAppendedData_)return!r.timingInfo&&"number"==typeof r.timestampOffset&&(this.isPendingTimestampOffset_=!0),r.timingInfo={start:0},r.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(r),this.processMetadataQueue_()),void this.checkAppendsDone_(r);f&&r.waitingOnAppends++,y&&r.waitingOnAppends++,f&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,r)),y&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,r))}checkAppendsDone_(r){this.checkForAbort_(r.requestId)||(r.waitingOnAppends--,0===r.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(r){const s=((u,r,s)=>"main"===u&&r&&s?s.hasAudio||s.hasVideo?r.hasVideo&&!s.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!r.hasVideo&&s.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)(this.loaderType_,this.getCurrentMediaInfo_(),r);return!!s&&(this.error({message:s,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(r){if(null===r.timestampOffset||"number"!=typeof r.timingInfo.start||r.changedTimestampOffset||"main"!==this.loaderType_)return;let s=!1;r.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:r.segment.videoTimingInfo,audioTimingInfo:r.segment.audioTimingInfo,timingInfo:r.timingInfo}),r.changedTimestampOffset=!0,r.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(r.timestampOffset),s=!0),r.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(r.timestampOffset),s=!0),s&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:r,audioTimingInfo:s,timingInfo:a}){return this.useDtsForTimestampOffset_?r&&"number"==typeof r.transmuxedDecodeStart?r.transmuxedDecodeStart:s&&"number"==typeof s.transmuxedDecodeStart?s.transmuxedDecodeStart:a.start:a.start}updateTimingInfoEnd_(r){r.timingInfo=r.timingInfo||{};const s=this.getMediaInfo_(),c="main"===this.loaderType_&&s&&s.hasVideo&&r.videoTimingInfo?r.videoTimingInfo:r.audioTimingInfo;c&&(r.timingInfo.end="number"==typeof c.end?c.end:c.start+r.duration)}handleAppendsDone_(){if(this.pendingSegment_){const T={segmentInfo:da({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:T})}if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const r=this.pendingSegment_;r.part&&r.part.syncInfo?r.part.syncInfo.markAppended():r.segment.syncInfo&&r.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(r),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:"main"===this.loaderType_});const s=((u,r)=>{if("hls"!==r)return null;const s=(u=>{let r=0;return["video","audio"].forEach(function(s){const a=u[`${s}TimingInfo`];if(!a)return;const{start:c,end:h}=a;let f;"bigint"==typeof c||"bigint"==typeof h?f=M().BigInt(h)-M().BigInt(c):"number"==typeof c&&"number"==typeof h&&(f=h-c),typeof f<"u"&&f>r&&(r=f)}),"bigint"==typeof r&&r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r})({audioTimingInfo:u.audioTimingInfo,videoTimingInfo:u.videoTimingInfo});if(!s)return null;const a=u.playlist.targetDuration,c=V0({segmentDuration:s,maxDuration:2*a}),h=V0({segmentDuration:s,maxDuration:a});return c||h?{severity:c?"warn":"info",message:`Segment with index ${u.mediaIndex} from playlist ${u.playlist.id} has a duration of ${s} when the reported duration is ${u.duration} and the target duration is ${a}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`}:null})(r,this.sourceType_);if(s&&("warn"===s.severity?J.log.warn(s.message):this.logger_(s.message)),this.recordThroughput_(r),this.pendingSegment_=null,this.state="READY",r.isSyncRequest&&(this.trigger("syncinfoupdate"),!r.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${Ul(r)}`);this.logger_(`Appended ${Ul(r)}`),this.addSegmentMetadataCue_(r),this.fetchAtBuffer_=!0,this.currentTimeline_!==r.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:r.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:r.timeline})),this.currentTimeline_=r.timeline,this.trigger("syncinfoupdate");const a=r.segment,c=r.part,h=a.end&&this.currentTime_()-a.end>3*r.playlist.targetDuration,f=c&&c.end&&this.currentTime_()-c.end>3*r.playlist.partTargetDuration;if(h||f)return this.logger_(`bad ${h?"segment":"part"} ${Ul(r)}`),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=r.mediaIndex,this.partIndex=r.partIndex,this.isEndOfStream_(r.mediaIndex,r.playlist,r.partIndex)&&this.endOfStream(),this.trigger("appended"),r.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(r){if(r.duration<Ki)return void this.logger_(`Ignoring segment's throughput because its duration of ${r.duration} is less than the min to record ${Ki}`);const s=this.throughput.rate,a=Date.now()-r.endOfAllRequests+1,c=Math.floor(r.byteLength/a*8*1e3);this.throughput.rate+=(c-s)/++this.throughput.count}addSegmentMetadataCue_(r){if(!this.segmentMetadataTrack_)return;const s=r.segment,a=s.start,c=s.end;if(!$0(a)||!$0(c))return;ca(a,c,this.segmentMetadataTrack_);const h=M().WebKitDataCue||M().VTTCue,f={custom:s.custom,dateTimeObject:s.dateTimeObject,dateTimeString:s.dateTimeString,programDateTime:s.programDateTime,bandwidth:r.playlist.attributes.BANDWIDTH,resolution:r.playlist.attributes.RESOLUTION,codecs:r.playlist.attributes.CODECS,byteLength:r.byteLength,uri:r.uri,timeline:r.timeline,playlist:r.playlist.id,start:a,end:c},T=new h(a,c,JSON.stringify(f));T.value=f,this.segmentMetadataTrack_.addCue(T)}}function Ir(){}const vu=function(u){return"string"!=typeof u?u:u.replace(/./,r=>r.toUpperCase())},H0=["video","audio"],Hd=(u,r)=>{const s=r[`${u}Buffer`];return s&&s.updating||r.queuePending[u]},$l=(u,r)=>{if(0===r.queue.length)return;let s=0,a=r.queue[s];if("mediaSource"!==a.type){if("mediaSource"!==u&&r.ready()&&"closed"!==r.mediaSource.readyState&&!Hd(u,r)){if(a.type!==u){if(s=((u,r)=>{for(let s=0;s<r.length;s++){const a=r[s];if("mediaSource"===a.type)return null;if(a.type===u)return s}return null})(u,r.queue),null===s)return;a=r.queue[s]}if(r.queue.splice(s,1),r.queuePending[u]=a,a.action(u,r),!a.doneFn)return r.queuePending[u]=null,void $l(u,r)}}else!r.updating()&&"closed"!==r.mediaSource.readyState&&(r.queue.shift(),a.action(r),a.doneFn&&a.doneFn(),$l("audio",r),$l("video",r))},nT=(u,r)=>{const s=r[`${u}Buffer`],a=vu(u);s&&(s.removeEventListener("updateend",r[`on${a}UpdateEnd_`]),s.removeEventListener("error",r[`on${a}Error_`]),r.codecs[u]=null,r[`${u}Buffer`]=null)},Fs=(u,r)=>u&&r&&-1!==Array.prototype.indexOf.call(u.sourceBuffers,r),Gr_appendBuffer=(u,r,s)=>(a,c)=>{const h=c[`${a}Buffer`];if(Fs(c.mediaSource,h)){c.logger_(`Appending segment ${r.mediaIndex}'s ${u.length} bytes to ${a}Buffer`);try{h.appendBuffer(u)}catch(f){c.logger_(`Error with code ${f.code} `+(22===f.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${r.mediaIndex} to ${a}Buffer`),c.queuePending[a]=null,s(f)}}},Gr_remove=(u,r)=>(s,a)=>{const c=a[`${s}Buffer`];if(Fs(a.mediaSource,c)){a.logger_(`Removing ${u} to ${r} from ${s}Buffer`);try{c.remove(u,r)}catch{a.logger_(`Remove ${u} to ${r} from ${s}Buffer failed`)}}},Gr_timestampOffset=u=>(r,s)=>{const a=s[`${r}Buffer`];Fs(s.mediaSource,a)&&(s.logger_(`Setting ${r}timestampOffset to ${u}`),a.timestampOffset=u)},Gr_callback=u=>(r,s)=>{u()},Gr_endOfStream=u=>r=>{if("open"===r.mediaSource.readyState){r.logger_(`Calling mediaSource endOfStream(${u||""})`);try{r.mediaSource.endOfStream(u)}catch(s){J.log.warn("Failed to call media source endOfStream",s)}}},Gr_duration=u=>r=>{r.logger_(`Setting mediaSource duration to ${u}`);try{r.mediaSource.duration=u}catch(s){J.log.warn("Failed to set media source duration",s)}},Gr_addSourceBuffer=(u,r)=>s=>{const a=vu(u),c=Le(r);s.logger_(`Adding ${u}Buffer with codec ${r} to mediaSource`);const h=s.mediaSource.addSourceBuffer(c);h.addEventListener("updateend",s[`on${a}UpdateEnd_`]),h.addEventListener("error",s[`on${a}Error_`]),s.codecs[u]=r,s[`${u}Buffer`]=h},Gr_removeSourceBuffer=u=>r=>{const s=r[`${u}Buffer`];if(nT(u,r),Fs(r.mediaSource,s)){r.logger_(`Removing ${u}Buffer with codec ${r.codecs[u]} from mediaSource`);try{r.mediaSource.removeSourceBuffer(s)}catch(a){J.log.warn(`Failed to removeSourceBuffer ${u}Buffer`,a)}}},Gr_changeType=u=>(r,s)=>{const a=s[`${r}Buffer`],c=Le(u);if(!Fs(s.mediaSource,a))return;const h=u.substring(0,u.indexOf(".")),f=s.codecs[r];if(f.substring(0,f.indexOf("."))===h)return;const T={codecsChangeInfo:{from:f,to:u}};s.trigger({type:"codecschange",metadata:T}),s.logger_(`changing ${r}Buffer codec from ${f} to ${u}`);try{a.changeType(c),s.codecs[r]=u}catch(E){T.errorType=J.Error.StreamingCodecsChangeError,T.error=E,E.metadata=T,s.error_=E,s.trigger("error"),J.log.warn(`Failed to changeType on ${r}Buffer`,E)}},Wr=({type:u,sourceUpdater:r,action:s,doneFn:a,name:c})=>{r.queue.push({type:u,action:s,doneFn:a,name:c}),$l(u,r)},rT=(u,r)=>s=>{const c=function gb(u){if(0===u.length)return"Buffered Ranges are empty";let r="Buffered Ranges: \n";for(let s=0;s<u.length;s++){const a=u.start(s),c=u.end(s);r+=`${a} --\x3e ${c}. Duration (${c-a})\n`}return r}(r[`${u}Buffered`]());if(r.logger_(`received "updateend" event for ${u} Source Buffer: `,c),r.queuePending[u]){const h=r.queuePending[u].doneFn;r.queuePending[u]=null,h&&h(r[`${u}Error_`])}$l(u,r)};class iT extends J.EventTarget{constructor(r){super(),this.mediaSource=r,this.sourceopenListener_=()=>$l("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=en("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=rT("video",this),this.onAudioUpdateEnd_=rT("audio",this),this.onVideoError_=s=>{this.videoError_=s},this.onAudioError_=s=>{this.audioError_=s},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(r){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(r),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(r,s){Wr({type:"mediaSource",sourceUpdater:this,action:Gr_addSourceBuffer(r,s),name:"addSourceBuffer"})}abort(r){Wr({type:r,sourceUpdater:this,action:(u,r)=>{if("open"!==r.mediaSource.readyState)return;const s=r[`${u}Buffer`];if(Fs(r.mediaSource,s)){r.logger_(`calling abort on ${u}Buffer`);try{s.abort()}catch(a){J.log.warn(`Failed to abort on ${u}Buffer`,a)}}},name:"abort"})}removeSourceBuffer(r){this.canRemoveSourceBuffer()?Wr({type:"mediaSource",sourceUpdater:this,action:Gr_removeSourceBuffer(r),name:"removeSourceBuffer"}):J.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!J.browser.IS_FIREFOX&&M().MediaSource&&M().MediaSource.prototype&&"function"==typeof M().MediaSource.prototype.removeSourceBuffer}static canChangeType(){return M().SourceBuffer&&M().SourceBuffer.prototype&&"function"==typeof M().SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(r,s){this.canChangeType()?Wr({type:r,sourceUpdater:this,action:Gr_changeType(s),name:"changeType"}):J.log.error("changeType is not supported!")}addOrChangeSourceBuffers(r){if(!r||"object"!=typeof r||0===Object.keys(r).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(r).forEach(s=>{const a=r[s];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(s,a);this.canChangeType()&&this.changeType(s,a)})}appendBuffer(r,s){const{segmentInfo:a,type:c,bytes:h}=r;if(this.processedAppend_=!0,"audio"===c&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([r,s]),void this.logger_(`delayed audio append of ${h.length} until video append`);if(Wr({type:c,sourceUpdater:this,action:Gr_appendBuffer(h,a||{mediaIndex:-1},s),doneFn:s,name:"appendBuffer"}),"video"===c){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const y=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${y.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,y.forEach(T=>{this.appendBuffer.apply(this,T)})}}audioBuffered(){return Fs(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Yn()}videoBuffered(){return Fs(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Yn()}buffered(){const r=Fs(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,s=Fs(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return s&&!r?this.audioBuffered():r&&!s?this.videoBuffered():function(u,r){let s=null,a=null,c=0;const h=[],f=[];if(!(u&&u.length&&r&&r.length))return Yn();let y=u.length;for(;y--;)h.push({time:u.start(y),type:"start"}),h.push({time:u.end(y),type:"end"});for(y=r.length;y--;)h.push({time:r.start(y),type:"start"}),h.push({time:r.end(y),type:"end"});for(h.sort(function(T,E){return T.time-E.time}),y=0;y<h.length;y++)"start"===h[y].type?(c++,2===c&&(s=h[y].time)):"end"===h[y].type&&(c--,1===c&&(a=h[y].time)),null!==s&&null!==a&&(f.push([s,a]),s=null,a=null);return Yn(f)}(this.audioBuffered(),this.videoBuffered())}setDuration(r,s=Ir){Wr({type:"mediaSource",sourceUpdater:this,action:Gr_duration(r),name:"duration",doneFn:s})}endOfStream(r=null,s=Ir){"string"!=typeof r&&(r=void 0),Wr({type:"mediaSource",sourceUpdater:this,action:Gr_endOfStream(r),name:"endOfStream",doneFn:s})}removeAudio(r,s,a=Ir){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Wr({type:"audio",sourceUpdater:this,action:Gr_remove(r,s),doneFn:a,name:"remove"}):a()}removeVideo(r,s,a=Ir){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Wr({type:"video",sourceUpdater:this,action:Gr_remove(r,s),doneFn:a,name:"remove"}):a()}updating(){return!(!Hd("audio",this)&&!Hd("video",this))}audioTimestampOffset(r){return typeof r<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==r&&(Wr({type:"audio",sourceUpdater:this,action:Gr_timestampOffset(r),name:"timestampOffset"}),this.audioTimestampOffset_=r),this.audioTimestampOffset_}videoTimestampOffset(r){return typeof r<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==r&&(Wr({type:"video",sourceUpdater:this,action:Gr_timestampOffset(r),name:"timestampOffset"}),this.videoTimestampOffset_=r),this.videoTimestampOffset_}audioQueueCallback(r){this.audioBuffer&&Wr({type:"audio",sourceUpdater:this,action:Gr_callback(r),name:"callback"})}videoQueueCallback(r){this.videoBuffer&&Wr({type:"video",sourceUpdater:this,action:Gr_callback(r),name:"callback"})}dispose(){this.trigger("dispose"),H0.forEach(r=>{this.abort(r),this.canRemoveSourceBuffer()?this.removeSourceBuffer(r):this[`${r}QueueCallback`](()=>nT(r,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const mp=u=>decodeURIComponent(escape(String.fromCharCode.apply(null,u))),z0=new Uint8Array("\n\n".split("").map(u=>u.charCodeAt(0)));class oT extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class aT extends jl{constructor(r,s={}){super(r,s),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=r.featuresNativeTextTracks,this.loadVttJs=r.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Yn();const r=this.subtitlesTrack_.cues;return Yn([[r[0].startTime,r[r.length-1].startTime]])}initSegmentForMap(r,s=!1){if(!r)return null;const a=Xi(r);let c=this.initSegments_[a];if(s&&!c&&r.bytes){const f=new Uint8Array(z0.byteLength+r.bytes.byteLength);f.set(r.bytes),f.set(z0,r.bytes.byteLength),this.initSegments_[a]=c={resolvedUri:r.resolvedUri,byterange:r.byterange,bytes:f}}return c||r}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(r){return typeof r>"u"||(this.subtitlesTrack_=r,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(r,s){ca(r,s,this.subtitlesTrack_)}fillBuffer_(){const r=this.chooseNextRequest_();if(r){if(null===this.syncController_.timestampOffsetForTimeline(r.timeline))return this.syncController_.one("timestampoffset",()=>{this.state="READY",this.paused()||this.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(r)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(r){for(;r&&r.segment.empty;){if(r.mediaIndex+1>=r.playlist.segments.length){r=null;break}r=this.generateSegmentInfo_({playlist:r.playlist,mediaIndex:r.mediaIndex+1,startOfSegment:r.startOfSegment+r.duration,isSyncRequest:r.isSyncRequest})}return r}stopForError(r){this.error(r),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(r,s,a){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(s.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(r)return-101===r.code&&this.handleTimeout_(),-102===r.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(r);const c=this.pendingSegment_;this.saveBandwidthRelatedStats_(c.duration,s.stats),s.key&&this.segmentKey(s.key,!0),this.state="APPENDING",this.trigger("appending");const h=c.segment;if(h.map&&(h.map.bytes=s.map.bytes),c.bytes=s.bytes,"function"!=typeof M().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(()=>this.segmentRequestFinished_(r,s,a),()=>this.stopForError({message:"Error loading vtt.js"}));h.requested=!0;try{this.parseVTTCues_(c)}catch(f){return void this.stopForError({message:f.message,metadata:{errorType:J.Error.StreamingVttParserError,error:f}})}if(this.updateTimeMapping_(c,this.syncController_.timelines[c.timeline],this.playlist_),c.timingInfo=c.cues.length?{start:c.cues[0].startTime,end:c.cues[c.cues.length-1].endTime}:{start:c.startOfSegment,end:c.startOfSegment+c.duration},c.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");c.byteLength=c.bytes.byteLength,this.mediaSecondsLoaded+=h.duration,c.cues.forEach(f=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(M().VTTCue)(f.startTime,f.endTime,f.text):f)}),function(u){const r=u.cues;if(!r)return;const s={};for(let a=r.length-1;a>=0;a--){const c=r[a],h=`${c.startTime}-${c.endTime}-${c.text}`;s[h]?u.removeCue(c):s[h]=c}}(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(r){let s,a=!1;if("function"!=typeof M().WebVTT)throw new oT;"function"==typeof M().TextDecoder?s=new(M().TextDecoder)("utf8"):(s=M().WebVTT.StringDecoder(),a=!0);const c=new(M().WebVTT.Parser)(M(),M().vttjs,s);if(r.cues=[],r.timestampmap={MPEGTS:0,LOCAL:0},c.oncue=r.cues.push.bind(r.cues),c.ontimestampmap=f=>{r.timestampmap=f},c.onparsingerror=f=>{J.log.warn("Error encountered when parsing cues: "+f.message)},r.segment.map){let f=r.segment.map.bytes;a&&(f=mp(f)),c.parse(f)}let h=r.bytes;a&&(h=mp(h)),c.parse(h),c.flush()}updateTimeMapping_(r,s,a){const c=r.segment;if(!s)return;if(!r.cues.length)return void(c.empty=!0);const{MPEGTS:h,LOCAL:f}=r.timestampmap,T=h/As.ONE_SECOND_IN_TS-f+s.mapping;r.cues.forEach(E=>{const x=E.endTime-E.startTime,P=0===h?E.startTime+T:this.handleRollover_(E.startTime+T,s.time);E.startTime=Math.max(P,0),E.endTime=Math.max(P+x,0)}),a.syncInfo||(a.syncInfo={mediaSequence:a.mediaSequence+r.mediaIndex,time:Math.min(r.cues[0].startTime,r.cues[r.cues.length-1].startTime-c.duration)})}handleRollover_(r,s){if(null===s)return r;let a=r*As.ONE_SECOND_IN_TS;const c=s*As.ONE_SECOND_IN_TS;let h;for(h=c<a?-8589934592:8589934592;Math.abs(a-c)>4294967296;)a+=h;return a/As.ONE_SECOND_IN_TS}}const G0=function(u,r){const s=u.cues;for(let a=0;a<s.length;a++){const c=s[a];if(r>=c.adStartTime&&r<=c.adEndTime)return c}return null};class W0{constructor({start:r,end:s,segmentIndex:a,partIndex:c=null,appended:h=!1}){this.start_=r,this.end_=s,this.segmentIndex_=a,this.partIndex_=c,this.appended_=h}isInRange(r){return r>=this.start&&r<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class yp{constructor(r,s=[]){this.segmentSyncInfo_=r,this.partsSyncInfo_=s}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(r=>r.resetAppendedStatus())}}class X0{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(r=>r.resetAppendStatus())}update(r,s){const{mediaSequence:a,segments:c}=r;if(this.isReliable_=this.isReliablePlaylist_(a,c),this.isReliable_)return this.updateStorage_(c,a,this.calculateBaseTime_(a,s))}getSyncInfoForTime(r){for(const{segmentSyncInfo:s,partsSyncInfo:a}of this.storage_.values())if(a.length){for(const c of a)if(c.isInRange(r))return c}else if(s.isInRange(r))return s;return null}getSyncInfoForMediaSequence(r){return this.storage_.get(r)}updateStorage_(r,s,a){const c=new Map;let h="\n",f=a,y=s;this.start_=f,r.forEach((T,E)=>{const x=this.storage_.get(y),P=f,V=P+T.duration,q=!!(x&&x.segmentSyncInfo&&x.segmentSyncInfo.isAppended),L=new W0({start:P,end:V,appended:q,segmentIndex:E});T.syncInfo=L;let X=f;const te=(T.parts||[]).map((ne,Q)=>{const ge=X,_e=X+ne.duration,W=!!(x&&x.partsSyncInfo&&x.partsSyncInfo[Q]&&x.partsSyncInfo[Q].isAppended),Ee=new W0({start:ge,end:_e,appended:W,segmentIndex:E,partIndex:Q});return X=_e,h+=`Media Sequence: ${y}.${Q} | Range: ${ge} --\x3e ${_e} | Appended: ${W}\n`,ne.syncInfo=Ee,Ee});c.set(y,new yp(L,te)),h+=`${la(T.resolvedUri)} | Media Sequence: ${y} | Range: ${P} --\x3e ${V} | Appended: ${q}\n`,y++,f=V}),this.end_=f,this.storage_=c,this.diagnostics_=h}calculateBaseTime_(r,s){return this.storage_.size?this.storage_.has(r)?this.storage_.get(r).segmentSyncInfo.start:s:0}isReliablePlaylist_(r,s){return null!=r&&Array.isArray(s)&&s.length}}class ha extends X0{constructor(r){super(),this.parent_=r}calculateBaseTime_(r,s){if(!this.storage_.size){const a=this.parent_.getSyncInfoForMediaSequence(r);return a?a.segmentSyncInfo.start:0}return super.calculateBaseTime_(r,s)}}const vp=[{name:"VOD",run:(u,r,s,a,c)=>s!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(u,r,s,a,c,h)=>{const f=u.getMediaSequenceSync(h);if(!f||!f.isReliable)return null;const y=f.getSyncInfoForTime(c);return y?{time:y.start,partIndex:y.partIndex,segmentIndex:y.segmentIndex}:null}},{name:"ProgramDateTime",run:(u,r,s,a,c)=>{if(!Object.keys(u.timelineToDatetimeMappings).length)return null;let h=null,f=null;const y=Qf(r);c=c||0;for(let T=0;T<y.length;T++){const x=y[r.endList||0===c?T:y.length-(T+1)],P=x.segment,V=u.timelineToDatetimeMappings[P.timeline];if(!V||!P.dateTimeObject)continue;let L=P.dateTimeObject.getTime()/1e3+V;if(P.parts&&"number"==typeof x.partIndex)for(let te=0;te<x.partIndex;te++)L+=P.parts[te].duration;const X=Math.abs(c-L);if(null!==f&&(0===X||f<X))break;f=X,h={time:L,segmentIndex:x.segmentIndex,partIndex:x.partIndex}}return h}},{name:"Segment",run:(u,r,s,a,c)=>{let h=null,f=null;c=c||0;const y=Qf(r);for(let T=0;T<y.length;T++){const x=y[r.endList||0===c?T:y.length-(T+1)],P=x.segment,V=x.part&&x.part.start||P&&P.start;if(P.timeline===a&&typeof V<"u"){const q=Math.abs(c-V);if(null!==f&&f<q)break;(!h||null===f||f>=q)&&(f=q,h={time:V,segmentIndex:x.segmentIndex,partIndex:x.partIndex})}}return h}},{name:"Discontinuity",run:(u,r,s,a,c)=>{let h=null;if(c=c||0,r.discontinuityStarts&&r.discontinuityStarts.length){let f=null;for(let y=0;y<r.discontinuityStarts.length;y++){const T=r.discontinuityStarts[y],x=u.discontinuities[r.discontinuitySequence+y+1];if(x){const P=Math.abs(c-x.time);if(null!==f&&f<P)break;(!h||null===f||f>=P)&&(f=P,h={time:x.time,segmentIndex:T,partIndex:null})}}}return h}},{name:"Playlist",run:(u,r,s,a,c)=>r.syncInfo?{time:r.syncInfo.time,segmentIndex:r.syncInfo.mediaSequence-r.mediaSequence,partIndex:null}:null}];class _u extends J.EventTarget{constructor(r={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const s=new X0,a=new ha(s),c=new ha(s);this.mediaSequenceStorage_={main:s,audio:a,vtt:c},this.logger_=en("SyncController")}getMediaSequenceSync(r){return this.mediaSequenceStorage_[r]||null}getSyncPoint(r,s,a,c,h){if(s!==1/0)return vp.find(({name:T})=>"VOD"===T).run(this,r,s);const f=this.runStrategies_(r,s,a,c,h);if(!f.length)return null;for(const y of f){const{syncPoint:T,strategy:E}=y,{segmentIndex:x,time:P}=T;if(x<0)continue;const q=P,L=q+r.segments[x].duration;if(this.logger_(`Strategy: ${E}. Current time: ${c}. selected segment: ${x}. Time: [${q} -> ${L}]}`),c>=q&&c<L)return this.logger_("Found sync point with exact match: ",T),T}return this.selectSyncPoint_(f,{key:"time",value:c})}getExpiredTime(r,s){if(!r||!r.segments)return null;const a=this.runStrategies_(r,s,r.discontinuitySequence,0);if(!a.length)return null;const c=this.selectSyncPoint_(a,{key:"segmentIndex",value:0});return c.segmentIndex>0&&(c.time*=-1),Math.abs(c.time+Sl({defaultDuration:r.targetDuration,durationList:r.segments,startIndex:c.segmentIndex,endIndex:0}))}runStrategies_(r,s,a,c,h){const f=[];for(let y=0;y<vp.length;y++){const T=vp[y],E=T.run(this,r,s,a,c,h);E&&(E.strategy=T.name,f.push({strategy:T.name,syncPoint:E}))}return f}selectSyncPoint_(r,s){let a=r[0].syncPoint,c=Math.abs(r[0].syncPoint[s.key]-s.value),h=r[0].strategy;for(let f=1;f<r.length;f++){const y=Math.abs(r[f].syncPoint[s.key]-s.value);y<c&&(c=y,a=r[f].syncPoint,h=r[f].strategy)}return this.logger_(`syncPoint for [${s.key}: ${s.value}] chosen with strategy [${h}]: [time:${a.time}, segmentIndex:${a.segmentIndex}`+("number"==typeof a.partIndex?`,partIndex:${a.partIndex}`:"")+"]"),a}saveExpiredSegmentInfo(r,s){const a=s.mediaSequence-r.mediaSequence;if(a>86400)J.log.warn(`Not saving expired segment info. Media sequence gap ${a} is too large.`);else for(let c=a-1;c>=0;c--){const h=r.segments[c];if(h&&typeof h.start<"u"){s.syncInfo={mediaSequence:r.mediaSequence+c,time:h.start},this.logger_(`playlist refresh sync: [time:${s.syncInfo.time}, mediaSequence: ${s.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(r){if(this.timelineToDatetimeMappings={},r.segments&&r.segments.length&&r.segments[0].dateTimeObject){const s=r.segments[0],a=s.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[s.timeline]=-a}}saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:s}){const a=this.calculateSegmentTimeMapping_(r,r.timingInfo,s),c=r.segment;a&&(this.saveDiscontinuitySyncInfo_(r),r.playlist.syncInfo||(r.playlist.syncInfo={mediaSequence:r.playlist.mediaSequence+r.mediaIndex,time:c.start}));const h=c.dateTimeObject;c.discontinuity&&s&&h&&(this.timelineToDatetimeMappings[c.timeline]=-h.getTime()/1e3)}timestampOffsetForTimeline(r){return typeof this.timelines[r]>"u"?null:this.timelines[r].time}mappingForTimeline(r){return typeof this.timelines[r]>"u"?null:this.timelines[r].mapping}calculateSegmentTimeMapping_(r,s,a){const c=r.segment,h=r.part;let y,T,f=this.timelines[r.timeline];if("number"==typeof r.timestampOffset)f={time:r.startOfSegment,mapping:r.startOfSegment-s.start},a&&(this.timelines[r.timeline]=f,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${r.timeline}: [time: ${f.time}] [mapping: ${f.mapping}]`)),y=r.startOfSegment,T=s.end+f.mapping;else{if(!f)return!1;y=s.start+f.mapping,T=s.end+f.mapping}return h&&(h.start=y,h.end=T),(!c.start||y<c.start)&&(c.start=y),c.end=T,!0}saveDiscontinuitySyncInfo_(r){const s=r.playlist,a=r.segment;if(a.discontinuity)this.discontinuities[a.timeline]={time:a.start,accuracy:0};else if(s.discontinuityStarts&&s.discontinuityStarts.length)for(let c=0;c<s.discontinuityStarts.length;c++){const h=s.discontinuityStarts[c],f=s.discontinuitySequence+c+1,y=h-r.mediaIndex,T=Math.abs(y);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>T){let E;E=y<0?a.start-Sl({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:r.mediaIndex,endIndex:h}):a.end+Sl({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:r.mediaIndex+1,endIndex:h}),this.discontinuities[f]={time:E,accuracy:T}}}}dispose(){this.trigger("dispose"),this.off()}}class Y0 extends J.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(r){this.pendingTimelineChanges_[r]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:r,from:s,to:a}){return"number"==typeof s&&"number"==typeof a&&(this.pendingTimelineChanges_[r]={type:r,from:s,to:a},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[r]}lastTimelineChange({type:r,from:s,to:a}){return"number"==typeof s&&"number"==typeof a&&(this.lastTimelineChanges_[r]={type:r,from:s,to:a},delete this.pendingTimelineChanges_[r],this.trigger({type:"timelinechange",metadata:{timelineChangeInfo:{from:s,to:a}}})),this.lastTimelineChanges_[r]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const uT=_0(b0(function(){var u=function(){function X(){this.listeners={}}var te=X.prototype;return te.on=function(Q,ge){this.listeners[Q]||(this.listeners[Q]=[]),this.listeners[Q].push(ge)},te.off=function(Q,ge){if(!this.listeners[Q])return!1;var _e=this.listeners[Q].indexOf(ge);return this.listeners[Q]=this.listeners[Q].slice(0),this.listeners[Q].splice(_e,1),_e>-1},te.trigger=function(Q){var ge=this.listeners[Q];if(ge)if(2===arguments.length)for(var _e=ge.length,W=0;W<_e;++W)ge[W].call(this,arguments[1]);else for(var Ee=Array.prototype.slice.call(arguments,1),st=ge.length,Qe=0;Qe<st;++Qe)ge[Qe].apply(this,Ee)},te.dispose=function(){this.listeners={}},te.pipe=function(Q){this.on("data",function(ge){Q.push(ge)})},X}();let a=null;class c{constructor(te){let ne,Q,ge;a||(a=function(){const X=[[[],[],[],[],[]],[[],[],[],[],[]]],te=X[0],ne=X[1],Q=te[4],ge=ne[4];let _e,W,Ee;const st=[],Qe=[];let Vt,qn,hr,kn,ct,cn;for(_e=0;_e<256;_e++)Qe[(st[_e]=_e<<1^283*(_e>>7))^_e]=_e;for(W=Ee=0;!Q[W];W^=Vt||1,Ee=Qe[Ee]||1)for(kn=Ee^Ee<<1^Ee<<2^Ee<<3^Ee<<4,kn=kn>>8^255&kn^99,Q[W]=kn,ge[kn]=W,hr=st[qn=st[Vt=st[W]]],cn=16843009*hr^65537*qn^257*Vt^16843008*W,ct=257*st[kn]^16843008*kn,_e=0;_e<4;_e++)te[_e][W]=ct=ct<<24^ct>>>8,ne[_e][kn]=cn=cn<<24^cn>>>8;for(_e=0;_e<5;_e++)te[_e]=te[_e].slice(0),ne[_e]=ne[_e].slice(0);return X}()),this._tables=[[a[0][0].slice(),a[0][1].slice(),a[0][2].slice(),a[0][3].slice(),a[0][4].slice()],[a[1][0].slice(),a[1][1].slice(),a[1][2].slice(),a[1][3].slice(),a[1][4].slice()]];const _e=this._tables[0][4],W=this._tables[1],Ee=te.length;let st=1;if(4!==Ee&&6!==Ee&&8!==Ee)throw new Error("Invalid aes key size");const Qe=te.slice(0),Vt=[];for(this._key=[Qe,Vt],ne=Ee;ne<4*Ee+28;ne++)ge=Qe[ne-1],(ne%Ee==0||8===Ee&&ne%Ee==4)&&(ge=_e[ge>>>24]<<24^_e[ge>>16&255]<<16^_e[ge>>8&255]<<8^_e[255&ge],ne%Ee==0&&(ge=ge<<8^ge>>>24^st<<24,st=st<<1^283*(st>>7))),Qe[ne]=Qe[ne-Ee]^ge;for(Q=0;ne;Q++,ne--)ge=Qe[3&Q?ne:ne-4],Vt[Q]=ne<=4||Q<4?ge:W[0][_e[ge>>>24]]^W[1][_e[ge>>16&255]]^W[2][_e[ge>>8&255]]^W[3][_e[255&ge]]}decrypt(te,ne,Q,ge,_e,W){const Ee=this._key[1];let hr,kn,ct,st=te^Ee[0],Qe=ge^Ee[1],Vt=Q^Ee[2],qn=ne^Ee[3];const cn=Ee.length/4-2;let Ai,Mi=4;const To=this._tables[1],ki=To[0],ni=To[1],ma=To[2],Co=To[3],ms=To[4];for(Ai=0;Ai<cn;Ai++)hr=ki[st>>>24]^ni[Qe>>16&255]^ma[Vt>>8&255]^Co[255&qn]^Ee[Mi],kn=ki[Qe>>>24]^ni[Vt>>16&255]^ma[qn>>8&255]^Co[255&st]^Ee[Mi+1],ct=ki[Vt>>>24]^ni[qn>>16&255]^ma[st>>8&255]^Co[255&Qe]^Ee[Mi+2],qn=ki[qn>>>24]^ni[st>>16&255]^ma[Qe>>8&255]^Co[255&Vt]^Ee[Mi+3],Mi+=4,st=hr,Qe=kn,Vt=ct;for(Ai=0;Ai<4;Ai++)_e[(3&-Ai)+W]=ms[st>>>24]<<24^ms[Qe>>16&255]<<16^ms[Vt>>8&255]<<8^ms[255&qn]^Ee[Mi++],hr=st,st=Qe,Qe=Vt,Vt=qn,qn=hr}}class h extends u{constructor(){super(u),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null}push(te){this.jobs.push(te),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const f=function(X){return X<<24|(65280&X)<<8|(16711680&X)>>8|X>>>24};class T{constructor(te,ne,Q,ge){const _e=T.STEP,W=new Int32Array(te.buffer),Ee=new Uint8Array(te.byteLength);let st=0;for(this.asyncStream_=new h,this.asyncStream_.push(this.decryptChunk_(W.subarray(st,st+_e),ne,Q,Ee)),st=_e;st<W.length;st+=_e)Q=new Uint32Array([f(W[st-4]),f(W[st-3]),f(W[st-2]),f(W[st-1])]),this.asyncStream_.push(this.decryptChunk_(W.subarray(st,st+_e),ne,Q,Ee));this.asyncStream_.push(function(){ge(null,function r(X){return X.subarray(0,X.byteLength-X[X.byteLength-1])}(Ee))})}static get STEP(){return 32e3}decryptChunk_(te,ne,Q,ge){return function(){const _e=function(X,te,ne){const Q=new Int32Array(X.buffer,X.byteOffset,X.byteLength>>2),ge=new c(Array.prototype.slice.call(te)),_e=new Uint8Array(X.byteLength),W=new Int32Array(_e.buffer);let Ee,st,Qe,Vt,qn,hr,kn,ct,cn;for(Ee=ne[0],st=ne[1],Qe=ne[2],Vt=ne[3],cn=0;cn<Q.length;cn+=4)qn=f(Q[cn]),hr=f(Q[cn+1]),kn=f(Q[cn+2]),ct=f(Q[cn+3]),ge.decrypt(qn,hr,kn,ct,W,cn),W[cn]=f(W[cn]^Ee),W[cn+1]=f(W[cn+1]^st),W[cn+2]=f(W[cn+2]^Qe),W[cn+3]=f(W[cn+3]^Vt),Ee=qn,st=hr,Qe=kn,Vt=ct;return _e}(te,ne,Q);ge.set(_e,te.byteOffset)}}}var X,E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q=(typeof window<"u"?window:typeof E<"u"?E:typeof self<"u"?self:{}).BigInt||Number;q("0x1"),q("0x100"),q("0x10000"),q("0x1000000"),q("0x100000000"),q("0x10000000000"),q("0x1000000000000"),q("0x100000000000000"),q("0x10000000000000000"),X=new Uint16Array([65484]),new Uint8Array(X.buffer,X.byteOffset,X.byteLength);self.onmessage=function(X){const te=X.data,ne=new Uint8Array(te.encrypted.bytes,te.encrypted.byteOffset,te.encrypted.byteLength),Q=new Uint32Array(te.key.bytes,te.key.byteOffset,te.key.byteLength/4),ge=new Uint32Array(te.iv.bytes,te.iv.byteOffset,te.iv.byteLength/4);new T(ne,Q,ge,function(_e,W){self.postMessage(function(X){const te={};return Object.keys(X).forEach(ne=>{const Q=X[ne];te[ne]=function(te){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(te):te&&te.buffer instanceof ArrayBuffer}(Q)?{bytes:Q.buffer,byteOffset:Q.byteOffset,byteLength:Q.byteLength}:Q}),te}({source:te.source,decrypted:W}),[W.buffer])})}}));var lT=fu(uT);const cT=u=>{let r=u.default?"main":"alternative";return u.characteristics&&u.characteristics.indexOf("public.accessibility.describes-video")>=0&&(r="main-desc"),r},Q0=(u,r)=>{u.abort(),u.pause(),r&&r.activePlaylistLoader&&(r.activePlaylistLoader.pause(),r.activePlaylistLoader=null)},zd=(u,r)=>{r.activePlaylistLoader=u,u.load()},bo={AUDIO:(u,r)=>()=>{const{mediaTypes:{[u]:s},excludePlaylist:a}=r,c=s.activeTrack(),h=s.activeGroup(),f=(h.filter(T=>T.default)[0]||h[0]).id,y=s.tracks[f];if(c!==y){J.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const T in s.tracks)s.tracks[T].enabled=s.tracks[T]===y;s.onTrackChanged()}else a({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(u,r)=>()=>{const{mediaTypes:{[u]:s}}=r;J.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const a=s.activeTrack();a&&(a.mode="disabled"),s.onTrackChanged()}},_p={AUDIO:(u,r,s)=>{if(!r)return;const{tech:a,requestOptions:c,segmentLoaders:{[u]:h}}=s;r.on("loadedmetadata",()=>{const f=r.media();h.playlist(f,c),(!a.paused()||f.endList&&"none"!==a.preload())&&h.load()}),r.on("loadedplaylist",()=>{h.playlist(r.media(),c),a.paused()||h.load()}),r.on("error",bo[u](u,s))},SUBTITLES:(u,r,s)=>{const{tech:a,requestOptions:c,segmentLoaders:{[u]:h},mediaTypes:{[u]:f}}=s;r.on("loadedmetadata",()=>{const y=r.media();h.playlist(y,c),h.track(f.activeTrack()),(!a.paused()||y.endList&&"none"!==a.preload())&&h.load()}),r.on("loadedplaylist",()=>{h.playlist(r.media(),c),a.paused()||h.load()}),r.on("error",bo[u](u,s))}},Z0={AUDIO:(u,r)=>{const{vhs:s,sourceType:a,segmentLoaders:{[u]:c},requestOptions:h,main:{mediaGroups:f},mediaTypes:{[u]:{groups:y,tracks:T,logger_:E}},mainPlaylistLoader:x}=r,P=Md(x.main);(!f[u]||0===Object.keys(f[u]).length)&&(f[u]={main:{default:{default:!0}}},P&&(f[u].main.default.playlists=x.main.playlists));for(const V in f[u]){y[V]||(y[V]=[]);for(const q in f[u][V]){let X,L=f[u][V][q];if(P?(E(`AUDIO group '${V}' label '${q}' is a main playlist`),L.isMainPlaylist=!0,X=null):X="vhs-json"===a&&L.playlists?new du(L.playlists[0],s,h):L.resolvedUri?new du(L.resolvedUri,s,h):L.playlists&&"dash"===a?new sp(L.playlists[0],s,h,x):null,L=tn({id:q,playlistLoader:X},L),_p[u](u,L.playlistLoader,r),y[V].push(L),typeof T[q]>"u"){const te=new J.AudioTrack({id:q,kind:cT(L),enabled:!1,language:L.language,default:L.default,label:q});T[q]=te}}}c.on("error",bo[u](u,r))},SUBTITLES:(u,r)=>{const{tech:s,vhs:a,sourceType:c,segmentLoaders:{[u]:h},requestOptions:f,main:{mediaGroups:y},mediaTypes:{[u]:{groups:T,tracks:E}},mainPlaylistLoader:x}=r;for(const P in y[u]){T[P]||(T[P]=[]);for(const V in y[u][P]){if(!a.options_.useForcedSubtitles&&y[u][P][V].forced)continue;let L,q=y[u][P][V];if("hls"===c)L=new du(q.resolvedUri,a,f);else if("dash"===c){if(!q.playlists.filter(te=>te.excludeUntil!==1/0).length)return;L=new sp(q.playlists[0],a,f,x)}else"vhs-json"===c&&(L=new du(q.playlists?q.playlists[0]:q.resolvedUri,a,f));if(q=tn({id:V,playlistLoader:L},q),_p[u](u,q.playlistLoader,r),T[P].push(q),typeof E[V]>"u"){const X=s.addRemoteTextTrack({id:V,kind:"subtitles",default:q.default&&q.autoselect,language:q.language,label:V},!1).track;E[V]=X}}}h.on("error",bo[u](u,r))},"CLOSED-CAPTIONS":(u,r)=>{const{tech:s,main:{mediaGroups:a},mediaTypes:{[u]:{groups:c,tracks:h}}}=r;for(const f in a[u]){c[f]||(c[f]=[]);for(const y in a[u][f]){const T=a[u][f][y];if(!/^(?:CC|SERVICE)/.test(T.instreamId))continue;const E=s.options_.vhs&&s.options_.vhs.captionServices||{};let x={label:y,language:T.language,instreamId:T.instreamId,default:T.default&&T.autoselect};if(E[x.instreamId]&&(x=tn(x,E[x.instreamId])),void 0===x.default&&delete x.default,c[f].push(tn({id:y},T)),typeof h[y]>"u"){const P=s.addRemoteTextTrack({id:x.instreamId,kind:"captions",default:x.default,language:x.language,label:x.label},!1).track;h[y]=P}}}}},Gd=(u,r)=>{for(let s=0;s<u.length;s++)if(oa(r,u[s])||u[s].playlists&&Gd(u[s].playlists,r))return!0;return!1},dT={AUDIO:(u,r)=>()=>{const{mediaTypes:{[u]:{tracks:s}}}=r;for(const a in s)if(s[a].enabled)return s[a];return null},SUBTITLES:(u,r)=>()=>{const{mediaTypes:{[u]:{tracks:s}}}=r;for(const a in s)if("showing"===s[a].mode||"hidden"===s[a].mode)return s[a];return null}};class hT{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(r){1===r&&(this.version_=r)}set ttl(r){this.ttl_=r||300}set reloadUri(r){r&&(this.reloadUri_=ei(this.reloadUri_,r))}set priority(r){r&&r.length&&(this.priority_=r)}set pathwayClones(r){r&&r.length&&(this.pathwayClones_=new Map(r.map(s=>[s.ID,s])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class Tp extends J.EventTarget{constructor(r,s){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new hT,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=en("Content Steering"),this.xhr_=r,this.getBandwidth_=s}assignTagProperties(r,s){this.manifestType_=s.serverUri?"HLS":"DASH";const a=s.serverUri||s.serverURL;if(!a)return this.logger_(`steering manifest URL is ${a}, cannot request steering manifest.`),void this.trigger("error");a.startsWith("data:")?this.decodeDataUriManifest_(a.substring(a.indexOf(",")+1)):(this.steeringManifest.reloadUri=ei(r,a),this.defaultPathway=s.pathwayId||s.defaultServiceLocation,this.queryBeforeStart=s.queryBeforeStart,this.proxyServerUrl_=s.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering"))}requestSteeringManifest(r){const s=this.steeringManifest.reloadUri;if(!s)return;const a=r?s:this.getRequestURI(s);if(!a)return this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),void this.dispose();const c={contentSteeringInfo:{uri:a}};this.trigger({type:"contentsteeringloadstart",metadata:c}),this.request_=this.xhr_({uri:a,requestType:"content-steering-manifest"},(h,f)=>{if(h){if(410===f.status)return this.logger_(`manifest request 410 ${h}.`),this.logger_(`There will be no more content steering requests to ${a} this session.`),void this.excludedSteeringManifestURLs.add(a);if(429===f.status){const E=f.responseHeaders["retry-after"];return this.logger_(`manifest request 429 ${h}.`),this.logger_(`content steering will retry in ${E} seconds.`),void this.startTTLTimeout_(parseInt(E,10))}return this.logger_(`manifest failed to load ${h}.`),void this.startTTLTimeout_()}let y;this.trigger({type:"contentsteeringloadcomplete",metadata:c});try{y=JSON.parse(this.request_.responseText)}catch(E){this.trigger({type:"error",metadata:{errorType:J.Error.StreamingContentSteeringParserError,error:E}})}this.assignSteeringProperties_(y),this.trigger({type:"contentsteeringparsed",metadata:{contentSteeringInfo:c.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}}}),this.startTTLTimeout_()})}setProxyServerUrl_(r){const s=new(M().URL)(r),a=new(M().URL)(this.proxyServerUrl_);return a.searchParams.set("url",encodeURI(s.toString())),this.setSteeringParams_(a.toString())}decodeDataUriManifest_(r){const s=JSON.parse(M().atob(r));this.assignSteeringProperties_(s)}setSteeringParams_(r){const s=new(M().URL)(r),a=this.getPathway(),c=this.getBandwidth_();return a&&s.searchParams.set(`_${this.manifestType_}_pathway`,a),c&&s.searchParams.set(`_${this.manifestType_}_throughput`,c),s.toString()}assignSteeringProperties_(r){if(this.steeringManifest.version=r.VERSION,!this.steeringManifest.version)return this.logger_(`manifest version is ${r.VERSION}, which is not supported.`),void this.trigger("error");this.steeringManifest.ttl=r.TTL,this.steeringManifest.reloadUri=r["RELOAD-URI"],this.steeringManifest.priority=r["PATHWAY-PRIORITY"]||r["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=r["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const a=(c=>{for(const h of c)if(this.availablePathways_.has(h))return h;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==a&&(this.currentPathway=a,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(r){if(!r)return null;const s=c=>this.excludedSteeringManifestURLs.has(c);if(this.proxyServerUrl_){const c=this.setProxyServerUrl_(r);if(!s(c))return c}const a=this.setSteeringParams_(r);return s(a)?null:a}startTTLTimeout_(r=this.steeringManifest.ttl){const s=1e3*r;this.ttlTimeout_=M().setTimeout(()=>{this.requestSteeringManifest()},s)}clearTTLTimeout_(){M().clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new hT}addAvailablePathway(r){r&&this.availablePathways_.add(r)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(r){return this.availablePathways_.delete(r)}didDASHTagChange(r,s){return!s&&this.steeringManifest.reloadUri||s&&(ei(r,s.serverURL)!==this.steeringManifest.reloadUri||s.defaultServiceLocation!==this.defaultPathway||s.queryBeforeStart!==this.queryBeforeStart||s.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}let Yi;const ty=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],ny=function(u){return this.audioSegmentLoader_[u]+this.mainSegmentLoader_[u]};class pT extends J.EventTarget{constructor(r){super();const{src:s,withCredentials:a,tech:c,bandwidth:h,externVhs:f,useCueTags:y,playlistExclusionDuration:T,enableLowInitialPlaylist:E,sourceType:x,cacheEncryptionKeys:P,bufferBasedABR:V,leastPixelDiffSelector:q,captionServices:L}=r;if(!s)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:X}=r;(null===X||typeof X>"u")&&(X=1/0),Yi=f,this.bufferBasedABR=!!V,this.leastPixelDiffSelector=!!q,this.withCredentials=a,this.tech_=c,this.vhs_=c.vhs,this.player_=r.player_,this.sourceType_=x,this.useCueTags_=y,this.playlistExclusionDuration=T,this.maxPlaylistRetries=X,this.enableLowInitialPlaylist=E,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:a,maxPlaylistRetries:X,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{const u={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{u[r]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ir,activeTrack:Ir,getActiveGroup:Ir,onGroupChanged:Ir,onTrackChanged:Ir,lastTrack_:null,logger_:en(`MediaGroups[${r}]`)}}),u})(),this.mediaSource=new(M().MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=Yn(),this.hasPlayed_=!1,this.syncController_=new _u(r),this.segmentMetadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new lT,this.sourceUpdater_=new iT(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new Y0,this.keyStatusMap_=new Map;const te={vhs:this.vhs_,parse708captions:r.parse708captions,useDtsForTimestampOffset:r.useDtsForTimestampOffset,captionServices:L,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:h,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:P,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:r.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_="dash"===this.sourceType_?new sp(s,this.vhs_,tn(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new du(s,this.vhs_,tn(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new jl(tn(te,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),r),this.audioSegmentLoader_=new jl(tn(te,{loaderType:"audio"}),r),this.subtitleSegmentLoader_=new aT(tn(te,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((ge,_e)=>{function W(){c.off("vttjserror",Ee),ge()}function Ee(){c.off("vttjsloaded",W),_e()}c.one("vttjsloaded",W),c.one("vttjserror",Ee),c.addWebVttScript_()})}),r),this.contentSteeringController_=new Tp(this.vhs_.xhr,()=>this.mainSegmentLoader_.bandwidth),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),ty.forEach(ge=>{this[ge+"_"]=ny.bind(this,ge)}),this.logger_=en("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const Q="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(Q,()=>{const ge=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-ge,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const r=this.mainAppendsToLoadedData_(),s=this.audioAppendsToLoadedData_();return-1===r||-1===s?-1:r+s}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(r="abr"){const s=this.selectPlaylist();s&&this.shouldSwitchToMedia_(s)&&this.switchMedia_(s,r)}switchMedia_(r,s,a){const c=this.media(),h=c&&(c.id||c.uri),f=r&&(r.id||r.uri);h&&h!==f&&(this.logger_(`switch media ${h} -> ${f} from ${s}`),this.trigger({type:"renditionselected",metadata:{renditionInfo:{id:f,bandwidth:r.attributes.BANDWIDTH,resolution:r.attributes.RESOLUTION,codecs:r.attributes.CODECS},cause:s}}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${s}`})),this.mainPlaylistLoader_.media(r,a)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{const s=this.mediaTypes_[r],a=s?s.activeGroup():null,c=this.contentSteeringController_.getPathway();if(a&&c){const f=(a.length?a[0].playlists:a.playlists).filter(y=>y.attributes.serviceLocation===c);f.length&&this.mediaTypes_[r].activePlaylistLoader.media(f[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=M().setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(M().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const r=this.main(),s=r&&r.playlists||[];if(!r||!r.mediaGroups||!r.mediaGroups.AUDIO)return s;const a=r.mediaGroups.AUDIO,c=Object.keys(a);let h;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)h=this.mediaTypes_.AUDIO.activeTrack();else{const y=a.main||c.length&&a[c[0]];for(const T in y)if(y[T].default){h={label:T};break}}if(!h)return s;const f=[];for(const y in a)if(a[y][h.label]){const T=a[y][h.label];if(T.playlists&&T.playlists.length)f.push.apply(f,T.playlists);else if(T.uri)f.push(T);else if(r.playlists.length)for(let E=0;E<r.playlists.length;E++){const x=r.playlists[E];x.attributes&&x.attributes.AUDIO&&x.attributes.AUDIO===y&&f.push(x)}}return f.length?f:s}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const s=this.mainPlaylistLoader_.media(),a=1.5*s.targetDuration*1e3;this.requestOptions_.timeout=mo(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?0:a,s.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(s,this.requestOptions_),this.mainSegmentLoader_.load()),(u=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(E=>{Z0[E](E,u)});const{mediaTypes:r,mainPlaylistLoader:s,tech:a,vhs:c,segmentLoaders:{AUDIO:h,main:f}}=u;["AUDIO","SUBTITLES"].forEach(E=>{r[E].activeGroup=((u,r)=>s=>{const{mainPlaylistLoader:a,mediaTypes:{[u]:{groups:c}}}=r,h=a.media();if(!h)return null;let f=null;h.attributes[u]&&(f=c[h.attributes[u]]);const y=Object.keys(c);if(!f)if("AUDIO"===u&&y.length>1&&Md(r.main))for(let T=0;T<y.length;T++){const E=c[y[T]];if(Gd(E,h)){f=E;break}}else c.main?f=c.main:1===y.length&&(f=c[y[0]]);return typeof s>"u"?f:null!==s&&f&&f.filter(T=>T.id===s.id)[0]||null})(E,u),r[E].activeTrack=dT[E](E,u),r[E].onGroupChanged=((u,r)=>()=>{const{segmentLoaders:{[u]:s,main:a},mediaTypes:{[u]:c}}=r,h=c.activeTrack(),f=c.getActiveGroup(),y=c.activePlaylistLoader,T=c.lastGroup_;if((!f||!T||f.id!==T.id)&&(c.lastGroup_=f,c.lastTrack_=h,Q0(s,c),f&&!f.isMainPlaylist)){if(!f.playlistLoader)return void(y&&a.resetEverything());s.resyncLoader(),zd(f.playlistLoader,c)}})(E,u),r[E].onGroupChanging=((u,r)=>()=>{const{segmentLoaders:{[u]:s},mediaTypes:{[u]:a}}=r;a.lastGroup_=null,s.abort(),s.pause()})(E,u),r[E].onTrackChanged=((u,r)=>()=>{const{mainPlaylistLoader:s,segmentLoaders:{[u]:a,main:c},mediaTypes:{[u]:h}}=r,f=h.activeTrack(),y=h.getActiveGroup(),T=h.activePlaylistLoader,E=h.lastTrack_;if((!E||!f||E.id!==f.id)&&(h.lastGroup_=y,h.lastTrack_=f,Q0(a,h),y)){if(y.isMainPlaylist){if(!f||!E||f.id===E.id)return;const x=r.vhs.playlistController_,P=x.selectPlaylist();if(x.media()===P)return;return h.logger_(`track change. Switching main audio from ${E.id} to ${f.id}`),s.pause(),c.resetEverything(),void x.fastQualityChange_(P)}if("AUDIO"===u){if(!y.playlistLoader)return c.setAudio(!0),void c.resetEverything();a.setAudio(!0),c.setAudio(!1)}if(T===y.playlistLoader)return void zd(y.playlistLoader,h);a.track&&a.track(f),a.resetEverything(),zd(y.playlistLoader,h)}})(E,u),r[E].getActiveGroup=((u,{mediaTypes:r})=>()=>{const s=r[u].activeTrack();return s?r[u].activeGroup(s):null})(E,u)});const y=r.AUDIO.activeGroup();if(y){const E=(y.filter(P=>P.default)[0]||y[0]).id;r.AUDIO.tracks[E].enabled=!0,r.AUDIO.onGroupChanged(),r.AUDIO.onTrackChanged(),r.AUDIO.getActiveGroup().playlistLoader?(f.setAudio(!1),h.setAudio(!0)):f.setAudio(!0)}s.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(E=>r[E].onGroupChanged())}),s.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(E=>r[E].onGroupChanging())});const T=()=>{r.AUDIO.onTrackChanged(),a.trigger({type:"usage",name:"vhs-audio-change"})};a.audioTracks().addEventListener("change",T),a.remoteTextTracks().addEventListener("change",r.SUBTITLES.onTrackChanged),c.on("dispose",()=>{a.audioTracks().removeEventListener("change",T),a.remoteTextTracks().removeEventListener("change",r.SUBTITLES.onTrackChanged)}),a.clearTracks("audio");for(const E in r.AUDIO.tracks)a.audioTracks().addTrack(r.AUDIO.tracks[E])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),s),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let s=this.mainPlaylistLoader_.media();if(!s){let a;if(this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(a=this.selectInitialPlaylist()),a||(a=this.selectPlaylist()),!a||!this.shouldSwitchToMedia_(a)||(this.initialMedia_=a,this.switchMedia_(this.initialMedia_,"initial"),"vhs-json"!==this.sourceType_||!this.initialMedia_.segments))return;s=this.initialMedia_}this.handleUpdatedMediaPlaylist(s)}),this.mainPlaylistLoader_.on("error",()=>{const s=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:s.playlist,error:s})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const s=this.mainPlaylistLoader_.media(),a=1.5*s.targetDuration*1e3;this.requestOptions_.timeout=mo(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?0:a,"dash"===this.sourceType_&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(s,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const s=this.mainPlaylistLoader_.media();"playlist-unchanged"!==s.lastExcludeReason_&&this.stuckAtPlaylistEnd_(s)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(s=>{this.mainPlaylistLoader_.on(s,a=>{this.player_.trigger(Je({},a))})})}handleUpdatedMediaPlaylist(r){this.useCueTags_&&this.updateAdCues_(r),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(r,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!r.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(r,s){const a=r.mediaGroups||{};let c=!0;const h=Object.keys(a.AUDIO);for(const f in a.AUDIO)for(const y in a.AUDIO[f])a.AUDIO[f][y].uri||(c=!1);c&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Yi.Playlist.isAes(s)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),h.length&&Object.keys(a.AUDIO[h[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(r){const s=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,a=this.tech_.currentTime(),c=this.bufferLowWaterLine(),h=this.bufferHighWaterLine();return function({currentPlaylist:u,buffered:r,currentTime:s,nextPlaylist:a,bufferLowWaterLine:c,bufferHighWaterLine:h,duration:f,bufferBasedABR:y,log:T}){if(!a)return J.log.warn("We received no playlist to switch to. Please check your stream."),!1;const E=`allowing switch ${u&&u.id||"null"} -> ${a.id}`;if(!u)return T(`${E} as current playlist is not set`),!0;if(a.id===u.id)return!1;const x=!!Ls(r,s).length;if(!u.endList)return x||"number"!=typeof u.partTargetDuration?(T(`${E} as current playlist is live`),!0):(T(`not ${E} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const P=zm(r,s),V=y?Er.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Er.MAX_BUFFER_LOW_WATER_LINE;if(f<V)return T(`${E} as duration < max low water line (${f} < ${V})`),!0;const q=a.attributes.BANDWIDTH,L=u.attributes.BANDWIDTH;if(q<L&&(!y||P<h)){let X=`${E} as next bandwidth < current bandwidth (${q} < ${L})`;return y&&(X+=` and forwardBuffer < bufferHighWaterLine (${P} < ${h})`),T(X),!0}if((!y||q>L)&&P>=c){let X=`${E} as forwardBuffer >= bufferLowWaterLine (${P} >= ${c})`;return y&&(X+=` and next bandwidth > current bandwidth (${q} > ${L})`),T(X),!0}return T(`not ${E} as no switching criteria met`),!1}({buffered:this.tech_.buffered(),currentTime:a,currentPlaylist:s,nextPlaylist:r,bufferLowWaterLine:c,bufferHighWaterLine:h,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const a=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:a.playlist,error:a})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",a=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))});const r=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const a=this.getCodecsOrExclude_();a&&this.sourceUpdater_.addOrChangeSourceBuffers(a)};this.mainSegmentLoader_.on("trackinfo",r),this.audioSegmentLoader_.on("trackinfo",r),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(a=>{this.mainSegmentLoader_.on(a,c=>{this.player_.trigger(Je({},c))}),this.audioSegmentLoader_.on(a,c=>{this.player_.trigger(Je({},c))}),this.subtitleSegmentLoader_.on(a,c=>{this.player_.trigger(Je({},c))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(r=this.selectPlaylist()){r&&r===this.mainPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(r,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0)}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(()=>{this.mainSegmentLoader_.load()})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const r=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<r.start(0)?this.tech_.setCurrentTime(r.end(r.length-1)):void 0}setupFirstPlay(){const r=this.mainPlaylistLoader_.media();if(!r||this.tech_.paused()||this.hasPlayed_)return!1;if(!r.endList||r.start){const s=this.seekable();if(!s.length)return!1;const a=s.end(0);let c=a;if(r.start){const h=r.start.timeOffset;c=h<0?Math.max(a+h,s.start(0)):Math.min(a,h)}this.trigger("firstplay"),this.tech_.setCurrentTime(c)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const r=this.tech_.play();typeof r<"u"&&"function"==typeof r.then&&r.then(null,s=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const r=this.inbandTextTracks_.metadataTrack_.cues;if(!r||!r.length)return;const s=this.duration();r[r.length-1].endTime=isNaN(s)||Math.abs(s)===1/0?Number.MAX_VALUE:s}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let r=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const s=this.mainSegmentLoader_.getCurrentMediaInfo_();r=!s||s.hasVideo?r&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}r&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(r){if(!this.seekable().length)return!1;const a=this.syncController_.getExpiredTime(r,this.duration());if(null===a)return!1;const c=Yi.Playlist.playlistEnd(r,a),h=this.tech_.currentTime(),f=this.tech_.buffered();if(!f.length)return c-h<=qr;const y=f.end(f.length-1);return y-h<=qr&&c-y<=qr}excludePlaylist({playlistToExclude:r=this.mainPlaylistLoader_.media(),error:s={},playlistExclusionDuration:a}){if(r=r||this.mainPlaylistLoader_.media(),a=a||s.playlistExclusionDuration||this.playlistExclusionDuration,!r)return this.error=s,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));r.playlistErrors_++;const c=this.mainPlaylistLoader_.main.playlists,h=c.filter(lu),f=1===h.length&&h[0]===r;if(1===c.length&&a!==1/0)return J.log.warn(`Problem encountered with playlist ${r.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(f);if(f){if(this.main().contentSteering){const L=this.pathwayAttribute_(r),X=1e3*this.contentSteeringController_.steeringManifest.ttl;return this.contentSteeringController_.excludePathway(L),this.excludeThenChangePathway_(),void setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(L)},X)}let q=!1;c.forEach(L=>{if(L===r)return;const X=L.excludeUntil;typeof X<"u"&&X!==1/0&&(q=!0,delete L.excludeUntil)}),q&&(J.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let y;y=r.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*a,r.excludeUntil=y,s.reason&&(r.lastExcludeReason_=s.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const T=this.selectPlaylist();if(!T)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(s.internal?this.logger_:J.log.warn)(`${s.internal?"Internal problem":"Problem"} encountered with playlist ${r.id}.${s.message?" "+s.message:""} Switching to playlist ${T.id}.`),T.attributes.AUDIO!==r.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),T.attributes.SUBTITLES!==r.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const P=T.targetDuration/2*1e3||5e3,V="number"==typeof T.lastRequest&&Date.now()-T.lastRequest<=P;return this.switchMedia_(T,"exclude",f||V)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(r,s){const a=[],c="all"===r;(c||"main"===r)&&a.push(this.mainPlaylistLoader_);const h=[];(c||"audio"===r)&&h.push("AUDIO"),(c||"subtitle"===r)&&(h.push("CLOSED-CAPTIONS"),h.push("SUBTITLES")),h.forEach(f=>{const y=this.mediaTypes_[f]&&this.mediaTypes_[f].activePlaylistLoader;y&&a.push(y)}),["main","audio","subtitle"].forEach(f=>{const y=this[`${f}SegmentLoader_`];y&&(r===f||"all"===r)&&a.push(y)}),a.forEach(f=>s.forEach(y=>{"function"==typeof f[y]&&f[y]()}))}setCurrentTime(r){const s=Ls(this.tech_.buffered(),r);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?s&&s.length?r:(this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const r=this.mainPlaylistLoader_.media();return r?r.endList?this.mediaSource?this.mediaSource.duration:Yi.Playlist.duration(r):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let r;if(!this.mainPlaylistLoader_)return;let s=this.mainPlaylistLoader_.media();if(!s)return;let a=this.syncController_.getExpiredTime(s,this.duration());if(null===a)return;const c=this.mainPlaylistLoader_.main,h=Yi.Playlist.seekable(s,a,Yi.Playlist.liveEdgeDelay(c,s));if(0===h.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(s=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),a=this.syncController_.getExpiredTime(s,this.duration()),null===a||(r=Yi.Playlist.seekable(s,a,Yi.Playlist.liveEdgeDelay(c,s)),0===r.length)))return;let f,y;this.seekable_&&this.seekable_.length&&(f=this.seekable_.end(0),y=this.seekable_.start(0)),this.seekable_=r?r.start(0)>h.end(0)||h.start(0)>r.end(0)?h:Yn([[r.start(0)>h.start(0)?r.start(0):h.start(0),r.end(0)<h.end(0)?r.end(0):h.end(0)]]):h,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===f&&this.seekable_.start(0)===y||(this.logger_(`seekable updated [${qm(this.seekable_)}]`),this.trigger({type:"seekablerangeschanged",metadata:{seekableRanges:this.seekable_}}),this.tech_.trigger("seekablechanged"))}updateDuration(r){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,r),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(r){const c=this.seekable();if(!c.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<c.end(c.length-1))&&this.sourceUpdater_.setDuration(c.end(c.length-1)))}const s=this.tech_.buffered();let a=Yi.Playlist.duration(this.mainPlaylistLoader_.media());s.length>0&&(a=Math.max(a,s.end(s.length-1))),this.mediaSource.duration!==a&&this.sourceUpdater_.setDuration(a)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(r=>{const s=this.mediaTypes_[r].groups;for(const a in s)s[a].forEach(c=>{c.playlistLoader&&c.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const r=!!this.mediaTypes_.AUDIO.activePlaylistLoader,s=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),a=!r||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!s||!a)}getCodecsOrExclude_(){const r={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},s=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();r.video=r.main;const a=vo(this.main(),s),c={},h=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(r.main.hasVideo&&(c.video=a.video||r.main.videoCodec||"avc1.4d400d"),r.main.isMuxed&&(c.video+=`,${a.audio||r.main.audioCodec||ft}`),(r.main.hasAudio&&!r.main.isMuxed||r.audio.hasAudio||h)&&(c.audio=a.audio||r.main.audioCodec||r.audio.audioCodec||ft,r.audio.isFmp4=r.main.hasAudio&&!r.main.isMuxed?r.main.isFmp4:r.audio.isFmp4),!c.audio&&!c.video)return void this.excludePlaylist({playlistToExclude:s,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const y={};let T;if(["video","audio"].forEach(function(E){if(c.hasOwnProperty(E)&&!((E,x)=>E?Ue(x):In(x))(r[E].isFmp4,c[E])){const x=r[E].isFmp4?"browser":"muxer";y[x]=y[x]||[],y[x].push(c[E]),"audio"===E&&(T=x)}}),h&&T&&s.attributes.AUDIO){const E=s.attributes.AUDIO;this.main().playlists.forEach(x=>{(x.attributes&&x.attributes.AUDIO)===E&&x!==s&&(x.excludeUntil=1/0)}),this.logger_(`excluding audio group ${E} as ${T} does not support codec(s): "${c.audio}"`)}if(!Object.keys(y).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const E=[];if(["video","audio"].forEach(x=>{const P=(pe(this.sourceUpdater_.codecs[x]||"")[0]||{}).type,V=(pe(c[x]||"")[0]||{}).type;P&&V&&P.toLowerCase()!==V.toLowerCase()&&E.push(`"${this.sourceUpdater_.codecs[x]}" -> "${c[x]}"`)}),E.length)return void this.excludePlaylist({playlistToExclude:s,error:{message:`Codec switching not supported: ${E.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return c}{const E=Object.keys(y).reduce((x,P)=>(x&&(x+=", "),x+`${P} does not support codec(s): "${y[P].join(",")}"`),"")+".";this.excludePlaylist({playlistToExclude:s,error:{internal:!0,message:E},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const r=this.getCodecsOrExclude_();if(!r)return;this.sourceUpdater_.createSourceBuffers(r);const s=[r.video,r.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(s)}excludeUnsupportedVariants_(){const r=this.main().playlists,s=[];Object.keys(r).forEach(a=>{const c=r[a];if(-1!==s.indexOf(c.id))return;s.push(c.id);const h=vo(this.main,c),f=[];h.audio&&!In(h.audio)&&!Ue(h.audio)&&f.push(`audio codec ${h.audio}`),h.video&&!In(h.video)&&!Ue(h.video)&&f.push(`video codec ${h.video}`),h.text&&"stpp.ttml.im1t"===h.text&&f.push(`text codec ${h.text}`),f.length&&(c.excludeUntil=1/0,this.logger_(`excluding ${c.id} for unsupported: ${f.join(", ")}`))})}excludeIncompatibleVariants_(r){const s=[],a=this.main().playlists,c=Rl(pe(r)),h=Ud(c),f=c.video&&pe(c.video)[0]||null,y=c.audio&&pe(c.audio)[0]||null;Object.keys(a).forEach(T=>{const E=a[T];if(-1!==s.indexOf(E.id)||E.excludeUntil===1/0)return;s.push(E.id);const x=[],P=vo(this.mainPlaylistLoader_.main,E),V=Ud(P);if(P.audio||P.video){if(V!==h&&x.push(`codec count "${V}" !== "${h}"`),!this.sourceUpdater_.canChangeType()){const q=P.video&&pe(P.video)[0]||null,L=P.audio&&pe(P.audio)[0]||null;q&&f&&q.type.toLowerCase()!==f.type.toLowerCase()&&x.push(`video codec "${q.type}" !== "${f.type}"`),L&&y&&L.type.toLowerCase()!==y.type.toLowerCase()&&x.push(`audio codec "${L.type}" !== "${y.type}"`)}x.length&&(E.excludeUntil=1/0,this.logger_(`excluding ${E.id}: ${x.join(" && ")}`))}})}updateAdCues_(r){let s=0;const a=this.seekable();a.length&&(s=a.start(0)),function(u,r,s=0){if(!u.segments)return;let c,a=s;for(let h=0;h<u.segments.length;h++){const f=u.segments[h];if(c||(c=G0(r,a+f.duration/2)),c){if("cueIn"in f){c.endTime=a,c.adEndTime=a,a+=f.duration,c=null;continue}if(a<c.endTime){a+=f.duration;continue}c.endTime+=f.duration}else if("cueOut"in f&&(c=new(M().VTTCue)(a,a+f.duration,f.cueOut),c.adStartTime=a,c.adEndTime=a+parseFloat(f.cueOut),r.addCue(c)),"cueOutCont"in f){const[y,T]=f.cueOutCont.split("/").map(parseFloat);c=new(M().VTTCue)(a,a+f.duration,""),c.adStartTime=a-y,c.adEndTime=c.adStartTime+T,r.addCue(c)}a+=f.duration}}(r,this.cueTagsTrack_,s)}goalBufferLength(){const r=this.tech_.currentTime(),s=Er.GOAL_BUFFER_LENGTH,a=Er.GOAL_BUFFER_LENGTH_RATE,c=Math.max(s,Er.MAX_GOAL_BUFFER_LENGTH);return Math.min(s+r*a,c)}bufferLowWaterLine(){const r=this.tech_.currentTime(),s=Er.BUFFER_LOW_WATER_LINE,a=Er.BUFFER_LOW_WATER_LINE_RATE,c=Math.max(s,Er.MAX_BUFFER_LOW_WATER_LINE),h=Math.max(s,Er.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(s+r*a,this.bufferBasedABR?h:c)}bufferHighWaterLine(){return Er.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(r){Ll(this.inbandTextTracks_,"com.apple.streaming",this.tech_),(({inbandTextTracks:u,dateRanges:r})=>{const s=u.metadataTrack_;if(!s)return;const a=M().WebKitDataCue||M().VTTCue;r.forEach(c=>{for(const h of Object.keys(c)){if(Gb.has(h))continue;const f=new a(c.startTime,c.endTime,"");f.id=c.id,f.type="com.apple.quicktime.HLS",f.value={key:pp[h],data:c[h]},("scte35Out"===h||"scte35In"===h)&&(f.value.data=new Uint8Array(f.value.data.match(/[\da-f]{2}/gi)).buffer),s.addCue(f)}c.processDateRange()})})({inbandTextTracks:this.inbandTextTracks_,dateRanges:r})}addMetadataToTextTrack(r,s,a){const c=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();Ll(this.inbandTextTracks_,r,this.tech_),(({inbandTextTracks:u,metadataArray:r,timestampOffset:s,videoDuration:a})=>{if(!r)return;const c=M().WebKitDataCue||M().VTTCue,h=u.metadataTrack_;if(!h||(r.forEach(x=>{const P=x.cueTime+s;"number"!=typeof P||M().isNaN(P)||P<0||!(P<1/0)||!x.frames||!x.frames.length||x.frames.forEach(V=>{const q=new c(P,P,V.value||V.url||V.data||"");q.frame=V,q.value=V,function(u){Object.defineProperties(u.frame,{id:{get:()=>(J.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),u.value.key)},value:{get:()=>(J.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),u.value.data)},privateData:{get:()=>(J.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),u.value.data)}})}(q),h.addCue(q)})}),!h.cues||!h.cues.length))return;const f=h.cues,y=[];for(let x=0;x<f.length;x++)f[x]&&y.push(f[x]);const T=y.reduce((x,P)=>{const V=x[P.startTime]||[];return V.push(P),x[P.startTime]=V,x},{}),E=Object.keys(T).sort((x,P)=>Number(x)-Number(P));E.forEach((x,P)=>{const V=T[x],q=isFinite(a)?a:x,L=Number(E[P+1])||q;V.forEach(X=>{X.endTime=L})})})({inbandTextTracks:this.inbandTextTracks_,metadataArray:s,timestampOffset:c,videoDuration:a})}pathwayAttribute_(r){return r.attributes["PATHWAY-ID"]||r.attributes.serviceLocation}initContentSteeringController_(){const r=this.main();if(r.contentSteering){for(const s of r.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(s));if(this.contentSteeringController_.assignTagProperties(r.uri,r.contentSteering),this.contentSteeringController_.queryBeforeStart)return void this.contentSteeringController_.requestSteeringManifest(!0);this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(s=>{this.contentSteeringController_.on(s,a=>{this.trigger(Je({},a))})}),"dash"===this.sourceType_&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const s=this.main();(this.contentSteeringController_.didDASHTagChange(s.uri,s.contentSteering)||(()=>{const h=this.contentSteeringController_.getAvailablePathways(),f=[];for(const y of s.playlists){const T=y.attributes.serviceLocation;if(T&&(f.push(T),!h.has(T)))return!0}return!(f.length||!h.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const r=this.contentSteeringController_.getPathway();if(!r)return;this.handlePathwayClones_();const a=this.main().playlists,c=new Set;let h=!1;Object.keys(a).forEach(f=>{const y=a[f],T=this.pathwayAttribute_(y),E=T&&r!==T;y.excludeUntil===1/0&&"content-steering"===y.lastExcludeReason_&&!E&&(delete y.excludeUntil,delete y.lastExcludeReason_,h=!0);const P=!y.excludeUntil&&y.excludeUntil!==1/0;!c.has(y.id)&&E&&P&&(c.add(y.id),y.excludeUntil=1/0,y.lastExcludeReason_="content-steering",this.logger_(`excluding ${y.id} for ${y.lastExcludeReason_}`))}),"DASH"===this.contentSteeringController_.manifestType_&&Object.keys(this.mediaTypes_).forEach(f=>{const y=this.mediaTypes_[f];if(y.activePlaylistLoader){const T=y.activePlaylistLoader.media_;T&&T.attributes.serviceLocation!==r&&(h=!0)}}),h&&this.changeSegmentPathway_()}handlePathwayClones_(){const s=this.main().playlists,a=this.contentSteeringController_.currentPathwayClones,c=this.contentSteeringController_.nextPathwayClones;if(a&&a.size||c&&c.size){for(const[f,y]of a.entries())c.get(f)||(this.mainPlaylistLoader_.updateOrDeleteClone(y),this.contentSteeringController_.excludePathway(f));for(const[f,y]of c.entries()){const T=a.get(f);T?this.equalPathwayClones_(T,y)||(this.mainPlaylistLoader_.updateOrDeleteClone(y,!0),this.contentSteeringController_.addAvailablePathway(f)):(s.filter(x=>x.attributes["PATHWAY-ID"]===y["BASE-ID"]).forEach(x=>{this.mainPlaylistLoader_.addClonePathway(y,x)}),this.contentSteeringController_.addAvailablePathway(f))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...c])))}}equalPathwayClones_(r,s){if(r["BASE-ID"]!==s["BASE-ID"]||r.ID!==s.ID||r["URI-REPLACEMENT"].HOST!==s["URI-REPLACEMENT"].HOST)return!1;const a=r["URI-REPLACEMENT"].PARAMS,c=s["URI-REPLACEMENT"].PARAMS;for(const h in a)if(a[h]!==c[h])return!1;for(const h in c)if(a[h]!==c[h])return!1;return!0}changeSegmentPathway_(){const r=this.selectPlaylist();this.pauseLoading(),"DASH"===this.contentSteeringController_.manifestType_&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(r,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let r=0;const s="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(a=>{const c=this.mainPlaylistLoader_.getKeyIdSet(a);!c||!c.size||c.forEach(h=>{const f="usable",y=this.keyStatusMap_.has(h)&&this.keyStatusMap_.get(h)===f;y?y&&a.lastExcludeReason_===s&&a.excludeUntil===1/0&&(delete a.excludeUntil,delete a.lastExcludeReason_,this.logger_(`enabling playlist ${a.id} because key ID ${h} is ${f}`)):(a.excludeUntil!==1/0&&a.lastExcludeReason_!==s&&(a.excludeUntil=1/0,a.lastExcludeReason_=s,this.logger_(`excluding playlist ${a.id} because the key ID ${h} doesn't exist in the keyStatusMap or is not ${f}`)),r++)})}),r>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(a=>{a&&a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height<720&&a.excludeUntil===1/0&&a.lastExcludeReason_===s&&(delete a.excludeUntil,J.log.warn(`enabling non-HD playlist ${a.id} because all playlists were excluded due to ${s} key IDs`))})}addKeyStatus_(r,s){const h=("string"==typeof r?r:(u=>{const r=new Uint8Array(u);return Array.from(r).map(s=>s.toString(16).padStart(2,"0")).join("")})(r)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${s}' with key ID ${h} added to the keyStatusMap`),this.keyStatusMap_.set(h,s)}updatePlaylistByKeyStatus(r,s){this.addKeyStatus_(r,s),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}class Xd{constructor(r,s,a){const{playlistController_:c}=r,h=c.fastQualityChange_.bind(c);if(s.attributes){const f=s.attributes.RESOLUTION;this.width=f&&f.width,this.height=f&&f.height,this.bandwidth=s.attributes.BANDWIDTH,this.frameRate=s.attributes["FRAME-RATE"]}this.codecs=vo(c.main(),s),this.playlist=s,this.id=a,this.enabled=((u,r,s)=>a=>{const c=u.main.playlists[r],h=Id(c),f=lu(c);if(typeof a>"u")return f;a?delete c.disabled:c.disabled=!0;const y={renditionInfo:{id:r,bandwidth:c.attributes.BANDWIDTH,resolution:c.attributes.RESOLUTION,codecs:c.attributes.CODECS},cause:"fast-quality"};return a!==f&&!h&&(s(c),u.trigger(a?{type:"renditionenabled",metadata:y}:{type:"renditiondisabled",metadata:y})),a})(r.playlists,s.id,h)}}const Kd=["seeking","seeked","pause","playing","error"];class Yd extends J.EventTarget{constructor(r){super(),this.playlistController_=r.playlistController,this.tech_=r.tech,this.seekable=r.seekable,this.allowSeeksWithinUnsafeLiveWindow=r.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=r.liveRangeSafeTimeDelta,this.media=r.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=en("PlaybackWatcher"),this.logger_("initialize");const s=()=>this.monitorCurrentTime_(),a=()=>this.monitorCurrentTime_(),c=()=>this.techWaiting_(),h=()=>this.resetTimeUpdate_(),f=this.playlistController_,y=["main","subtitle","audio"],T={};y.forEach(x=>{T[x]={reset:()=>this.resetSegmentDownloads_(x),updateend:()=>this.checkSegmentDownloads_(x)},f[`${x}SegmentLoader_`].on("appendsdone",T[x].updateend),f[`${x}SegmentLoader_`].on("playlistupdate",T[x].reset),this.tech_.on(["seeked","seeking"],T[x].reset)});const E=x=>{["main","audio"].forEach(P=>{f[`${P}SegmentLoader_`][x]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),E("off"))},this.clearSeekingAppendCheck_=()=>E("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),E("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",c),this.tech_.on(Kd,h),this.tech_.on("canplay",a),this.tech_.one("play",s),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",c),this.tech_.off(Kd,h),this.tech_.off("canplay",a),this.tech_.off("play",s),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),y.forEach(x=>{f[`${x}SegmentLoader_`].off("appendsdone",T[x].updateend),f[`${x}SegmentLoader_`].off("playlistupdate",T[x].reset),this.tech_.off(["seeked","seeking"],T[x].reset)}),this.checkCurrentTimeTimeout_&&M().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&M().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=M().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(r){const s=this.playlistController_[`${r}SegmentLoader_`];this[`${r}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${r} loader`),this[`${r}StalledDownloads_`]=0,this[`${r}Buffered_`]=s.buffered_()}checkSegmentDownloads_(r){const s=this.playlistController_,a=s[`${r}SegmentLoader_`],c=a.buffered_(),h=function(u,r){if(u===r)return!1;if(!u&&r||!r&&u||u.length!==r.length)return!0;for(let s=0;s<u.length;s++)if(u.start(s)!==r.start(s)||u.end(s)!==r.end(s))return!0;return!1}(this[`${r}Buffered_`],c);if(this[`${r}Buffered_`]=c,h)return s.trigger({type:"bufferedrangeschanged",metadata:{bufferedRanges:c}}),void this.resetSegmentDownloads_(r);this[`${r}StalledDownloads_`]++,this.logger_(`found #${this[`${r}StalledDownloads_`]} ${r} appends that did not increase buffer (possible stalled download)`,{playlistId:a.playlist_&&a.playlist_.id,buffered:dr(c)}),!(this[`${r}StalledDownloads_`]<10)&&(this.logger_(`${r} loader stalled download exclusion`),this.resetSegmentDownloads_(r),this.tech_.trigger({type:"usage",name:`vhs-${r}-download-exclusion`}),"subtitle"!==r&&s.excludePlaylist({error:{message:`Excessive ${r} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const r=this.tech_.currentTime(),s=this.tech_.buffered();if(this.lastRecordedTime===r&&(!s.length||r+qr>=s.end(s.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&r===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):r===this.lastRecordedTime?this.consecutiveUpdates++:(this.playedRanges_.push(Yn([this.lastRecordedTime,r])),this.playlistController_.trigger({type:"playedrangeschanged",metadata:{playedRanges:this.playedRanges_}}),this.consecutiveUpdates=0,this.lastRecordedTime=r)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const s=this.seekable(),a=this.tech_.currentTime();let h;if(this.afterSeekableWindow_(s,a,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(h=s.end(s.length-1)),this.beforeSeekableWindow_(s,a)){const L=s.start(0);h=L+(L===s.end(0)?0:qr)}if(typeof h<"u")return this.logger_(`Trying to seek outside of seekable at time ${a} with seekable range ${qm(s)}. Seeking to ${h}.`),this.tech_.setCurrentTime(h),!0;const f=this.playlistController_.sourceUpdater_,y=this.tech_.buffered(),T=f.audioBuffer?f.audioBuffered():null,E=f.videoBuffer?f.videoBuffered():null,x=this.media(),P=x.partTargetDuration?x.partTargetDuration:2*(x.targetDuration-Qn),V=[T,E];for(let L=0;L<V.length;L++)if(V[L]&&zm(V[L],a)<P)return!1;const q=po(y,a);return 0!==q.length&&(h=q.start(0)+qr,this.logger_(`Buffered region starts (${q.start(0)})  just beyond seek point (${a}). Seeking to ${h}.`),this.tech_.setCurrentTime(h),!0)}waiting_(){if(this.techWaiting_())return;const r=this.tech_.currentTime(),s=this.tech_.buffered(),a=Ls(s,r);return a.length&&r+3<=a.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(r),this.logger_(`Stopped at ${r} while inside a buffered region [${a.start(0)} -> ${a.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const r=this.seekable(),s=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(r,s)){const y=r.end(r.length-1);return this.logger_(`Fell out of live window at time ${s}. Seeking to live point (seekable end) ${y}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(y),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const a=this.tech_.vhs.playlistController_.sourceUpdater_,c=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:a.audioBuffered(),videoBuffered:a.videoBuffered(),currentTime:s}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const f=po(c,s);return f.length>0&&(this.logger_(`Stopped at ${s} and seeking to ${f.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(s),!0)}afterSeekableWindow_(r,s,a,c=!1){if(!r.length)return!1;let h=r.end(r.length-1)+qr;return!a.endList&&("number"==typeof a.partTargetDuration||c)&&(h=r.end(r.length-1)+3*a.targetDuration),s>h}beforeSeekableWindow_(r,s){return!!(r.length&&r.start(0)>0&&s<r.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:r,audioBuffered:s,currentTime:a}){if(!r)return;let c;if(r.length&&s.length){const h=Ls(r,a-3),f=Ls(r,a),y=Ls(s,a);y.length&&!f.length&&h.length&&(c={start:h.end(0),end:y.end(0)})}else po(r,a).length||(c=this.gapFromVideoUnderflow_(r,a));return!!c&&(this.logger_(`Encountered a gap in video from ${c.start} to ${c.end}. Seeking to current time ${a}`),!0)}skipTheGap_(r){const s=this.tech_.buffered(),a=this.tech_.currentTime(),c=po(s,a);if(this.resetTimeUpdate_(),0===c.length||a!==r)return;this.logger_("skipTheGap_:","currentTime:",a,"scheduled currentTime:",r,"nextRange start:",c.start(0)),this.tech_.setCurrentTime(c.start(0)+Qn);const h={gapInfo:{from:a,to:c.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:h}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(r,s){const a=function(u){if(u.length<2)return Yn();const r=[];for(let s=1;s<u.length;s++){const a=u.end(s-1),c=u.start(s);r.push([a,c])}return Yn(r)}(r);for(let c=0;c<a.length;c++){const h=a.start(c),f=a.end(c);if(s-h<4&&s-h>2)return{start:h,end:f}}return null}}const mi={errorInterval:30,getSource(u){return u(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},pa=function(u,r){let s=0,a=0;const c=tn(mi,r);u.ready(()=>{u.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const h=function(){a&&u.currentTime(a)},f=function(x){null!=x&&(a=u.duration()!==1/0&&u.currentTime()||0,u.one("loadedmetadata",h),u.src(x),u.trigger({type:"usage",name:"vhs-error-reload"}),u.play())},y=function(){if(Date.now()-s<1e3*c.errorInterval)u.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(c.getSource&&"function"==typeof c.getSource)return s=Date.now(),c.getSource.call(u,f);J.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},T=function(){u.off("loadedmetadata",h),u.off("error",y),u.off("dispose",T)};u.on("error",y),u.on("dispose",T),u.reloadSourceOnError=function(x){T(),pa(u,x)}},Fn={PlaylistLoader:du,Playlist:zr,utils:tp,STANDARD_PLAYLIST_SELECTOR:R0,INITIAL_PLAYLIST_SELECTOR:function(){const u=this.playlists.main.playlists.filter(zr.isEnabled);return mu(u,(s,a)=>$d(s,a)),u.filter(s=>!!vo(this.playlists.main,s).video)[0]||null},lastBandwidthSelector:R0,movingAverageBandwidthSelector:function(u){let r=-1,s=-1;if(u<0||u>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let a=this.useDevicePixelRatio&&M().devicePixelRatio||1;return isNaN(this.customPixelRatio)||(a=this.customPixelRatio),r<0&&(r=this.systemBandwidth,s=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==s&&(r=u*this.systemBandwidth+(1-u)*r,s=this.systemBandwidth),O0(this.playlists.main,r,parseInt(_o(this.tech_.el(),"width"),10)*a,parseInt(_o(this.tech_.el(),"height"),10)*a,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:$d,comparePlaylistResolution:function(u,r){let s,a;return u.attributes.RESOLUTION&&u.attributes.RESOLUTION.width&&(s=u.attributes.RESOLUTION.width),s=s||M().Number.MAX_VALUE,r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(a=r.attributes.RESOLUTION.width),a=a||M().Number.MAX_VALUE,s===a&&u.attributes.BANDWIDTH&&r.attributes.BANDWIDTH?u.attributes.BANDWIDTH-r.attributes.BANDWIDTH:s-a},xhr:ep()};Object.keys(Er).forEach(u=>{Object.defineProperty(Fn,u,{get:()=>(J.log.warn(`using Vhs.${u} is UNSAFE be sure you know what you are doing`),Er[u]),set(r){J.log.warn(`using Vhs.${u} is UNSAFE be sure you know what you are doing`),"number"!=typeof r||r<0?J.log.warn(`value of Vhs.${u} must be greater than or equal to 0`):Er[u]=r}})});const sy="videojs-vhs",Qd=function(u,r){const s=r.media();let a=-1;for(let c=0;c<u.length;c++)if(u[c].id===s.id){a=c;break}u.selectedIndex_=a,u.trigger({selectedIndex:a,type:"change"})};Fn.canPlaySource=function(){return J.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const _T=()=>{if(!M().localStorage)return null;const u=M().localStorage.getItem(sy);if(!u)return null;try{return JSON.parse(u)}catch{return null}},TT=(u,r)=>{u._requestCallbackSet||(u._requestCallbackSet=new Set),u._requestCallbackSet.add(r)},CT=(u,r)=>{u._responseCallbackSet||(u._responseCallbackSet=new Set),u._responseCallbackSet.add(r)},Hl=(u,r)=>{u._requestCallbackSet&&(u._requestCallbackSet.delete(r),u._requestCallbackSet.size||delete u._requestCallbackSet)},uy=(u,r)=>{u._responseCallbackSet&&(u._responseCallbackSet.delete(r),u._responseCallbackSet.size||delete u._responseCallbackSet)};Fn.supportsNativeHls=function(){if(!z()||!z().createElement)return!1;const u=z().createElement("video");return!!J.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(s){return/maybe|probably/i.test(u.canPlayType(s))})}(),Fn.supportsNativeDash=!!(z()&&z().createElement&&J.getTech("Html5").isSupported())&&/maybe|probably/i.test(z().createElement("video").canPlayType("application/dash+xml")),Fn.supportsTypeNatively=u=>"hls"===u?Fn.supportsNativeHls:"dash"===u&&Fn.supportsNativeDash,Fn.isSupported=function(){return J.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},Fn.xhr.onRequest=function(u){TT(Fn.xhr,u)},Fn.xhr.onResponse=function(u){CT(Fn.xhr,u)},Fn.xhr.offRequest=function(u){Hl(Fn.xhr,u)},Fn.xhr.offResponse=function(u){uy(Fn.xhr,u)};const Ep=J.getComponent("Component");class Jd extends Ep{constructor(r,s,a){if(super(s,a.vhs),"number"==typeof a.initialBandwidth&&(this.options_.bandwidth=a.initialBandwidth),this.logger_=en("VhsHandler"),s.options_&&s.options_.playerId){const c=J.getPlayer(s.options_.playerId);this.player_=c}if(this.tech_=s,this.source_=r,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&s.overrideNativeAudioTracks&&s.overrideNativeVideoTracks)s.overrideNativeAudioTracks(!0),s.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(s.featuresNativeVideoTracks||s.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(z(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],c=>{const h=z().fullscreenElement||z().webkitFullscreenElement||z().mozFullScreenElement||z().msFullscreenElement;h&&h.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(r={}){if(this.options_=tn(this.options_,r),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=60),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const a=_T();a&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Er.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Er.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(a=>{typeof this.source_[a]<"u"&&(this.options_[a]=this.source_[a])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const s=this.options_.customPixelRatio;"number"==typeof s&&s>=0&&(this.customPixelRatio=s)}setOptions(r={}){this.setOptions_(r)}src(r,s){if(!r)return;this.setOptions_(),this.options_.src=(u=>0===u.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(u.substring(u.indexOf(",")+1)):u)(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Fn,this.options_.sourceType=Br(s),this.options_.seekTo=h=>{this.tech_.setCurrentTime(h)},this.options_.player_=this.player_,this.playlistController_=new pT(this.options_);const a=tn({liveRangeSafeTimeDelta:qr},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new Yd(a),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const h=J.players[this.tech_.options_.playerId];let f=this.playlistController_.error;"object"!=typeof f||f.code?"string"==typeof f&&(f={message:f,code:3}):f.code=3,h.error(f)});const c=this.options_.bufferBasedABR?Fn.movingAverageBandwidthSelector(.55):Fn.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):c.bind(this),this.playlistController_.selectInitialPlaylist=Fn.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(h){this.playlistController_.selectPlaylist=h.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(h){this.playlistController_.mainSegmentLoader_.throughput.rate=h,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let h=this.playlistController_.mainSegmentLoader_.bandwidth;const f=M().navigator.connection||M().navigator.mozConnection||M().navigator.webkitConnection,y=1e7;if(this.options_.useNetworkInformationApi&&f){const T=1e3*f.downlink*1e3;h=T>=y&&h>=y?Math.max(h,T):T}return h},set(h){this.playlistController_.mainSegmentLoader_.bandwidth=h,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){let f;return f=this.throughput>0?1/this.throughput:0,Math.floor(1/(1/(this.bandwidth||1)+f))},set(){J.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>dr(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>dr(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&(u=>{if(!M().localStorage)return!1;let r=_T();r=r?tn(r,u):u;try{M().localStorage.setItem(sy,JSON.stringify(r))}catch{return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{!function(u){u.representations=()=>{const r=u.playlistController_.main(),s=Md(r)?u.playlistController_.getAudioTrackPlaylists_():r.playlists;return s?s.filter(a=>!Id(a)).map((a,c)=>new Xd(u,a,a.id)):[]}}(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=M().URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const r=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(({player:u,sourceKeySystems:r,audioMedia:s,mainPlaylists:a})=>{if(!u.eme.initializeMediaKeys)return Promise.resolve();const h=((u,r)=>u.reduce((s,a)=>{if(!a.contentProtection)return s;const c=r.reduce((h,f)=>{const y=a.contentProtection[f];return y&&y.pssh&&(h[f]={pssh:y.pssh}),h},{});return Object.keys(c).length&&s.push(c),s},[]))(s?a.concat([s]):a,Object.keys(r)),f=[],y=[];return h.forEach(T=>{y.push(new Promise((E,x)=>{u.tech_.one("keysessioncreated",E)})),f.push(new Promise((E,x)=>{u.eme.initializeMediaKeys({keySystems:T},P=>{P?x(P):E()})}))}),Promise.race([Promise.all(f),Promise.race(y)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:r&&r.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(s=>{this.logger_("error while creating EME key session",s),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const r=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=(({player:u,sourceKeySystems:r,media:s,audioMedia:a})=>{const c=((u,r,s)=>{if(!u)return u;let a={};r&&r.attributes&&r.attributes.CODECS&&(a=Rl(pe(r.attributes.CODECS))),s&&s.attributes&&s.attributes.CODECS&&(a.audio=s.attributes.CODECS);const c=Le(a.video),h=Le(a.audio),f={};for(const y in u)f[y]={},h&&(f[y].audioContentType=h),c&&(f[y].videoContentType=c),r.contentProtection&&r.contentProtection[y]&&r.contentProtection[y].pssh&&(f[y].pssh=r.contentProtection[y].pssh),"string"==typeof u[y]&&(f[y].url=u[y]);return tn(u,f)})(r,s,a);return!(!c||(u.currentSource().keySystems=c,c&&!u.eme&&(J.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))})({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:r&&r.media()});this.player_.tech_.on("keystatuschange",a=>{this.playlistController_.updatePlaylistByKeyStatus(a.keyId,a.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),s?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const r=J.players[this.tech_.options_.playerId];!r||!r.qualityLevels||this.qualityLevels_||(this.qualityLevels_=r.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{!function(u,r){r.representations().forEach(s=>{u.addQualityLevel(s)}),Qd(u,r.playlists)}(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{Qd(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":"3.13.2","mux.js":"7.0.3","mpd-parser":"1.3.0","m3u8-parser":"7.1.0","aes-decrypter":"4.0.1"}}version(){return this.constructor.version()}canChangeType(){return iT.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(r){this.playlistController_.setCurrentTime(r)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&M().URL.revokeObjectURL&&(M().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(r,s){return(({playlist:u,time:r,callback:s})=>{if(!s)throw new Error("getProgramTime: callback must be provided");if(!u||void 0===r)return s({message:"getProgramTime: playlist and time must be provided"});const a=((u,r)=>{if(!r||!r.segments||0===r.segments.length)return null;let a,s=0;for(let h=0;h<r.segments.length&&(a=r.segments[h],s=a.videoTimingInfo?a.videoTimingInfo.transmuxedPresentationEnd:s+a.duration,!(u<=s));h++);const c=r.segments[r.segments.length-1];if(c.videoTimingInfo&&c.videoTimingInfo.transmuxedPresentationEnd<u)return null;if(u>s){if(u>s+.25*c.duration)return null;a=c}return{segment:a,estimatedStart:a.videoTimingInfo?a.videoTimingInfo.transmuxedPresentationStart:s-a.duration,type:a.videoTimingInfo?"accurate":"estimate"}})(r,u);if(!a)return s({message:"valid programTime was not found"});if("estimate"===a.type)return s({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});const c={mediaSeconds:r},h=((u,r)=>{if(!r.dateTimeObject)return null;const h=u-(r.videoTimingInfo.transmuxedPresentationStart+r.videoTimingInfo.transmuxerPrependedSeconds);return new Date(r.dateTimeObject.getTime()+1e3*h)})(r,a.segment);return h&&(c.programDateTime=h.toISOString()),s(null,c)})({playlist:this.playlistController_.media(),time:r,callback:s})}seekToProgramTime(r,s,a=!0,c=2){return rp({programTime:r,playlist:this.playlistController_.media(),retryCount:c,pauseAfterSeek:a,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:s})}setupXhrHooks_(){this.xhr.onRequest=r=>{TT(this.xhr,r)},this.xhr.onResponse=r=>{CT(this.xhr,r)},this.xhr.offRequest=r=>{Hl(this.xhr,r)},this.xhr.offResponse=r=>{uy(this.xhr,r)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(a=>{this.playlistController_.on(a,c=>{this.player_.trigger(Je({},c))})}),["gapjumped","playedrangeschanged"].forEach(a=>{this.playbackWatcher_.on(a,c=>{this.player_.trigger(Je({},c))})})}}const Bs={name:"videojs-http-streaming",VERSION:"3.13.2",canHandleSource(u,r={}){const s=tn(J.options,r);return Bs.canPlayType(u.type,s)},handleSource(u,r,s={}){const a=tn(J.options,s);return r.vhs=new Jd(u,r,a),r.vhs.xhr=ep(),r.vhs.setupXhrHooks_(),r.vhs.src(u.src,u.type),r.vhs},canPlayType(u,r){const s=Br(u);if(!s)return"";const a=Bs.getOverrideNative(r);return!Fn.supportsTypeNatively(s)||a?"maybe":""},getOverrideNative(u={}){const{vhs:r={}}=u,s=!(J.browser.IS_ANY_SAFARI||J.browser.IS_IOS),{overrideNative:a=s}=r;return a}};Ue("avc1.4d400d,mp4a.40.2")&&J.getTech("Html5").registerSourceHandler(Bs,0),J.VhsHandler=Jd,J.VhsSourceHandler=Bs,J.Vhs=Fn,J.use||J.registerComponent("Vhs",Fn),J.options.vhs=J.options.vhs||{},(!J.getPlugin||!J.getPlugin("reloadSourceOnError"))&&J.registerPlugin("reloadSourceOnError",function(u){pa(this,u)})},795:function(pt,tt,Fe){var fe,M,z;z=function(re){"use strict";typeof window<"u"&&(window.videojs_hotkeys={version:"0.2.28"}),(re.registerPlugin||re.plugin)("hotkeys",function(ae){var ce=this,Re=ce.el(),Ge=document,lt=(ae=(re.mergeOptions||re.util.mergeOptions)({volumeStep:.1,seekStep:5,enableMute:!0,enableVolumeScroll:!0,enableHoverScroll:!1,enableFullscreen:!0,enableNumbers:!0,enableJogStyle:!1,alwaysCaptureHotkeys:!1,captureDocumentHotkeys:!1,documentHotkeysFocusElementFilter:function(){return!1},enableModifiersForNumbers:!0,enableInactiveFocus:!0,skipInitialFocus:!1,playPauseKey:function qt(Xe){return 32===Xe.which||179===Xe.which},rewindKey:function Le(Xe){return 37===Xe.which||177===Xe.which},forwardKey:function Ue(Xe){return 39===Xe.which||176===Xe.which},volumeUpKey:function In(Xe){return 38===Xe.which},volumeDownKey:function ft(Xe){return 40===Xe.which},muteKey:function gn(Xe){return 77===Xe.which},fullscreenKey:function sr(Xe){return 70===Xe.which},customKeys:{}},ae||{})).volumeStep,rt=ae.seekStep,St=ae.enableMute,Be=ae.enableVolumeScroll,We=ae.enableHoverScroll,at=ae.enableFullscreen,gt=ae.enableNumbers,N=ae.enableJogStyle,B=ae.alwaysCaptureHotkeys,Z=ae.captureDocumentHotkeys,be=ae.documentHotkeysFocusElementFilter,xe=ae.enableModifiersForNumbers,Ne=ae.enableInactiveFocus,ke=ae.skipInitialFocus,Se=re.VERSION;Re.hasAttribute("tabIndex")||Re.setAttribute("tabIndex","-1"),Re.style.outline="none",(B||!ce.autoplay())&&(ke||ce.one("play",function(){Re.focus()})),Ne&&ce.on("userinactive",function(){var Xe=function(){clearTimeout(vt)},vt=setTimeout(function(){ce.off("useractive",Xe);var jt=Ge.activeElement,Wt=Re.querySelector(".vjs-control-bar");jt&&jt.parentElement==Wt&&Re.focus()},10);ce.one("useractive",Xe)}),ce.on("play",function(){var Xe=Re.querySelector(".iframeblocker");Xe&&""===Xe.style.display&&(Xe.style.display="block",Xe.style.bottom="39px")});var he=function(vt){var Wt,zn,jt=vt.which,Ke=vt.preventDefault.bind(vt),Ur=ce.duration();if(ce.controls()){var Si=Ge.activeElement;if(B||Z&&be(Si)||Si==Re||Si==Re.querySelector(".vjs-tech")||Si==Re.querySelector(".vjs-control-bar")||Si==Re.querySelector(".iframeblocker"))switch(Pt(vt,ce)){case 1:Ke(),(B||Z)&&vt.stopPropagation(),ce.paused()?Br(ce.play()):ce.pause();break;case 2:Wt=!ce.paused(),Ke(),Wt&&ce.pause(),(zn=ce.currentTime()-gr(vt))<=0&&(zn=0),ce.currentTime(zn),Wt&&Br(ce.play());break;case 3:Wt=!ce.paused(),Ke(),Wt&&ce.pause(),(zn=ce.currentTime()+gr(vt))>=Ur&&(zn=Wt?Ur-.001:Ur),ce.currentTime(zn),Wt&&Br(ce.play());break;case 5:Ke(),N?(zn=ce.currentTime()-1,ce.currentTime()<=1&&(zn=0),ce.currentTime(zn)):ce.volume(ce.volume()-lt);break;case 4:Ke(),N?((zn=ce.currentTime()+1)>=Ur&&(zn=Ur),ce.currentTime(zn)):ce.volume(ce.volume()+lt);break;case 6:St&&ce.muted(!ce.muted());break;case 7:at&&(ce.isFullscreen()?ce.exitFullscreen():ce.requestFullscreen());break;default:if((jt>47&&jt<59||jt>95&&jt<106)&&(xe||!(vt.metaKey||vt.ctrlKey||vt.altKey))&&gt){var wt=48;jt>95&&(wt=96);var Zn=jt-wt;Ke(),ce.currentTime(ce.duration()*Zn*.1)}for(var mr in ae.customKeys){var yr=ae.customKeys[mr];yr&&yr.key&&yr.handler&&yr.key(vt)&&(Ke(),yr.handler(ce,ae,vt))}}}},pe=!1,Ie=Re.querySelector(".vjs-volume-menu-button")||Re.querySelector(".vjs-volume-panel");null!=Ie&&(Ie.onmouseover=function(){pe=!0},Ie.onmouseout=function(){pe=!1});var $e=function(vt){if(We)var jt=0;else jt=Ge.activeElement;if(ce.controls()&&(B||jt==Re||jt==Re.querySelector(".vjs-tech")||jt==Re.querySelector(".iframeblocker")||jt==Re.querySelector(".vjs-control-bar")||pe)&&Be){vt=window.event||vt;var Wt=Math.max(-1,Math.min(1,vt.wheelDelta||-vt.detail));vt.preventDefault(),1==Wt?ce.volume(ce.volume()+lt):-1==Wt&&ce.volume(ce.volume()-lt)}},Pt=function(vt,jt){return ae.playPauseKey(vt,jt)?1:ae.rewindKey(vt,jt)?2:ae.forwardKey(vt,jt)?3:ae.volumeUpKey(vt,jt)?4:ae.volumeDownKey(vt,jt)?5:ae.muteKey(vt,jt)?6:ae.fullscreenKey(vt,jt)?7:void 0};function gr(Xe){return"function"==typeof rt?rt(Xe):rt}function Br(Xe){null!=Xe&&"function"==typeof Xe.then&&Xe.then(null,function(vt){})}if(Z){var Ss=function(Xe){he(Xe)};document.addEventListener("keydown",Ss),this.dispose=function(){document.removeEventListener("keydown",Ss)}}else ce.on("keydown",he);return ce.on("dblclick",function(vt){if(null!=Se&&Se<="7.1.0"&&ce.controls()){var jt=vt.relatedTarget||vt.toElement||Ge.activeElement;(jt==Re||jt==Re.querySelector(".vjs-tech")||jt==Re.querySelector(".iframeblocker"))&&at&&(ce.isFullscreen()?ce.exitFullscreen():ce.requestFullscreen())}}),ce.on("mousewheel",$e),ce.on("DOMMouseScroll",$e),this})},typeof window<"u"&&window.videojs?z(window.videojs):(fe=[Fe(858)],void 0!==(M=function(ae){return z(ae.default||ae)}.apply(tt,fe))&&(pt.exports=M))},506:(pt,tt,Fe)=>{var fe=Fe(382),M=pt.exports={WebVTT:Fe(149),VTTCue:Fe(472),VTTRegion:Fe(880)};fe.vttjs=M,fe.WebVTT=M.WebVTT;var re=M.VTTCue,z=M.VTTRegion,ie=fe.VTTCue,ae=fe.VTTRegion;M.shim=function(){fe.VTTCue=re,fe.VTTRegion=z},M.restore=function(){fe.VTTCue=ie,fe.VTTRegion=ae},fe.VTTCue||M.shim()},149:(pt,tt,Fe)=>{var fe=Fe(598),M=Object.create||function(){function N(){}return function(B){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return N.prototype=B,new N}}();function re(N,B){this.name="ParsingError",this.code=N.code,this.message=B||N.message}function z(N){function B(be,xe,Ne,ke){return 3600*(0|be)+60*(0|xe)+(0|Ne)+(0|ke)/1e3}var Z=N.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return Z?Z[3]?B(Z[1],Z[2],Z[3].replace(":",""),Z[4]):Z[1]>59?B(Z[1],Z[2],0,Z[4]):B(0,Z[1],Z[2],Z[4]):null}function ie(){this.values=M(null)}function ae(N,B,Z,be){var xe=be?N.split(be):[N];for(var Ne in xe)if("string"==typeof xe[Ne]){var ke=xe[Ne].split(Z);2===ke.length&&B(ke[0].trim(),ke[1].trim())}}function ce(N,B,Z){var be=N;function xe(){var Se=z(N);if(null===Se)throw new re(re.Errors.BadTimeStamp,"Malformed timestamp: "+be);return N=N.replace(/^[^\sa-zA-Z-]+/,""),Se}function ke(){N=N.replace(/^\s+/,"")}if(ke(),B.startTime=xe(),ke(),"--\x3e"!==N.substr(0,3))throw new re(re.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+be);N=N.substr(3),ke(),B.endTime=xe(),ke(),function Ne(Se,he){var Ce=new ie;ae(Se,function(pe,Ie){switch(pe){case"region":for(var $e=Z.length-1;$e>=0;$e--)if(Z[$e].id===Ie){Ce.set(pe,Z[$e].region);break}break;case"vertical":Ce.alt(pe,Ie,["rl","lr"]);break;case"line":var Pt=Ie.split(","),qt=Pt[0];Ce.integer(pe,qt),Ce.percent(pe,qt)&&Ce.set("snapToLines",!1),Ce.alt(pe,qt,["auto"]),2===Pt.length&&Ce.alt("lineAlign",Pt[1],["start","center","end"]);break;case"position":Pt=Ie.split(","),Ce.percent(pe,Pt[0]),2===Pt.length&&Ce.alt("positionAlign",Pt[1],["start","center","end"]);break;case"size":Ce.percent(pe,Ie);break;case"align":Ce.alt(pe,Ie,["start","center","end","left","right"])}},/:/,/\s/),he.region=Ce.get("region",null),he.vertical=Ce.get("vertical","");try{he.line=Ce.get("line","auto")}catch{}he.lineAlign=Ce.get("lineAlign","start"),he.snapToLines=Ce.get("snapToLines",!0),he.size=Ce.get("size",100);try{he.align=Ce.get("align","center")}catch{he.align=Ce.get("align","middle")}try{he.position=Ce.get("position","auto")}catch{he.position=Ce.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},he.align)}he.positionAlign=Ce.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},he.align)}(N,B)}(re.prototype=M(Error.prototype)).constructor=re,re.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},ie.prototype={set:function(N,B){!this.get(N)&&""!==B&&(this.values[N]=B)},get:function(N,B,Z){return Z?this.has(N)?this.values[N]:B[Z]:this.has(N)?this.values[N]:B},has:function(N){return N in this.values},alt:function(N,B,Z){for(var be=0;be<Z.length;++be)if(B===Z[be]){this.set(N,B);break}},integer:function(N,B){/^-?\d+$/.test(B)&&this.set(N,parseInt(B,10))},percent:function(N,B){return!!(B.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(B=parseFloat(B),B>=0&&B<=100))&&(this.set(N,B),!0)}};var Re=fe.createElement&&fe.createElement("textarea"),Ge={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Te={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Je={v:"title",lang:"lang"},kt={rt:"ruby"};function Gt(N,B){function Z(){if(!B)return null;var Le=B.match(/^([^<]*)(<[^>]*>?)?/);return function qt(Ue){return B=B.substr(Ue.length),Ue}(Le[1]?Le[1]:Le[2])}function be(qt){return Re.innerHTML=qt,qt=Re.textContent,Re.textContent="",qt}function Ne(qt,Le){var Ue=Ge[qt];if(!Ue)return null;var In=N.document.createElement(Ue),ft=Je[qt];return ft&&Le&&(In[ft]=Le.trim()),In}for(var he,ke=N.document.createElement("div"),Se=ke,Ce=[];null!==(he=Z());)if("<"!==he[0])Se.appendChild(N.document.createTextNode(be(he)));else{if("/"===he[1]){Ce.length&&Ce[Ce.length-1]===he.substr(2).replace(">","")&&(Ce.pop(),Se=Se.parentNode);continue}var Ie,pe=z(he.substr(1,he.length-2));if(pe){Ie=N.document.createProcessingInstruction("timestamp",pe),Se.appendChild(Ie);continue}var $e=he.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!$e||!(Ie=Ne($e[1],$e[3]))||kt[(Le=Ie).localName]&&kt[Le.localName]!==Se.localName)continue;if($e[2]){var Pt=$e[2].split(".");Pt.forEach(function(qt){var Le=/^bg_/.test(qt),Ue=Le?qt.slice(3):qt;Te.hasOwnProperty(Ue)&&(Ie.style[Le?"background-color":"color"]=Te[Ue])}),Ie.className=Pt.join(" ")}Ce.push($e[1]),Se.appendChild(Ie),Se=Ie}var Le;return ke}var me=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Ut(N){for(var B=0;B<me.length;B++){var Z=me[B];if(N>=Z[0]&&N<=Z[1])return!0}return!1}function dt(N){var B=[],Z="";if(!N||!N.childNodes)return"ltr";function xe(Se,he){for(var Ce=he.childNodes.length-1;Ce>=0;Ce--)Se.push(he.childNodes[Ce])}function Ne(Se){if(!Se||!Se.length)return null;var he=Se.pop(),Ce=he.textContent||he.innerText;if(Ce){var pe=Ce.match(/^.*(\n|\r)/);return pe?(Se.length=0,pe[0]):Ce}return"ruby"===he.tagName?Ne(Se):he.childNodes?(xe(Se,he),Ne(Se)):void 0}for(xe(B,N);Z=Ne(B);)for(var ke=0;ke<Z.length;ke++)if(Ut(Z.charCodeAt(ke)))return"rtl";return"ltr"}function Me(){}function lt(N,B,Z){Me.call(this),this.cue=B,this.cueDiv=Gt(N,B.text);var be={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===B.vertical?"horizontal-tb":"lr"===B.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(be,this.cueDiv),this.div=N.document.createElement("div"),be={direction:dt(this.cueDiv),writingMode:""===B.vertical?"horizontal-tb":"lr"===B.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===B.align?"center":B.align,font:Z.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(be),this.div.appendChild(this.cueDiv);var xe=0;switch(B.positionAlign){case"start":case"line-left":xe=B.position;break;case"center":xe=B.position-B.size/2;break;case"end":case"line-right":xe=B.position-B.size}this.applyStyles(""===B.vertical?{left:this.formatStyle(xe,"%"),width:this.formatStyle(B.size,"%")}:{top:this.formatStyle(xe,"%"),height:this.formatStyle(B.size,"%")}),this.move=function(Ne){this.applyStyles({top:this.formatStyle(Ne.top,"px"),bottom:this.formatStyle(Ne.bottom,"px"),left:this.formatStyle(Ne.left,"px"),right:this.formatStyle(Ne.right,"px"),height:this.formatStyle(Ne.height,"px"),width:this.formatStyle(Ne.width,"px")})}}function rt(N){var B,Z,be,xe;if(N.div){Z=N.div.offsetHeight,be=N.div.offsetWidth,xe=N.div.offsetTop;var Ne=(Ne=N.div.childNodes)&&(Ne=Ne[0])&&Ne.getClientRects&&Ne.getClientRects();N=N.div.getBoundingClientRect(),B=Ne?Math.max(Ne[0]&&Ne[0].height||0,N.height/Ne.length):0}this.left=N.left,this.right=N.right,this.top=N.top||xe,this.height=N.height||Z,this.bottom=N.bottom||xe+(N.height||Z),this.width=N.width||be,this.lineHeight=void 0!==B?B:N.lineHeight}function St(N,B,Z,be){var Ne=new rt(B),ke=B.cue,Se=function Nt(N){if("number"==typeof N.line&&(N.snapToLines||N.line>=0&&N.line<=100))return N.line;if(!N.track||!N.track.textTrackList||!N.track.textTrackList.mediaElement)return-1;for(var B=N.track,Z=B.textTrackList,be=0,xe=0;xe<Z.length&&Z[xe]!==B;xe++)"showing"===Z[xe].mode&&be++;return-1*++be}(ke),he=[];if(ke.snapToLines){var Ce;switch(ke.vertical){case"":he=["+y","-y"],Ce="height";break;case"rl":he=["+x","-x"],Ce="width";break;case"lr":he=["-x","+x"],Ce="width"}var pe=Ne.lineHeight,Ie=pe*Math.round(Se),$e=Z[Ce]+pe,Pt=he[0];Math.abs(Ie)>$e&&(Ie=Ie<0?-1:1,Ie*=Math.ceil($e/pe)*pe),Se<0&&(Ie+=""===ke.vertical?Z.height:Z.width,he=he.reverse()),Ne.move(Pt,Ie)}else{var qt=Ne.lineHeight/Z.height*100;switch(ke.lineAlign){case"center":Se-=qt/2;break;case"end":Se-=qt}switch(ke.vertical){case"":B.applyStyles({top:B.formatStyle(Se,"%")});break;case"rl":B.applyStyles({left:B.formatStyle(Se,"%")});break;case"lr":B.applyStyles({right:B.formatStyle(Se,"%")})}he=["+y","-x","+x","-y"],Ne=new rt(B)}var Le=function xe(Ue,In){for(var ft,gn=new rt(Ue),sr=1,gr=0;gr<In.length;gr++){for(;Ue.overlapsOppositeAxis(Z,In[gr])||Ue.within(Z)&&Ue.overlapsAny(be);)Ue.move(In[gr]);if(Ue.within(Z))return Ue;var Br=Ue.intersectPercentage(Z);sr>Br&&(ft=new rt(Ue),sr=Br),Ue=new rt(gn)}return ft||gn}(Ne,he);B.move(Le.toCSSCompatValues(Z))}function Be(){}Me.prototype.applyStyles=function(N,B){for(var Z in B=B||this.div,N)N.hasOwnProperty(Z)&&(B.style[Z]=N[Z])},Me.prototype.formatStyle=function(N,B){return 0===N?0:N+B},(lt.prototype=M(Me.prototype)).constructor=lt,rt.prototype.move=function(N,B){switch(B=void 0!==B?B:this.lineHeight,N){case"+x":this.left+=B,this.right+=B;break;case"-x":this.left-=B,this.right-=B;break;case"+y":this.top+=B,this.bottom+=B;break;case"-y":this.top-=B,this.bottom-=B}},rt.prototype.overlaps=function(N){return this.left<N.right&&this.right>N.left&&this.top<N.bottom&&this.bottom>N.top},rt.prototype.overlapsAny=function(N){for(var B=0;B<N.length;B++)if(this.overlaps(N[B]))return!0;return!1},rt.prototype.within=function(N){return this.top>=N.top&&this.bottom<=N.bottom&&this.left>=N.left&&this.right<=N.right},rt.prototype.overlapsOppositeAxis=function(N,B){switch(B){case"+x":return this.left<N.left;case"-x":return this.right>N.right;case"+y":return this.top<N.top;case"-y":return this.bottom>N.bottom}},rt.prototype.intersectPercentage=function(N){return Math.max(0,Math.min(this.right,N.right)-Math.max(this.left,N.left))*Math.max(0,Math.min(this.bottom,N.bottom)-Math.max(this.top,N.top))/(this.height*this.width)},rt.prototype.toCSSCompatValues=function(N){return{top:this.top-N.top,bottom:N.bottom-this.bottom,left:this.left-N.left,right:N.right-this.right,height:this.height,width:this.width}},rt.getSimpleBoxPosition=function(N){var B=N.div?N.div.offsetHeight:N.tagName?N.offsetHeight:0,Z=N.div?N.div.offsetWidth:N.tagName?N.offsetWidth:0,be=N.div?N.div.offsetTop:N.tagName?N.offsetTop:0;return{left:(N=N.div?N.div.getBoundingClientRect():N.tagName?N.getBoundingClientRect():N).left,right:N.right,top:N.top||be,height:N.height||B,bottom:N.bottom||be+(N.height||B),width:N.width||Z}},Be.StringDecoder=function(){return{decode:function(N){if(!N)return"";if("string"!=typeof N)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(N))}}},Be.convertCueToDOMTree=function(N,B){return N&&B?Gt(N,B):null},Be.processCues=function(N,B,Z){if(!N||!B||!Z)return null;for(;Z.firstChild;)Z.removeChild(Z.firstChild);var be=N.document.createElement("div");if(be.style.position="absolute",be.style.left="0",be.style.right="0",be.style.top="0",be.style.bottom="0",be.style.margin="1.5%",Z.appendChild(be),function xe(pe){for(var Ie=0;Ie<pe.length;Ie++)if(pe[Ie].hasBeenReset||!pe[Ie].displayState)return!0;return!1}(B)){var ke=[],Se=rt.getSimpleBoxPosition(be),Ce={font:Math.round(.05*Se.height*100)/100+"px sans-serif"};!function(){for(var pe,Ie,$e=0;$e<B.length;$e++)pe=new lt(N,Ie=B[$e],Ce),be.appendChild(pe.div),St(0,pe,Se,ke),Ie.displayState=pe.div,ke.push(rt.getSimpleBoxPosition(pe))}()}else for(var Ne=0;Ne<B.length;Ne++)be.appendChild(B[Ne].displayState)},(Be.Parser=function(N,B,Z){Z||(Z=B,B={}),B||(B={}),this.window=N,this.vttjs=B,this.state="INITIAL",this.buffer="",this.decoder=Z||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(N){if(!(N instanceof re))throw N;this.onparsingerror&&this.onparsingerror(N)},parse:function(N){var pe,B=this;function Z(){for(var pe=B.buffer,Ie=0;Ie<pe.length&&"\r"!==pe[Ie]&&"\n"!==pe[Ie];)++Ie;var $e=pe.substr(0,Ie);return"\r"===pe[Ie]&&++Ie,"\n"===pe[Ie]&&++Ie,B.buffer=pe.substr(Ie),$e}N&&(B.buffer+=B.decoder.decode(N,{stream:!0}));try{var ke;if("INITIAL"===B.state){if(!/\r\n|\n/.test(B.buffer))return this;var Se=(ke=Z()).match(/^WEBVTT([ \t].*)?$/);if(!Se||!Se[0])throw new re(re.Errors.BadSignature);B.state="HEADER"}for(var he=!1;B.buffer;){if(!/\r\n|\n/.test(B.buffer))return this;switch(he?he=!1:ke=Z(),B.state){case"HEADER":/:/.test(ke)?(pe=ke).match(/X-TIMESTAMP-MAP/)?ae(pe,function(Ie,$e){"X-TIMESTAMP-MAP"===Ie&&function xe(pe){var Ie=new ie;ae(pe,function($e,Pt){switch($e){case"MPEGT":Ie.integer($e+"S",Pt);break;case"LOCA":Ie.set($e+"L",z(Pt))}},/[^\d]:/,/,/),B.ontimestampmap&&B.ontimestampmap({MPEGTS:Ie.get("MPEGTS"),LOCAL:Ie.get("LOCAL")})}($e)},/=/):ae(pe,function(Ie,$e){"Region"===Ie&&function be(pe){var Ie=new ie;if(ae(pe,function(Pt,qt){switch(Pt){case"id":Ie.set(Pt,qt);break;case"width":Ie.percent(Pt,qt);break;case"lines":Ie.integer(Pt,qt);break;case"regionanchor":case"viewportanchor":var Le=qt.split(",");if(2!==Le.length)break;var Ue=new ie;if(Ue.percent("x",Le[0]),Ue.percent("y",Le[1]),!Ue.has("x")||!Ue.has("y"))break;Ie.set(Pt+"X",Ue.get("x")),Ie.set(Pt+"Y",Ue.get("y"));break;case"scroll":Ie.alt(Pt,qt,["up"])}},/=/,/\s/),Ie.has("id")){var $e=new(B.vttjs.VTTRegion||B.window.VTTRegion);$e.width=Ie.get("width",100),$e.lines=Ie.get("lines",3),$e.regionAnchorX=Ie.get("regionanchorX",0),$e.regionAnchorY=Ie.get("regionanchorY",100),$e.viewportAnchorX=Ie.get("viewportanchorX",0),$e.viewportAnchorY=Ie.get("viewportanchorY",100),$e.scroll=Ie.get("scroll",""),B.onregion&&B.onregion($e),B.regionList.push({id:Ie.get("id"),region:$e})}}($e)},/:/):ke||(B.state="ID");continue;case"NOTE":ke||(B.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(ke)){B.state="NOTE";break}if(!ke)continue;B.cue=new(B.vttjs.VTTCue||B.window.VTTCue)(0,0,"");try{B.cue.align="center"}catch{B.cue.align="middle"}if(B.state="CUE",-1===ke.indexOf("--\x3e")){B.cue.id=ke;continue}case"CUE":try{ce(ke,B.cue,B.regionList)}catch(pe){B.reportOrThrowError(pe),B.cue=null,B.state="BADCUE";continue}B.state="CUETEXT";continue;case"CUETEXT":var Ce=-1!==ke.indexOf("--\x3e");if(!ke||Ce&&(he=!0)){B.oncue&&B.oncue(B.cue),B.cue=null,B.state="ID";continue}B.cue.text&&(B.cue.text+="\n"),B.cue.text+=ke.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":ke||(B.state="ID");continue}}}catch(pe){B.reportOrThrowError(pe),"CUETEXT"===B.state&&B.cue&&B.oncue&&B.oncue(B.cue),B.cue=null,B.state="INITIAL"===B.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var N=this;try{if(N.buffer+=N.decoder.decode(),(N.cue||"HEADER"===N.state)&&(N.buffer+="\n\n",N.parse()),"INITIAL"===N.state)throw new re(re.Errors.BadSignature)}catch(B){N.reportOrThrowError(B)}return N.onflush&&N.onflush(),this}},pt.exports=Be},472:pt=>{var Fe={"":1,lr:1,rl:1},fe={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function re(ie){return"string"==typeof ie&&!!fe[ie.toLowerCase()]&&ie.toLowerCase()}function z(ie,ae,ce){this.hasBeenReset=!1;var Re="",Ge=!1,Te=ie,Je=ae,kt=ce,Gt=null,me="",Ut=!0,dt="auto",Nt="start",Me="auto",lt="auto",rt=100,St="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return Re},set:function(Be){Re=""+Be}},pauseOnExit:{enumerable:!0,get:function(){return Ge},set:function(Be){Ge=!!Be}},startTime:{enumerable:!0,get:function(){return Te},set:function(Be){if("number"!=typeof Be)throw new TypeError("Start time must be set to a number.");Te=Be,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return Je},set:function(Be){if("number"!=typeof Be)throw new TypeError("End time must be set to a number.");Je=Be,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return kt},set:function(Be){kt=""+Be,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return Gt},set:function(Be){Gt=Be,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return me},set:function(Be){var We=function M(ie){return"string"==typeof ie&&!!Fe[ie.toLowerCase()]&&ie.toLowerCase()}(Be);if(!1===We)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");me=We,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return Ut},set:function(Be){Ut=!!Be,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return dt},set:function(Be){if("number"!=typeof Be&&"auto"!==Be)throw new SyntaxError("Line: an invalid number or illegal string was specified.");dt=Be,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return Nt},set:function(Be){var We=re(Be);We?(Nt=We,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return Me},set:function(Be){if(Be<0||Be>100)throw new Error("Position must be between 0 and 100.");Me=Be,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return lt},set:function(Be){var We=re(Be);We?(lt=We,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return rt},set:function(Be){if(Be<0||Be>100)throw new Error("Size must be between 0 and 100.");rt=Be,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return St},set:function(Be){var We=re(Be);if(!We)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");St=We,this.hasBeenReset=!0}}}),this.displayState=void 0}z.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},pt.exports=z},880:pt=>{var tt={"":!0,up:!0};function fe(re){return"number"==typeof re&&re>=0&&re<=100}pt.exports=function M(){var re=100,z=3,ie=0,ae=100,ce=0,Re=100,Ge="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return re},set:function(Te){if(!fe(Te))throw new Error("Width must be between 0 and 100.");re=Te}},lines:{enumerable:!0,get:function(){return z},set:function(Te){if("number"!=typeof Te)throw new TypeError("Lines must be set to a number.");z=Te}},regionAnchorY:{enumerable:!0,get:function(){return ae},set:function(Te){if(!fe(Te))throw new Error("RegionAnchorX must be between 0 and 100.");ae=Te}},regionAnchorX:{enumerable:!0,get:function(){return ie},set:function(Te){if(!fe(Te))throw new Error("RegionAnchorY must be between 0 and 100.");ie=Te}},viewportAnchorY:{enumerable:!0,get:function(){return Re},set:function(Te){if(!fe(Te))throw new Error("ViewportAnchorY must be between 0 and 100.");Re=Te}},viewportAnchorX:{enumerable:!0,get:function(){return ce},set:function(Te){if(!fe(Te))throw new Error("ViewportAnchorX must be between 0 and 100.");ce=Te}},scroll:{enumerable:!0,get:function(){return Ge},set:function(Te){var Je=function Fe(re){return"string"==typeof re&&!!tt[re.toLowerCase()]&&re.toLowerCase()}(Te);!1===Je?console.warn("Scroll: an invalid or illegal string was specified."):Ge=Je}}})}},893:()=>{},434:pt=>{function tt(){return pt.exports=tt=Object.assign?Object.assign.bind():function(Fe){for(var fe=1;fe<arguments.length;fe++){var M=arguments[fe];for(var re in M)Object.prototype.hasOwnProperty.call(M,re)&&(Fe[re]=M[re])}return Fe},pt.exports.__esModule=!0,pt.exports.default=pt.exports,tt.apply(this,arguments)}pt.exports=tt,pt.exports.__esModule=!0,pt.exports.default=pt.exports}},pt=>{pt(pt.s=3)}]);